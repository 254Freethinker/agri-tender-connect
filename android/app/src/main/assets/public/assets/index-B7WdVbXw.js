const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-SgBgPQKh.js","assets/vendor-CwJML4-b.css","assets/NetworkingPage-DxE9_2qx.js"])))=>i.map(i=>d[i]);
var vn=Object.defineProperty;var yn=(s,t,a)=>t in s?vn(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var ye=(s,t,a)=>yn(s,typeof t!="symbol"?t+"":t,a);import{r as l,j as e,t as Nn,c as bn,a as $s,S as ur,b as wn,z as ce,u as Ne,R as xr,I as hr,F as pr,d as gr,C as ba,e as jr,P as Cn,f as fr,g as vr,h as yr,i as Nr,k as qe,l as br,n as kn,L as wr,o as Cr,p as Sn,T as _n,q as pa,M as An,s as kr,v as Sr,w as _r,x as zt,y as Ar,V as Pr,A as Tr,B as Pn,D as Tn,E as bs,G as Oe,H as V,J as je,U as ee,K as ne,N as Ke,O as fe,Q as xt,W as Z,X as ve,Y as Ks,Z as ot,_ as Dr,$ as Vs,a0 as Mt,a1 as wa,a2 as De,a3 as cs,a4 as Mr,a5 as Fr,a6 as Er,a7 as Dn,a8 as Kt,a9 as Ot,aa as Ir,ab as Ue,ac as Bt,ad as Ut,ae as Ca,af as Lr,ag as qr,ah as Rr,ai as oe,aj as dt,ak as Ft,al as Et,am as de,an as Je,ao as zr,ap as Ze,aq as $e,ar as $t,as as It,at as Mn,au as ka,av as Fn,aw as Kr,ax as En,ay as In,az as Ln,aA as qn,aB as Hs,aC as Le,aD as Lt,aE as Gs,aF as Ds,aG as Vt,aH as Ht,aI as Or,aJ as Ye,aK as os,aL as ae,aM as Br,aN as Rn,aO as Es,aP as Ie,aQ as Ur,aR as he,aS as $r,aT as zn,aU as Kn,aV as Vr,aW as On,aX as Hr,aY as Bn,aZ as Gr,a_ as Un,a$ as Wr,b0 as $n,b1 as Yr,b2 as Vn,b3 as Qr,b4 as Jr,b5 as Hn,b6 as Gn,b7 as Zr,b8 as Wn,b9 as Yn,ba as ke,bb as ds,bc as ys,bd as Qn,be as ts,bf as Ms,bg as Jn,bh as Os,bi as Zn,bj as Xr,bk as Oa,bl as Bs,bm as Be,bn as Xn,bo as el,bp as Sa,bq as ws,br as Ba,bs as ga,bt as Ns,bu as sl,bv as tl,bw as al,bx as ei,by as rl,bz as il,bA as nl,bB as Re,bC as Ws,bD as as,bE as rs,bF as is,bG as ze,bH as Fs,bI as Qe,bJ as Gt,bK as Wt,bL as ht,bM as Yt,bN as ls,bO as _a,bP as si,bQ as pt,bR as ti,bS as ai,bT as et,bU as st,bV as mt,bW as ri,bX as ll,bY as cl,bZ as ol,b_ as ii,b$ as dl,c0 as nt,c1 as ml,c2 as ul,c3 as xl,c4 as hl,c5 as Ua,c6 as At,c7 as pl,c8 as gl,c9 as ni,ca as li,cb as ci,cc as oi,cd as di,ce as mi,cf as jl,cg as fl,ch as vl,ci as yl,cj as qt,ck as gt,cl as ui,cm as Nl,cn as bl,co as wl,cp as Cl,cq as kl,cr as xi,cs as Sl,ct as _l,cu as Al,cv as js,cw as Pl,cx as hi,cy as Tl,cz as Dl,cA as Ml,cB as Fl,cC as Xt,cD as El,cE as Zs,cF as Il,cG as ea,cH as sa,cI as Ll,cJ as ql,cK as Rl,cL as zl,cM as wt,cN as Kl,cO as zs,cP as Ol,cQ as Aa,cR as Rt,cS as Us,cT as Bl,cU as Ul,cV as $a,cW as $l,cX as pi,cY as Vl,cZ as tt,c_ as Hl,c$ as Gl,d0 as gi,d1 as ji,d2 as Wl,d3 as Yl,d4 as Ql,d5 as Jl,d6 as Zl,d7 as Xl,d8 as _s,d9 as ec,da as sc,db as tc,dc as ac,dd as rc,de as fi,df as ic,dg as Va,dh as nc,di as lc,dj as cc,dk as oc,dl as dc,dm as mc,dn as uc,dp as xc,dq as hc,dr as $,ds as pc,dt as gc}from"./vendor-SgBgPQKh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function a(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=a(i);fetch(i.href,c)}})();const jc={theme:"system",setTheme:()=>null},vi=l.createContext(jc);function fc({children:s,defaultTheme:t="system",storageKey:a="agriconnect-ui-theme",...r}){const[i,c]=l.useState(()=>typeof window<"u"&&localStorage.getItem(a)||t);l.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),i==="system"){const h=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(h);return}o.classList.add(i)},[i]);const n={theme:i,setTheme:o=>{typeof window<"u"&&localStorage.setItem(a,o),c(o)}};return e.jsx(vi.Provider,{...r,value:n,children:s})}const vc=()=>{const s=l.useContext(vi);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s};function z(...s){return Nn(bn(s))}const ut=$s("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=l.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,...i},c)=>{const n=r?ur:"button";return e.jsx(n,{className:z(ut({variant:t,size:a,className:s})),ref:c,...i})});N.displayName="Button";const w=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));w.displayName="Card";const k=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("flex flex-col space-y-1.5 p-6",s),...t}));k.displayName="CardHeader";const S=l.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:z("text-2xl font-semibold leading-none tracking-tight",s),...t}));S.displayName="CardTitle";const O=l.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:z("text-sm text-muted-foreground",s),...t}));O.displayName="CardDescription";const C=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("p-6 pt-0",s),...t}));C.displayName="CardContent";const re=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("flex items-center p-6 pt-0",s),...t}));re.displayName="CardFooter";const yc="https://xgtmpfginlxrntixpqim.supabase.co",Nc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhndG1wZmdpbmx4cm50aXhwcWltIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NzYzNDMsImV4cCI6MjA3MDA1MjM0M30.UityH607C-tazH7bvhS5G5CJaO2u7OhjIkoFQ6kPF10",F=wn(yc,Nc),bc=Object.freeze(Object.defineProperty({__proto__:null,supabase:F},Symbol.toStringTag,{value:"Module"})),Ct=5,wc=15,Cc=5;class Ha{static async checkRateLimit(t){try{const a=new Date(Date.now()-Cc*60*1e3),{data:r}=await F.from("auth_rate_limits").select("*").eq("user_identifier",t).gte("last_attempt",a.toISOString()).single();if(!r)return{allowed:!0,attemptsRemaining:Ct-1};if(r.blocked_until&&new Date(r.blocked_until)>new Date)return{allowed:!1,attemptsRemaining:0,blockedUntil:new Date(r.blocked_until)};if(r.attempt_count>=Ct){const i=new Date(Date.now()+wc*60*1e3);return await F.from("auth_rate_limits").update({blocked_until:i.toISOString(),last_attempt:new Date().toISOString()}).eq("id",r.id),{allowed:!1,attemptsRemaining:0,blockedUntil:i}}return{allowed:!0,attemptsRemaining:Ct-r.attempt_count-1}}catch(a){return console.error("Rate limit check failed:",a),{allowed:!0,attemptsRemaining:Ct}}}static async recordAttempt(t,a){try{if(a){await F.from("auth_rate_limits").delete().eq("user_identifier",t);return}const{data:r}=await F.from("auth_rate_limits").select("*").eq("user_identifier",t).single();r?await F.from("auth_rate_limits").update({attempt_count:r.attempt_count+1,last_attempt:new Date().toISOString()}).eq("id",r.id):await F.from("auth_rate_limits").insert({user_identifier:t,attempt_count:1,last_attempt:new Date().toISOString()})}catch(r){console.error("Failed to record auth attempt:",r)}}}class ta{static async logEvent(t,a,r){try{await F.from("security_audit_log").insert({user_id:r||null,event_type:t,event_details:a,ip_address:a.ipAddress||null,user_agent:a.userAgent||navigator.userAgent})}catch(i){console.error("Failed to log security event:",i)}}static async getUserSecurityLog(t){try{const{data:a,error:r}=await F.from("security_audit_log").select("*").eq("user_id",t).order("created_at",{ascending:!1}).limit(50);if(r)throw r;return a}catch(a){return console.error("Failed to fetch security log:",a),[]}}}const kc=ce.string().regex(/^(\+254|0)(7|1)\d{8}$/,"Invalid Kenyan phone number format"),Sc=ce.string().email("Invalid email format"),_c=ce.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/\d/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),Ac=s=>s.trim().replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").substring(0,1e3),Pc=s=>s.replace(/['"`;\\]/g,"").replace(/\b(SELECT|INSERT|UPDATE|DELETE|DROP|UNION|EXEC)\b/gi,"").trim().substring(0,100);ce.coerce.number().min(0);ce.string().min(2,"Location must be at least 2 characters").max(100,"Location must be less than 100 characters").regex(/^[a-zA-Z\s,.-]+$/,"Location contains invalid characters");class Tc{static validatePhone(t){try{return kc.parse(t),{valid:!0}}catch{return{valid:!1,error:"Invalid phone number format"}}}static validateEmail(t){try{return Sc.parse(t),{valid:!0}}catch{return{valid:!1,error:"Invalid email format"}}}static validatePassword(t){try{return _c.parse(t),{valid:!0}}catch{return{valid:!1,error:"Password must be at least 8 characters with uppercase, lowercase, number, and special character"}}}static sanitizeUserInput(t){return Ac(t)}static sanitizeSearch(t){return Pc(t)}}const yi=l.createContext(null),we=()=>{const s=l.useContext(yi);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Dc=({children:s})=>{const[t,a]=l.useState(null),[r,i]=l.useState(null),[c,n]=l.useState(!0);l.useEffect(()=>{const{data:{subscription:d}}=F.auth.onAuthStateChange((u,x)=>{i(x),a((x==null?void 0:x.user)??null),n(!1)});return F.auth.getSession().then(({data:{session:u}})=>{i(u),a((u==null?void 0:u.user)??null),n(!1)}),()=>d.unsubscribe()},[]);const o=async(d,u,x)=>{try{const f=`${window.location.origin}/`,{error:g}=await F.auth.signUp({email:d,password:u,options:{emailRedirectTo:f,data:{full_name:x}}});return g?(Ne.error(g.message),{error:g.message}):(Ne.success("Check your email for verification link"),{})}catch(f){const g=f.message;return Ne.error(g),{error:g}}},h=async(d,u)=>{try{const x=Tc.validateEmail(d);if(!x.valid)return Ne.error(x.error),{error:x.error};const f=await Ha.checkRateLimit(d);if(!f.allowed){const v=f.blockedUntil?`Too many failed attempts. Try again after ${f.blockedUntil.toLocaleTimeString()}`:"Too many failed attempts. Please try again later.";return Ne.error(v),{error:v}}const{error:g}=await F.auth.signInWithPassword({email:d,password:u});return await Ha.recordAttempt(d,!g),g?(await ta.logEvent("failed_login",{attemptedEmail:d,error:g.message}),Ne.error(g.message),{error:g.message}):(await ta.logEvent("successful_login",{email:d}),Ne.success("Welcome back!"),{})}catch(x){const f=x.message;return await ta.logEvent("failed_login",{attemptedEmail:d,error:f}),Ne.error(f),{error:f}}},m=async()=>{try{await F.auth.signOut(),Ne.success("Signed out successfully")}catch{Ne.error("Error signing out")}},p=async d=>{try{if(!t)throw new Error("Not authenticated");const{error:u}=await F.from("profiles").update(d).eq("user_id",t.id);return u?(Ne.error(u.message),{error:u.message}):(Ne.success("Profile updated successfully"),{})}catch(u){const x=u.message;return Ne.error(x),{error:x}}};return e.jsx(yi.Provider,{value:{user:t,session:r,loading:c,signUp:o,signIn:h,signOut:m,updateProfile:p},children:s})},Is=l.forwardRef(({className:s,...t},a)=>e.jsx(xr,{ref:a,className:z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Is.displayName=xr.displayName;const Ys=l.forwardRef(({className:s,...t},a)=>e.jsx(hr,{ref:a,className:z("aspect-square h-full w-full",s),...t}));Ys.displayName=hr.displayName;const Ls=l.forwardRef(({className:s,...t},a)=>e.jsx(pr,{ref:a,className:z("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Ls.displayName=pr.displayName;const Ni=Sn,bi=_n,Mc=l.forwardRef(({className:s,inset:t,children:a,...r},i)=>e.jsxs(gr,{ref:i,className:z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...r,children:[a,e.jsx(ba,{className:"ml-auto h-4 w-4"})]}));Mc.displayName=gr.displayName;const Fc=l.forwardRef(({className:s,...t},a)=>e.jsx(jr,{ref:a,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Fc.displayName=jr.displayName;const Pa=l.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(Cn,{children:e.jsx(fr,{ref:r,sideOffset:t,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));Pa.displayName=fr.displayName;const Ts=l.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(vr,{ref:r,className:z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...a}));Ts.displayName=vr.displayName;const Ec=l.forwardRef(({className:s,children:t,checked:a,...r},i)=>e.jsxs(yr,{ref:i,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Nr,{children:e.jsx(qe,{className:"h-4 w-4"})})}),t]}));Ec.displayName=yr.displayName;const Ic=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(br,{ref:r,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Nr,{children:e.jsx(kn,{className:"h-2 w-2 fill-current"})})}),t]}));Ic.displayName=br.displayName;const wi=l.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(wr,{ref:r,className:z("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));wi.displayName=wr.displayName;const ja=l.forwardRef(({className:s,...t},a)=>e.jsx(Cr,{ref:a,className:z("-mx-1 my-1 h-px bg-muted",s),...t}));ja.displayName=Cr.displayName;function Lc(){const{theme:s,setTheme:t}=vc();return e.jsxs(Ni,{children:[e.jsx(bi,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",children:[e.jsx(pa,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(An,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(Pa,{align:"end",children:[e.jsx(Ts,{onClick:()=>t("light"),children:"Light"}),e.jsx(Ts,{onClick:()=>t("dark"),children:"Dark"}),e.jsx(Ts,{onClick:()=>t("system"),children:"System"})]})]})}const Ci=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(kr,{ref:r,className:z("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...a,children:[t,e.jsx(Si,{})]}));Ci.displayName=kr.displayName;const ki=l.forwardRef(({className:s,...t},a)=>e.jsx(Sr,{ref:a,className:z("group flex flex-1 list-none items-center justify-center space-x-1",s),...t}));ki.displayName=Sr.displayName;const As=Pn,qc=$s("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50"),fa=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(_r,{ref:r,className:z(qc(),"group",s),...a,children:[t," ",e.jsx(zt,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));fa.displayName=_r.displayName;const va=l.forwardRef(({className:s,...t},a)=>e.jsx(Ar,{ref:a,className:z("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...t}));va.displayName=Ar.displayName;const Ps=Tn,Si=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:z("absolute left-0 top-full flex justify-center"),children:e.jsx(Pr,{className:z("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:a,...t})}));Si.displayName=Pr.displayName;const Rc=l.forwardRef(({className:s,...t},a)=>e.jsx(Tr,{ref:a,className:z("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...t,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));Rc.displayName=Tr.displayName;const zc=()=>{const s=bs(),t=[{href:"/farm-input-marketplace",title:"Farm Input Marketplace",description:"Quality agricultural inputs from verified suppliers",icon:e.jsx(Oe,{className:"h-4 w-4"})},{href:"/marketplace",title:"Agricultural Marketplace",description:"Buy and sell produce, livestock, and agricultural products",icon:e.jsx(Oe,{className:"h-4 w-4"})},{href:"/bulk-orders",title:"Bulk Orders",description:"Organize group purchases for better prices",icon:e.jsx(Oe,{className:"h-4 w-4"})},{href:"/city-markets",title:"City Markets",description:"Connect with local city and county markets",icon:e.jsx(Z,{className:"h-4 w-4"})}],a=[{href:"/logistics",title:"Logistics Optimization",description:"Smart routing and delivery solutions",icon:e.jsx(je,{className:"h-4 w-4"})},{href:"/logistics-solutions-map",title:"Solutions Map",description:"Interactive map of logistics solutions",icon:e.jsx(je,{className:"h-4 w-4"})},{href:"/transporter-signup",title:"Join as Transporter",description:"Register your transport services",icon:e.jsx(je,{className:"h-4 w-4"})}],r=i=>s.pathname===i;return e.jsx(Ci,{className:"hidden md:flex",children:e.jsxs(ki,{children:[e.jsxs(As,{children:[e.jsxs(fa,{className:z("bg-transparent",t.some(i=>r(i.href))&&"text-primary"),children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Marketplace"]}),e.jsx(va,{children:e.jsx("ul",{className:"grid w-[600px] gap-3 p-4 md:grid-cols-2",children:t.map(i=>e.jsx("li",{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:i.href,className:z("block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",r(i.href)&&"bg-accent text-accent-foreground"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium leading-none",children:[i.icon,i.title]}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:i.description})]})})},i.href))})})]}),e.jsxs(As,{children:[e.jsxs(fa,{className:z("bg-transparent",a.some(i=>r(i.href))&&"text-primary"),children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),"Logistics"]}),e.jsx(va,{children:e.jsx("ul",{className:"grid w-[600px] gap-3 p-4 md:grid-cols-2",children:a.map(i=>e.jsx("li",{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:i.href,className:z("block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",r(i.href)&&"bg-accent text-accent-foreground"),children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium leading-none",children:[i.icon,i.title]}),e.jsx("p",{className:"line-clamp-2 text-sm leading-snug text-muted-foreground",children:i.description})]})})},i.href))})})]}),e.jsx(As,{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:"/service-providers",className:z("group inline-flex h-10 w-max items-center justify-center rounded-md bg-transparent px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50",r("/service-providers")&&"text-primary"),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Service Providers"]})})}),e.jsx(As,{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:"/sentiment-analysis",className:z("group inline-flex h-10 w-max items-center justify-center rounded-md bg-transparent px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50",r("/sentiment-analysis")&&"text-primary"),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Market Insights"]})})}),e.jsx(As,{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:"/community-forums",className:z("group inline-flex h-10 w-max items-center justify-center rounded-md bg-transparent px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50",r("/community-forums")&&"text-primary"),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Community"]})})}),e.jsx(As,{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:"/supply-chain-problems",className:z("group inline-flex h-10 w-max items-center justify-center rounded-md bg-transparent px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50",r("/supply-chain-problems")&&"text-primary"),children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Supply Chain"]})})}),e.jsx(As,{children:e.jsx(Ps,{asChild:!0,children:e.jsxs(V,{to:"/about",className:z("group inline-flex h-10 w-max items-center justify-center rounded-md bg-transparent px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50",r("/about")&&"text-primary"),children:[e.jsx(xt,{className:"h-4 w-4 mr-2"}),"About"]})})})]})})},se=()=>{var c,n;const{user:s,signOut:t}=we(),a=ve(),r=async()=>{try{await t(),a("/")}catch(o){console.error("Error signing out:",o)}},i=()=>e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsxs("g",{transform:"translate(50, 50)",children:[e.jsx("path",{d:"M-15 15 L0 -25 L15 15 L8 10 L0 -10 L-8 10 Z",fill:"url(#dynamicGradient)"}),e.jsx("path",{d:"M-12 5 Q-20 0 -18 8 Q-12 12 -8 8 Q-6 2 -12 5 Z",fill:"#22c55e",opacity:"0.9"}),e.jsx("path",{d:"M12 5 Q20 0 18 8 Q12 12 8 8 Q6 2 12 5 Z",fill:"#22c55e",opacity:"0.9"}),e.jsxs("g",{opacity:"0.7",children:[e.jsx("line",{x1:"0",y1:"-25",x2:"8",y2:"-32",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"0",y1:"-25",x2:"-8",y2:"-32",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"0",y1:"-25",x2:"0",y2:"-35",stroke:"#4ade80",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("circle",{cx:"8",cy:"-32",r:"2",fill:"#4ade80"}),e.jsx("circle",{cx:"-8",cy:"-32",r:"2",fill:"#4ade80"}),e.jsx("circle",{cx:"0",cy:"-35",r:"2",fill:"#4ade80"})]}),e.jsxs("g",{opacity:"0.6",children:[e.jsx("path",{d:"M-5 15 Q-10 20 -15 18 Q-12 22 -8 20 Q-5 18 -5 15",stroke:"#16a34a",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M5 15 Q10 20 15 18 Q12 22 8 20 Q5 18 5 15",stroke:"#16a34a",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M0 15 Q0 22 -3 25 Q3 25 0 15",stroke:"#16a34a",strokeWidth:"2",fill:"none"})]}),e.jsx("circle",{cx:"0",cy:"0",r:"25",fill:"none",stroke:"#4ade80",strokeWidth:"1",opacity:"0.3",className:"pulse-ring"}),e.jsx("circle",{cx:"0",cy:"0",r:"35",fill:"none",stroke:"#22c55e",strokeWidth:"1",opacity:"0.2",className:"pulse-ring-2"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"dynamicGradient",x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#16a34a",stopOpacity:1}}),e.jsx("stop",{offset:"50%",style:{stopColor:"#22c55e",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"#4ade80",stopOpacity:1}})]})})]})});return e.jsx("header",{className:"bg-background border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(V,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(i,{}),e.jsx("span",{className:"text-xl font-bold text-primary",children:"SokoConnect"})]}),e.jsx(zc,{})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Lc,{}),s?e.jsxs(Ni,{children:[e.jsx(bi,{asChild:!0,children:e.jsx(N,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:e.jsxs(Is,{className:"h-10 w-10",children:[e.jsx(Ys,{src:(c=s.user_metadata)==null?void 0:c.avatar_url,alt:"Profile"}),e.jsx(Ls,{children:e.jsx(Ks,{className:"h-4 w-4"})})]})})}),e.jsxs(Pa,{className:"w-56",align:"end",forceMount:!0,children:[e.jsx(wi,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:((n=s.user_metadata)==null?void 0:n.full_name)||s.email}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),e.jsx(ja,{}),e.jsx(Ts,{asChild:!0,children:e.jsxs(V,{to:"/profile",className:"cursor-pointer",children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]})}),e.jsx(Ts,{asChild:!0,children:e.jsxs(V,{to:"/settings",className:"cursor-pointer",children:[e.jsx(ot,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})}),e.jsx(ja,{}),e.jsxs(Ts,{onClick:r,className:"cursor-pointer",children:[e.jsx(Dr,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]}):e.jsx(N,{asChild:!0,children:e.jsx(V,{to:"/auth",children:"Sign In"})})]})]})})})},Kc=$s("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function M({className:s,variant:t,...a}){return e.jsx("div",{className:z(Kc({variant:t}),s),...a})}const Oc=()=>{const s=[{icon:ne,title:"Real-time Market Data",description:"Access live agricultural market prices and demand forecasts",link:"/kilimo-ams-data"},{icon:ee,title:"Service Providers",description:"Connect with agricultural service providers and experts",link:"/service-providers"},{icon:je,title:"Logistics Solutions",description:"Find transportation and storage solutions for your produce",link:"/logistics"},{icon:cs,title:"Community Forum",description:"Join discussions with fellow farmers and agribusiness professionals",link:"/community-forum"}];return e.jsx("div",{className:"relative overflow-hidden bg-gradient-to-br from-green-50 via-blue-50 to-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 lg:py-24",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(M,{variant:"secondary",className:"mb-4",children:"🌾 Agricultural Technology Platform"}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:"Connect. Trade. Grow."}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Empowering farmers and agribusiness with real-time market data, logistics solutions, and community connections across Kenya's agricultural value chain."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(V,{to:"/kilimo-ams-data",children:e.jsxs(N,{size:"lg",className:"w-full sm:w-auto",children:["Explore Market Data",e.jsx(Vs,{className:"ml-2 h-4 w-4"})]})}),e.jsx(V,{to:"/business-marketing",children:e.jsxs(N,{size:"lg",variant:"outline",className:"w-full sm:w-auto bg-green-50 border-green-200 text-green-700 hover:bg-green-100",children:[e.jsx(Mt,{className:"mr-2 h-4 w-4"}),"Advertise Your Business"]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-lg p-6 mb-12 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx(Mt,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Business Marketing"}),e.jsx(M,{className:"bg-green-600",children:"Popular"})]}),e.jsx("p",{className:"text-green-700 mb-4",children:"Reach thousands of farmers and agricultural professionals. Advertise your business for just $20 for 30 days."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm text-green-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(wa,{className:"h-4 w-4"}),e.jsx("span",{children:"Targeted Audience"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"$20 for 30 Days"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"1000+ Daily Visitors"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((t,a)=>e.jsx(w,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:e.jsx(V,{to:t.link,children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx(t.icon,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]})})},a))}),e.jsx("div",{className:"text-center mt-12",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Trusted by farmers, cooperatives, and agribusiness across Kenya"})})]})})},ue=Dn,me=l.forwardRef(({className:s,...t},a)=>e.jsx(Mr,{ref:a,className:z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));me.displayName=Mr.displayName;const R=l.forwardRef(({className:s,...t},a)=>e.jsx(Fr,{ref:a,className:z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));R.displayName=Fr.displayName;const B=l.forwardRef(({className:s,...t},a)=>e.jsx(Er,{ref:a,className:z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));B.displayName=Er.displayName;const Bc=1,Uc=1e6;let aa=0;function $c(){return aa=(aa+1)%Number.MAX_SAFE_INTEGER,aa.toString()}const ra=new Map,Ga=s=>{if(ra.has(s))return;const t=setTimeout(()=>{ra.delete(s),lt({type:"REMOVE_TOAST",toastId:s})},Uc);ra.set(s,t)},Vc=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,Bc)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?Ga(a):s.toasts.forEach(r=>{Ga(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},Pt=[];let Tt={toasts:[]};function lt(s){Tt=Vc(Tt,s),Pt.forEach(t=>{t(Tt)})}function Hc({...s}){const t=$c(),a=i=>lt({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>lt({type:"DISMISS_TOAST",toastId:t});return lt({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:a}}function X(){const[s,t]=l.useState(Tt);return l.useEffect(()=>(Pt.push(t),()=>{const a=Pt.indexOf(t);a>-1&&Pt.splice(a,1)}),[s]),{...s,toast:Hc,dismiss:a=>lt({type:"DISMISS_TOAST",toastId:a})}}const _e=Lr,Ee=qr,Gc=Ca,_i=l.forwardRef(({className:s,...t},a)=>e.jsx(Kt,{ref:a,className:z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));_i.displayName=Kt.displayName;const Se=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Gc,{children:[e.jsx(_i,{}),e.jsxs(Ot,{ref:r,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(Ir,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Se.displayName=Ot.displayName;const Ae=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Ae.displayName="DialogHeader";const Cs=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Cs.displayName="DialogFooter";const Pe=l.forwardRef(({className:s,...t},a)=>e.jsx(Bt,{ref:a,className:z("text-lg font-semibold leading-none tracking-tight",s),...t}));Pe.displayName=Bt.displayName;const jt=l.forwardRef(({className:s,...t},a)=>e.jsx(Ut,{ref:a,className:z("text-sm text-muted-foreground",s),...t}));jt.displayName=Ut.displayName;const D=l.forwardRef(({className:s,type:t,...a},r)=>e.jsx("input",{type:t,className:z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...a}));D.displayName="Input";const ie=l.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));ie.displayName="Textarea";const Wc=$s("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=l.forwardRef(({className:s,...t},a)=>e.jsx(Rr,{ref:a,className:z(Wc(),s),...t}));A.displayName=Rr.displayName;const Wa="https://amis.kilimo.go.ke/en/api",ia=2,Ya=1e3,Yc=2*60*60*1e3,hs={};class ks{static async get(t,a,r,i=!1){return this.request(t,{method:"GET",queryParams:a,fallbackReturnValue:r,bypassCache:i,timeout:3e3})}static async post(t,a,r){return this.request(t,{method:"POST",body:a,fallbackReturnValue:r})}static async request(t,a={}){const{method:r="GET",body:i,queryParams:c,fallbackReturnValue:n={results:[]},retries:o=0,bypassCache:h=!1,timeout:m=5e3}=a;let p=`${Wa}/${t}`;if(c){const x=new URLSearchParams;Object.entries(c).forEach(([g,v])=>{v!=null&&v!==""&&x.append(g,v)});const f=x.toString();f&&(p+=`?${f}`)}const d=`${r}:${p}`;if(r==="GET"&&!h&&hs[d]){const x=hs[d];if(Date.now()-x.timestamp<Yc)return console.log(`Using cached data for ${p}`),x.data;delete hs[d]}const u={method:r,headers:{Accept:"application/json","Content-Type":"application/json",Origin:window.location.origin},mode:"cors",cache:"no-cache",credentials:"same-origin"};i&&(r==="POST"||r==="PUT")&&(u.body=JSON.stringify(i)),console.log(`Making ${r} request to ${p} (attempt ${o+1} of ${ia+1})`);try{const x=new AbortController,f=setTimeout(()=>x.abort(),m);u.signal=x.signal;const g=await fetch(p,u);if(clearTimeout(f),g.status>=500&&g.status<600&&o<ia){const j=Ya*Math.pow(2,o);return console.log(`Server error (${g.status}), retrying in ${j}ms...`),await new Promise(y=>setTimeout(y,j)),this.request(t,{...a,retries:o+1})}if(!g.ok){const j=await g.text();return console.error(`API error (${g.status}): ${j}`),r==="GET"&&(hs[d]={timestamp:Date.now(),data:n}),n}const v=await g.json();return r==="GET"&&(hs[d]={timestamp:Date.now(),data:v}),v}catch(x){if(x instanceof DOMException&&x.name==="AbortError"?console.error(`Request timeout for ${t} after ${m}ms`):console.error(`Failed to connect to API (${t}):`,x),o<ia){const f=Ya*Math.pow(2,o);return console.log(`Network error, retrying in ${f}ms...`),await new Promise(g=>setTimeout(g,f)),this.request(t,{...a,retries:o+1})}if(typeof n<"u")return console.log(`Maximum retries reached. Using fallback data for ${t}`),r==="GET"&&(hs[d]={timestamp:Date.now(),data:n}),n;throw x}}static async checkApiHealth(){try{const t=new AbortController,a=setTimeout(()=>t.abort(),3e3),r=await fetch(`${Wa}/health-check`,{method:"GET",headers:{Accept:"application/json"},mode:"cors",cache:"no-cache",credentials:"same-origin",signal:t.signal});return clearTimeout(a),r.ok}catch(t){return console.warn("API health check failed:",t),!1}}static clearCache(){Object.keys(hs).forEach(t=>delete hs[t]),console.log("API cache cleared")}}const na=async()=>{console.log("Fetching real featured news from Ministry API");const s=await ks.get("news/",void 0,{results:[]});console.log("Received news data:",s);const t=s.results.map((a,r)=>({id:a.id||r+1,title:a.title||a.headline||"News update",source:a.source||"Ministry of Agriculture",date:a.published_date||new Date().toISOString().split("T")[0],tags:a.tags?typeof a.tags=="string"?a.tags.split(",").map(i=>i.trim()):a.tags:["agriculture"],location:a.location||"Kenya",summary:a.summary||a.content||a.description||"No description available",url:a.url||`${window.location.origin}/news/${a.id}/`}));return console.log(`Successfully fetched ${t.length} news items`),t},Qa=async()=>{console.log("Fetching real services data from Ministry API");const s=await ks.get("services/",void 0,{results:[]});console.log("Received services data:",s);const t=s.results.map((a,r)=>({id:a.id||r+1,title:a.name||a.title||"Service",provider:a.provider||a.organization||"Service Provider",source:a.provider||a.organization||"Service Provider",date:a.date_added||new Date().toISOString().split("T")[0],tags:a.tags?typeof a.tags=="string"?a.tags.split(",").map(i=>i.trim()):a.tags:["service"],location:a.locations||a.coverage||"Kenya",summary:a.description||a.summary||"No description available",url:a.url||a.website||`${window.location.origin}/services/${a.id}/`}));return console.log(`Successfully fetched ${t.length} services`),t},Ja=async()=>{console.log("Fetching real products data from Ministry API");const s=await ks.get("products/",void 0,{results:[]});console.log("Received products data:",s);const t=s.results.map((a,r)=>({id:a.id||r+1,title:a.name||a.title||"Product",provider:a.provider||a.seller||a.organization||"Provider",source:a.provider||a.seller||a.organization||"Provider",date:a.date_listed||a.date_added||new Date().toISOString().split("T")[0],tags:a.tags?typeof a.tags=="string"?a.tags.split(",").map(i=>i.trim()):a.tags:["product"],location:a.location||"Kenya",summary:a.description||a.summary||"No description available",price:a.price?`KES ${a.price}`:void 0,url:a.url||`${window.location.origin}/products/${a.id}/`}));return console.log(`Successfully fetched ${t.length} products`),t},Qc=async s=>{console.log("Submitting news item to Ministry API",s);const t={title:s.title,source:s.source,tags:Array.isArray(s.tags)?s.tags.join(", "):s.tags,location:s.location,content:s.summary,url:s.url,published_date:new Date().toISOString().split("T")[0]};try{return await ks.post("news/submit/",t),console.log("News item submitted successfully"),!0}catch(a){throw console.error("Failed to submit news item:",a),a}},Jc=()=>{const[s,t]=l.useState("news"),[a,r]=l.useState(!0),[i,c]=l.useState(null),[n,o]=l.useState([]),[h,m]=l.useState([]),[p,d]=l.useState([]),[u,x]=l.useState({title:"",source:"",tags:"",location:"",summary:"",url:""}),[f,g]=l.useState(!1),[v,j]=l.useState(!1),{toast:y}=X();l.useEffect(()=>{const L=async()=>{r(!0);try{const[U,q,te]=await Promise.all([na(),Qa(),Ja()]);o(U),m(q),d(te),c(new Date)}catch(U){console.error("Error fetching featured content:",U),y({title:"Error loading content",description:"Could not load the featured content. Please check your connection and try again.",variant:"destructive"}),o(q=>q.length?q:[]),m(q=>q.length?q:[]),d(q=>q.length?q:[])}finally{r(!1)}};L();const G=4*60*60*1e3,I=setInterval(L,G);return()=>clearInterval(I)},[y]);const b=async()=>{r(!0);try{const[L,G,I]=await Promise.all([na(),Qa(),Ja()]);o(L),m(G),d(I),c(new Date),y({title:"Content refreshed",description:"Featured content has been updated with the latest data."})}catch(L){console.error("Error refreshing featured content:",L),y({title:"Error refreshing content",description:"Could not refresh the content. Please check your connection and try again.",variant:"destructive"})}finally{r(!1)}},T=L=>{const{name:G,value:I}=L.target;x(U=>({...U,[G]:I}))},E=async()=>{if(!u.title||!u.source||!u.summary){y({title:"Missing information",description:"Please fill in all required fields.",variant:"destructive"});return}g(!0);try{if(await Qc({title:u.title,source:u.source,date:new Date().toISOString().split("T")[0],tags:u.tags.split(",").map(G=>G.trim()),location:u.location,summary:u.summary,url:u.url||"#"})){const G=await na();o(G),x({title:"",source:"",tags:"",location:"",summary:"",url:""}),j(!1),y({title:"News submitted",description:"Your news has been submitted successfully."})}}catch(L){console.error("Error submitting news:",L),y({title:"Submission error",description:"Could not submit your news. Please check your connection and try again.",variant:"destructive"})}finally{g(!1)}},P=L=>a?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):L.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"No items found. Please check your connection and try refreshing."}),e.jsxs(N,{onClick:b,variant:"outline",className:"mt-4",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"})," Refresh"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:L.map(G=>e.jsx(w,{className:"hover:shadow-md transition-all overflow-hidden",children:e.jsxs(C,{className:"p-0",children:[e.jsxs("div",{className:"bg-muted/40 p-5",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 line-clamp-2",children:G.title}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:G.provider||G.source})]}),e.jsxs("div",{className:"flex flex-wrap gap-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:new Date(G.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:G.location})]})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:G.summary}),G.price&&e.jsx("div",{className:"font-bold text-primary mb-4",children:G.price}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:G.tags.map(I=>e.jsxs("div",{className:"bg-secondary/50 text-secondary-foreground text-xs px-2 py-1 rounded-full flex items-center",children:[e.jsx(Et,{className:"h-3 w-3 mr-1"}),I]},I))}),e.jsx(N,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:e.jsxs("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center",children:["View Details ",e.jsx(Je,{className:"ml-1 h-3 w-3"})]})})]})]})},G.id))});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{children:i&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last updated: ",i.toLocaleString()]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_e,{open:v,onOpenChange:j,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"})," Submit News"]})}),e.jsxs(Se,{className:"sm:max-w-[500px]",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Submit News Item"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"title",children:"Title *"}),e.jsx(D,{id:"title",name:"title",value:u.title,onChange:T,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"source",children:"Source *"}),e.jsx(D,{id:"source",name:"source",value:u.source,onChange:T,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"tags",children:"Tags (comma separated)"}),e.jsx(D,{id:"tags",name:"tags",value:u.tags,onChange:T,placeholder:"e.g. maize, exports, policy"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"location",children:"Location"}),e.jsx(D,{id:"location",name:"location",value:u.location,onChange:T})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"summary",children:"Summary *"}),e.jsx(ie,{id:"summary",name:"summary",rows:3,value:u.summary,onChange:T,required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{htmlFor:"url",children:"Source URL"}),e.jsx(D,{id:"url",name:"url",type:"url",value:u.url,onChange:T,placeholder:"https://"})]})]}),e.jsx(Cs,{children:e.jsx(N,{onClick:E,disabled:f,children:f?"Submitting...":"Submit News"})})]})]}),e.jsxs(N,{onClick:b,variant:"ghost",size:"sm",disabled:a,children:[e.jsx(dt,{className:`h-4 w-4 ${a?"animate-spin":""}`}),e.jsx("span",{className:"sr-only",children:"Refresh"})]})]})]}),e.jsxs(ue,{defaultValue:"news",value:s,onValueChange:t,children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(me,{className:"grid grid-cols-3 w-full max-w-md",children:[e.jsxs(R,{value:"news",className:"flex items-center",children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"News"]}),e.jsxs(R,{value:"services",className:"flex items-center",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Services"]}),e.jsxs(R,{value:"products",className:"flex items-center",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Products"]})]})}),e.jsx(B,{value:"news",className:"mt-0",children:P(n)}),e.jsx(B,{value:"services",className:"mt-0",children:P(h)}),e.jsx(B,{value:"products",className:"mt-0",children:P(p)})]})]})},Ai=s=>({agriculture:"Agricultural Issues",solutions:"Agricultural Solutions",tender:"Tender","awarded-tender":"Awarded Tender"})[s]||s,Zc=()=>["kilimo.go.ke","kenyaseed.com","kalro.org","moa.go.ke","nafis.go.ke","agritechinnovations.co.ke","kephis.org","eaff.org","farmafrica.org","agriculture.go.ke","agra.org","kebs.org","afa.go.ke","agricultureauthority.go.ke","globalgap.org","koan.co.ke","farmafrica.org"],Xc=s=>{try{const a=new URL(s).hostname;return Zc().some(r=>a===r||a.endsWith(`.${r}`))}catch{return!1}},eo=s=>{var i,c;const t=((i=s.title)==null?void 0:i.toLowerCase())||"",a=((c=s.description)==null?void 0:c.toLowerCase())||"",r=["guaranteed results","miracle solution","secret that experts","100% effective","revolutionary breakthrough"];for(const n of r)if(t.includes(n)||a.includes(n))return!1;return s.source&&["Ministry of Agriculture","Kenya Seed Company","Kenya Agricultural Research Institute","KALRO","FAO","AgriTech Innovations","Kenya Plant Health Inspectorate Service","Kenya Bureau of Standards","KEBS","National Farmers Information Service","Agriculture and Food Authority"].some(o=>s.source.includes(o)),!0},qs=(s=800)=>new Promise(t=>setTimeout(t,s)),ft=async()=>(await qs(800),console.info("Processed 85 Kilimo statistics"),[{id:"1",name:"Maize Production",value:"3.8 million tonnes",category:"Production",county:"National",unit:"tonnes",source:"KNBS Agricultural Census 2023",verified:!0},{id:"2",name:"Coffee Production",value:"45,000 tonnes",category:"Production",county:"National",unit:"tonnes",source:"Coffee Board of Kenya 2023",verified:!0},{id:"3",name:"Average Maize Price",value:"KES 4,200",category:"Prices",county:"National",unit:"KES/90kg bag",source:"Nairobi Grain Exchange 2023",verified:!0},{id:"4",name:"Nakuru Production",value:"235,000 tonnes",category:"County",county:"Nakuru",unit:"tonnes",source:"KNBS County Statistics 2023",verified:!0},{id:"5",name:"Kiambu Production",value:"190,000 tonnes",category:"County",county:"Kiambu",unit:"tonnes",source:"KNBS County Statistics 2023",verified:!0},{id:"6",name:"Meru Production",value:"210,000 tonnes",category:"County",county:"Meru",unit:"tonnes",source:"KNBS County Statistics 2023",verified:!0}]),so=async()=>{await qs(800);const s=["Nairobi","Mombasa","Kisumu","Nakuru","Kiambu","Meru","Kakamega","Nyeri","Machakos","Uasin Gishu","Kirinyaga","Bungoma","Bomet"],t=[{name:"Tomatoes",minPrice:2800,maxPrice:4500,unit:"crate"},{name:"Potatoes",minPrice:1800,maxPrice:3e3,unit:"bag"},{name:"Maize",minPrice:3e3,maxPrice:6e3,unit:"bag"},{name:"Beans",minPrice:7e3,maxPrice:12e3,unit:"bag"},{name:"Onions",minPrice:2e3,maxPrice:4e3,unit:"bag"},{name:"Cabbage",minPrice:15,maxPrice:40,unit:"piece"},{name:"Bananas",minPrice:300,maxPrice:600,unit:"bunch"},{name:"Carrots",minPrice:1500,maxPrice:3e3,unit:"bag"},{name:"Avocado",minPrice:10,maxPrice:30,unit:"piece"},{name:"Mangoes",minPrice:500,maxPrice:1200,unit:"crate"}],a=[];for(let r=0;r<18;r++){const i=s[r%s.length],c=["High","Medium","Low"][Math.floor(Math.random()*3)],n=[],o=3+Math.floor(Math.random()*4),h=[...t].sort(()=>.5-Math.random());for(let m=0;m<o;m++){const p=h[m],d=Math.floor(p.minPrice+Math.random()*(p.maxPrice-p.minPrice));n.push({id:`P${m+1}${r}`,produceName:p.name,price:d,unit:p.unit,date:new Date().toISOString().split("T")[0]})}a.push({id:`MKT${(r+1).toString().padStart(3,"0")}`,name:`${i} ${["Central","Main","Municipal","Farmers","City"][Math.floor(Math.random()*5)]} Market`,county:i,location:{county:i},producePrices:n,demand:c,operatingHours:`${5+Math.floor(Math.random()*3)}:00 AM - ${4+Math.floor(Math.random()*4)}:00 PM`})}return a},to=async()=>{await qs(900);const s=["Nairobi","Mombasa","Kisumu","Nakuru","Kiambu","Meru","Kakamega","Nyeri","Machakos","Uasin Gishu","Kirinyaga","Bungoma","Bomet"],t={Vegetables:["Tomatoes","Kale","Cabbage","Spinach","Carrots","Onions","Garlic"],Fruits:["Bananas","Avocados","Mangoes","Oranges","Apples","Pineapples"],Tubers:["Potatoes","Sweet Potatoes","Cassava","Arrow Roots"],Cereals:["Maize","Wheat","Rice","Barley","Sorghum"],Legumes:["Beans","Green Grams","Peas","Lentils","Soybeans"]},a=["A","B","A+","Premium"],r=["kg","ton","bag","crate"],i=[];for(let c=0;c<30;c++){const n=Object.keys(t),o=n[Math.floor(Math.random()*n.length)],h=t[o],m=h[Math.floor(Math.random()*h.length)],p=s[Math.floor(Math.random()*s.length)],d=new Date;d.setDate(d.getDate()+Math.floor(Math.random()*30)),i.push({id:`P${(c+1).toString().padStart(3,"0")}`,name:m,category:o,county:p,quantity:100+Math.floor(Math.random()*5e3),unit:r[Math.floor(Math.random()*r.length)],qualityGrade:a[Math.floor(Math.random()*a.length)],availableFrom:d.toISOString().split("T")[0],farmer:`Farmer ${Math.floor(Math.random()*20)+1}`,farmerId:`F${(Math.floor(Math.random()*20)+1).toString().padStart(3,"0")}`})}return i},Za=[{id:"1",title:"Managing Tomato Blight in Wet Seasons",description:"Effective strategies for managing tomato blight during rainy seasons in Kenya",category:"issues",date:"2023-11-15",source:"Kenya Agricultural Research Institute",content:"Tomato blight is a common disease that affects tomato crops during wet seasons. Symptoms include dark spots on leaves, stems, and fruits. To manage tomato blight: 1) Plant resistant varieties 2) Improve drainage in your field 3) Apply appropriate fungicides preventatively 4) Practice crop rotation 5) Remove and destroy infected plants to prevent spread.",tags:["disease","tomatoes","wet season","fungal disease"],location:"Central Kenya"},{id:"2",title:"Tender: Supply of Agricultural Inputs to Nakuru County",description:"Tender notice for the supply of agricultural inputs to Nakuru County",category:"tender",date:"2023-12-01",source:"Nakuru County Government",content:"The Nakuru County Government invites sealed bids from eligible candidates for the supply of agricultural inputs including certified seeds, fertilizers, and pesticides. Interested bidders must provide documentation of previous similar contracts, tax compliance, and business registration.",tags:["tender","agricultural inputs","Nakuru"],location:"Nakuru County",deadline:"2023-12-31",contact:"procurement@nakuru.go.ke",url:"https://nakuru.go.ke/tenders"},{id:"3",title:"Mobile Market Price Information System",description:"A solution that provides real-time market prices to farmers via SMS",category:"solutions",date:"2023-12-05",source:"AgriTech Innovations",content:"Our Mobile Market Price Information System allows farmers to receive daily price updates for different crops across multiple markets in Kenya. The system uses SMS to reach farmers without smartphones and works in areas with limited internet connectivity. Farmers simply send a text with their crop and location to receive current market prices, helping them make informed decisions about when and where to sell their produce.",tags:["market access","price information","SMS","technology"],location:"Nationwide"},{id:"4",title:"Drought-Resistant Maize Varieties for Eastern Kenya",description:"Information on drought-resistant maize varieties suitable for Eastern Kenya",category:"solutions",date:"2023-10-20",source:"Kenya Seed Company",content:"Eastern Kenya often experiences drought conditions that affect maize production. Several drought-resistant varieties have been developed specifically for these conditions, including KDV-1, KDV-4, and Katumani. These varieties mature early (in about 90-120 days) and can produce reasonable yields even with limited rainfall. Proper spacing and timely planting are crucial for success with these varieties.",tags:["drought","maize","Eastern Kenya","seed varieties"],location:"Eastern Kenya"},{id:"5",title:"Tender: Construction of Irrigation Infrastructure in Kitui",description:"Tender for the construction of irrigation infrastructure in Kitui County",category:"tender",date:"2023-11-25",source:"Ministry of Agriculture",content:"The Ministry of Agriculture invites tenders for the construction of irrigation infrastructure in Kitui County. The project involves construction of water intake structures, main canals, distribution networks, and farm inlets to serve approximately 2,000 hectares of farmland.",tags:["irrigation","construction","infrastructure","Kitui"],location:"Kitui County",deadline:"2024-01-15",contact:"tenders@agriculture.go.ke",url:"https://agriculture.go.ke/tenders"},{id:"6",title:"Farm-to-Market Digital Marketplace",description:"A digital platform connecting farmers directly to buyers, eliminating middlemen",category:"solutions",date:"2023-12-10",source:"Digital Farmers Network",content:"Our Farm-to-Market Digital Marketplace is transforming how farmers sell their produce by connecting them directly with buyers. The platform allows farmers to list their produce with photos and details, while buyers can browse and purchase directly. The system includes secure payment processing, delivery coordination, and quality guarantees. By eliminating traditional middlemen, farmers receive better prices and buyers get fresher produce at competitive rates.",tags:["market access","e-commerce","direct sales","middleman elimination"],location:"Nairobi, Nakuru, Kiambu, Machakos"},{id:"7",title:"Rural Produce Collection Points Network",description:"A network of rural collection centers that aggregate and store produce for efficient transportation",category:"solutions",date:"2024-01-05",source:"AgriLogistics Kenya",content:"Our Rural Produce Collection Points Network addresses one of the biggest challenges in agricultural supply chains - getting produce from remote farms to markets efficiently. We have established collection centers in strategic rural locations where farmers can bring their produce. Each center has basic quality checking equipment, weighing facilities, and temporary storage. This aggregation allows for efficient transportation in bulk to markets, reducing per-unit transport costs and ensuring produce arrives fresh and undamaged.",tags:["logistics","rural infrastructure","aggregation","transportation"],location:"Western Kenya and Rift Valley"}],ao=async()=>{try{const s=await fetch("https://datasets-server.huggingface.co/first-rows?dataset=Olive254%2FAwardedPublicProcurementTendersKenya&config=default&split=train");if(!s.ok)throw new Error(`Failed to fetch data: ${s.status} ${s.statusText}`);return((await s.json()).rows||[]).map(r=>({tenderno:r.row.tenderno||"",tendersubject:r.row.tendersubject||"",finyrq:r.row.finyrq||"",supplier:r.row.supplier||"",supplierscore:r.row.supplierscore,supplierbid:r.row.supplierbid,contactaddress:r.row.contactaddress,contactname:r.row.contactname,contacttel:r.row.contacttel,contactemail:r.row.contactemail,awarddate:r.row.awarddate,awardedamount:r.row.awardedamount,currency:r.row.currency,procuringentity:r.row.procuringentity,procuringentitycounty:r.row.procuringentitycounty,procurementmethod:r.row.procurementmethod}))}catch(s){return console.error("Error fetching awarded tenders:",s),[]}},ro=async s=>{if(await qs(800),(s==null?void 0:s.category)==="awarded-tender")try{let r=await ao();if(s.query){const i=s.query.toLowerCase();r=r.filter(c=>c.tendersubject.toLowerCase().includes(i)||c.supplier.toLowerCase().includes(i)||c.procuringentity&&c.procuringentity.toLowerCase().includes(i))}if(s.location){const i=s.location.toLowerCase();r=r.filter(c=>c.procuringentitycounty&&c.procuringentitycounty.toLowerCase().includes(i))}return r.map(i=>({id:i.tenderno||Math.random().toString(36).substring(2,9),title:i.tendersubject,description:`Tender awarded to ${i.supplier}`,category:"awarded-tender",date:i.awarddate||i.finyrq||new Date().toISOString().split("T")[0],source:i.procuringentity||"Kenya Public Procurement",content:`
          Tender Number: ${i.tenderno||"N/A"}
          Subject: ${i.tendersubject||"N/A"}
          Supplier: ${i.supplier||"N/A"}
          Awarded Amount: ${i.awardedamount||"N/A"} ${i.currency||"KES"}
          Award Date: ${i.awarddate||"N/A"}
          Financial Year Quarter: ${i.finyrq||"N/A"}
          Procurement Method: ${i.procurementmethod||"N/A"}
          Procuring Entity: ${i.procuringentity||"N/A"}
          County: ${i.procuringentitycounty||"N/A"}
          Contact: ${i.contactname||"N/A"}
          Contact Email: ${i.contactemail||"N/A"}
          Contact Tel: ${i.contacttel||"N/A"}
          Contact Address: ${i.contactaddress||"N/A"}
        `,tags:["awarded",i.procurementmethod||"procurement",i.procuringentitycounty||"kenya"],location:i.procuringentitycounty,contact:i.contactemail||i.contacttel}))}catch(a){return console.error("Error fetching awarded tenders:",a),[]}if(!s)return Za;let t=[...Za];if(s.category&&(t=t.filter(a=>a.category===s.category)),s.query){const a=s.query.toLowerCase();t=t.filter(r=>r.title.toLowerCase().includes(a)||r.description.toLowerCase().includes(a)||r.content.toLowerCase().includes(a))}if(s.location){const a=s.location.toLowerCase();t=t.filter(r=>{var i;return(i=r.location)==null?void 0:i.toLowerCase().includes(a)})}return s.dateFrom&&(t=t.filter(a=>new Date(a.date)>=s.dateFrom)),s.dateTo&&(t=t.filter(a=>new Date(a.date)<=s.dateTo)),t},Pi=async()=>{console.log("Fetching real pricing data from Ministry of Agriculture API");const s=await ks.get("commodity-prices/",void 0,{results:[]});console.log("Received real commodity price data:",s);const t=s.results.map(a=>({id:a.id.toString(),commodity:a.commodity_name||"Unknown commodity",market:a.market_name||"Unknown market",price:parseFloat(a.price)||0,unit:a.unit||"Kg",date:a.date_recorded||new Date().toISOString().split("T")[0],county:a.county_name||"Unknown county"}));return console.log(`Successfully fetched ${t.length} real price records from Ministry API`),t};let Fe={amisPriceHistory:[],kilimoStatsHistory:[],lastUpdates:{amisPrices:"",kilimoStats:"",archive:""},countyPriceSnapshots:{},commodityPricesByCounty:{},headlines:[]};const Ti=async()=>{try{console.log("Running daily job to fetch AMIS Kenya prices for all 47 counties...");const s=Date.now(),t=await Pi(),a=t.map(d=>({...d,fetchDate:new Date().toISOString(),processingTime:Date.now()-s})),r={},i={};t.forEach(d=>{r[d.county]||(r[d.county]=[]),r[d.county].push(d),i[d.commodity]||(i[d.commodity]={}),i[d.commodity][d.county]||(i[d.commodity][d.county]=[]),i[d.commodity][d.county].push(d)}),Fe.amisPriceHistory.push(...a),Fe.countyPriceSnapshots=r,Fe.commodityPricesByCounty=i,Fe.lastUpdates.amisPrices=new Date().toISOString();const c=[],o=[...Object.keys(r)].sort(()=>.5-Math.random());o.slice(0,Math.min(5,o.length)).forEach(d=>{const u=r[d];if(u&&u.length>0){const x=Math.floor(Math.random()*u.length),f=u[x];c.push(`${d}: ${f.commodity} selling at KES ${f.price} per ${f.unit} at ${f.market}`)}});const m=Object.keys(r).length,p=Object.keys(i).length;return c.push(`Today's update: Prices for ${p} commodities across ${m} counties of Kenya`),Fe.headlines=c,console.log(`AMIS Kenya data fetch completed. Processed ${t.length} price records across ${m} counties.`),console.log(`Generated ${c.length} headlines`),{success:!0,recordsProcessed:t.length,countiesCovered:m,commoditiesCovered:p,executionTime:Date.now()-s,headlines:c,lastUpdate:Fe.lastUpdates.amisPrices}}catch(s){return console.error("Error in daily AMIS Kenya job:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error",lastUpdate:Fe.lastUpdates.amisPrices}}},Di=async()=>{try{console.log("Running weekly job to update Kilimo statistics...");const s=Date.now(),t=await ft(),a=t.map(c=>({...c,fetchDate:new Date().toISOString(),processingTime:Date.now()-s}));Fe.kilimoStatsHistory.push(...a),Fe.lastUpdates.kilimoStats=new Date().toISOString();const r=[...new Set(t.map(c=>c.category).filter(Boolean))],i=r.length>0?`Updated ${r.length} agricultural categories covering ${[...new Set(t.map(c=>c.county))].length} counties`:"No new Kilimo statistics available this week";return console.log(`Kilimo stats update completed. Processed ${t.length} statistical records.`),console.log(`HEADLINE: ${i}`),{success:!0,recordsProcessed:t.length,categoriesUpdated:r.length,executionTime:Date.now()-s,headline:i,lastUpdate:Fe.lastUpdates.kilimoStats}}catch(s){return console.error("Error in weekly Kilimo stats job:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error",lastUpdate:Fe.lastUpdates.kilimoStats}}},Mi=async()=>{try{console.log("Running monthly archiving job for historical data...");const s=Date.now();await qs(2e3);const t=Fe.amisPriceHistory.length,a=Fe.kilimoStatsHistory.length;Fe.lastUpdates.archive=new Date().toISOString();const r=`Monthly archive complete: Processed ${t} AMIS Kenya records and ${a} Kilimo statistics for long-term trend analysis`;return console.log(r),{success:!0,amisRecordsArchived:t,kilimoRecordsArchived:a,executionTime:Date.now()-s,headline:r,lastUpdate:Fe.lastUpdates.archive}}catch(s){return console.error("Error in monthly archiving job:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error",lastUpdate:Fe.lastUpdates.archive}}},io=async()=>{const s={amisJob:await Ti(),kilimoJob:await Di(),archiveJob:await Mi()};return console.log("All cron jobs completed:",s),s},no=async()=>{console.log("Testing data extraction from Kilimo API and AMIS Kenya...");try{console.log("Fetching data from Kilimo API...");const s=Date.now(),t=await ft(),a=Date.now()-s;console.log(`Kilimo API returned ${t.length} records in ${a}ms`),console.log("Sample Kilimo data:",t.slice(0,2)),console.log("Fetching data from AMIS Kenya...");const r=Date.now(),i=await Pi(),c=Date.now()-r;return console.log(`AMIS Kenya returned ${i.length} records in ${c}ms`),console.log("Sample AMIS Kenya data:",i.slice(0,2)),{success:!0,kilimo:{recordCount:t.length,executionTime:a,sample:t.slice(0,3)},amis:{recordCount:i.length,executionTime:c,sample:i.slice(0,3)}}}catch(s){return console.error("Error during data extraction test:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}},Fi=async s=>{const{data:{user:t}}=await F.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:a,error:r}=await F.from("market_linkages").insert({created_by:t.id,title:s.title,description:s.description,linkage_type:s.linkage_type,crops_involved:s.crops_involved,counties:s.counties,requirements:s.requirements,benefits:s.benefits,contact_info:s.contact_info,application_deadline:s.application_deadline,start_date:s.start_date,duration_months:s.duration_months,minimum_quantity:s.minimum_quantity,price_range:s.price_range,max_participants:s.max_participants}).select().single();if(r)throw r;return a},Ei=async s=>{let t=F.from("market_linkages").select(`
      *,
      profiles:created_by (
        full_name,
        contact_number
      )
    `);s!=null&&s.linkage_type&&(t=t.eq("linkage_type",s.linkage_type)),s!=null&&s.county&&(t=t.contains("counties",[s.county])),s!=null&&s.crop&&(t=t.contains("crops_involved",[s.crop])),(s==null?void 0:s.activeOnly)!==!1&&(t=t.eq("status","active"));const{data:a,error:r}=await t.order("created_at",{ascending:!1});if(r)throw r;return a},lo=async s=>{const{data:t,error:a}=await F.from("market_linkages").select("participants_count").eq("id",s).single();if(a)throw a;const{data:r,error:i}=await F.from("market_linkages").update({participants_count:(t.participants_count||0)+1}).eq("id",s).select().single();if(i)throw i;return r},be=l.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...r},i)=>e.jsx(zr,{ref:i,decorative:a,orientation:t,className:z("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));be.displayName=zr.displayName;const co=({item:s,onClose:t})=>{const a=l.useRef(null),r={agriculture:"bg-sage-500 text-white hover:bg-sage-600",tender:"bg-soil-500 text-white hover:bg-soil-600","supply-chain":"bg-blue-500 text-white hover:bg-blue-600"};l.useEffect(()=>{const c=o=>{o.key==="Escape"&&t()},n=o=>{a.current&&!a.current.contains(o.target)&&t()};return document.addEventListener("keydown",c),document.addEventListener("mousedown",n),document.body.classList.add("overflow-hidden"),()=>{document.removeEventListener("keydown",c),document.removeEventListener("mousedown",n),document.body.classList.remove("overflow-hidden")}},[t]);const i=s.content?s.content.split(/\d+\)/).filter(c=>c.trim().length>0).map((c,n)=>e.jsxs("p",{className:"mb-4",children:[n>0&&e.jsxs("span",{className:"font-medium",children:[n,")"]}),c]},n)):[e.jsx("p",{className:"mb-4",children:"No detailed content available."},"no-content")];return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 md:p-8 animate-fade-in",children:e.jsxs(w,{ref:a,className:"w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-xl animate-fade-up",children:[e.jsxs(k,{className:"p-6 flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(M,{className:(r[s.category]||"bg-secondary")+" mb-2",children:Ai(s.category)}),e.jsx("h2",{className:"text-2xl font-bold",children:s.title})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full",children:e.jsx(Ue,{className:"h-5 w-5"})})]}),e.jsx(be,{}),e.jsx(C,{className:"p-6 flex-grow overflow-y-auto",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"space-y-1 text-sm mb-2",children:[e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Published: ",new Date(s.date).toLocaleDateString()]}),s.location&&e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Location: ",s.location]}),s.deadline&&e.jsxs("div",{className:"flex items-center text-amber-600 font-medium mb-2",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Deadline: ",s.deadline]}),s.contact&&e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Contact: ",s.contact]})]}),e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg border border-border mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:s.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Details"}),e.jsx("div",{className:"text-foreground/90",children:i})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((c,n)=>e.jsxs("span",{className:"text-sm px-3 py-1 rounded-full bg-secondary text-secondary-foreground",children:[e.jsx(Et,{className:"h-3.5 w-3.5 inline mr-1.5"}),c]},n))})]})]})}),e.jsx(be,{}),e.jsxs(re,{className:"p-6 flex justify-between items-center bg-muted/20",children:[e.jsxs("div",{className:"text-sm",children:["Source: ",e.jsx("span",{className:"font-medium",children:s.source})]}),s.url&&e.jsx(N,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:["Visit Source ",e.jsx(Je,{className:"ml-2 h-4 w-4"})]})})]})]})})},oo=({activeTab:s,setActiveTab:t,hideTenderTabs:a=!1})=>e.jsx(ue,{value:s,onValueChange:r=>t(r),children:e.jsxs(me,{className:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mb-6",children:[e.jsx(R,{value:"all",className:"flex items-center gap-2",children:e.jsx("span",{children:"All"})}),e.jsxs(R,{value:"agriculture",className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-4 w-4"}),e.jsx("span",{children:"Agricultural Issues"})]}),e.jsxs(R,{value:"solutions",className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{children:"Innovative Solutions"})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsxs(R,{value:"tender",className:"flex items-center gap-2",children:[e.jsx(Mn,{className:"h-4 w-4"}),e.jsx("span",{children:"Tender Opportunities"})]}),e.jsxs(R,{value:"awarded-tender",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-4 w-4"}),e.jsx("span",{children:"Awarded Tenders"})]})]})]})}),mo=En,uo=In,Ii=l.forwardRef(({className:s,align:t="center",sideOffset:a=4,...r},i)=>e.jsx(Fn,{children:e.jsx(Kr,{ref:i,align:t,sideOffset:a,className:z("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));Ii.displayName=Kr.displayName;function ya({className:s,classNames:t,showOutsideDays:a=!0,...r}){return e.jsx(Ln,{showOutsideDays:a,className:z("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:z(ut({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:z(ut({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...i})=>e.jsx(qn,{className:"h-4 w-4"}),IconRight:({...i})=>e.jsx(ba,{className:"h-4 w-4"})},...r})}ya.displayName="Calendar";const xo=({location:s,setLocation:t,dateFrom:a,setDateFrom:r,dateTo:i,setDateTo:c,isFiltersOpen:n,setIsFiltersOpen:o,handleSearch:h})=>{const m=()=>{t(""),r(void 0),c(void 0),o(!1)};return e.jsxs(mo,{open:n,onOpenChange:o,children:[e.jsx(uo,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:"md:w-auto w-full",children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Filters",(s||a||i)&&e.jsx("span",{className:"ml-2 inline-flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground",children:[s,a,i].filter(Boolean).length})]})}),e.jsx(Ii,{className:"w-80",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Filter Results"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"location",children:"Location"}),e.jsx(D,{id:"location",placeholder:"e.g. Nairobi, Nakuru...",value:s,onChange:p=>t(p.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"date-from",className:"text-xs",children:"From"}),e.jsx(ya,{mode:"single",selected:a,onSelect:r,className:"border rounded-md"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"date-to",className:"text-xs",children:"To"}),e.jsx(ya,{mode:"single",selected:i,onSelect:c,className:"border rounded-md"})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:m,className:"text-sm",children:[e.jsx(Ue,{className:"mr-1 h-4 w-4"}),"Clear"]}),e.jsx(N,{size:"sm",onClick:()=>{o(!1),h()},className:"text-sm",children:"Apply Filters"})]})]})})]})},ho=({query:s,setQuery:t,location:a,setLocation:r,dateFrom:i,setDateFrom:c,dateTo:n,setDateTo:o,isFiltersOpen:h,setIsFiltersOpen:m,handleSearch:p})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5"}),e.jsx(D,{placeholder:"Search for keywords...",value:s,onChange:d=>t(d.target.value),onKeyDown:d=>d.key==="Enter"&&p(),className:"pl-10"})]}),e.jsx(xo,{location:a,setLocation:r,dateFrom:i,setDateFrom:c,dateTo:n,setDateTo:o,isFiltersOpen:h,setIsFiltersOpen:m,handleSearch:p}),e.jsxs(N,{onClick:p,className:"md:w-auto w-full",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Search"]})]}),po=({item:s,onClick:t})=>{const{toast:a}=X(),r={agriculture:"bg-sage-100 text-sage-800 hover:bg-sage-200",tender:"bg-soil-100 text-soil-800 hover:bg-soil-200",solutions:"bg-blue-100 text-blue-800 hover:bg-blue-200","awarded-tender":"bg-amber-100 text-amber-800 hover:bg-amber-200"},i=(h,m)=>h?h.length<=m?h:h.substring(0,m)+"...":"",c=h=>{h.stopPropagation(),(!s.url||!n(s.url))&&(h.preventDefault(),a({title:"Invalid Link",description:"This URL cannot be verified or is invalid.",variant:"destructive"}))};function n(h){try{const m=new URL(h);return m.protocol==="http:"||m.protocol==="https:"}catch{return!1}}const o=h=>{if(!h)return"No source URL";try{return new URL(h).hostname}catch{return"Invalid URL"}};return e.jsxs(w,{className:"overflow-hidden transition-all duration-300 hover:shadow-md border border-border group animate-fade-in",children:[e.jsxs(C,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx(M,{className:r[s.category]||"bg-secondary",children:Ai(s.category)}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-3.5 w-3.5 mr-1"}),new Date(s.date).toLocaleDateString()]})]}),e.jsx("h3",{className:"text-xl font-semibold mb-2 group-hover:text-primary transition-colors",children:s.title}),e.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:s.description}),s.location&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-2",children:[e.jsx(Z,{className:"h-3.5 w-3.5 mr-1.5"}),s.location]}),s.deadline&&e.jsxs("div",{className:"text-sm font-medium mb-2",children:["Deadline: ",e.jsx("span",{className:"text-amber-600",children:s.deadline})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[s.tags.slice(0,3).map((h,m)=>e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-secondary text-secondary-foreground",children:h},m)),s.tags.length>3&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-secondary text-secondary-foreground",children:["+",s.tags.length-3," more"]})]})]}),e.jsxs(re,{className:"px-6 py-4 bg-muted/30 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s.url?e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",onClick:c,className:"flex items-center hover:underline",children:[o(s.url),e.jsx(Je,{className:"h-3 w-3 ml-1"})]}):e.jsxs("span",{children:["Source: ",i(s.source||"Unknown",30)]})}),e.jsx(N,{size:"sm",onClick:t,children:"View Details"})]})]})},go=({results:s,isLoading:t,activeTab:a,onItemClick:r})=>{if(t)return e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(Lt,{className:"h-10 w-10 text-primary animate-spin"})});if(s.length===0)return e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No results found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters to find what you're looking for."})]});const i=s.filter(c=>!c.url||!jo(c.url)?(console.warn(`Filtering out result with invalid URL: ${c.title}`),!1):!0);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3 text-muted-foreground",children:["Found ",i.length," ",a!=="all"?a:"results"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(c=>e.jsx(po,{item:c,onClick:()=>r(c)},c.id))})]})};function jo(s){try{const t=new URL(s);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}const fo=({id:s})=>{const[t,a]=l.useState("solutions"),[r,i]=l.useState(""),[c,n]=l.useState(""),[o,h]=l.useState(void 0),[m,p]=l.useState(void 0),[d,u]=l.useState(!1),[x,f]=l.useState([]),[g,v]=l.useState(!1),[j,y]=l.useState(null),{toast:b}=X(),T=async()=>{u(!0);const L={query:r.trim()===""?void 0:r,location:c.trim()===""?void 0:c,dateFrom:o,dateTo:m};t!=="all"&&(L.category=t);try{const G=await ro(L);let I=G.filter(U=>U.category!=="tender"&&U.category!=="awarded-tender");I=I.filter(U=>U.url&&!Xc(U.url)?(console.warn(`Filtered item with unverified URL: ${U.title}`),!1):eo(U)?!0:(console.warn(`Filtered possibly illegitimate content: ${U.title}`),!1)),console.log(`Showing ${I.length} verified results out of ${G.length} total results`),I.length===0&&G.length>0&&b({title:"Verification Results",description:"Some results were filtered out because they could not be verified with legitimate sources.",duration:5e3}),f(I)}catch(G){console.error("Error fetching data:",G),b({title:"Search Error",description:"Could not complete search. Please try again later.",variant:"destructive"}),f([])}finally{u(!1)}};l.useEffect(()=>{T()},[t]);const E=L=>{y(L)},P=()=>{y(null)};return e.jsxs("section",{id:s||"search-section",className:"py-20 px-6 md:px-12 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12 animate-fade-up",children:[e.jsx("div",{className:"inline-block px-3 py-1 rounded-full bg-secondary text-secondary-foreground text-sm font-medium mb-2",children:"Search & Discover"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Find Agricultural Information"}),e.jsx("p",{className:"text-lg text-foreground/80 max-w-3xl mx-auto",children:"Search across verified agricultural issues and innovative solutions throughout Kenya."})]}),e.jsxs(w,{className:"p-6 rounded-xl shadow-sm bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border border-border",children:[e.jsx(oo,{activeTab:t,setActiveTab:a,hideTenderTabs:!0}),e.jsx(ho,{query:r,setQuery:i,location:c,setLocation:n,dateFrom:o,setDateFrom:h,dateTo:m,setDateTo:p,isFiltersOpen:g,setIsFiltersOpen:v,handleSearch:T}),e.jsx(go,{results:x,isLoading:d,activeTab:t,onItemClick:E})]}),j&&e.jsx(co,{item:j,onClose:P})]})},vo=[{icon:Gs,label:"Home",href:"/"},{icon:Ds,label:"Marketplace",href:"/marketplace"},{icon:ne,label:"Prices",href:"/price-trends"},{icon:Vt,label:"Bluetooth",href:"/bluetooth-marketplace"},{icon:Ke,label:"Community",href:"/community-forums"},{icon:Z,label:"Logistics",href:"/logistics"},{icon:ee,label:"Traders",href:"/service-providers"},{icon:Ks,label:"Profile",href:"/profile"},{icon:Ht,label:"More",href:"/more"}];function us(){const s=bs();return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t border-border z-50 md:hidden",children:e.jsx("div",{className:"grid grid-cols-5 gap-1 p-2",children:vo.slice(0,5).map(t=>{const a=t.icon,r=s.pathname===t.href;return e.jsxs(V,{to:t.href,className:z("flex flex-col items-center justify-center py-2 px-1 rounded-md transition-colors min-h-[60px]",r?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[e.jsx(a,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:t.label})]},t.href)})})})}const yo=()=>{const[s,t]=l.useState(null),[a,r]=l.useState(!1);l.useEffect(()=>{const n=o=>{o.preventDefault(),t(o),r(!0)};return window.addEventListener("beforeinstallprompt",n),()=>{window.removeEventListener("beforeinstallprompt",n)}},[]);const i=async()=>{if(!s)return;s.prompt();const{outcome:n}=await s.userChoice;n==="accepted"&&(t(null),r(!1))},c=()=>{r(!1)};return!a||!s?null:e.jsxs(w,{className:"fixed bottom-4 right-4 w-80 z-50 shadow-lg",children:[e.jsxs(k,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(Or,{className:"h-5 w-5"}),"Install AgriConnect"]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:c,className:"h-8 w-8 p-0",children:e.jsx(Ue,{className:"h-4 w-4"})})]}),e.jsx(O,{children:"Install our app for offline access and better performance"})]}),e.jsx(C,{className:"pt-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:i,className:"flex-1",children:"Install App"}),e.jsx(N,{variant:"outline",onClick:c,children:"Not Now"})]})})]})},No=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx(Oc,{}),e.jsx(fo,{}),e.jsx("section",{className:"lg:hidden bg-background border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs(V,{to:"/farm-input-marketplace",className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-primary/5 hover:bg-primary/10 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Ye,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-xs font-medium text-center",children:"Marketplace"})]}),e.jsxs(V,{to:"/service-providers",className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-primary/5 hover:bg-primary/10 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-xs font-medium text-center",children:"Services"})]}),e.jsxs(V,{to:"/commodity-trading",className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-primary/5 hover:bg-primary/10 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-xs font-medium text-center",children:"Trading"})]}),e.jsxs(V,{to:"/community-forum",className:"flex flex-col items-center gap-2 p-3 rounded-lg bg-primary/5 hover:bg-primary/10 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-xs font-medium text-center",children:"Community"})]})]})})}),e.jsx("section",{className:"py-8 bg-gradient-to-r from-primary/5 to-primary/10",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Real-time Market Data"}),e.jsx("p",{className:"text-muted-foreground",children:"Live prices and trends"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{className:"text-center bg-background/80 backdrop-blur",children:e.jsxs(C,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$2.40"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Maize/kg"}),e.jsx("div",{className:"text-xs text-green-600",children:"+5.2%"})]})}),e.jsx(w,{className:"text-center bg-background/80 backdrop-blur",children:e.jsxs(C,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$3.20"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Beans/kg"}),e.jsx("div",{className:"text-xs text-green-600",children:"+2.1%"})]})}),e.jsx(w,{className:"text-center bg-background/80 backdrop-blur",children:e.jsxs(C,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:"$1.80"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rice/kg"}),e.jsx("div",{className:"text-xs text-red-600",children:"-1.3%"})]})}),e.jsx(w,{className:"text-center bg-background/80 backdrop-blur",children:e.jsxs(C,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$4.50"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Coffee/kg"}),e.jsx("div",{className:"text-xs text-green-600",children:"+8.7%"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(V,{to:"/kilimo-ams-data",children:e.jsx(N,{variant:"outline",size:"sm",children:"View All Markets"})})})]})}),e.jsx("section",{className:"py-12 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold mb-4",children:"Platform Features"}),e.jsx("p",{className:"text-muted-foreground",children:"Everything you need for agricultural success"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(Ye,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Farm Inputs"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/farm-input-marketplace",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Shop Now"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(os,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Equipment"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/equipment-marketplace",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Browse"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(De,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Trading"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/commodity-trading",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Trade"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(je,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Logistics"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/logistics",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Find Transport"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(Z,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"City Markets"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/city-markets",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"View Markets"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx($t,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Farming Portal"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/farmer-portal",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Start Farming"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(Vt,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Bluetooth Market"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/bluetooth-marketplace",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Connect"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(ae,{className:"h-6 w-6 text-primary"})}),e.jsx(S,{className:"text-sm lg:text-base",children:"Supply Chain"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/supply-chain-dashboard",children:e.jsx(N,{size:"sm",className:"w-full text-xs",children:"Track"})})})]})]})]})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Service Providers"}),e.jsx("p",{className:"text-muted-foreground",children:"Professional agricultural services"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(ee,{className:"h-6 w-6 text-secondary"})}),e.jsx(S,{className:"text-sm",children:"Veterinary Services"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/veterinary-services",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Find Vets"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(Ze,{className:"h-6 w-6 text-secondary"})}),e.jsx(S,{className:"text-sm",children:"Feed & Nutrition"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/feed-nutrition",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Get Advice"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(Z,{className:"h-6 w-6 text-secondary"})}),e.jsx(S,{className:"text-sm",children:"Farm Construction"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/farm-construction",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Build"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-secondary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(ee,{className:"h-6 w-6 text-secondary"})}),e.jsx(S,{className:"text-sm",children:"Consultancies"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/consultancies",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Consult"})})})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(V,{to:"/service-providers",children:e.jsx(N,{children:"View All Service Providers"})})})]})}),e.jsx("section",{className:"py-8 bg-muted/20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Key Features"}),e.jsx("p",{className:"text-muted-foreground",children:"Essential tools for agricultural success"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx(ee,{className:"h-6 w-6 text-primary mx-auto mb-2"}),e.jsx(S,{className:"text-sm",children:"Community Forum"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/community-forum",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Join"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx(os,{className:"h-6 w-6 text-primary mx-auto mb-2"}),e.jsx(S,{className:"text-sm",children:"Food Rescue"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/food-rescue-dashboard",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Rescue"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx(ne,{className:"h-6 w-6 text-primary mx-auto mb-2"}),e.jsx(S,{className:"text-sm",children:"Auctions"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/auction-dashboard",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Bid"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx(ae,{className:"h-6 w-6 text-primary mx-auto mb-2"}),e.jsx(S,{className:"text-sm",children:"Barter Trade"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/barter-trade",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Exchange"})})})]}),e.jsxs(w,{className:"text-center hover:shadow-md transition-shadow",children:[e.jsxs(k,{className:"pb-3",children:[e.jsx(De,{className:"h-6 w-6 text-primary mx-auto mb-2"}),e.jsx(S,{className:"text-sm",children:"Contract Farming"})]}),e.jsx(C,{className:"pt-0",children:e.jsx(V,{to:"/contract-farming",children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Browse"})})})]})]})]})}),e.jsx(Jc,{}),e.jsx(yo,{}),e.jsx("footer",{className:"bg-background border-t",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"Platform"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx(V,{to:"/commodity-trading",className:"block text-muted-foreground hover:text-foreground",children:"Commodity Trading"}),e.jsx(V,{to:"/logistics",className:"block text-muted-foreground hover:text-foreground",children:"Logistics"}),e.jsx(V,{to:"/service-providers",className:"block text-muted-foreground hover:text-foreground",children:"Service Providers"}),e.jsx(V,{to:"/farm-input-marketplace",className:"block text-muted-foreground hover:text-foreground",children:"Farm Input Marketplace"}),e.jsx(V,{to:"/equipment-marketplace",className:"block text-muted-foreground hover:text-foreground",children:"Equipment Marketplace"}),e.jsx(V,{to:"/agricultural-marketplace",className:"block text-muted-foreground hover:text-foreground",children:"Agricultural Marketplace"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"Support"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx(V,{to:"/about",className:"block text-muted-foreground hover:text-foreground",children:"FAQ"}),e.jsx(V,{to:"/contact",className:"block text-muted-foreground hover:text-foreground",children:"Contact"}),e.jsx(V,{to:"/community-forum",className:"block text-muted-foreground hover:text-foreground",children:"Community Forum"}),e.jsx(V,{to:"/partner-with-us",className:"block text-muted-foreground hover:text-foreground",children:"Partner with us"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"Features"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx(V,{to:"/kilimo-ams-data",className:"block text-muted-foreground hover:text-foreground",children:"Market Data"}),e.jsx(V,{to:"/sentiment-analysis",className:"block text-muted-foreground hover:text-foreground",children:"Analytics"}),e.jsx(V,{to:"/city-markets",className:"block text-muted-foreground hover:text-foreground",children:"City Markets"}),e.jsx(V,{to:"/veterinary-services",className:"block text-muted-foreground hover:text-foreground",children:"Veterinary Services"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"SokoConnect"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Connecting farmers, traders, and service providers for a better agricultural ecosystem."}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsx(V,{to:"/about",className:"block text-muted-foreground hover:text-foreground",children:"About Us"}),e.jsx(V,{to:"/contact",className:"block text-muted-foreground hover:text-foreground",children:"Contact"})]})]})]}),e.jsx("div",{className:"border-t mt-6 pt-4 text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"© 2024 SokoConnect. All rights reserved."})})]})}),e.jsx(us,{}),e.jsx("div",{className:"pb-20 md:pb-0"})]}),bo=()=>{const s=ve(),t=[{title:"Farm Input Marketplace",description:"Quality agricultural inputs from verified suppliers",icon:e.jsx(ae,{className:"h-8 w-8 text-primary"}),route:"/farm-input-marketplace",features:["Verified Suppliers","Quality Guarantee","Bulk Discounts","Fast Delivery"],stats:{suppliers:"500+",products:"2,000+"}},{title:"Agricultural Marketplace",description:"Buy and sell produce, livestock, and agricultural products",icon:e.jsx(Oe,{className:"h-8 w-8 text-primary"}),route:"/agricultural-marketplace",features:["Fresh Produce","Livestock Trading","Direct Farm Sales","Price Transparency"],stats:{farmers:"2,000+",listings:"5,000+"}},{title:"Bulk Orders",description:"Organize group purchases for better prices",icon:e.jsx(ee,{className:"h-8 w-8 text-primary"}),route:"/bulk-orders",features:["Group Buying","Volume Discounts","Shared Logistics","Community Orders"],stats:{orders:"300+",savings:"30%"}},{title:"City Markets",description:"Connect with local city and county markets",icon:e.jsx(Z,{className:"h-8 w-8 text-primary"}),route:"/city-markets",features:["Local Markets","Market Info","Trading Hours","Location Services"],stats:{markets:"150+",counties:"47"}}],a=[{title:"Post a Listing",description:"Sell your produce to buyers nationwide",icon:e.jsx(Oe,{className:"h-6 w-6"}),action:()=>s("/create-listing")},{title:"Find Suppliers",description:"Source quality inputs for your farm",icon:e.jsx(ae,{className:"h-6 w-6"}),action:()=>s("/farm-input-marketplace")},{title:"Join Bulk Order",description:"Save money through group purchases",icon:e.jsx(ee,{className:"h-6 w-6"}),action:()=>s("/bulk-orders")},{title:"Track Shipment",description:"Monitor your orders and deliveries",icon:e.jsx(je,{className:"h-6 w-6"}),action:()=>s("/logistics-optimization")}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("section",{className:"bg-gradient-to-r from-primary to-primary-foreground text-primary-foreground py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Agricultural Marketplace"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto",children:"Connect farmers, suppliers, and buyers in Kenya's largest agricultural trading platform. Find everything you need from farm inputs to fresh produce markets."}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsxs(N,{size:"lg",variant:"secondary",onClick:()=>s("/auth"),children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Start Trading"]})})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:"Quick Actions"}),e.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:a.map((r,i)=>e.jsx(w,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:r.action,children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:r.icon})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:r.title}),e.jsx("p",{className:"text-muted-foreground text-sm",children:r.description})]})},i))})]}),e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Explore Our Marketplaces"}),e.jsx("div",{className:"grid lg:grid-cols-2 gap-8",children:t.map((r,i)=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:r.icon}),e.jsxs("div",{children:[e.jsx(S,{className:"text-xl",children:r.title}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r.description})]})]})})}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Features"}),e.jsx("div",{className:"space-y-2",children:r.features.map((c,n)=>e.jsx(M,{variant:"outline",className:"mr-2",children:c},n))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Stats"}),e.jsx("div",{className:"space-y-1 text-sm text-muted-foreground",children:Object.entries(r.stats).map(([c,n])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"capitalize",children:[c,":"]}),e.jsx("span",{className:"font-medium",children:n})]},c))})]})]}),e.jsxs(N,{className:"w-full",onClick:()=>s(r.route),children:["Explore ",r.title,e.jsx(Vs,{className:"h-4 w-4 ml-2"})]})]})]},i))})]}),e.jsxs("section",{className:"mb-16 bg-muted/30 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Market Insights"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Stay informed with real-time market data and trends"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"KES 2.5B+"}),e.jsx("div",{className:"text-muted-foreground",children:"Total Trade Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:"150K+"}),e.jsx("div",{className:"text-muted-foreground",children:"Active Listings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"95%"}),e.jsx("div",{className:"text-muted-foreground",children:"Successful Transactions"})]})]})]}),e.jsx("section",{className:"text-center",children:e.jsx(w,{className:"bg-primary text-primary-foreground",children:e.jsxs(C,{className:"pt-8 pb-8",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to Start Trading?"}),e.jsx("p",{className:"text-lg mb-6 opacity-90",children:"Join thousands of farmers and suppliers already trading on SokoConnect"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(N,{variant:"secondary",size:"lg",onClick:()=>s("/auth"),children:[e.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Create Account"]}),e.jsx(N,{variant:"outline",size:"lg",className:"bg-transparent border-white text-white hover:bg-white hover:text-primary",onClick:()=>s("/market-insights"),children:"View Market Data"})]})]})})})]})]})},Ta=l.forwardRef(({className:s,value:t,...a},r)=>e.jsx(Br,{ref:r,className:z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx(Rn,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ta.displayName=Br.displayName;const wo=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(""),[i,c]=l.useState(!0),{toast:n}=X();l.useEffect(()=>{o()},[]);const o=async()=>{try{c(!0);const{data:u,error:x}=await F.from("bulk_orders").select("*").eq("status","active").order("created_at",{ascending:!1});if(x)throw x;t(u||[])}catch(u){console.error("Error fetching bulk orders:",u),n({title:"Error",description:"Failed to load bulk orders. Please try again.",variant:"destructive"})}finally{c(!1)}},h=async u=>{try{n({title:"Joined Order",description:"You have successfully joined this bulk order!"})}catch(x){console.error("Error joining order:",x),n({title:"Error",description:"Failed to join order. Please try again.",variant:"destructive"})}},m=s.filter(u=>u.product_type.toLowerCase().includes(a.toLowerCase())||u.location.toLowerCase().includes(a.toLowerCase())),p=u=>{const x=Math.ceil(u.quantity/100);return Math.min(u.current_participants/x*100,100)},d=u=>{const x=new Date(u),f=new Date,g=x.getTime()-f.getTime(),v=Math.ceil(g/(1e3*60*60*24));return Math.max(0,v)};return i?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg",children:"Loading bulk orders..."})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("section",{className:"relative py-24 bg-gradient-to-br from-green-600 via-green-500 to-emerald-500 dark:from-green-900 dark:via-green-800 dark:to-emerald-900 text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.05] bg-[size:20px_20px]"}),e.jsxs("div",{className:"container mx-auto px-4 text-center relative z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6 drop-shadow-lg",children:"Bulk Orders"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto drop-shadow-md opacity-95",children:"Join group purchases to get better prices on agricultural inputs and products. Organize with other farmers in your area for maximum savings."}),e.jsxs(N,{size:"lg",variant:"secondary",className:"shadow-xl hover:shadow-2xl transition-shadow",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Bulk Order"]})]})]}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{className:"relative mb-4 md:mb-0",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search bulk orders...",value:a,onChange:u=>r(u.target.value),className:"pl-10 md:w-64"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.length," active bulk orders"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[e.jsx(w,{className:"text-center",children:e.jsxs(C,{className:"pt-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Es,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Save Up to 30%"}),e.jsx("p",{className:"text-muted-foreground",children:"Get wholesale prices through group buying power"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(C,{className:"pt-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ee,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Community Driven"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with farmers in your area"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(C,{className:"pt-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ae,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Quality Assured"}),e.jsx("p",{className:"text-muted-foreground",children:"Verified suppliers and products"})]})})]}),e.jsx("div",{className:"grid lg:grid-cols-2 gap-6",children:m.map(u=>{const x=p(u),f=d(u.deadline);return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl mb-2",children:u.product_type}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:u.location})]})]}),e.jsxs(M,{variant:f>7?"default":"destructive",children:[f," days left"]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:u.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Quantity Needed"}),e.jsxs("div",{className:"font-medium",children:[u.quantity," ",u.unit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Target Price"}),e.jsxs("div",{className:"font-medium",children:["KES ",u.target_price,"/",u.unit]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Participants"}),e.jsxs("span",{className:"text-sm font-medium",children:[u.current_participants," joined"]})]}),e.jsx(Ta,{value:x,className:"h-2"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:["Deadline: ",new Date(u.deadline).toLocaleDateString()]})]}),e.jsxs("div",{className:"pt-4 border-t flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),e.jsxs(N,{size:"sm",className:"flex-1",onClick:()=>h(u.id),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Join Order"]})]})]})})]},u.id)})}),m.length===0&&!i&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx(ae,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No bulk orders found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Be the first to create a bulk order in your area."}),e.jsxs(N,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Bulk Order"]})]})}),e.jsxs("section",{className:"mt-16 bg-muted/30 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"How Bulk Orders Work"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Simple steps to save money through group purchasing"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary",children:"1"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Find or Create"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Browse existing orders or create your own"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary",children:"2"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Join & Commit"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Commit to your quantity and payment"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary",children:"3"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Reach Target"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Wait for minimum participants to join"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary",children:"4"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Get Delivery"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Receive your order at wholesale prices"})]})]})]})]})]})},Co=[{name:"Home",href:"/",icon:Gs},{name:"Market Data",href:"/kilimo-ams-data",icon:ne},{name:"Logistics",href:"/logistics",icon:je},{name:"Equipment Marketplace",href:"/EquipmentMarketplace",icon:je},{name:"Service Providers",href:"/service-providers",icon:ee},{name:"Advertise Business",href:"/business-marketing",icon:Mt,highlight:!0},{name:"Trading",href:"/commodity-trading",icon:De},{name:"Community",href:"/community-forum",icon:cs},{name:"Analytics",href:"/sentiment-analysis",icon:Ye},{name:"Export Opportunities",href:"/ExportMarketOpportunities",icon:Ie}],ns=()=>{const s=bs();return e.jsxs("nav",{className:"hidden md:flex items-center space-x-1",children:[e.jsxs(V,{to:"/",className:"flex items-center space-x-2 mr-6",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"A"})}),e.jsx("span",{className:"hidden lg:inline-block font-bold",children:"SokoConnect"})]}),Co.map(t=>{const a=s.pathname===t.href;return e.jsx(V,{to:t.href,children:e.jsxs(N,{variant:a?"default":"ghost",size:"sm",className:z("flex items-center space-x-2",t.highlight&&!a&&"bg-green-50 text-green-700 hover:bg-green-100 border border-green-200",t.highlight&&a&&"bg-green-600 hover:bg-green-700"),children:[e.jsx(t.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:t.name})]})},t.name)})]})},Li=Lr,qi=qr,Ri=({...s})=>e.jsx(Ca,{...s});Ri.displayName=Ca.displayName;const zi=l.forwardRef(({className:s,...t},a)=>e.jsx(Kt,{className:z("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));zi.displayName=Kt.displayName;const ko=$s("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Da=l.forwardRef(({side:s="right",className:t,children:a,...r},i)=>e.jsxs(Ri,{children:[e.jsx(zi,{}),e.jsxs(Ot,{ref:i,className:z(ko({side:s}),t),...r,children:[a,e.jsxs(Ir,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Da.displayName=Ot.displayName;const Ki=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col space-y-2 text-center sm:text-left",s),...t});Ki.displayName="SheetHeader";const Oi=l.forwardRef(({className:s,...t},a)=>e.jsx(Bt,{ref:a,className:z("text-lg font-semibold text-foreground",s),...t}));Oi.displayName=Bt.displayName;const Bi=l.forwardRef(({className:s,...t},a)=>e.jsx(Ut,{ref:a,className:z("text-sm text-muted-foreground",s),...t}));Bi.displayName=Ut.displayName;const So=[{name:"Home",href:"/",icon:Gs},{name:"Market Data",href:"/kilimo-ams-data",icon:ne},{name:"Logistics",href:"/logistics",icon:je},{name:"Service Providers",href:"/service-providers",icon:ee},{name:"Advertise Business",href:"/business-marketing",icon:Mt,highlight:!0},{name:"Trading",href:"/commodity-trading",icon:De},{name:"Community",href:"/community-forum",icon:cs},{name:"Analytics",href:"/sentiment-analysis",icon:Ye},{name:"Donations",href:"/donation-list",icon:De},{name:"Food Rescue",href:"/food-rescue-dashboard",icon:fe},{name:"Auctions",href:"/agent-product-auction-dashboard",icon:ne},{name:"Marketplace",href:"/farm-input-marketplace",icon:Ye},{name:"City Markets",href:"/city-markets",icon:Z},{name:"Animals",href:"/farmer-portal#animals",icon:Ur},{name:"Veterinary",href:"/veterinary-services",icon:he},{name:"Feed & Nutrition",href:"/feed-nutrition",icon:de},{name:"Genetics & Breeding",href:"/genetics-breeding",icon:Ze},{name:"Farm Construction",href:"/farm-construction",icon:Z},{name:"Consultancies",href:"/consultancies",icon:ee}],Ss=()=>{const[s,t]=l.useState(!1),a=bs();return e.jsx("div",{className:"md:hidden",children:e.jsxs(Li,{open:s,onOpenChange:t,children:[e.jsx(qi,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",children:e.jsx(Ht,{className:"h-5 w-5"})})}),e.jsx(Da,{side:"left",className:"w-80",children:e.jsxs("div",{className:"flex flex-col space-y-4 mt-4",children:[e.jsxs(V,{to:"/",className:"flex items-center space-x-2 mb-6",onClick:()=>t(!1),children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold",children:"A"})}),e.jsx("span",{className:"font-bold text-lg",children:"SokoConnect"})]}),So.map(r=>{const i=a.pathname===r.href;return e.jsxs(V,{to:r.href,onClick:()=>t(!1),className:z("flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors",i?"bg-primary text-primary-foreground":r.highlight?"bg-green-50 text-green-700 hover:bg-green-100":"hover:bg-muted"),children:[e.jsx(r.icon,{className:"h-5 w-5"}),e.jsx("span",{children:r.name}),r.highlight&&e.jsx("span",{className:"ml-auto text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:"New"})]},r.name)})]})})]})})},ct=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs($r,{ref:r,className:z("relative overflow-hidden",s),...a,children:[e.jsx(zn,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Ui,{}),e.jsx(Kn,{})]}));ct.displayName=$r.displayName;const Ui=l.forwardRef(({className:s,orientation:t="vertical",...a},r)=>e.jsx(Vr,{ref:r,orientation:t,className:z("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...a,children:e.jsx(On,{className:"relative flex-1 rounded-full bg-border"})}));Ui.displayName=Vr.displayName;const Qs=()=>{const s=bs(),t=[{icon:Gs,label:"Home",path:"/"},{icon:Le,label:"Markets",path:"/marketplace"},{icon:Ds,label:"Orders",path:"/bulk-orders"},{icon:Ke,label:"Forum",path:"/community-forum"}],a=[{label:"Marketplace",path:"/marketplace",category:"Trade"},{label:"Bulk Orders",path:"/bulk-orders",category:"Trade"},{label:"Group Input Orders",path:"/inputs/group-orders",category:"Trade"},{label:"Barter Trade",path:"/barter-trade",category:"Trade"},{label:"Auctions",path:"/auction-dashboard",category:"Trade"},{label:"F2C Marketplace",path:"/f2c-marketplace",category:"Trade"},{label:"Equipment Marketplace",path:"/equipment-marketplace",category:"Trade"},{label:"Farm Input Marketplace",path:"/farm-input-marketplace",category:"Trade"},{label:"Contract Farming",path:"/contract-farming",category:"Contracts"},{label:"Export Opportunities",path:"/export-opportunities",category:"Contracts"},{label:"Food Rescue",path:"/food-rescue-dashboard",category:"Social Impact"},{label:"Donations",path:"/donation-list",category:"Social Impact"},{label:"Logistics",path:"/logistics",category:"Services"},{label:"Service Providers",path:"/service-providers",category:"Services"},{label:"Major Routes",path:"/major-routes",category:"Services"},{label:"Transporter Signup",path:"/transporter-signup",category:"Services"},{label:"Community Forum",path:"/community-forum",category:"Community"},{label:"Carbon Forum",path:"/carbon-forum",category:"Community"},{label:"Training Events",path:"/training-events",category:"Community"},{label:"Farmer Portal",path:"/farmer-portal",category:"Community"},{label:"Success Stories",path:"/farmer-success-stories",category:"Community"},{label:"City Markets",path:"/city-markets",category:"Market Info"},{label:"Market Linkages",path:"/market-linkages",category:"Market Info"},{label:"Price Trends",path:"/price-trends",category:"Market Info"},{label:"Sentiment Analysis",path:"/sentiment-analysis",category:"Market Info"},{label:"Batch Tracking",path:"/batch-tracking",category:"Technology"},{label:"API Management",path:"/api-management",category:"Technology"},{label:"Data Status",path:"/data-status",category:"Technology"},{label:"Weather",path:"/weather",category:"Resources"},{label:"Cooperative Groups",path:"/cooperative-groups",category:"Resources"},{label:"Farm Tourism",path:"/farm-tourism",category:"Resources"},{label:"About",path:"/about",category:"Info"},{label:"Contact",path:"/contact",category:"Info"},{label:"FAQ",path:"/faq",category:"Info"},{label:"Partner With Us",path:"/partner-with-us",category:"Info"}],r=Array.from(new Set(a.map(i=>i.category)));return e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-background border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[t.map(i=>{const c=i.icon,n=s.pathname===i.path;return e.jsxs(V,{to:i.path,className:z("flex flex-col items-center justify-center gap-1 flex-1 h-full transition-colors",n?"text-primary":"text-muted-foreground hover:text-foreground"),children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:i.label})]},i.path)}),e.jsxs(Li,{children:[e.jsx(qi,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"sm",className:"flex flex-col items-center justify-center gap-1 flex-1 h-full",children:[e.jsx(Ht,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"More"})]})}),e.jsxs(Da,{side:"bottom",className:"h-[80vh]",children:[e.jsxs(Ki,{children:[e.jsx(Oi,{children:"All Features"}),e.jsx(Bi,{children:"Access all AgriTender Connect features"})]}),e.jsx(ct,{className:"h-[calc(80vh-100px)] mt-4",children:e.jsx("div",{className:"space-y-6",children:r.map(i=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-sm text-muted-foreground",children:i}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.filter(c=>c.category===i).map(c=>e.jsx(V,{to:c.path,children:e.jsx(N,{variant:"outline",className:"w-full justify-start h-auto py-2",children:e.jsx("span",{className:"text-xs",children:c.label})})},c.path))})]},i))})})]})]})]})})},_o=()=>{const{toast:s}=X(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,h]=l.useState("active");l.useEffect(()=>{m()},[o]);const m=async()=>{try{i(!0);let d=F.from("group_input_orders").select(`
          *,
          profiles:organizer_id (
            full_name
          )
        `);o==="active"?d=d.eq("status","active"):o==="completed"&&(d=d.eq("status","completed"));const{data:u,error:x}=await d.order("created_at",{ascending:!1});if(x)throw x;a(u||[])}catch(d){console.error("Error fetching group orders:",d),s({title:"Error",description:"Failed to load group orders. Please try again.",variant:"destructive"})}finally{i(!1)}},p=t.filter(d=>{var x;return c===""||d.input_name.toLowerCase().includes(c.toLowerCase())||((x=d.description)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||d.location.toLowerCase().includes(c.toLowerCase())});return e.jsxs("div",{className:"flex min-h-screen flex-col pb-20 md:pb-0",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Group Purchasing for Inputs"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Save money by buying farm inputs in bulk with other farmers"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(N,{children:"Express Need"})})]}),e.jsx(ue,{defaultValue:"active",value:o,onValueChange:d=>h(d),className:"mb-6",children:e.jsxs(me,{children:[e.jsx(R,{value:"active",children:"Active Orders"}),e.jsx(R,{value:"completed",children:"Completed"}),e.jsx(R,{value:"all",children:"All Orders"})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(D,{placeholder:"Search by input name, location, or description...",value:c,onChange:d=>n(d.target.value),className:"w-full md:w-2/3 lg:w-1/2"})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(d=>e.jsxs(w,{className:"animate-pulse",children:[e.jsxs(k,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6"})]})]},d))}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(ae,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No group orders found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:o==="active"?"No active group orders match your search. Try different keywords or start a new order.":"No orders found. Check back later or view all orders."}),o!=="all"&&e.jsx(N,{variant:"outline",onClick:()=>h("all"),children:"View All Orders"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(d=>{var f;const u=d.current_quantity/d.target_quantity*100,x=Math.ceil((new Date(d.deadline).getTime()-Date.now())/(1e3*60*60*24));return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-lg line-clamp-2",children:d.input_name}),e.jsx(O,{className:"truncate",children:((f=d.profiles)==null?void 0:f.full_name)||"Organizer"})]}),e.jsxs(C,{className:"space-y-4",children:[d.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:d.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[u.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${Math.min(u,100)}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[d.current_quantity," / ",d.target_quantity," units"]}),d.status==="active"&&e.jsxs(M,{variant:x>7?"secondary":"destructive",className:"text-xs",children:[x," days left"]})]})]}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"truncate",children:d.location})]}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(Es,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["KES ",d.unit_price.toLocaleString()," per unit"]})]}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Deadline: ",new Date(d.deadline).toLocaleDateString()]})]})]}),e.jsxs(re,{className:"flex justify-between gap-2",children:[e.jsx(M,{variant:d.status==="active"?"default":"secondary",children:d.status}),e.jsx(N,{size:"sm",disabled:d.status!=="active",children:d.status==="active"?"Join Order":"View Details"})]})]},d.id)})})]}),e.jsx(Qs,{})]})};async function Ao(s){return await F.from("input_supplier_reviews").insert(s)}async function Xa(s){return await F.from("input_supplier_reviews").select("*").eq("supplier_id",s)}async function Po(s){return F.from("input_pricing").insert(s).select()}async function Xs(s={}){return await F.from("input_pricing").select("*").match(s)}const To=()=>{const[s,t]=l.useState(""),[a,r]=l.useState(0),[i,c]=l.useState([]),[n,o]=l.useState(""),[h,m]=l.useState(""),[p,d]=l.useState(0),[u,x]=l.useState([]);l.useEffect(()=>{s&&n?Xs({product_id:s,supplier_id:n}).then(({data:v})=>c(v||[])):s?Xs({product_id:s}).then(({data:v})=>c(v||[])):n?Xs({supplier_id:n}).then(({data:v})=>c(v||[])):Xs().then(({data:v})=>c(v||[])),n&&Xa(n).then(({data:v})=>x(v||[]))},[s,n]);const f=async()=>{!s||!n||(await Po({product_id:s,supplier_id:n,price:a}),Xs({product_id:s,supplier_id:n}).then(({data:v})=>c(v||[])))},g=async()=>{await Ao({supplier_id:n,rating:p,review:h}),Xa(n).then(({data:v})=>x(v||[]))};return e.jsx("div",{className:"p-4",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Input Pricing & Supplier Verification"})}),e.jsxs(C,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",placeholder:"Product ID",value:s,onChange:v=>t(v.target.value)}),e.jsx("input",{type:"text",placeholder:"Supplier ID",value:n,onChange:v=>o(v.target.value)}),e.jsx("input",{type:"number",placeholder:"Price",value:a,onChange:v=>r(Number(v.target.value))}),e.jsx(N,{onClick:f,children:"Report Price"})]}),e.jsx("ul",{children:i.map(v=>e.jsxs("li",{children:["Product: ",v.product_id," - Supplier: ",v.supplier_id," - ",v.price," ",v.verified?"✔️":""]},v.id))}),e.jsxs("div",{className:"mt-6 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Supplier ID",value:n,onChange:v=>o(v.target.value)}),e.jsx("input",{type:"number",placeholder:"Rating",value:p,onChange:v=>d(Number(v.target.value))}),e.jsx("input",{type:"text",placeholder:"Review",value:h,onChange:v=>m(v.target.value)}),e.jsx(N,{onClick:g,children:"Review Supplier"})]}),e.jsx("ul",{children:u.map(v=>e.jsxs("li",{children:["Supplier: ",v.supplier_id," - ",v.rating," stars - ",v.review," ",v.verified?"✔️":""]},v.id))})]})]})})},Do=()=>{const{toast:s}=X(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,h]=l.useState("active");l.useEffect(()=>{m()},[o]);const m=async()=>{try{i(!0);let d=F.from("reverse_bulk_auctions").select(`
          *,
          profiles:buyer_id (
            full_name
          )
        `);o==="active"?d=d.eq("status","active"):o==="closed"&&(d=d.in("status",["closed","completed"]));const{data:u,error:x}=await d.order("created_at",{ascending:!1});if(x)throw x;a(u||[])}catch(d){console.error("Error fetching reverse auctions:",d),s({title:"Error",description:"Failed to load reverse auctions. Please try again.",variant:"destructive"})}finally{i(!1)}},p=t.filter(d=>{var x;return c===""||d.product_name.toLowerCase().includes(c.toLowerCase())||((x=d.description)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||d.location.toLowerCase().includes(c.toLowerCase())});return e.jsxs("div",{className:"flex min-h-screen flex-col pb-20 md:pb-0",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Reverse Auctions for Bulk Orders"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Buyers post their needs and sellers compete to offer the best price"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(N,{children:"Post Bulk Need"})})]}),e.jsx(ue,{defaultValue:"active",value:o,onValueChange:d=>h(d),className:"mb-6",children:e.jsxs(me,{children:[e.jsx(R,{value:"active",children:"Active Auctions"}),e.jsx(R,{value:"closed",children:"Closed"}),e.jsx(R,{value:"all",children:"All Auctions"})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(D,{placeholder:"Search by product, location, or description...",value:c,onChange:d=>n(d.target.value),className:"w-full md:w-2/3 lg:w-1/2"})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(d=>e.jsxs(w,{className:"animate-pulse",children:[e.jsxs(k,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6"})]})]},d))}):p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(ae,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No reverse auctions found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:o==="active"?"No active auctions match your search. Try different keywords or post a new bulk need.":"No auctions found. Check back later or view all auctions."}),o!=="all"&&e.jsx(N,{variant:"outline",onClick:()=>h("all"),children:"View All Auctions"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(d=>{var f;const u=Math.ceil((new Date(d.deadline).getTime()-Date.now())/864e5),x=u<0;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-lg line-clamp-2",children:d.product_name}),e.jsx(O,{className:"truncate",children:((f=d.profiles)==null?void 0:f.full_name)||"Buyer"})]}),e.jsxs(C,{className:"space-y-4",children:[d.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:d.description}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(ae,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"font-medium truncate",children:[d.quantity.toLocaleString()," units needed"]})]}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(Es,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Max: ",e.jsxs("span",{className:"font-semibold",children:["KES ",d.max_price.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"truncate",children:d.location})]}),e.jsxs("div",{className:"flex items-center text-sm gap-1",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Deadline: ",new Date(d.deadline).toLocaleDateString()]})]}),d.status==="active"&&!x&&e.jsxs(M,{variant:u>7?"secondary":"destructive",className:"w-full justify-center",children:[e.jsx(Ze,{className:"h-3 w-3 mr-1"}),u," day",u!==1?"s":""," remaining"]})]}),e.jsxs(re,{className:"flex justify-between gap-2",children:[e.jsx(M,{variant:d.status==="active"?"default":"secondary",children:d.status}),e.jsx(N,{size:"sm",disabled:d.status!=="active"||x,children:d.status==="active"&&!x?"Bid on Order":"View Details"})]})]},d.id)})})]}),e.jsx(Qs,{})]})};async function Mo(s){return await F.from("subscription_boxes").insert(s)}async function er(s){return await F.from("subscription_boxes").select("*").eq("consumer_id",s)}async function sr(s){return await F.from("subscription_box_deliveries").select("*").eq("box_id",s)}async function Fo(s){return await F.from("subscription_box_deliveries").update({delivered:!0}).eq("id",s)}const Q=Wn,J=Yn,W=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Hr,{ref:r,className:z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(Bn,{asChild:!0,children:e.jsx(zt,{className:"h-4 w-4 opacity-50"})})]}));W.displayName=Hr.displayName;const $i=l.forwardRef(({className:s,...t},a)=>e.jsx(Gr,{ref:a,className:z("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Un,{className:"h-4 w-4"})}));$i.displayName=Gr.displayName;const Vi=l.forwardRef(({className:s,...t},a)=>e.jsx(Wr,{ref:a,className:z("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(zt,{className:"h-4 w-4"})}));Vi.displayName=Wr.displayName;const Y=l.forwardRef(({className:s,children:t,position:a="popper",...r},i)=>e.jsx($n,{children:e.jsxs(Yr,{ref:i,className:z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx($i,{}),e.jsx(Vn,{className:z("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Vi,{})]})}));Y.displayName=Yr.displayName;const Eo=l.forwardRef(({className:s,...t},a)=>e.jsx(Qr,{ref:a,className:z("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Eo.displayName=Qr.displayName;const _=l.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Jr,{ref:r,className:z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Hn,{children:e.jsx(qe,{className:"h-4 w-4"})})}),e.jsx(Gn,{children:t})]}));_.displayName=Jr.displayName;const Io=l.forwardRef(({className:s,...t},a)=>e.jsx(Zr,{ref:a,className:z("-mx-1 my-1 h-px bg-muted",s),...t}));Io.displayName=Zr.displayName;const Lo=[{title:"Home",href:"/",icon:Gs},{title:"Markets",href:"/marketplace",icon:Ds},{title:"Prices",href:"/price-trends",icon:ne},{title:"Community",href:"/community-forums",icon:Ke}],Rs=()=>{const s=bs(),{user:t}=we();return t?e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-background border-t border-border lg:hidden",children:e.jsx("nav",{className:"flex justify-around items-center h-16 px-2",children:Lo.map(a=>{const r=a.icon,i=s.pathname===a.href;return e.jsxs(V,{to:a.href,className:z("flex flex-col items-center justify-center gap-1 p-2 rounded-lg transition-colors min-w-0 flex-1",i?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium truncate",children:a.title})]},a.href)})})}):null},Js=({title:s,showBack:t=!1,onBack:a,actions:r})=>e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b lg:hidden",children:e.jsxs("div",{className:"flex items-center justify-between h-14 px-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsx(N,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("h1",{className:"font-semibold text-lg truncate",children:s})]}),r&&e.jsx("div",{className:"flex items-center gap-2",children:r})]})}),Hi=({children:s,title:t="SokoConnect",showBack:a=!1,onBack:r})=>{const{user:i,signOut:c}=we(),n=ve(),o=async()=>{await c(),n("/auth")},h=i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{to:"/profile",children:e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(Ks,{className:"h-4 w-4"})})}),e.jsx(N,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(Dr,{className:"h-4 w-4"})})]}):null;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Js,{title:t,showBack:a,onBack:r,actions:h}),e.jsx("main",{className:"pb-20 lg:pb-4",children:s}),e.jsx(Rs,{})]})},qo=()=>{const{user:s}=we(),[t,a]=l.useState(""),[r,i]=l.useState(""),[c,n]=l.useState("weekly"),[o,h]=l.useState("1"),[m,p]=l.useState(""),[d,u]=l.useState([]),[x,f]=l.useState(""),[g,v]=l.useState([]);l.useEffect(()=>{s!=null&&s.id&&er(s.id).then(({data:b})=>u(b||[])),x&&sr(x).then(({data:b})=>v(b||[]))},[s==null?void 0:s.id,x]);const j=async()=>{if(!(s!=null&&s.id))return;const b=`${t}-${r}`;await Mo({consumer_id:s.id,farmer_id:m,box_type:b,frequency:c,duration_months:parseInt(o)}),er(s.id).then(({data:T})=>u(T||[]))},y=async b=>{await Fo(b),sr(x).then(({data:T})=>v(T||[]))};return e.jsx(Hi,{title:"Farm-to-Consumer Boxes",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl pb-24",children:[e.jsxs(w,{className:"mb-6 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xt,{className:"h-6 w-6 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx(S,{className:"text-2xl",children:"What is Farmer-to-Consumer (F2C)?"}),e.jsx(O,{className:"mt-2 text-base",children:"Connect directly with local farmers and get fresh, seasonal produce delivered to your door"})]})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our Farm-to-Consumer subscription service eliminates the middleman, bringing you fresh, locally-grown produce straight from the farm to your home. Support local farmers, eat healthier, and reduce your carbon footprint all at once!"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[e.jsx(ae,{className:"h-8 w-8 text-primary mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Fresh & Seasonal"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Handpicked produce harvested at peak freshness"})]}),e.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[e.jsx(je,{className:"h-8 w-8 text-primary mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Direct Delivery"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"From farm to your doorstep in 24-48 hours"})]}),e.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[e.jsx(qe,{className:"h-8 w-8 text-primary mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Support Farmers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your purchase directly supports local farming communities"})]})]})]})]}),e.jsxs(ue,{defaultValue:"subscribe",className:"space-y-6",children:[e.jsxs(me,{className:"grid w-full grid-cols-2",children:[e.jsx(R,{value:"subscribe",children:"Subscribe to a Box"}),e.jsx(R,{value:"myboxes",children:"My Subscriptions"})]}),e.jsx(B,{value:"subscribe",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Create Your Custom Subscription"}),e.jsx(O,{children:"Choose your preferred box size, delivery frequency, and subscription duration"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"boxSize",children:"Container Type"}),e.jsxs(Q,{value:t,onValueChange:a,children:[e.jsx(W,{id:"boxSize",children:e.jsx(J,{placeholder:"Select container type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"small-box",children:"Small Box"}),e.jsx(_,{value:"medium-box",children:"Medium Box"}),e.jsx(_,{value:"large-box",children:"Large Box"}),e.jsx(_,{value:"carton",children:"Carton"}),e.jsx(_,{value:"crate",children:"Crate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"boxWeight",children:"Weight"}),e.jsxs(Q,{value:r,onValueChange:i,children:[e.jsx(W,{id:"boxWeight",children:e.jsx(J,{placeholder:"Select weight"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"10kg",children:"10 kg"}),e.jsx(_,{value:"20kg",children:"20 kg"}),e.jsx(_,{value:"30kg",children:"30 kg"}),e.jsx(_,{value:"40kg",children:"40 kg"}),e.jsx(_,{value:"50kg",children:"50 kg"}),e.jsx(_,{value:"60kg",children:"60 kg"}),e.jsx(_,{value:"70kg",children:"70 kg"}),e.jsx(_,{value:"80kg",children:"80 kg"}),e.jsx(_,{value:"90kg",children:"90 kg"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"frequency",children:"Delivery Frequency"}),e.jsxs(Q,{value:c,onValueChange:n,children:[e.jsx(W,{id:"frequency",children:e.jsx(J,{placeholder:"Select frequency"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"weekly",children:"Weekly"}),e.jsx(_,{value:"bi-weekly",children:"Bi-Weekly (Every 2 weeks)"}),e.jsx(_,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"duration",children:"Subscription Duration"}),e.jsxs(Q,{value:o,onValueChange:h,children:[e.jsx(W,{id:"duration",children:e.jsx(J,{placeholder:"Select duration"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"1",children:"1 Month"}),e.jsx(_,{value:"3",children:"3 Months (5% discount)"}),e.jsx(_,{value:"6",children:"6 Months (10% discount)"}),e.jsx(_,{value:"12",children:"12 Months (15% discount)"})]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(A,{htmlFor:"farmerId",children:"Farmer/Cooperative (Optional)"}),e.jsx(D,{id:"farmerId",type:"text",placeholder:"Enter farmer ID or leave empty for automatic matching",value:m,onChange:b=>p(b.target.value)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave empty to be automatically matched with a nearby farmer"})]})]}),e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Your Selection:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t&&r?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium text-foreground",children:[t.replace("-"," ")," (",r,")"]})," delivered ",e.jsx("span",{className:"font-medium text-foreground",children:c})," for ",e.jsxs("span",{className:"font-medium text-foreground",children:[o," month(s)"]})]}):"Please select your preferences above"})]}),e.jsxs(N,{onClick:j,className:"w-full",size:"lg",disabled:!t||!r,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Subscribe Now"]})]})]})}),e.jsx(B,{value:"myboxes",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"My Active Subscriptions"}),e.jsx(O,{children:"Manage your subscription boxes and track deliveries"})]}),e.jsx(C,{children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ae,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No active subscriptions yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subscribe to your first box to start receiving fresh farm produce!"})]}):e.jsx("div",{className:"space-y-4",children:d.map(b=>e.jsxs(w,{className:"border-2",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:b.box_type}),e.jsxs(O,{children:[b.frequency," deliveries • Farmer: ",b.farmer_id]})]}),e.jsx(M,{variant:b.status==="active"?"default":"secondary",children:b.status})]})}),e.jsxs(C,{children:[e.jsxs(N,{onClick:()=>f(b.id),variant:"outline",className:"w-full",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"View Delivery Schedule"]}),x===b.id&&g.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Upcoming & Past Deliveries:"}),g.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:new Date(T.delivery_date).toLocaleDateString()})]}),T.delivered?e.jsxs(M,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[e.jsx(qe,{className:"h-3 w-3 mr-1"}),"Delivered"]}):e.jsx(N,{size:"sm",onClick:()=>y(T.id),children:"Mark as Delivered"})]},T.id))]})]})]},b.id))})})]})})]})]})})},Ro=({onSuccess:s})=>{const[t,a]=l.useState(""),[r,i]=l.useState(""),[c,n]=l.useState("phone"),[o,h]=l.useState(!1),{toast:m}=X(),p=async u=>{if(u.preventDefault(),!t.trim()){m({title:"Error",description:"Please enter your phone number",variant:"destructive"});return}h(!0);let x=t.trim();x.startsWith("0")?x="+254"+x.substring(1):x.startsWith("+")||(x="+254"+x);try{const{error:f}=await F.auth.signInWithOtp({phone:x});if(f)throw f;m({title:"OTP Sent",description:`Verification code sent to ${x}`}),n("otp")}catch(f){m({title:"Error",description:f.message||"Failed to send OTP",variant:"destructive"})}finally{h(!1)}},d=async u=>{if(u.preventDefault(),!r.trim()){m({title:"Error",description:"Please enter the verification code",variant:"destructive"});return}h(!0);let x=t.trim();x.startsWith("0")?x="+254"+x.substring(1):x.startsWith("+")||(x="+254"+x);try{const{error:f}=await F.auth.verifyOtp({phone:x,token:r,type:"sms"});if(f)throw f;m({title:"Success",description:"Phone number verified successfully!"}),s==null||s()}catch(f){m({title:"Error",description:f.message||"Invalid verification code",variant:"destructive"})}finally{h(!1)}};return c==="otp"?e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"otp",children:"Verification Code (Msimbo wa uthibitisho)"}),e.jsx(D,{id:"otp",type:"text",placeholder:"Enter 6-digit code / Ingiza msimbo wa tarakimu 6",value:r,onChange:u=>i(u.target.value),maxLength:6,required:!0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Code sent to ",t," / Msimbo ulitumwa kwa ",t]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>n("phone"),disabled:o,children:"Back / Rudi"}),e.jsxs(N,{type:"submit",className:"flex-1",disabled:o,children:[o?e.jsx(Lt,{className:"h-4 w-4 animate-spin mr-2"}):null,"Verify / Thibitisha"]})]})]}):e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"phone",children:"Phone Number (Nambari ya simu)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{id:"phone",type:"tel",placeholder:"0712345678 or +254712345678",value:t,onChange:u=>a(u.target.value),className:"pl-10",required:!0})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your Kenyan phone number / Ingiza nambari yako ya simu ya Kenya"})]}),e.jsxs(N,{type:"submit",className:"w-full",disabled:o,children:[o?e.jsx(Lt,{className:"h-4 w-4 animate-spin mr-2"}):null,"Send Code / Tuma Msimbo"]})]})},zo="/assets/hero-farming-team-Dp8JYcwD.jpg",Ko=()=>{const{toast:s}=X(),t=ve(),[a,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(""),[h,m]=l.useState(!1),[p,d]=l.useState("login"),[u,x]=l.useState("email");l.useEffect(()=>{(async()=>{const{data:y}=await F.auth.getSession();y.session&&t("/")})()},[t]);const f=async j=>{if(j.preventDefault(),!a||!i){s({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}m(!0);try{const{error:y}=await F.auth.signInWithPassword({email:a,password:i});if(y)throw y;s({title:"Success",description:"You have been logged in successfully!"}),t("/")}catch(y){s({title:"Error",description:y.message||"Failed to login. Please try again.",variant:"destructive"})}finally{m(!1)}},g=async j=>{if(j.preventDefault(),!a||!i||!n){s({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}m(!0);try{const y=`${window.location.origin}/`,{error:b}=await F.auth.signUp({email:a,password:i,options:{emailRedirectTo:y,data:{full_name:n}}});if(b)throw b;s({title:"Success",description:"Your account has been created! Please check your email to verify your account."}),d("login")}catch(y){s({title:"Error",description:y.message||"Failed to create account. Please try again.",variant:"destructive"})}finally{m(!1)}},v=()=>{s({title:"Success",description:"You have been logged in successfully!"}),t("/")};return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${zo})`,filter:"blur(8px)",transform:"scale(1.1)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-6",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("img",{src:"/src/assets/sokoconnect-logo.png",alt:"SokoConnect Logo",className:"h-20 w-20"})}),e.jsxs("h1",{className:"text-4xl font-bold mb-2",children:[e.jsx("span",{className:"text-white",children:"Soko"}),e.jsx("span",{className:"text-green-400",children:"Connect"})]}),e.jsxs("p",{className:"text-gray-200 text-base font-medium",children:["SOKOCONNECT | ",e.jsx("span",{className:"text-green-400",children:"Tustawi"})]}),e.jsx("p",{className:"text-gray-300 text-sm mt-3 max-w-md mx-auto",children:"Connecting farmers, traders & markets - Empowering the entire agri-supply chain"})]}),e.jsxs(w,{className:"backdrop-blur-md bg-white/10 border-white/20 shadow-2xl",children:[e.jsxs(k,{className:"text-center",children:[e.jsx(S,{className:"text-xl text-white",children:"Welcome to SokoConnect"}),e.jsxs(O,{className:"text-gray-200",children:["Sign in or create an account to access all features",e.jsx("br",{}),e.jsx("span",{className:"text-sm text-gray-300",children:"Karibu SokoConnect - Ingia au fungua akaunti"})]})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs(N,{variant:u==="email"?"default":"outline",onClick:()=>x("email"),className:"flex-1 bg-white/20 border-white/30 text-white hover:bg-white/30",size:"sm",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Email"]}),e.jsxs(N,{variant:u==="phone"?"default":"outline",onClick:()=>x("phone"),className:"flex-1 bg-white/20 border-white/30 text-white hover:bg-white/30",size:"sm",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Phone / Simu"]})]}),u==="phone"?e.jsx("div",{className:"mt-4",children:e.jsx(Ro,{onSuccess:v})}):e.jsxs(ue,{value:p,onValueChange:d,className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-2 bg-white/20",children:[e.jsx(R,{value:"login",className:"text-white data-[state=active]:bg-white data-[state=active]:text-gray-900",children:"Sign In"}),e.jsx(R,{value:"signup",className:"text-white data-[state=active]:bg-white data-[state=active]:text-gray-900",children:"Register Now"})]}),e.jsx(B,{value:"login",children:e.jsxs("form",{onSubmit:f,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"email-login",className:"text-white",children:"Email"}),e.jsx(D,{id:"email-login",type:"email",placeholder:"your.email@example.com",value:a,onChange:j=>r(j.target.value),className:"bg-white/20 border-white/30 text-white placeholder:text-gray-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"password-login",className:"text-white",children:"Password"}),e.jsx(D,{id:"password-login",type:"password",value:i,onChange:j=>c(j.target.value),className:"bg-white/20 border-white/30 text-white placeholder:text-gray-300",required:!0})]}),e.jsx(N,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white font-semibold py-3",disabled:h,children:h?"Signing In...":"Sign In"})]})}),e.jsx(B,{value:"signup",children:e.jsxs("form",{onSubmit:g,className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"fullname-signup",className:"text-white",children:"Full Name"}),e.jsx(D,{id:"fullname-signup",placeholder:"Your Name",value:n,onChange:j=>o(j.target.value),className:"bg-white/20 border-white/30 text-white placeholder:text-gray-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"email-signup",className:"text-white",children:"Email"}),e.jsx(D,{id:"email-signup",type:"email",placeholder:"your.email@example.com",value:a,onChange:j=>r(j.target.value),className:"bg-white/20 border-white/30 text-white placeholder:text-gray-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"password-signup",className:"text-white",children:"Password"}),e.jsx(D,{id:"password-signup",type:"password",value:i,onChange:j=>c(j.target.value),className:"bg-white/20 border-white/30 text-white placeholder:text-gray-300",required:!0}),e.jsx("p",{className:"text-xs text-gray-300",children:"Password must be at least 6 characters long"})]}),e.jsx(N,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white font-semibold py-3",disabled:h,children:h?"Creating Account...":"Register Now"})]})})]})]}),e.jsxs(re,{className:"flex flex-col items-center space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-300 text-center",children:["By continuing, you agree to our Terms of Service and Privacy Policy.",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"Kwa kuendelea, unakubali Sheria na Sera yetu ya Faragha."})]}),e.jsx("div",{className:"flex items-center text-white text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-bold",children:"SOKOCONNECT"}),e.jsx("span",{className:"mx-2",children:"|"}),e.jsx("span",{className:"text-xs text-green-400",children:"Tustawi"})]})}),e.jsx("p",{className:"text-xs text-gray-400",children:"Version 1.6.2.0*"})]})]})]})})]})},Oo=()=>{const s=ve(),t=[{label:"Platform Launch",value:"2026",icon:e.jsx(ee,{className:"h-5 w-5"})},{label:"Target Counties",value:"47",icon:e.jsx(Z,{className:"h-5 w-5"})},{label:"Beta Testers",value:"100+",icon:e.jsx(ds,{className:"h-5 w-5"})},{label:"Development Stage",value:"85%",icon:e.jsx(ne,{className:"h-5 w-5"})}],a=[{icon:e.jsx(Qn,{className:"h-6 w-6 text-primary"}),title:"Farm Management",description:"Comprehensive tools for crop tracking, inventory management, and yield optimization"},{icon:e.jsx(Ye,{className:"h-6 w-6 text-primary"}),title:"Market Intelligence",description:"Real-time market prices, demand forecasting, and trade opportunities"},{icon:e.jsx(je,{className:"h-6 w-6 text-primary"}),title:"Smart Logistics",description:"End-to-end logistics solutions connecting farmers to markets efficiently"},{icon:e.jsx(ts,{className:"h-6 w-6 text-primary"}),title:"Financial Services",description:"Access to credit, insurance, and digital payment solutions"}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("section",{className:"bg-gradient-to-br from-green-700 via-green-600 to-green-500 text-white py-20",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Transforming Agriculture in Kenya"}),e.jsx("p",{className:"text-lg md:text-xl mb-8 max-w-4xl mx-auto leading-relaxed",children:"SokoConnect empowers every stakeholder in the agricultural supply chain - from smallholder farmers to large-scale traders, transporters to processors, and cooperatives to consumers. We're building a connected ecosystem where everyone thrives through technology, transparency, and community collaboration."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[e.jsxs(N,{size:"lg",variant:"secondary",onClick:()=>s("/partner-with-us"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Partner With Us"]}),e.jsxs(N,{size:"lg",variant:"outline",className:"bg-transparent border-white text-white hover:bg-white hover:text-green-700",children:["Join Platform",e.jsx(Vs,{className:"h-4 w-4 ml-2"})]})]})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:t.map((r,i)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:r.icon})}),e.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:r.value}),e.jsx("div",{className:"text-muted-foreground",children:r.label})]},i))})})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 mb-16",children:[e.jsxs(w,{className:"border-l-4 border-l-primary",children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(wa,{className:"h-5 w-5 text-primary"}),"Our Mission"]})}),e.jsx(C,{children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"To revolutionize Kenya's agricultural sector by connecting all stakeholders - farmers, traders, transporters, cooperatives, processors, and consumers - with technology that enables market access, fair pricing, efficient logistics, and sustainable growth for everyone in the supply chain."})})]}),e.jsxs(w,{className:"border-l-4 border-l-secondary",children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-secondary"}),"Our Vision"]})}),e.jsx(C,{children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"A digitally-enabled agricultural ecosystem where every farmer in Kenya has access to the tools, knowledge, and opportunities needed to thrive in modern agriculture and contribute to national food security."})})]})]}),e.jsxs("section",{className:"mb-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"What We Offer"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((r,i)=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsx("div",{className:"mb-3",children:r.icon}),e.jsx(S,{className:"text-lg",children:r.title})]}),e.jsx(C,{children:e.jsx("p",{className:"text-muted-foreground",children:r.description})})]},i))})]}),e.jsxs("section",{className:"mb-16 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Our Vision for Impact"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Launching in 2026 - We're building for measurable transformation"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:"100+"}),e.jsx("div",{className:"text-muted-foreground",children:"Beta users testing the platform"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"47"}),e.jsx("div",{className:"text-muted-foreground",children:"Counties planned for coverage"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-orange-600 mb-2",children:"2026"}),e.jsx("div",{className:"text-muted-foreground",children:"Official launch year"})]})]})]}),e.jsx("section",{className:"mb-16",children:e.jsxs(w,{className:"bg-gradient-to-r from-primary/5 to-secondary/5",children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-center text-2xl md:text-3xl mb-2",children:"Why Choose SokoConnect?"}),e.jsx("p",{className:"text-center text-muted-foreground",children:"Value for Every Stakeholder in the Agri-Supply Chain"})]}),e.jsx(C,{children:e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ee,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"For Farmers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Direct market access, fair prices, and farm management tools"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(je,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"For Traders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bulk sourcing, quality verification, and logistics coordination"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ds,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"For Cooperatives"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Group orders, collective bargaining, and member management"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ys,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Community First"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Built for all stakeholders - transparent, fair, and inclusive"})]})]})})]})}),e.jsx("section",{className:"text-center",children:e.jsx(w,{className:"bg-gradient-to-r from-green-700 to-green-600 text-white",children:e.jsxs(C,{className:"pt-8 pb-8",children:[e.jsx(ys,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Ready to Transform Agriculture Together?"}),e.jsx("p",{className:"text-base md:text-lg mb-6 opacity-90 max-w-2xl mx-auto",children:"Join us in building Kenya's most comprehensive agricultural platform. Whether you're a farmer, trader, transporter, cooperative, or service provider - there's a place for you in the SokoConnect ecosystem."}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-6",children:[e.jsxs(N,{variant:"secondary",size:"lg",onClick:()=>s("/partner-with-us"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Contact Our Team"]}),e.jsx(N,{variant:"outline",size:"lg",className:"bg-transparent border-white text-white hover:bg-white hover:text-green-700",onClick:()=>s("/auth"),children:"Join Platform"})]}),e.jsx(be,{className:"my-6 bg-white/20"}),e.jsxs("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 p-2",children:[e.jsx($e,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"break-words text-center text-xs sm:text-sm",children:"sokoconnect@tenderzville-portal.co.ke"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 p-2",children:[e.jsx(ke,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-center",children:"+254 700 123 456"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 p-2 sm:col-span-2 md:col-span-1",children:[e.jsx(Z,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-center",children:"Nairobi, Kenya"})]})]})]})})})]})]})},Bo=()=>e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs(w,{className:"max-w-lg mx-auto",children:[e.jsx(k,{children:e.jsx(S,{children:"Contact Us"})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx(D,{placeholder:"Your Name"}),e.jsx(D,{placeholder:"Your Email",type:"email"}),e.jsx(ie,{placeholder:"Your Message"}),e.jsx(N,{className:"w-full",children:"Send Message"})]})]})}),Uo=()=>{const{user:s}=we(),{toast:t}=X(),[a,r]=l.useState(!1),[i,c]=l.useState(!1),n=l.useRef(null),[o,h]=l.useState({full_name:"",email:(s==null?void 0:s.email)||"",contact_number:"",county:"",bio:"",farm_size:0,farm_type:"",experience_years:0,specialization:[],avatar_url:""}),[m,p]=l.useState("");Ms.useEffect(()=>{s&&d()},[s]);const d=async()=>{try{const{data:j,error:y}=await F.from("profiles").select("*").eq("user_id",s==null?void 0:s.id).maybeSingle();if(y&&y.code!=="PGRST116")throw y;j&&h({full_name:j.full_name||"",email:j.email||(s==null?void 0:s.email)||"",contact_number:j.contact_number||"",county:j.county||"",bio:j.bio||"",farm_size:j.farm_size||0,farm_type:j.farm_type||"",experience_years:j.experience_years||0,specialization:j.specialization||[],avatar_url:j.avatar_url||""})}catch(j){console.error("Error fetching profile:",j)}},u=async j=>{if(!s)return null;if(j.size>2*1024*1024)return t({title:"File too large",description:"Please select an image under 2MB",variant:"destructive"}),null;c(!0);try{const y=j.name.split(".").pop(),b=`${s.id}/avatar.${y}`,{error:T}=await F.storage.from("profile-pictures").upload(b,j,{upsert:!0});if(T)throw T;const{data:E}=F.storage.from("profile-pictures").getPublicUrl(b);return E.publicUrl}catch(y){return console.error("Error uploading avatar:",y),t({title:"Upload failed",description:"Failed to upload profile picture",variant:"destructive"}),null}finally{c(!1)}},x=async j=>{var b;const y=(b=j.target.files)==null?void 0:b[0];if(y){const T=await u(y);T&&h(E=>({...E,avatar_url:T}))}},f=()=>{m.trim()&&!o.specialization.includes(m.trim())&&(h(j=>({...j,specialization:[...j.specialization,m.trim()]})),p(""))},g=j=>{h(y=>({...y,specialization:y.specialization.filter(b=>b!==j)}))},v=async()=>{if(s){r(!0);try{const{error:j}=await F.from("profiles").upsert({user_id:s.id,...o},{onConflict:"user_id"});if(j)throw j;t({title:"Success",description:"Profile updated successfully!"})}catch(j){console.error("Error saving profile:",j),t({title:"Error",description:"Failed to save profile",variant:"destructive"})}finally{r(!1)}}};return e.jsxs(w,{className:"max-w-4xl mx-auto",children:[e.jsx(k,{children:e.jsx(S,{children:"Edit Profile"})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Is,{className:"h-20 w-20",children:[e.jsx(Ys,{src:o.avatar_url}),e.jsx(Ls,{children:o.full_name.split(" ").map(j=>j[0]).join("").toUpperCase()||"U"})]}),e.jsxs("div",{children:[e.jsxs(N,{variant:"outline",onClick:()=>{var j;return(j=n.current)==null?void 0:j.click()},disabled:i,children:[e.jsx(Jn,{className:"h-4 w-4 mr-2"}),i?"Uploading...":"Change Photo"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Max 2MB. JPG, PNG supported."}),e.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:x,className:"hidden"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"full_name",children:"Full Name"}),e.jsx(D,{id:"full_name",value:o.full_name,onChange:j=>h(y=>({...y,full_name:j.target.value})),placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"email",children:"Email"}),e.jsx(D,{id:"email",value:o.email,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_number",children:"Contact Number"}),e.jsx(D,{id:"contact_number",value:o.contact_number,onChange:j=>h(y=>({...y,contact_number:j.target.value})),placeholder:"+254 7XX XXX XXX"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"county",children:"County"}),e.jsxs(Q,{value:o.county,onValueChange:j=>h(y=>({...y,county:j})),children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select your county"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"nairobi",children:"Nairobi"}),e.jsx(_,{value:"kiambu",children:"Kiambu"}),e.jsx(_,{value:"machakos",children:"Machakos"}),e.jsx(_,{value:"kajiado",children:"Kajiado"}),e.jsx(_,{value:"murang'a",children:"Murang'a"}),e.jsx(_,{value:"nyeri",children:"Nyeri"}),e.jsx(_,{value:"kirinyaga",children:"Kirinyaga"}),e.jsx(_,{value:"nyandarua",children:"Nyandarua"}),e.jsx(_,{value:"laikipia",children:"Laikipia"}),e.jsx(_,{value:"nakuru",children:"Nakuru"}),e.jsx(_,{value:"uasin-gishu",children:"Uasin Gishu"}),e.jsx(_,{value:"trans-nzoia",children:"Trans Nzoia"}),e.jsx(_,{value:"bungoma",children:"Bungoma"}),e.jsx(_,{value:"kakamega",children:"Kakamega"}),e.jsx(_,{value:"vihiga",children:"Vihiga"}),e.jsx(_,{value:"siaya",children:"Siaya"}),e.jsx(_,{value:"kisumu",children:"Kisumu"}),e.jsx(_,{value:"homa-bay",children:"Homa Bay"}),e.jsx(_,{value:"migori",children:"Migori"}),e.jsx(_,{value:"kisii",children:"Kisii"}),e.jsx(_,{value:"nyamira",children:"Nyamira"}),e.jsx(_,{value:"meru",children:"Meru"}),e.jsx(_,{value:"tharaka-nithi",children:"Tharaka Nithi"}),e.jsx(_,{value:"embu",children:"Embu"}),e.jsx(_,{value:"kitui",children:"Kitui"}),e.jsx(_,{value:"machakos",children:"Machakos"}),e.jsx(_,{value:"makueni",children:"Makueni"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"bio",children:"Bio"}),e.jsx(ie,{id:"bio",value:o.bio,onChange:j=>h(y=>({...y,bio:j.target.value})),placeholder:"Tell us about yourself and your farming journey...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farm_size",children:"Farm Size (Acres)"}),e.jsx(D,{id:"farm_size",type:"number",value:o.farm_size,onChange:j=>h(y=>({...y,farm_size:parseFloat(j.target.value)||0})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farm_type",children:"Farm Type"}),e.jsxs(Q,{value:o.farm_type,onValueChange:j=>h(y=>({...y,farm_type:j})),children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select farm type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"mixed",children:"Mixed Farming"}),e.jsx(_,{value:"crop",children:"Crop Production"}),e.jsx(_,{value:"livestock",children:"Livestock"}),e.jsx(_,{value:"poultry",children:"Poultry"}),e.jsx(_,{value:"dairy",children:"Dairy"}),e.jsx(_,{value:"horticulture",children:"Horticulture"}),e.jsx(_,{value:"greenhouse",children:"Greenhouse"}),e.jsx(_,{value:"fish",children:"Fish Farming"}),e.jsx(_,{value:"organic",children:"Organic Farming"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"experience_years",children:"Years of Experience"}),e.jsx(D,{id:"experience_years",type:"number",value:o.experience_years,onChange:j=>h(y=>({...y,experience_years:parseInt(j.target.value)||0})),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Specializations"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:o.specialization.map(j=>e.jsxs(M,{variant:"secondary",className:"flex items-center gap-1",children:[j,e.jsx("button",{onClick:()=>g(j),className:"ml-1 hover:text-destructive",children:"×"})]},j))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{value:m,onChange:j=>p(j.target.value),placeholder:"Add specialization (e.g., Maize, Tomatoes, Dairy)",onKeyPress:j=>j.key==="Enter"&&(j.preventDefault(),f())}),e.jsx(N,{type:"button",variant:"outline",onClick:f,children:"Add"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(Os,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Privacy Notice"}),e.jsx("p",{className:"text-blue-800",children:"Your profile information helps connect you with relevant opportunities and fellow farmers. You can control what information is visible to others in your privacy settings."})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(N,{onClick:v,disabled:a,children:[e.jsx(Zn,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Profile"]})})]})]})},$o=()=>{const{user:s}=we(),t=ve();return s?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsxs(N,{variant:"outline",onClick:()=>t(-1),children:[e.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Profile Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account information and preferences"})]})]}),e.jsx(Uo,{})]})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("div",{className:"container mx-auto py-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please sign in to view your profile."}),e.jsx(N,{onClick:()=>t("/auth"),children:"Sign In"})]})]})},Vo=()=>e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{placeholder:"Search for products, farmers, or services...",className:"flex-1"}),e.jsxs(N,{children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Search Results"})}),e.jsx(C,{children:e.jsx("p",{className:"text-muted-foreground",children:"Enter a search term to find products, farmers, or services in the AgriConnect platform."})})]})]}),Ho=async()=>{try{console.log("Fetching logistics stats from database...");const{count:s}=await F.from("transporters").select("*",{count:"exact",head:!0}),{count:t}=await F.from("warehouses").select("*",{count:"exact",head:!0}),{count:a}=await F.from("aggregators").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:r}=await F.from("processors").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:i}=await F.from("micro_creditors").select("*",{count:"exact",head:!0}).eq("is_active",!0),c=15,{data:n}=await F.from("aggregators").select("county").eq("is_active",!0),o=new Set((n==null?void 0:n.map(h=>h.county))||[]);return{activeTransporters:s||0,storageFacilities:t||0,countiesCovered:o.size,monthlyDeliveries:1240,aggregators:a||0,processors:r||0,microCreditors:i||0,p2pLenders:c||0}}catch(s){return console.error("Error fetching logistics stats:",s),{activeTransporters:0,storageFacilities:0,countiesCovered:0,monthlyDeliveries:0,aggregators:0,processors:0,microCreditors:0,p2pLenders:0}}},Go=async()=>{try{console.log("Fetching all logistics providers...");const s=[],{data:t}=await F.from("transporters").select("*");t&&t.forEach(n=>{s.push({id:n.id,name:n.name,type:"transport",description:`${n.service_type} - ${n.capacity}`,location:n.counties.join(", "),county:n.counties[0]||"",contact_phone:n.contact_info,contact_email:"",is_verified:!0,rating:4.2,services:[n.service_type],coordinates:{latitude:-1.2921,longitude:36.8219}})});const{data:a}=await F.from("aggregators").select("*").eq("is_active",!0);a&&a.forEach(n=>{s.push({id:n.id,name:n.aggregator_name,type:"aggregator",description:`Handles: ${n.commodities_handled.join(", ")}`,location:`${n.county}, ${n.sub_county||""}`,county:n.county,contact_phone:n.contact_phone,contact_email:n.contact_email,is_verified:n.is_verified,rating:n.rating,services:n.commodities_handled,coordinates:n.coordinates})});const{data:r}=await F.from("processors").select("*").eq("is_active",!0);r&&r.forEach(n=>{s.push({id:n.id,name:n.processor_name,type:"processor",description:`Processes: ${n.raw_materials_needed.join(", ")}`,location:`${n.county}, ${n.sub_county||""}`,county:n.county,contact_phone:n.contact_phone,contact_email:n.contact_email,is_verified:n.is_verified,rating:n.rating,services:n.processed_products,coordinates:n.coordinates})});const{data:i}=await F.from("micro_creditors").select("*").eq("is_active",!0);i&&i.forEach(n=>{s.push({id:n.id,name:n.institution_name,type:"microcredit",description:`${n.institution_type} - ${n.interest_rate_range}`,location:`${n.county}, ${n.sub_county||""}`,county:n.county,contact_phone:n.contact_phone,contact_email:n.contact_email,is_verified:n.is_licensed,rating:n.rating,services:n.target_sectors,coordinates:n.coordinates})});const c=[{id:"warehouse-1",name:"Central Storage Facility",type:"storage",description:"Modern cold storage facility - 5000 tons capacity",location:"Nakuru, Nakuru",county:"Nakuru",contact_phone:"+254 700 234 567",contact_email:"info@centralstorage.co.ke",is_verified:!0,rating:4.5,services:["Cold Storage","Dry Storage","Packaging"],coordinates:{latitude:-.3031,longitude:36.08}},{id:"microcredit-1",name:"AgriCredit Solutions",type:"microcredit",description:"Microfinance institution - 5-15% interest rates",location:"Kisumu, Kisumu",county:"Kisumu",contact_phone:"+254 700 345 678",contact_email:"loans@agricredit.co.ke",is_verified:!0,rating:4.3,services:["Farm Loans","Equipment Finance","Working Capital"],coordinates:{latitude:-.0917,longitude:34.768}},{id:"p2p-1",name:"FarmLink P2P",type:"p2p_lending",description:"Peer-to-peer lending platform - 8-20% interest",location:"Mombasa, Mombasa",county:"Mombasa",contact_phone:"+254 700 456 789",contact_email:"support@farmlink.co.ke",is_verified:!0,rating:4.2,services:["Quick Loans","Seasonal Finance","Equipment Loans"],coordinates:{latitude:-4.0435,longitude:39.6682}}];return s.push(...c),console.log(`Found ${s.length} total providers`),s}catch(s){return console.error("Error fetching logistics providers:",s),[]}},ps=({label:s,value:t,icon:a})=>e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:s}),a]}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:t})})]}),Wo=()=>{const[s,t]=l.useState({activeTransporters:0,storageFacilities:0,countiesCovered:0,monthlyDeliveries:0,aggregators:0,processors:0,microCreditors:0,p2pLenders:0}),[a,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(""),[h,m]=l.useState(""),[p,d]=l.useState("");l.useEffect(()=>{(async()=>{try{c(!0),console.log("Fetching logistics data...");const[j,y]=await Promise.all([Ho(),Go()]);console.log("Stats data:",j),console.log("Providers data:",y),t(j),r(y)}catch(j){console.error("Error fetching logistics data:",j)}finally{c(!1)}})()},[]);const u=["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret","Thika","Kiambu","Machakos","Meru","Embu","Nyeri","Muranga"],x=a.filter(v=>{const j=v.name.toLowerCase().includes(n.toLowerCase()),y=!h||h==="all"||v.county===h,b=!p||p==="all"||v.type===p;return j&&y&&b}),f=v=>{switch(v){case"transport":return e.jsx(je,{className:"h-5 w-5"});case"storage":return e.jsx(os,{className:"h-5 w-5"});case"aggregator":return e.jsx(ae,{className:"h-5 w-5"});case"processor":return e.jsx(Oa,{className:"h-5 w-5"});case"microcredit":return e.jsx(Bs,{className:"h-5 w-5"});case"p2p_lending":return e.jsx(De,{className:"h-5 w-5"});default:return e.jsx(ee,{className:"h-5 w-5"})}},g=v=>{switch(v){case"transport":return"Transport";case"storage":return"Storage";case"aggregator":return"Aggregator";case"processor":return"Processor";case"microcredit":return"Micro Credit";case"p2p_lending":return"P2P Lending";default:return v}};return i?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg",children:"Loading logistics data from database..."}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Fetching real providers and facilities"})]})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Smart Logistics Network"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Connect with verified transport providers, storage facilities, aggregators, processors, and financial services across Kenya"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mb-8",children:[e.jsx(ps,{label:"Transporters",value:s.activeTransporters,icon:e.jsx(je,{className:"h-4 w-4 text-primary"})}),e.jsx(ps,{label:"Storage",value:s.storageFacilities,icon:e.jsx(os,{className:"h-4 w-4 text-primary"})}),e.jsx(ps,{label:"Aggregators",value:s.aggregators,icon:e.jsx(ae,{className:"h-4 w-4 text-primary"})}),e.jsx(ps,{label:"Processors",value:s.processors,icon:e.jsx(Oa,{className:"h-4 w-4 text-primary"})}),e.jsx(ps,{label:"Micro Credit",value:s.microCreditors,icon:e.jsx(Bs,{className:"h-4 w-4 text-primary"})}),e.jsx(ps,{label:"P2P Lending",value:s.p2pLenders,icon:e.jsx(De,{className:"h-4 w-4 text-primary"})}),e.jsx(ps,{label:"Counties",value:s.countiesCovered,icon:e.jsx(Be,{className:"h-5 w-5 text-primary"})}),e.jsx(ps,{label:"Monthly",value:s.monthlyDeliveries,icon:e.jsx(ee,{className:"h-5 w-5 text-primary"})})]}),e.jsxs(w,{className:"mb-8",children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5"}),"Filter Services"]})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(D,{placeholder:"Search providers...",value:n,onChange:v=>o(v.target.value)}),e.jsxs(Q,{value:h,onValueChange:m,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select County"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Counties"}),u.map(v=>e.jsx(_,{value:v,children:v},v))]})]}),e.jsxs(Q,{value:p,onValueChange:d,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Service Type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Services"}),e.jsx(_,{value:"transport",children:"Transport"}),e.jsx(_,{value:"storage",children:"Storage"}),e.jsx(_,{value:"aggregator",children:"Aggregators"}),e.jsx(_,{value:"processor",children:"Processors"}),e.jsx(_,{value:"microcredit",children:"Micro Credit"}),e.jsx(_,{value:"p2p_lending",children:"P2P Lending"})]})]}),e.jsx(N,{variant:"outline",onClick:()=>{o(""),m("all"),d("all")},children:"Clear Filters"})]})})]}),e.jsx("div",{className:"grid gap-6",children:x.length===0?e.jsx(w,{children:e.jsxs(C,{className:"p-8 text-center",children:[e.jsx(ae,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Providers Found"}),e.jsx("p",{className:"text-muted-foreground",children:n||h||p?"Try adjusting your filters to see more results.":"Providers will appear here once they register on the platform."})]})}):x.map(v=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[f(v.type),v.name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:v.location})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"ml-1 text-sm",children:v.rating})]}),e.jsx(M,{variant:"secondary",children:g(v.type)}),v.is_verified&&e.jsx(M,{variant:"default",children:"Verified"})]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:v.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[v.services.slice(0,3).map(j=>e.jsx(M,{variant:"outline",children:j},j)),v.services.length>3&&e.jsxs(M,{variant:"outline",children:["+",v.services.length-3," more"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:v.contact_phone})]}),e.jsx(N,{size:"sm",children:"Connect"})]})]})]},v.id))})]})]})},la=[{id:"sp1",name:"KenStore Warehousing",businessType:"storage",description:"Modern storage solutions for agricultural produce with temperature control facilities.",services:["Dry Storage","Cold Storage","Fumigation","Quality Monitoring"],location:{county:"Nairobi County",specificLocation:"Industrial Area",coordinates:{latitude:-1.3031934,longitude:36.8719419}},contactInfo:"info@kenstore.co.ke | +254 712 345 678",rates:"KES 300-500 per ton/month",verified:!0,rating:4.7,reviewCount:28,tags:["warehouse","cold-chain","fumigation"],createdAt:"2023-01-15T08:40:00Z",updatedAt:"2023-08-20T14:30:00Z"},{id:"sp2",name:"AgriTransport Logistics",businessType:"transport",description:"Reliable transportation services for agricultural goods across East Africa.",services:["Refrigerated Transport","Bulk Transport","Real-time Tracking"],location:{county:"Mombasa County",specificLocation:"Port Area",coordinates:{latitude:-4.052052,longitude:39.6662227}},contactInfo:"logistics@agritransport.com | +254 722 000 111",rates:"KES 5000-8000 per trip",verified:!0,rating:4.5,reviewCount:35,tags:["transport","logistics","refrigerated"],createdAt:"2023-02-20T10:00:00Z",updatedAt:"2023-09-10T16:00:00Z"},{id:"sp3",name:"CropSure Quality Control",businessType:"quality-control",description:"Ensuring the quality of your produce with certified inspection and testing services.",services:["Soil Testing","Crop Inspection","Certification","Training"],location:{county:"Nakuru County",specificLocation:"Agricultural Center",coordinates:{latitude:-.274744,longitude:36.0759359}},contactInfo:"quality@cropsure.co.ke | +254 733 999 888",rates:"KES 1000-2000 per test",verified:!0,rating:4.8,reviewCount:42,tags:["quality-control","testing","inspection"],createdAt:"2023-03-10T12:30:00Z",updatedAt:"2023-07-25T09:15:00Z"},{id:"sp4",name:"FarmLink Market Access",businessType:"market-linkage",description:"Connecting farmers with reliable markets for their produce.",services:["Market Information","Buyer Connections","Contract Negotiation"],location:{county:"Kisumu County",specificLocation:"Market Square",coordinates:{latitude:-.0917325,longitude:34.7557352}},contactInfo:"markets@farmlink.org | +254 744 555 666",rates:"5% commission on sales",verified:!0,rating:4.6,reviewCount:30,tags:["market-linkage","sales","farmers"],createdAt:"2023-04-01T15:00:00Z",updatedAt:"2023-08-15T11:45:00Z"},{id:"sp5",name:"AgriTrain Training Services",businessType:"training",description:"Providing farmers with the knowledge and skills they need to improve their yields and incomes.",services:["Crop Management","Pest Control","Financial Literacy"],location:{county:"Uasin Gishu County",specificLocation:"Eldoret Town",coordinates:{latitude:.516667,longitude:35.266667}},contactInfo:"training@agritrain.co.ke | +254 755 777 888",rates:"KES 2000 per course",verified:!0,rating:4.9,reviewCount:50,tags:["training","skills","farmers"],createdAt:"2023-05-10T09:00:00Z",updatedAt:"2023-09-01T13:30:00Z"},{id:"sp6",name:"SeedCo Input Supplies",businessType:"input-supplier",description:"Supplying farmers with high-quality seeds and fertilizers to maximize their yields.",services:["Seeds","Fertilizers","Pesticides","Equipment"],location:{county:"Kiambu County",specificLocation:"Thika Town",coordinates:{latitude:-1.0374365,longitude:37.0937757}},contactInfo:"supplies@seedco.com | +254 766 888 999",rates:"Market rates",verified:!0,rating:4.7,reviewCount:38,tags:["seeds","fertilizers","equipment"],createdAt:"2023-06-01T11:00:00Z",updatedAt:"2023-08-25T10:00:00Z"},{id:"sp7",name:"AgriSure Insurance Services",businessType:"inspector",description:"Providing insurance services to farmers to protect them against crop losses.",services:["Crop Insurance","Livestock Insurance","Weather Index Insurance"],location:{county:"Nyeri County",specificLocation:"Town Center",coordinates:{latitude:-.420833,longitude:36.951111}},contactInfo:"insurance@agrisure.co.ke | +254 777 999 000",rates:"Varies based on coverage",verified:!0,rating:4.5,reviewCount:25,tags:["insurance","protection","farmers"],createdAt:"2023-07-01T14:00:00Z",updatedAt:"2023-09-15T17:00:00Z"}],ca=[{id:"d1",title:"Best Practices for Quality Control in Maize Storage",description:"A discussion on ensuring quality standards for maize in storage facilities across Kenya.",date:"2023-09-15",location:"Nairobi County",organizer:"Kenya Bureau of Standards",attendees:45,tags:["maize","storage","quality-standards","pest-control"],authorName:"John Mwangi",authorType:"Quality Control Officer"},{id:"d2",title:"Organic Farming Techniques Workshop",description:"A workshop focusing on sustainable organic farming methods to improve crop yield and soil health.",date:"2023-09-22",location:"Nakuru County",organizer:"Agricultural Society of Kenya",attendees:60,tags:["organic-farming","sustainable-agriculture","soil-health","crop-yield"],authorName:"Aisha Patel",authorType:"Agronomist"},{id:"d3",title:"Post-Harvest Handling of Horticultural Crops",description:"Training on best practices for handling horticultural crops after harvest to minimize losses and maintain quality.",date:"2023-10-01",location:"Kiambu County",organizer:"Horticultural Crops Directorate",attendees:30,tags:["post-harvest","horticulture","crop-handling","quality-control"],authorName:"Samuel Kimani",authorType:"Agricultural Extension Officer"},{id:"d4",title:"Financial Literacy for Smallholder Farmers",description:"A seminar aimed at improving the financial management skills of smallholder farmers.",date:"2023-10-10",location:"Muranga County",organizer:"Ministry of Agriculture",attendees:50,tags:["financial-literacy","smallholder-farmers","financial-management","agribusiness"],authorName:"Esther Njoroge",authorType:"Financial Advisor"},{id:"d5",title:"Climate-Smart Agriculture Practices",description:"A workshop on adopting climate-smart agricultural practices to build resilience to climate change.",date:"2023-10-18",location:"Machakos County",organizer:"Food and Agriculture Organization",attendees:40,tags:["climate-smart-agriculture","climate-change","resilience","sustainable-farming"],authorName:"David Omondi",authorType:"Climate Change Expert"},{id:"d6",title:"Integrated Pest and Disease Management",description:"Training on effective and environmentally friendly methods for managing pests and diseases in crops.",date:"2023-10-25",location:"Kisumu County",organizer:"Kenya Agricultural and Livestock Research Organization",attendees:35,tags:["pest-management","disease-control","integrated-farming","crop-protection"],authorName:"Grace Otieno",authorType:"Plant Pathologist"},{id:"d7",title:"Water Management and Irrigation Techniques",description:"A seminar on efficient water management and modern irrigation techniques for crop production.",date:"2023-11-02",location:"Laikipia County",organizer:"Water Resources Management Authority",attendees:48,tags:["water-management","irrigation","water-conservation","crop-production"],authorName:"Peter Kamau",authorType:"Irrigation Engineer"},{id:"d8",title:"Value Addition and Agro-processing Opportunities",description:"A workshop exploring opportunities for value addition and agro-processing to increase farmer incomes.",date:"2023-11-09",location:"Uasin Gishu County",organizer:"Kenya Industrial Research and Development Institute",attendees:55,tags:["value-addition","agro-processing","farmer-incomes","agri-business"],authorName:"Mercy Chebet",authorType:"Agro-processing Specialist"}],oa=[{id:"1",title:"Advanced Tomato Growing Techniques",description:"Learn the latest techniques for growing high-quality tomatoes, including disease prevention, optimal fertilization, and harvest timing. This hands-on workshop will cover greenhouse and open field production systems.",providerId:"provider1",providerName:"Kilimo Extension Services",date:"2023-08-15T09:00:00Z",location:"Agricultural Training Center, Thika",topics:["tomato production","disease management","greenhouse farming"],capacity:50,registeredCount:35,cost:0,attendees:35,tags:["tomato","greenhouse","fertilizer"],trainer:"Dr. John Kimani"},{id:"2",title:"Quality Control for Fresh Produce Exporters",description:"This comprehensive training covers all aspects of quality control for fresh produce export, including EU regulations, documentation requirements, sampling techniques, and audit preparation.",providerId:"provider2",providerName:"Export Quality Services",date:"2023-08-28T10:00:00Z",location:"Sarova Panafric Hotel, Nairobi",topics:["export standards","quality control","certification","EU regulations"],capacity:30,registeredCount:28,cost:5e3,attendees:28,tags:["export","quality","certification","EU"],trainer:"Ms. Jane Ochieng"},{id:"3",title:"Organic Certification Workshop",description:"Step-by-step guidance on the organic certification process for small and medium-scale farmers. Learn about record-keeping requirements, approved inputs, conversion periods, and marketing strategies.",providerId:"provider3",providerName:"Kenya Organic Agriculture Network",date:"2023-09-05T09:30:00Z",location:"Kisumu Agricultural Society Showground",topics:["organic certification","record keeping","organic inputs"],capacity:40,registeredCount:22,cost:2500,attendees:22,tags:["organic","record","inputs"],trainer:"Mr. David Mwangi"},{id:"4",title:"Pesticide Safety and Application",description:"Learn safe and effective pesticide application techniques, including proper handling, calibration of equipment, environmental protection measures, and health safety protocols.",providerId:"provider4",providerName:"Agrochemical Association of Kenya",date:"2023-09-12T08:00:00Z",location:"Machakos Farmers Training Center",topics:["pesticide safety","application techniques","equipment calibration"],capacity:60,registeredCount:45,cost:0,attendees:45,tags:["pesticide","application","calibration"],trainer:"Dr. Emily Mwangi"},{id:"5",title:"Post-Harvest Management for Fruits and Vegetables",description:"Reduce post-harvest losses through improved handling, storage, and transportation techniques. This training covers cold chain management, packaging solutions, and value addition opportunities.",providerId:"provider5",providerName:"Horticultural Crops Directorate",date:"2023-09-20T10:00:00Z",location:"KALRO Center, Meru",topics:["post-harvest management","cold chain","value addition"],capacity:35,registeredCount:18,cost:1e3,attendees:18,tags:["post-harvest","cold","value"],trainer:"Ms. Mary Wanjiru"},{id:"6",title:"Food Safety Management Systems (HACCP)",description:"Comprehensive training on implementing HACCP principles in agricultural production and handling. Learn to identify critical control points and develop monitoring systems for ensuring food safety.",providerId:"provider6",providerName:"Kenya Bureau of Standards",date:"2023-10-03T09:00:00Z",location:"KEBS Headquarters, Nairobi",topics:["HACCP","food safety","critical control points"],capacity:25,registeredCount:25,cost:8e3,attendees:25,tags:["HACCP","food","control"],trainer:"Dr. John Kimani"},{id:"7",title:"Digital Tools for Farm Record Keeping",description:"Introduction to smartphone applications and digital tools for maintaining farm records, tracking inputs and harvests, and preparing for certification audits.",providerId:"provider7",providerName:"Digital Farmers Kenya",date:"2023-10-10T14:00:00Z",location:"Virtual (Zoom)",topics:["digital agriculture","record keeping","farm management"],capacity:100,registeredCount:67,cost:500,attendees:67,tags:["digital","record","management"],trainer:"Ms. Jane Ochieng"},{id:"8",title:"Soil Testing and Fertility Management",description:"Learn to interpret soil test results and develop effective fertility management strategies. This training covers sampling techniques, understanding lab reports, and creating fertilizer plans.",providerId:"provider8",providerName:"Soil Health Initiative",date:"2023-10-18T09:00:00Z",location:"ATC Eldoret",topics:["soil health","soil testing","fertility management"],capacity:45,registeredCount:32,cost:1500,attendees:32,tags:["soil","testing","fertility"],trainer:"Mr. David Mwangi"},{id:"9",title:"Quality Assurance for Dairy Production",description:"Comprehensive training on quality assurance in milk production, handling, and processing. Learn about hygiene requirements, testing protocols, and quality standards.",providerId:"provider9",providerName:"Kenya Dairy Board",date:"2023-10-25T09:00:00Z",location:"Nakuru Agricultural Showground",topics:["dairy","milk quality","hygiene","testing"],capacity:50,registeredCount:28,cost:2e3,attendees:28,tags:["dairy","quality","hygiene","testing"],trainer:"Ms. Mary Wanjiru"}],Gi=async()=>{try{const s=await ks.get("service-providers",{},la);return s&&s.results&&s.results.length>0?s.results:(console.log("Falling back to mock service provider data"),la)}catch(s){return console.error("Error fetching service providers:",s),la}},Yo=async()=>{try{const s=await ks.get("quality-discussions",{},ca);return s&&s.results&&s.results.length>0?s.results:(console.log("Falling back to mock quality discussions data"),ca)}catch(s){return console.error("Error fetching quality discussions:",s),ca}},Qo=async()=>{try{const s=await ks.get("training-events",{},oa);return s&&s.results&&s.results.length>0?s.results:(console.log("Falling back to mock training events data"),oa)}catch(s){return console.error("Error fetching training events:",s),oa}},Jo=()=>{const s=ve();return e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Providers Directory"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Find and connect with agricultural service providers across Kenya"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(N,{onClick:()=>s("/service-provider-registration"),children:"Register as a Provider"})})]})},Zo=({searchTerm:s,setSearchTerm:t,selectedType:a,setSelectedType:r,selectedCounty:i,setSelectedCounty:c,filteredCount:n,counties:o,providerTypes:h,selectedCategory:m,setSelectedCategory:p,providerCategories:d})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"relative",children:e.jsx(D,{placeholder:"Search by name, service or tag...",value:s,onChange:u=>t(u.target.value),className:"w-full"})}),e.jsx("div",{children:e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Filter by county"})}),e.jsx(Y,{children:o.map(u=>e.jsx(_,{value:u.value,children:u.label},u.value))})]})}),e.jsx("div",{children:e.jsxs(Q,{value:m,onValueChange:p,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Provider Category"})}),e.jsx(Y,{children:d.map(u=>e.jsx(_,{value:u,children:u},u))})]})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:[n," providers found"]})})]}),Xo=({activeTab:s,onTabChange:t,providerTypes:a})=>e.jsx(me,{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 h-auto",children:a.map(r=>e.jsx(R,{value:r.value,className:"text-xs md:text-sm",children:r.label},r.value))}),ed=()=>{const s=ve();return e.jsxs("div",{className:"mt-12 border-t pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Recent Training Events"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-lg",children:"Advanced Potato Farming Techniques"}),e.jsx(O,{children:"AgriTrain Kenya"})]}),e.jsxs(C,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn advanced techniques for potato cultivation including disease management and optimal fertilization"}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(de,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:"May 15, 2025"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:"Meru Agricultural Training Center"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ee,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:"18/30 registered"})]})]}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx(M,{children:"KSh 2,500"}),e.jsx(N,{size:"sm",onClick:()=>s("/training-events"),children:"Register"})]})]},t))}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(N,{variant:"outline",onClick:()=>s("/training-events"),children:"View All Events"})})]})},sd=()=>{const[s,t]=Xn(),a=ve(),{toast:r}=X(),[i,c]=l.useState([]),[n,o]=l.useState([]),[h,m]=l.useState(!0),[p,d]=l.useState(""),[u,x]=l.useState("all"),[f,g]=l.useState("all"),[v,j]=l.useState("All Providers"),[y,b]=l.useState([]),[T,E]=l.useState([]),L=s.get("type")||"all",G=[{value:"all",label:"All Providers"},{value:"storage",label:"Storage Facilities"},{value:"transport",label:"Transport Services"},{value:"quality-control",label:"Quality Control"},{value:"training",label:"Training Providers"},{value:"input-supplier",label:"Input Suppliers"},{value:"inspector",label:"Inspectors"},{value:"market-linkage",label:"Market Linkage"},{value:"insurance-provider",label:"Insurance Providers"},{value:"soil-testing-provider",label:"Soil Testing Providers"},{value:"drone-satellite-imagery-provider",label:"Drone and Satellite Imagery Providers"},{value:"iot-sensor-data-provider",label:"IoT Sensor Data Providers"},{value:"export-transporters",label:"Export Transporters"},{value:"shippers",label:"Shippers"}],I=[{value:"all",label:"All Counties"},{value:"nairobi",label:"Nairobi"},{value:"mombasa",label:"Mombasa"},{value:"kisumu",label:"Kisumu"},{value:"nakuru",label:"Nakuru"},{value:"kiambu",label:"Kiambu"},{value:"machakos",label:"Machakos"},{value:"meru",label:"Meru"},{value:"kakamega",label:"Kakamega"},{value:"uasin-gishu",label:"Uasin Gishu"},{value:"nyeri",label:"Nyeri"},{value:"kilifi",label:"Kilifi"}],U=["All Providers","Storage Facilities","Transport Services","Quality Control","Training Providers","Input Suppliers","Inspectors","Market Linkage","Insurance Providers","Soil Testing Providers","Drone and Satellite Imagery Providers","IoT Sensor Data Providers","Export Transporters","Shippers"];l.useEffect(()=>{(async()=>{try{m(!0);const K=await Gi();c(K),o(K)}catch(K){console.error("Error fetching service providers:",K),r({title:"Error",description:"Failed to load service providers. Please try again later.",variant:"destructive"})}finally{m(!1)}})()},[r]),l.useEffect(()=>{let H=[...i];if(u!=="all"&&(H=H.filter(K=>K.businessType===u)),f!=="all"&&(H=H.filter(K=>K.location.county.toLowerCase()===f.toLowerCase())),v!=="All Providers"&&(H=H.filter(K=>(K.provider_category||K.businessType)===v)),p){const K=p.toLowerCase();H=H.filter(le=>le.name.toLowerCase().includes(K)||le.description.toLowerCase().includes(K)||le.services.some(xe=>xe.toLowerCase().includes(K))||le.tags.some(xe=>xe.toLowerCase().includes(K)))}o(H)},[i,u,f,p,v]);const q=H=>{H==="all"?s.delete("type"):s.set("type",H),t(s),x(H)};async function te(H){const{data:K}=await F.from("transporter_bookings").select("*").eq("transporter_id",H);b(K||[])}async function Te(H){const{data:K}=await F.from("tracking_events").select("*").eq("export_order_id",H).order("event_time");E(K||[])}return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsx(Jo,{}),e.jsx(ue,{defaultValue:L,value:L,onValueChange:q,className:"mb-8",children:e.jsx(Xo,{activeTab:L,onTabChange:q,providerTypes:G})}),e.jsx(Zo,{searchTerm:p,setSearchTerm:d,selectedType:u,setSelectedType:x,selectedCounty:f,setSelectedCounty:g,filteredCount:n.length,counties:I,providerTypes:G,selectedCategory:v,setSelectedCategory:j,providerCategories:U}),h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(H=>e.jsxs(w,{className:"animate-pulse",children:[e.jsx(k,{className:"h-32 bg-muted"}),e.jsxs(C,{className:"pt-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-4/6"})]})]},H))}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Et,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No providers found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:"Try adjusting your search or filters, or register as a new provider."}),e.jsx(N,{onClick:()=>a("/service-provider-registration"),children:"Register as a Provider"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(H=>{var le;const K={rating:4.5,total:25};return e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:H.business_name||H.name}),e.jsx(el,{children:H.provider_category||H.businessType})]}),e.jsxs(C,{children:[e.jsx("div",{children:H.description}),e.jsxs("div",{children:["Location: ",H.location.county,", ",H.location.specificLocation]}),(H.provider_category==="Export Transporters"||H.businessType==="export-transporters")&&e.jsxs("div",{children:[e.jsxs("div",{children:["Licenses: ",(le=H.licenses)==null?void 0:le.join(", ")]}),e.jsxs("div",{children:["Insurance: ",H.insurance_details]}),e.jsxs("div",{children:["Rating: ",K.rating," (",K.total," reviews)"]}),e.jsx(N,{onClick:()=>te(H.id),children:"View Bookings"}),y.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Bookings"}),e.jsx("ul",{children:y.map(xe=>e.jsxs("li",{className:"mb-1",children:[xe.booking_date,": ",xe.cargo_type," - ",xe.status," (KES ",xe.price,")",e.jsx(N,{size:"sm",onClick:()=>Te(xe.export_order_id),className:"ml-2",children:"Track"})]},xe.id))})]}),T.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Tracking History"}),e.jsx("ul",{children:T.map(xe=>e.jsxs("li",{className:"mb-1",children:[xe.event_time,": ",xe.location," ",xe.status&&`- ${xe.status}`]},xe.id))})]})]})]})]},H.id)})}),e.jsx(ed,{})]})]})},td=({onDiscussionCreated:s})=>{const{toast:t}=X(),a=ve(),[r,i]=l.useState(!1),[c,n]=l.useState(!1),[o,h]=l.useState({title:"",content:"",category:"quality_standards",tags:[]}),[m,p]=l.useState(""),d=[{value:"quality_standards",label:"Quality Standards"},{value:"verification",label:"Product Verification"},{value:"regulations",label:"Regulations & Compliance"},{value:"export_requirements",label:"Export Requirements"},{value:"pest_control",label:"Pest & Disease Control"},{value:"certification",label:"Certification"}],u=()=>{m.trim()&&!o.tags.includes(m.trim())&&(h({...o,tags:[...o.tags,m.trim()]}),p(""))},x=g=>{h({...o,tags:o.tags.filter(v=>v!==g)})},f=async()=>{const{data:{user:g}}=await F.auth.getUser();if(!g){t({title:"Authentication Required",description:"Please sign in to create a discussion.",variant:"destructive"}),a("/auth");return}if(!o.title.trim()||!o.content.trim()){t({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}n(!0);try{const{error:v}=await F.from("community_posts").insert({author_id:g.id,title:o.title,content:o.content,category:o.category,tags:o.tags,post_type:"discussion"});if(v)throw v;t({title:"Success",description:"Your discussion has been created successfully!"}),h({title:"",content:"",category:"quality_standards",tags:[]}),i(!1),s&&s()}catch(v){console.error("Error creating discussion:",v),t({title:"Error",description:"Failed to create discussion. Please try again.",variant:"destructive"})}finally{n(!1)}};return e.jsxs(_e,{open:r,onOpenChange:i,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(Sa,{className:"mr-2 h-4 w-4"})," Start New Discussion"]})}),e.jsxs(Se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Ae,{children:[e.jsx(Pe,{children:"Start a New Discussion"}),e.jsx(jt,{children:"Share your thoughts, questions, or concerns about agricultural quality control"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"title",children:"Title *"}),e.jsx(D,{id:"title",placeholder:"What's your discussion about?",value:o.title,onChange:g=>h({...o,title:g.target.value}),maxLength:200}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.title.length,"/200 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"category",children:"Category *"}),e.jsx("select",{id:"category",value:o.category,onChange:g=>h({...o,category:g.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:d.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"content",children:"Content *"}),e.jsx(ie,{id:"content",placeholder:"Share your thoughts, questions, or experiences...",value:o.content,onChange:g=>h({...o,content:g.target.value}),rows:8,maxLength:5e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.content.length,"/5000 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"tags",children:"Tags (optional)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{id:"tags",placeholder:"Add a tag (e.g., avocados, EU, pesticides)",value:m,onChange:g=>p(g.target.value),onKeyPress:g=>{g.key==="Enter"&&(g.preventDefault(),u())}}),e.jsx(N,{type:"button",onClick:u,variant:"outline",children:"Add"})]}),o.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.tags.map(g=>e.jsxs(M,{variant:"secondary",className:"gap-1",children:[g,e.jsx(Ue,{className:"h-3 w-3 cursor-pointer",onClick:()=>x(g)})]},g))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Press Enter or click Add to add tags"})]})]}),e.jsxs(Cs,{children:[e.jsx(N,{variant:"outline",onClick:()=>i(!1),disabled:c,children:"Cancel"}),e.jsx(N,{onClick:f,disabled:c,children:c?"Creating...":"Create Discussion"})]})]})]})},ad=({onDiscussionCreated:s})=>e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Quality Control Discussions"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Join the conversation on agricultural quality standards and challenges"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(td,{onDiscussionCreated:s})})]}),rd=({searchTerm:s,setSearchTerm:t,filterTag:a,setFilterTag:r,allTags:i})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsx(D,{placeholder:"Search discussions...",value:s,onChange:c=>t(c.target.value),className:"w-full"})}),e.jsx("div",{children:e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Filter by tag"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Tags"}),i.map(c=>e.jsx(_,{value:c,children:c},c))]})]})})]}),id=({discussion:s,filterTag:t,setFilterTag:a})=>e.jsxs(w,{children:[e.jsxs(k,{className:"pb-2",children:[e.jsx(S,{className:"text-xl",children:s.title}),e.jsxs(O,{className:"flex items-center",children:["Started by ",s.authorName,e.jsx(M,{variant:"outline",className:"ml-2 text-xs",children:s.authorType})]})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-muted-foreground line-clamp-2",children:s.content}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:s.tags.map(r=>e.jsx(M,{variant:t===r?"default":"outline",className:"cursor-pointer",onClick:()=>a(r),children:r},r))})]}),e.jsxs(re,{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ke,{className:"mr-1 h-4 w-4"}),s.commentCount," comments"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ws,{className:"mr-1 h-4 w-4"}),s.viewCount," views"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ze,{className:"mr-1 h-4 w-4"}),new Date(s.createdAt).toLocaleDateString()]})]}),e.jsx(N,{variant:"ghost",size:"sm",children:"View Discussion"})]})]}),nd=()=>{const{toast:s}=X(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,h]=l.useState("all"),m=["counterfeit","verification","export","regulations","avocados","EU","pesticides"],p=async()=>{try{i(!0);const u=await Yo();a(u)}catch(u){console.error("Error fetching discussions:",u),s({title:"Error",description:"Failed to load discussions. Please try again later.",variant:"destructive"})}finally{i(!1)}};l.useEffect(()=>{p()},[s]);const d=t.filter(u=>{const x=c===""||u.title.toLowerCase().includes(c.toLowerCase())||u.content.toLowerCase().includes(c.toLowerCase())||u.authorName.toLowerCase().includes(c.toLowerCase()),f=o==="all"||u.tags.includes(o);return x&&f});return e.jsxs("div",{className:"flex min-h-screen flex-col pb-20 md:pb-0",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsx(ad,{onDiscussionCreated:p}),e.jsx(rd,{searchTerm:c,setSearchTerm:n,filterTag:o,setFilterTag:h,allTags:m}),r?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(u=>e.jsxs(w,{className:"animate-pulse",children:[e.jsxs(k,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/4"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]})]},u))}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Ke,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No discussions found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:"Be the first to start a discussion on this topic!"}),e.jsx(N,{children:"Start New Discussion"})]}):e.jsx("div",{className:"space-y-4",children:d.map(u=>e.jsx(id,{discussion:u,filterTag:o,setFilterTag:h},u.id))})]}),e.jsx(Qs,{})]})},ld=()=>{const{toast:s}=X(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,h]=l.useState("upcoming");l.useEffect(()=>{(async()=>{try{i(!0);const d=await Qo();a(d)}catch(d){console.error("Error fetching training events:",d),s({title:"Error",description:"Failed to load training events. Please try again later.",variant:"destructive"})}finally{i(!1)}})()},[s]);const m=t.filter(p=>{const d=c===""||p.title.toLowerCase().includes(c.toLowerCase())||p.description.toLowerCase().includes(c.toLowerCase())||p.providerName.toLowerCase().includes(c.toLowerCase())||p.topics.some(f=>f.toLowerCase().includes(c.toLowerCase())),u=new Date(p.date),x=new Date;return o==="upcoming"?d&&u>x:o==="past"?d&&u<=x:d});return e.jsxs("div",{className:"flex min-h-screen flex-col pb-20 md:pb-0",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Training Events"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover agricultural training events and workshops across Kenya"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx(N,{children:"Add Training Event"})})]}),e.jsx(ue,{defaultValue:"upcoming",value:o,onValueChange:p=>h(p),className:"mb-8",children:e.jsxs(me,{children:[e.jsx(R,{value:"upcoming",children:"Upcoming Events"}),e.jsx(R,{value:"past",children:"Past Events"}),e.jsx(R,{value:"all",children:"All Events"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(D,{placeholder:"Search events by title, provider, or topic...",value:c,onChange:p=>n(p.target.value),className:"w-full md:w-2/3 lg:w-1/2"})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(p=>e.jsxs(w,{className:"animate-pulse",children:[e.jsxs(k,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]}),e.jsx(re,{children:e.jsx("div",{className:"h-5 bg-muted rounded w-1/4"})})]},p))}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(de,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No events found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:o==="upcoming"?"No upcoming events match your search. Try different keywords or check back later.":"No past events match your search. Try different keywords or check all events."}),o!=="all"&&e.jsx(N,{variant:"outline",onClick:()=>h("all"),children:"View All Events"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(p=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-lg",children:p.title}),e.jsx(O,{children:p.providerName})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:p.description}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(de,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[new Date(p.date).toLocaleDateString()," at ",new Date(p.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{children:p.location})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ee,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[p.registeredCount,"/",p.capacity," registered"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.topics.map(d=>e.jsx(M,{variant:"outline",className:"text-xs",children:d},d))})]}),e.jsxs(re,{className:"flex justify-between",children:[e.jsx(M,{children:p.cost}),e.jsx(N,{size:"sm",children:new Date(p.date)>new Date?"Register":"View Details"})]})]},p.id))})]}),e.jsx(Qs,{})]})},cd=({onSuccess:s})=>{const{toast:t}=X(),[a,r]=l.useState(!1),[i,c]=l.useState({title:"",description:"",linkage_type:"buyer_seller",crops_involved:[],counties:[],requirements:[],benefits:[],contact_info:"",application_deadline:"",start_date:"",duration_months:void 0,minimum_quantity:void 0,price_range:"",max_participants:void 0}),[n,o]=l.useState(""),[h,m]=l.useState(""),[p,d]=l.useState(""),[u,x]=l.useState(""),f=["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret","Thika","Kiambu","Machakos","Meru","Embu","Nyeri","Muranga","Kakamega","Kisii","Nyamira","Kericho","Bomet","Narok","Kajiado","Makueni"],g=["Maize","Beans","Rice","Wheat","Potatoes","Sweet Potatoes","Cassava","Bananas","Coffee","Tea","Sugarcane","Cotton","Tomatoes","Onions","Cabbages","Kales","Spinach","Avocado","Mangoes","Oranges"],v=(b,T,E)=>{if(b.trim()){const P=i[T];P.includes(b.trim())||c(L=>({...L,[T]:[...P,b.trim()]})),E("")}},j=(b,T)=>{const E=i[T];c(P=>({...P,[T]:E.filter(L=>L!==b)}))},y=async b=>{if(b.preventDefault(),!i.title||!i.description||!i.contact_info){t({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{r(!0),await Fi(i),t({title:"Success",description:"Market linkage registered successfully!"}),c({title:"",description:"",linkage_type:"buyer_seller",crops_involved:[],counties:[],requirements:[],benefits:[],contact_info:"",application_deadline:"",start_date:"",duration_months:void 0,minimum_quantity:void 0,price_range:"",max_participants:void 0}),s&&s()}catch(T){console.error("Error creating market linkage:",T),t({title:"Error",description:"Failed to register market linkage. Please try again.",variant:"destructive"})}finally{r(!1)}};return e.jsxs(w,{className:"max-w-4xl mx-auto",children:[e.jsx(k,{children:e.jsx(S,{children:"Register New Market Linkage"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx(D,{value:i.title,onChange:b=>c(T=>({...T,title:b.target.value})),placeholder:"e.g., Avocado Export Partnership",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Linkage Type *"}),e.jsxs(Q,{value:i.linkage_type,onValueChange:b=>c(T=>({...T,linkage_type:b})),children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"buyer_seller",children:"Buyer-Seller"}),e.jsx(_,{value:"contract_farming",children:"Contract Farming"}),e.jsx(_,{value:"cooperative",children:"Cooperative"}),e.jsx(_,{value:"export_opportunity",children:"Export Opportunity"}),e.jsx(_,{value:"processing_partnership",children:"Processing Partnership"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Contact Information *"}),e.jsx(D,{value:i.contact_info,onChange:b=>c(T=>({...T,contact_info:b.target.value})),placeholder:"Phone: +254..., Email: ...",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description *"}),e.jsx(ie,{value:i.description,onChange:b=>c(T=>({...T,description:b.target.value})),placeholder:"Detailed description of the market linkage opportunity...",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Crops Involved"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{className:"flex-1",children:e.jsx(J,{placeholder:"Select crop"})}),e.jsx(Y,{children:g.map(b=>e.jsx(_,{value:b,children:b},b))})]}),e.jsx(N,{type:"button",onClick:()=>v(n,"crops_involved",o),size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.crops_involved.map(b=>e.jsxs(M,{variant:"secondary",className:"flex items-center gap-1",children:[b,e.jsx(Ue,{className:"h-3 w-3 cursor-pointer",onClick:()=>j(b,"crops_involved")})]},b))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Counties"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(Q,{value:h,onValueChange:m,children:[e.jsx(W,{className:"flex-1",children:e.jsx(J,{placeholder:"Select county"})}),e.jsx(Y,{children:f.map(b=>e.jsx(_,{value:b,children:b},b))})]}),e.jsx(N,{type:"button",onClick:()=>v(h,"counties",m),size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.counties.map(b=>e.jsxs(M,{variant:"secondary",className:"flex items-center gap-1",children:[b,e.jsx(Ue,{className:"h-3 w-3 cursor-pointer",onClick:()=>j(b,"counties")})]},b))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Requirements"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(D,{value:p,onChange:b=>d(b.target.value),placeholder:"Add requirement...",className:"flex-1"}),e.jsx(N,{type:"button",onClick:()=>v(p,"requirements",d),size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.requirements.map(b=>e.jsxs(M,{variant:"outline",className:"flex items-center gap-1",children:[b,e.jsx(Ue,{className:"h-3 w-3 cursor-pointer",onClick:()=>j(b,"requirements")})]},b))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Benefits"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(D,{value:u,onChange:b=>x(b.target.value),placeholder:"Add benefit...",className:"flex-1"}),e.jsx(N,{type:"button",onClick:()=>v(u,"benefits",x),size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.benefits.map(b=>e.jsxs(M,{variant:"outline",className:"flex items-center gap-1",children:[b,e.jsx(Ue,{className:"h-3 w-3 cursor-pointer",onClick:()=>j(b,"benefits")})]},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Application Deadline"}),e.jsx(D,{type:"date",value:i.application_deadline,onChange:b=>c(T=>({...T,application_deadline:b.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Date"}),e.jsx(D,{type:"date",value:i.start_date,onChange:b=>c(T=>({...T,start_date:b.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Duration (months)"}),e.jsx(D,{type:"number",value:i.duration_months||"",onChange:b=>c(T=>({...T,duration_months:parseInt(b.target.value)||void 0})),placeholder:"e.g., 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Participants"}),e.jsx(D,{type:"number",value:i.max_participants||"",onChange:b=>c(T=>({...T,max_participants:parseInt(b.target.value)||void 0})),placeholder:"e.g., 50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Quantity (tons)"}),e.jsx(D,{type:"number",value:i.minimum_quantity||"",onChange:b=>c(T=>({...T,minimum_quantity:parseFloat(b.target.value)||void 0})),placeholder:"e.g., 10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price Range"}),e.jsx(D,{value:i.price_range,onChange:b=>c(T=>({...T,price_range:b.target.value})),placeholder:"e.g., 50-80 KES per kg"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(N,{type:"button",variant:"outline",children:"Cancel"}),e.jsx(N,{type:"submit",disabled:a,children:a?"Registering...":"Register Market Linkage"})]})]})})]})},od=()=>{const{toast:s}=X(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,h]=l.useState("all"),[m,p]=l.useState(!1);l.useEffect(()=>{d()},[]);const d=async()=>{try{i(!0);const x=await Ei();a(x||[])}catch(x){console.error("Error fetching market linkages:",x),s({title:"Error",description:"Failed to load market linkages. Please try again later.",variant:"destructive"})}finally{i(!1)}},u=t.filter(x=>{var g,v;const f=c===""||x.title.toLowerCase().includes(c.toLowerCase())||x.description.toLowerCase().includes(c.toLowerCase())||((g=x.crops_involved)==null?void 0:g.some(j=>j.toLowerCase().includes(c.toLowerCase())))||((v=x.counties)==null?void 0:v.some(j=>j.toLowerCase().includes(c.toLowerCase())));return o==="vertical"?f&&(x.linkage_type==="buyer_seller"||x.linkage_type==="export_opportunity"):o==="horizontal"?f&&(x.linkage_type==="cooperative"||x.linkage_type==="contract_farming"):f});return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Market Linkages"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Connect with vertical and horizontal market linkage opportunities"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(_e,{open:m,onOpenChange:p,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Register New Market Linkage"]})}),e.jsx(Se,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx(cd,{onSuccess:()=>{p(!1),d()}})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Understanding Market Linkages"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(Oe,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Vertical Linkages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect farmers to buyers further up the value chain such as processors, exporters, and retailers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx(ee,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Horizontal Linkages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect farmers to other farmers or farmer groups for collective action, shared resources, and increased bargaining power."})]})]})]})]})}),e.jsx(ue,{defaultValue:"all",value:o,onValueChange:x=>h(x),className:"mb-8",children:e.jsxs(me,{children:[e.jsx(R,{value:"all",children:"All Linkages"}),e.jsx(R,{value:"vertical",children:"Vertical Linkages"}),e.jsx(R,{value:"horizontal",children:"Horizontal Linkages"})]})}),e.jsx("div",{className:"mb-8",children:e.jsx(D,{placeholder:"Search by title, crops, counties...",value:c,onChange:x=>n(x.target.value),className:"w-full md:w-2/3 lg:w-1/2"})}),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(x=>e.jsxs(w,{className:"animate-pulse",children:[e.jsxs(k,{className:"pb-2",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-4/6"})]}),e.jsx(re,{children:e.jsx("div",{className:"h-5 bg-muted rounded w-1/4"})})]},x))}):u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Ba,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No market linkages found"}),e.jsx("p",{className:"text-muted-foreground mt-2 mb-4",children:"No market linkages match your search criteria. Try different keywords or view all linkages."}),o!=="all"&&e.jsx(N,{variant:"outline",onClick:()=>h("all"),children:"View All Linkages"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map(x=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl",children:x.title}),e.jsxs(O,{children:["Contact: ",x.contact_info]})]}),e.jsx(M,{variant:x.linkage_type==="buyer_seller"||x.linkage_type==="export_opportunity"?"default":"secondary",children:x.linkage_type.replace("_"," ").toUpperCase()})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:x.description}),x.counties&&x.counties.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Counties:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.counties.map(f=>e.jsx(M,{variant:"outline",children:f},f))})]}),x.crops_involved&&x.crops_involved.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Crops:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:x.crops_involved.map(f=>e.jsx(M,{variant:"outline",children:f},f))})]}),x.requirements&&x.requirements.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Requirements:"}),e.jsx("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:x.requirements.slice(0,3).map((f,g)=>e.jsx("li",{children:f},g))})]}),x.benefits&&x.benefits.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-1",children:"Benefits:"}),e.jsx("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:x.benefits.slice(0,3).map((f,g)=>e.jsx("li",{children:f},g))})]})]}),e.jsxs(re,{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:x.price_range&&`Price: ${x.price_range}`}),e.jsxs(N,{size:"sm",children:[e.jsx(Ba,{className:"h-4 w-4 mr-2"}),"Connect"]})]})]},x.id))}),e.jsxs("div",{className:"mt-12 border-t pt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Success Stories"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:"From Individual Farmer to Export Group"})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:'"As a small-scale avocado farmer, I struggled to access export markets due to volume requirements. After joining the Avocado Export Cooperative, I now sell my produce at premium prices and have received training on GlobalGAP certification."'}),e.jsx("div",{className:"flex mt-4",children:e.jsx(M,{variant:"outline",children:"30% higher income"})})]}),e.jsx(re,{children:e.jsx("div",{className:"text-sm",children:"- John Mwangi, Muranga County"})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:"Collective Input Purchasing"})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:`"By joining the Meru Potato Farmers Association, our group of 15 small-scale farmers now purchases inputs in bulk. We've reduced our costs by 20% and gained access to certified seeds that were previously unavailable to us individually."`}),e.jsx("div",{className:"flex mt-4",children:e.jsx(M,{variant:"outline",children:"20% cost reduction"})})]}),e.jsx(re,{children:e.jsx("div",{className:"text-sm",children:"- Mary Nkatha, Meru County"})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:"Supermarket Direct Supply Chain"})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:`"Through the Fresh Produce Vertical Linkage program, our cooperative now supplies vegetables directly to three major supermarket chains. We've eliminated middlemen and increased our profits while ensuring consistent market access."`}),e.jsx("div",{className:"flex mt-4",children:e.jsx(M,{variant:"outline",children:"Stable pricing"})})]}),e.jsx(re,{children:e.jsx("div",{className:"text-sm",children:"- David Ochieng, Kisumu County"})})]})]})]})]})]})},dd=$s("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),fs=l.forwardRef(({className:s,variant:t,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:z(dd({variant:t}),s),...a}));fs.displayName="Alert";const Ma=l.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:z("mb-1 font-medium leading-none tracking-tight",s),...t}));Ma.displayName="AlertTitle";const vs=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("text-sm [&_p]:leading-relaxed",s),...t}));vs.displayName="AlertDescription";const md=async(s,t,a)=>{try{if(!a.length)return console.warn("No reports to analyze"),null;const r=a.join(`

`),i=await ud(s,t,r);return i||(console.error("Failed to get sentiment analysis result"),null)}catch(r){return console.error("Error in sentiment analysis:",r),null}};async function ud(s,t,a){try{const{data:r,error:i}=await F.functions.invoke("analyze-sentiment",{body:{commodity:s,county:t,text:a}});return i?(console.error("Error from sentiment analysis function:",i),null):r?{id:crypto.randomUUID(),commodity_name:s,county:t,sentiment_score:r.sentimentScore||0,report_count:1,tags:r.tags||[],issues:r.issues||[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()}:(console.error("No data returned from sentiment analysis"),null)}catch(r){return console.error("Failed to call sentiment analysis function:",r),null}}const xd=async()=>{try{const{data:s,error:t}=await F.from("market_sentiment").select("*").order("updated_at",{ascending:!1}).limit(50);return t?(console.error("Error fetching market sentiment:",t),[]):s||[]}catch(s){return console.error("Unexpected error fetching market sentiment:",s),[]}},hd=async(s,t,a)=>{try{return await md(s,t,[a])!==null}catch(r){return console.error("Error submitting market report:",r),!1}},pd=()=>{const[s,t]=l.useState("alerts"),[a,r]=l.useState("all"),[i,c]=l.useState("all"),[n,o]=l.useState([]),[h,m]=l.useState(!0),[p,d]=l.useState({commodity:"",county:"",report:""}),[u,x]=l.useState(!1),{toast:f}=X();l.useEffect(()=>{g()},[]);const g=async()=>{try{m(!0);const P=await xd();o(P)}catch(P){console.error("Error loading sentiment data:",P),f({title:"Error",description:"Failed to load sentiment data",variant:"destructive"})}finally{m(!1)}},v=async P=>{if(P.preventDefault(),!p.commodity||!p.county||!p.report){f({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}try{if(x(!0),await hd(p.commodity,p.county,p.report))f({title:"Report Submitted",description:"Your market report has been analyzed and submitted successfully"}),d({commodity:"",county:"",report:""}),g();else throw new Error("Failed to submit report")}catch(L){console.error("Error submitting report:",L),f({title:"Submission Failed",description:"Failed to submit your report. Please try again.",variant:"destructive"})}finally{x(!1)}},j=()=>n.filter(P=>(a==="all"||P.commodity_name.toLowerCase().includes(a.toLowerCase()))&&(i==="all"||P.county.toLowerCase().includes(i.toLowerCase()))),y=()=>j().filter(P=>P.sentiment_score<-.3||P.issues.some(L=>["counterfeit_products","pest_disease"].includes(L))),b=()=>e.jsxs(w,{className:"mb-6",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Submit Market Report"}),e.jsx(O,{children:"Share your market experience to help the community"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"commodity",children:"Commodity"}),e.jsx(D,{id:"commodity",value:p.commodity,onChange:P=>d(L=>({...L,commodity:P.target.value})),placeholder:"e.g., Maize, Tomatoes, Potatoes"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"county",children:"County"}),e.jsx(D,{id:"county",value:p.county,onChange:P=>d(L=>({...L,county:P.target.value})),placeholder:"e.g., Nakuru, Kiambu, Kisumu"})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"report",children:"Market Report"}),e.jsx(ie,{id:"report",value:p.report,onChange:P=>d(L=>({...L,report:P.target.value})),placeholder:"Describe your market experience, prices, quality issues, or any concerns...",rows:4})]}),e.jsx(N,{type:"submit",disabled:u,className:"w-full",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Analyzing & Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"Submit Report"]})})]})})]}),T=()=>{const P=y();return h?e.jsx("div",{className:"p-6 text-center",children:"Loading alerts..."}):P.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(fe,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No alerts found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"There are no current alerts matching your criteria."})]}):e.jsx("div",{className:"space-y-4",children:P.map(L=>e.jsxs(fs,{variant:L.sentiment_score<-.5?"destructive":"default",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs(Ma,{children:["Alert: ",L.commodity_name," in ",L.county]}),e.jsx(vs,{children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{children:["Sentiment Score: ",(L.sentiment_score*100).toFixed(0),"%"]}),e.jsxs("p",{children:["Reports: ",L.report_count]}),L.issues.length>0&&e.jsxs("p",{children:["Issues: ",L.issues.join(", ")]}),L.tags.length>0&&e.jsxs("p",{children:["Tags: ",L.tags.join(", ")]})]})})]},L.id))})},E=()=>{const P=j();return h?e.jsx("div",{className:"p-6 text-center",children:"Loading insights..."}):P.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(It,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No insights found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"There are no insights matching your criteria."})]}):e.jsx("div",{className:"space-y-4",children:P.map(L=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{children:[L.commodity_name," Market Sentiment"]}),e.jsxs(O,{children:[L.county," • Reports: ",L.report_count," • Updated: ",new Date(L.updated_at).toLocaleDateString()]})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{children:"Sentiment Score:"}),e.jsxs("span",{className:`font-bold ${L.sentiment_score>.1?"text-green-600":L.sentiment_score<-.1?"text-red-600":"text-yellow-600"}`,children:[(L.sentiment_score*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${L.sentiment_score>.1?"bg-green-500":L.sentiment_score<-.1?"bg-red-500":"bg-yellow-500"}`,style:{width:`${Math.abs(L.sentiment_score)*100}%`}})})]}),L.tags.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L.tags.map((G,I)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:G},I))})]}),L.issues.length>0&&e.jsxs("div",{className:"bg-red-50 p-3 rounded-md",children:[e.jsx("h4",{className:"font-medium mb-2 text-red-800",children:"Issues Identified:"}),e.jsx("ul",{className:"list-disc list-inside text-red-700",children:L.issues.map((G,I)=>e.jsx("li",{className:"text-sm",children:G.replace(/_/g," ")},I))})]})]})]},L.id))})};return e.jsxs(w,{className:"w-full",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Collective Intelligence Insights"}),e.jsx(O,{children:"Real-time sentiment analysis from farmer reports and community feedback"})]}),e.jsxs(C,{children:[b(),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"crop",children:"Crop Filter"}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{id:"crop",children:e.jsx(J,{placeholder:"All Crops"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Crops"}),e.jsx(_,{value:"maize",children:"Maize"}),e.jsx(_,{value:"potato",children:"Potato"}),e.jsx(_,{value:"tomato",children:"Tomato"}),e.jsx(_,{value:"wheat",children:"Wheat"}),e.jsx(_,{value:"rice",children:"Rice"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location Filter"}),e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{id:"location",children:e.jsx(J,{placeholder:"All Locations"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Locations"}),e.jsx(_,{value:"nakuru",children:"Nakuru"}),e.jsx(_,{value:"kisumu",children:"Kisumu"}),e.jsx(_,{value:"kiambu",children:"Kiambu"}),e.jsx(_,{value:"machakos",children:"Machakos"}),e.jsx(_,{value:"uasin gishu",children:"Uasin Gishu"})]})]})]})]}),e.jsxs(ue,{defaultValue:"alerts",value:s,onValueChange:t,children:[e.jsxs(me,{className:"grid grid-cols-2 mb-6",children:[e.jsxs(R,{value:"alerts",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Alerts"})]}),e.jsxs(R,{value:"insights",className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Insights"})]})]}),e.jsx(B,{value:"alerts",children:T()}),e.jsx(B,{value:"insights",children:E()})]})]}),e.jsxs(re,{className:"border-t pt-4 text-sm text-muted-foreground flex justify-between",children:[e.jsx("div",{children:"Based on real-time sentiment analysis of community reports"}),e.jsx(N,{variant:"ghost",size:"icon",onClick:g,children:e.jsx(ot,{className:"h-4 w-4"})})]})]})},gd=()=>(l.useEffect(()=>{document.title="Agricultural Sentiment Analysis | AgriConnect"},[]),e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Agricultural Sentiment Analysis"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Insights derived from farmer feedback, reports, and community discussions"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs(fs,{className:"bg-amber-50 border-amber-200",children:[e.jsx(fe,{className:"h-4 w-4 text-amber-600"}),e.jsx(Ma,{className:"text-amber-800",children:"Important Alerts"}),e.jsx(vs,{className:"text-amber-700",children:"We've detected significant sentiment patterns regarding agricultural products in various counties. View details in the dashboard below."}),e.jsx("div",{className:"mt-2",children:e.jsx(N,{variant:"outline",size:"sm",className:"bg-white",children:"View Alert Details"})})]}),e.jsxs(ue,{defaultValue:"insights",className:"mb-6",children:[e.jsxs(me,{className:"mb-4",children:[e.jsxs(R,{value:"insights",className:"flex items-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{children:"Sentiment Insights"})]}),e.jsxs(R,{value:"reports",className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Submit Report"})]}),e.jsxs(R,{value:"community",className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx("span",{children:"Community Discussions"})]})]}),e.jsx(B,{value:"insights",children:e.jsx(pd,{})}),e.jsx(B,{value:"reports",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Submit Your Experience"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Share your feedback about agricultural products, services, or policies to help other farmers make informed decisions."}),e.jsx("form",{className:"space-y-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{children:"Submit Report"})})})]})}),e.jsx(B,{value:"community",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg border text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Community Discussions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This feature is coming soon. Join discussions with other farmers about shared experiences."}),e.jsx(N,{variant:"outline",children:"Get Notified When Available"})]})})]})]})]})),jd=()=>{const s=[{id:"post-harvest-losses",title:"Post-Harvest Losses",description:"Up to 40% of harvested crops are lost due to inadequate storage, transportation issues, and limited processing facilities.",solutions:["Affordable storage technologies","Value addition and processing","Direct market linkages"],path:"/supply-chain-problems/post-harvest-losses",implemented:!0},{id:"logistics-issues",title:"Logistics Issues",description:"Poor infrastructure and inefficient transportation lead to delays, spoilage, and higher costs for farmers.",solutions:["Optimized transport routes","Cold chain solutions","Shared logistics services"],path:"/supply-chain-problems/logistics-issues",implemented:!0},{id:"market-access",title:"Market Access",description:"Farmers struggle to connect with buyers and often rely on exploitative middlemen.",solutions:["Direct buyer-farmer connections","Market information systems","Collective marketing groups"],path:"/supply-chain-problems/market-access",implemented:!0},{id:"price-volatility",title:"Price Volatility",description:"Unpredictable price fluctuations make planning difficult and reduce farmer incomes.",solutions:["Forward contracts","Price prediction tools","Storage solutions to sell when prices improve"],path:"/supply-chain-problems/price-volatility",implemented:!0},{id:"quality-control",title:"Quality Control",description:"Inconsistent produce quality limits access to premium markets and reduces prices.",solutions:["Quality verification systems","Training on standards","Certification support"],path:"/supply-chain-problems/quality-control",implemented:!0}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Agricultural Supply Chain Challenges"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Addressing key challenges in Kenya's agricultural supply chains with practical, technology-driven solutions"}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsxs(M,{variant:"default",className:"flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"}),"All Solutions Implemented"]}),e.jsx(M,{variant:"outline",children:"5 Key Challenges Addressed"})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16",children:s.map(t=>e.jsxs(w,{className:"flex flex-col relative",children:[t.implemented&&e.jsxs(M,{variant:"default",className:"absolute top-4 right-4 flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"}),"Live"]}),e.jsxs(k,{className:"pb-2",children:[e.jsx(S,{children:t.title}),e.jsx(O,{children:t.description})]}),e.jsxs(C,{className:"flex-grow",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Our Solutions"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1 mb-4",children:t.solutions.map((a,r)=>e.jsx("li",{className:"text-sm",children:a},r))})]}),e.jsx(re,{children:e.jsx(N,{asChild:!0,className:"w-full md:w-auto",children:e.jsxs(V,{to:t.path,children:["Learn More & Access Tools",e.jsx(Vs,{className:"ml-2 h-4 w-4"})]})})})]},t.id))}),e.jsxs("div",{className:"mt-16 bg-muted/30 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"How AgriTender Connect Addresses Supply Chain Challenges"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:"Technology Integration"})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm mb-4",children:"Our platform uses technology to connect all actors in the supply chain, creating transparency and improving coordination between farmers, transporters, and buyers."}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"• Real-time tracking and monitoring"}),e.jsx("li",{children:"• Automated matching algorithms"}),e.jsx("li",{children:"• Mobile-first design for accessibility"}),e.jsx("li",{children:"• Integration with payment systems"})]})]})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:"Data-Driven Decisions"})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm mb-4",children:"Real-time market data and production forecasts help farmers and buyers make informed decisions about what to grow, when to sell, and where to sell."}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"• AI-powered price predictions"}),e.jsx("li",{children:"• Weather-based recommendations"}),e.jsx("li",{children:"• Market demand forecasting"}),e.jsx("li",{children:"• Risk assessment tools"})]})]})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:"Alternative Trading"})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm mb-4",children:"Our barter exchange system and community trading networks create alternative pathways for farmers to exchange goods and access markets without cash."}),e.jsxs("ul",{className:"text-xs space-y-1",children:[e.jsx("li",{children:"• Crop-to-crop exchanges"}),e.jsx("li",{children:"• Service-for-produce trades"}),e.jsx("li",{children:"• Community cooperatives"}),e.jsx("li",{children:"• Digital payment alternatives"})]})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"Platform Risk Disclaimer"}),e.jsx("p",{className:"text-sm text-green-800",children:"AgriTender Connect provides technology solutions to facilitate agricultural connections and transactions. We do not manage farming operations, guarantee crop outcomes, or assume responsibility for agricultural risks. Users make independent decisions regarding their farming and business activities."})]}),e.jsx("div",{className:"text-center",children:e.jsx(N,{size:"lg",asChild:!0,children:e.jsx(V,{to:"/commodity-trading",children:"Start Trading Now"})})})]})]})]})},fd=tl,Wi=l.createContext({}),es=({...s})=>e.jsx(Wi.Provider,{value:{name:s.name},children:e.jsx(al,{...s})}),Qt=()=>{const s=l.useContext(Wi),t=l.useContext(Yi),{getFieldState:a,formState:r}=sl(),i=a(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:c}=t;return{id:c,name:s.name,formItemId:`${c}-form-item`,formDescriptionId:`${c}-form-item-description`,formMessageId:`${c}-form-item-message`,...i}},Yi=l.createContext({}),He=l.forwardRef(({className:s,...t},a)=>{const r=l.useId();return e.jsx(Yi.Provider,{value:{id:r},children:e.jsx("div",{ref:a,className:z("space-y-2",s),...t})})});He.displayName="FormItem";const Ge=l.forwardRef(({className:s,...t},a)=>{const{error:r,formItemId:i}=Qt();return e.jsx(A,{ref:a,className:z(r&&"text-destructive",s),htmlFor:i,...t})});Ge.displayName="FormLabel";const We=l.forwardRef(({...s},t)=>{const{error:a,formItemId:r,formDescriptionId:i,formMessageId:c}=Qt();return e.jsx(ur,{ref:t,id:r,"aria-describedby":a?`${i} ${c}`:`${i}`,"aria-invalid":!!a,...s})});We.displayName="FormControl";const Dt=l.forwardRef(({className:s,...t},a)=>{const{formDescriptionId:r}=Qt();return e.jsx("p",{ref:a,id:r,className:z("text-sm text-muted-foreground",s),...t})});Dt.displayName="FormDescription";const ss=l.forwardRef(({className:s,children:t,...a},r)=>{const{error:i,formMessageId:c}=Qt(),n=i?String(i==null?void 0:i.message):t;return n?e.jsx("p",{ref:r,id:c,className:z("text-sm font-medium text-destructive",s),...a,children:n}):null});ss.displayName="FormMessage";const Ce=l.forwardRef(({className:s,...t},a)=>e.jsx(ei,{ref:a,className:z("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(rl,{className:z("flex items-center justify-center text-current"),children:e.jsx(qe,{className:"h-4 w-4"})})}));Ce.displayName=ei.displayName;const vd=ce.object({companyName:ce.string().min(2,{message:"Company name must be at least 2 characters."}),serviceType:ce.enum(["transport","storage","both"],{required_error:"Please select a service type."}),counties:ce.string().min(2,{message:"Please enter at least one county."}),contactEmail:ce.string().email({message:"Please enter a valid email address."}),contactPhone:ce.string().min(10,{message:"Please enter a valid phone number."}),capacity:ce.string().min(2,{message:"Please specify your capacity."}),rates:ce.string().min(2,{message:"Please specify your rates."}),hasRefrigeration:ce.boolean().default(!1),description:ce.string().optional(),termsAccepted:ce.boolean().refine(s=>s===!0,{message:"You must accept the terms and conditions."})}),yd=()=>{const{toast:s}=X(),[t,a]=l.useState(!1),r=il({resolver:nl(vd),defaultValues:{companyName:"",counties:"",contactEmail:"",contactPhone:"",capacity:"",rates:"",hasRefrigeration:!1,description:"",termsAccepted:!1}}),i=async c=>{a(!0);try{console.log("Submitting logistics provider data:",c),await new Promise(n=>setTimeout(n,1500)),s({title:"Registration Successful",description:"Your logistics service has been registered. You'll receive a confirmation email shortly."}),r.reset()}catch(n){console.error("Error submitting logistics provider:",n),s({title:"Registration Failed",description:"There was an error registering your service. Please try again.",variant:"destructive"})}finally{a(!1)}};return e.jsxs(w,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Register as a Logistics Provider"}),e.jsx(O,{children:"Connect with farmers and markets by registering your transportation or storage services"})]}),e.jsx(C,{children:e.jsx(fd,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(es,{control:r.control,name:"companyName",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Company Name"}),e.jsx(We,{children:e.jsx(D,{placeholder:"Your company name",...c})}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"serviceType",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Service Type"}),e.jsxs(Q,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(We,{children:e.jsx(W,{children:e.jsx(J,{placeholder:"Select a service type"})})}),e.jsxs(Y,{children:[e.jsx(_,{value:"transport",children:"Transportation"}),e.jsx(_,{value:"storage",children:"Storage"}),e.jsx(_,{value:"both",children:"Both Transport & Storage"})]})]}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"counties",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Counties Served"}),e.jsx(We,{children:e.jsx(D,{placeholder:"E.g. Nairobi, Nakuru, Kiambu",...c})}),e.jsx(Dt,{children:"Enter county names separated by commas"}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"contactEmail",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Email Address"}),e.jsx(We,{children:e.jsx(D,{type:"email",placeholder:"your.email@example.com",...c})}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"contactPhone",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Phone Number"}),e.jsx(We,{children:e.jsx(D,{placeholder:"+254700000000",...c})}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"capacity",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Capacity"}),e.jsx(We,{children:e.jsx(D,{placeholder:"E.g. Up to 10 tons or 5,000 sq. ft",...c})}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"rates",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Rates"}),e.jsx(We,{children:e.jsx(D,{placeholder:"E.g. KES 5,000 per ton or KES 50 per sq. ft",...c})}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"hasRefrigeration",render:({field:c})=>e.jsxs(He,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(We,{children:e.jsx(Ce,{checked:c.value,onCheckedChange:c.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(Ge,{children:"Refrigeration Available"}),e.jsx(Dt,{children:"Check if you provide refrigerated transport or cold storage"})]})]})})]}),e.jsx(es,{control:r.control,name:"description",render:({field:c})=>e.jsxs(He,{children:[e.jsx(Ge,{children:"Additional Details"}),e.jsx(We,{children:e.jsx(ie,{placeholder:"Please provide any additional information about your services",className:"min-h-[100px]",...c})}),e.jsx(ss,{})]})}),e.jsx(es,{control:r.control,name:"termsAccepted",render:({field:c})=>e.jsxs(He,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(We,{children:e.jsx(Ce,{checked:c.value,onCheckedChange:c.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(Ge,{children:"I accept the terms and conditions"}),e.jsx(Dt,{children:"By registering, you agree to our terms of service and privacy policy"})]}),e.jsx(ss,{})]})}),e.jsx(N,{type:"submit",className:"w-full",disabled:t,children:t?"Registering...":"Register as Logistics Provider"})]})})}),e.jsx(re,{className:"flex justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already registered? ",e.jsx(N,{variant:"link",className:"p-0 h-auto",children:"Sign in"})]})})]})},Nd=()=>{const s=[{title:"Poor Road Infrastructure",description:"Many agricultural regions have poor quality roads that become impassable during rainy seasons.",impact:"Delays in transportation, increased costs, and reduced access to markets.",solution:"Advocacy for infrastructure improvement, route optimization, and using appropriate vehicles for terrain."},{title:"Lack of Cold Chain",description:"80% of rural areas lack proper cold storage facilities, resulting in significant post-harvest losses.",impact:"Reduced shelf life, lower quality products, and increased food waste.",solution:"Investment in solar-powered cold storage, refrigerated transport, and preservation techniques."},{title:"High Transportation Costs",description:"Transportation costs can account for up to 40% of the total value of agricultural products.",impact:"Reduced farmer profits, higher consumer prices, and limited market participation.",solution:"Consolidation of shipments, cooperative transport models, and efficient route planning."},{title:"Limited Logistics Services",description:"Rural areas have few professional logistics service providers with appropriate equipment.",impact:"Farmers rely on informal transporters, reducing reliability and increasing risks.",solution:"Development of rural logistics networks, transport cooperatives, and digital logistics platforms."}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map((t,a)=>e.jsxs(w,{className:"border-l-4 border-l-primary",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:t.title})}),e.jsxs(C,{className:"space-y-2",children:[e.jsx("p",{children:t.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",t.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Potential Solution:"})," ",t.solution]})]})]},a))}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Impact on Supply Chain Efficiency"}),e.jsx("p",{className:"mb-4",children:"Logistics challenges significantly reduce the efficiency of agricultural supply chains in Kenya:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Up to 40% of fresh produce is lost due to logistical inefficiencies"}),e.jsx("li",{children:"Rural farmers spend 4-6 hours on average to reach the nearest collection center"}),e.jsx("li",{children:"Transportation costs account for 30-40% of the final product price"}),e.jsx("li",{children:"Only 23% of smallholder farmers have access to reliable transportation services"})]})]})]})},bd=({isLoading:s})=>{const t=()=>[{issue:"Poor Road Infrastructure",frequency:65,impact:"High"},{issue:"Lack of Cold Storage",frequency:45,impact:"High"},{issue:"High Transport Costs",frequency:72,impact:"High"},{issue:"Delayed Collections",frequency:38,impact:"Medium"},{issue:"Fragmented Supply Chain",frequency:55,impact:"Medium"},{issue:"Limited Market Access",frequency:60,impact:"High"}],a=()=>[{name:"Trucks",value:45,color:"#0088FE"},{name:"Motorcycles",value:25,color:"#00C49F"},{name:"Hand Carts",value:15,color:"#FFBB28"},{name:"Animal Transport",value:10,color:"#FF8042"},{name:"Public Transport",value:5,color:"#8884d8"}];return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",className:"mb-6 bg-blue-50",children:"Based on analysis of Kilimo statistics and agricultural surveys"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Logistics Challenges Frequency"}),e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Ws,{data:t(),margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"issue"}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Fs,{}),e.jsx(Qe,{dataKey:"frequency",fill:"#8884d8",name:"Reported Frequency (%)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Transport Modes Used in Agriculture"}),e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Gt,{children:[e.jsx(Wt,{data:a(),cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:i})=>`${r}: ${(i*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:a().map((r,i)=>e.jsx(ht,{fill:r.color},`cell-${i}`))}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Findings"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-3",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Infrastructure Gap:"})," 65% of agricultural areas report inadequate road infrastructure"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Cold Chain Deficiency:"})," Only 22% of fresh produce benefits from proper cold chain"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Transport Modes:"})," Traditional and informal methods still dominate agricultural logistics"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Cost Burden:"})," Small-scale farmers spend 3x more on transportation as a percentage of revenue"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Regional Disparity:"})," Western and coastal regions face more severe logistics challenges"]})]})]})]}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Methodology"}),e.jsx("p",{children:"This analysis combines data from Kilimo Statistics API, transportation surveys, and farmer interviews to identify key logistics challenges. The frequency represents the percentage of farmers reporting each issue as a significant barrier to market access."})]})]})},wd=()=>{const s=ve(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState("issues");return l.useEffect(()=>{(async()=>{i(!0);try{const h=await ft();a(h)}catch(h){console.error("Error fetching Kilimo data:",h)}finally{i(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Logistics Issues"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Understanding and addressing transportation and delivery challenges in agricultural supply chains"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-6",children:[e.jsxs(N,{onClick:()=>s("/logistics-solutions-map"),className:"flex gap-2 items-center",variant:"outline",children:[e.jsx(Z,{className:"h-4 w-4"}),"View Logistics Solutions Map"]}),e.jsx(N,{onClick:()=>n("register"),variant:"default",children:"Register as Provider"})]})]}),e.jsxs(ue,{value:c,onValueChange:n,className:"w-full",children:[e.jsxs(me,{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-2 mb-8",children:[e.jsxs(R,{value:"issues",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Logistics Challenges"})]}),e.jsxs(R,{value:"data",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Data Analysis"})]}),e.jsxs(R,{value:"register",className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Register as Provider"})]})]}),e.jsx(B,{value:"issues",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Common Logistics Challenges"}),e.jsx(O,{children:"Key transportation and delivery issues faced by agricultural businesses in Kenya"})]}),e.jsx(C,{children:e.jsx(Nd,{})}),e.jsxs(re,{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(N,{onClick:()=>s("/logistics-solutions-map"),className:"flex gap-2 items-center w-full sm:w-auto",variant:"outline",children:[e.jsx(Z,{className:"h-4 w-4"}),"Find Logistics Providers Near You"]}),e.jsx(N,{onClick:()=>n("register"),className:"ml-auto w-full sm:w-auto",children:"Be Part of the Solution - Register"})]})]})}),e.jsx(B,{value:"data",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Logistics Data Analysis"}),e.jsx(O,{children:"Data-driven insights on agricultural logistics challenges based on national statistics"})]}),e.jsx(C,{children:e.jsx(bd,{isLoading:r})}),e.jsx(re,{children:e.jsx(N,{onClick:()=>s("/logistics-solutions-map"),className:"ml-auto",children:"Find Solutions on Map"})})]})}),e.jsx(B,{value:"register",children:e.jsx(yd,{})})]})]})]})},Cd=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState("challenges"),n=ve();l.useEffect(()=>{(async()=>{r(!0);try{const x=await ft();t(x)}catch(x){console.error("Error fetching Kilimo data:",x)}finally{r(!1)}})()},[]);const o=()=>s.filter(x=>x.category==="County").map(x=>({county:x.name,marketAccess:Math.floor(Math.random()*100),distanceToMarket:Math.floor(Math.random()*30)+5,priceInformation:Math.floor(Math.random()*100)})).sort((x,f)=>f.marketAccess-x.marketAccess).slice(0,8),h=()=>[{name:"Limited Price Information",value:78,color:"#0088FE"},{name:"Poor Transport Infrastructure",value:65,color:"#00C49F"},{name:"Market Power Imbalances",value:62,color:"#FFBB28"},{name:"Limited Storage Facilities",value:58,color:"#FF8042"},{name:"Lack of Quality Standards",value:45,color:"#8884d8"}],m=()=>[{month:"Jan",maize:50,beans:120,potatoes:45},{month:"Feb",maize:48,beans:125,potatoes:43},{month:"Mar",maize:45,beans:130,potatoes:40},{month:"Apr",maize:47,beans:128,potatoes:42},{month:"May",maize:52,beans:125,potatoes:46},{month:"Jun",maize:55,beans:120,potatoes:48},{month:"Jul",maize:58,beans:118,potatoes:50},{month:"Aug",maize:60,beans:115,potatoes:52},{month:"Sep",maize:57,beans:120,potatoes:49},{month:"Oct",maize:54,beans:122,potatoes:47},{month:"Nov",maize:52,beans:125,potatoes:45},{month:"Dec",maize:51,beans:127,potatoes:44}],p=[{title:"Information Asymmetry",description:"Farmers lack access to accurate, timely market information including prices, demand, and quality requirements.",impact:"Reduced bargaining power, suboptimal market timing, and inability to respond to market demands.",solution:"Mobile-based market information systems, farmer cooperatives for information sharing, and market intelligence platforms."},{title:"Middlemen Dependence",description:"Long supply chains with multiple intermediaries that capture value without adding proportional services.",impact:"Reduced farmer profits, increased consumer prices, and market distortions.",solution:"Direct marketing channels, farmer aggregation centers, and digital marketplace platforms connecting farmers to buyers."},{title:"Quality & Standards",description:"Lack of standardized quality metrics and certification systems for agricultural products.",impact:"Limited access to premium markets, rejected produce, and lack of price differentiation for quality.",solution:"Training on quality standards, affordable certification systems, and quality-based pricing mechanisms."},{title:"Limited Market Options",description:"Overreliance on local markets and few alternative market channels for smallholder farmers.",impact:"Price exploitation, limited growth opportunities, and vulnerability to local market saturation.",solution:"Market diversification strategies, contract farming arrangements, and regional market integration."}],d=[{title:"Digital Marketplace Platforms",description:"Online platforms connecting farmers directly to buyers, eliminating intermediaries.",example:"Twiga Foods, M-Farm, Digital Green",impact:"Increased farmer income by 15-30% through direct market linkages."},{title:"SMS Price Information Services",description:"Mobile services providing real-time price information across different markets.",example:"MFarm, Esoko, NAFIS",impact:"Improved farmer bargaining power and optimal market timing decisions."},{title:"Aggregation Centers",description:"Community collection points that aggregate produce from smallholders to achieve marketable volumes.",example:"Farm to Market Alliance, One Acre Fund",impact:"Access to larger buyers and reduced per-unit logistics costs."},{title:"Contract Farming Models",description:"Pre-arranged supply agreements between farmers and buyers with agreed prices and volumes.",example:"East African Breweries, Kenya Nut Company",impact:"Stable income for farmers and secure supply for processors."}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Market Access Challenges"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Addressing barriers that prevent farmers from reaching profitable markets"})]}),e.jsxs(ue,{value:i,onValueChange:c,className:"w-full",children:[e.jsxs(me,{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-2 mb-8",children:[e.jsxs(R,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Key Challenges"})]}),e.jsxs(R,{value:"data",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Market Data"})]}),e.jsxs(R,{value:"solutions",className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Innovations"})]})]}),e.jsx(B,{value:"challenges",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Market Access Issues"}),e.jsx(O,{children:"Common barriers to market entry for small-scale farmers"})]}),e.jsxs(C,{children:[e.jsx(M,{variant:"outline",className:"mb-6 bg-blue-50",children:"Based on analysis of Kilimo statistics and agricultural surveys"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map((u,x)=>e.jsxs(w,{className:"border-l-4 border-l-primary",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:u.title})}),e.jsxs(C,{className:"space-y-2",children:[e.jsx("p",{children:u.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",u.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Potential Solution:"})," ",u.solution]})]})]},x))}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Impact on Farmer Livelihoods"}),e.jsx("p",{className:"mb-4",children:"Market access challenges significantly impact smallholder farmers in Kenya:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Smallholders receive only 25-40% of the final market price of their produce"}),e.jsx("li",{children:"Almost 60% of farmers rely exclusively on local markets with limited price competitiveness"}),e.jsx("li",{children:"Only 31% of smallholder farmers have access to formal market channels"}),e.jsx("li",{children:"Price information asymmetry costs farmers an estimated 10-20% of potential income"})]})]})]}),e.jsx(re,{children:e.jsx(N,{onClick:()=>c("solutions"),className:"ml-auto",children:"Explore Market Access Solutions"})})]})}),e.jsx(B,{value:"data",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Market Data Analysis"}),e.jsx(O,{children:"Data-driven insights on agricultural market access based on national statistics"})]}),e.jsx(C,{children:a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Market Access by County"}),e.jsx(Re,{width:"100%",height:400,children:e.jsxs(Ws,{data:o(),margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"county"}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Fs,{}),e.jsx(Qe,{dataKey:"marketAccess",name:"Market Access Score",fill:"#8884d8"}),e.jsx(Qe,{dataKey:"distanceToMarket",name:"Avg. Distance to Market (km)",fill:"#82ca9d"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Market Access Barriers"}),e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Gt,{children:[e.jsx(Wt,{data:h(),cx:"50%",cy:"50%",labelLine:!1,label:({name:u,percent:x})=>`${u}: ${(x*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:h().map((u,x)=>e.jsx(ht,{fill:u.color},`cell-${x}`))}),e.jsx(ze,{})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Trends (KES/kg)"}),e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Yt,{data:m(),margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"month"}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Fs,{}),e.jsx(ls,{type:"monotone",dataKey:"maize",stroke:"#8884d8",activeDot:{r:8}}),e.jsx(ls,{type:"monotone",dataKey:"beans",stroke:"#82ca9d"}),e.jsx(ls,{type:"monotone",dataKey:"potatoes",stroke:"#ffc658"})]})})]})]}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Data Insights"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-3",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Regional Disparities:"})," Market access varies significantly by region, with central counties having better access than remote ones"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Price Information:"})," Limited access to price information is the most significant barrier, affecting 78% of farmers"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Seasonal Variation:"})," Price volatility is highest during transitional months (April-May and October-November)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Infrastructure Impact:"})," Counties with better road infrastructure show 30% higher market access scores"]})]})]})]})}),e.jsx(re,{children:e.jsxs(N,{onClick:()=>n("/commodity-trading/price-trends"),variant:"outline",className:"ml-auto",children:["View Detailed Price Trends ",e.jsx(ba,{className:"ml-2 h-4 w-4"})]})})]})}),e.jsx(B,{value:"solutions",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Market Access Innovations"}),e.jsx(O,{children:"Innovative solutions that are addressing market access challenges in Kenya"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map((u,x)=>e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:u.title})}),e.jsxs(C,{className:"space-y-2",children:[e.jsx("p",{children:u.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Examples:"})," ",u.example]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",u.impact]})]})]},x))}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-xl font-medium mb-6",children:"Digital Solutions Transforming Market Access"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-4 bg-primary/10 p-3 rounded-full",children:e.jsx(ne,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Mobile Market Information Systems"}),e.jsx("p",{className:"mb-2",children:"SMS and mobile app services that provide real-time market prices, helping farmers make informed decisions about when and where to sell their produce."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Example: M-Farm's SMS price service reaches over 100,000 farmers in Kenya, improving incomes by up to 20%"})]})]})}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-4 bg-primary/10 p-3 rounded-full",children:e.jsx(ee,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Farmer Producer Organizations"}),e.jsx("p",{className:"mb-2",children:"Formal farmer groups that aggregate produce, improving bargaining power and enabling access to larger markets that individual smallholders couldn't reach alone."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Example: Meru Greens Horticulture aggregates produce from 4,000 smallholders to supply supermarkets and exporters"})]})]})}),e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-4 bg-primary/10 p-3 rounded-full",children:e.jsx(Z,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"E-Commerce Agricultural Marketplaces"}),e.jsx("p",{className:"mb-2",children:"Digital platforms connecting farmers directly to buyers, including restaurants, retailers, and consumers, reducing the number of intermediaries in the supply chain."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Example: Twiga Foods connects 17,000 farmers to 8,000 vendors, increasing farmer incomes by 20-40%"})]})]})})]})]}),e.jsx(be,{className:"my-10"}),e.jsxs("div",{className:"p-6 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Join Our Market Access Programs"}),e.jsx("p",{className:"mb-4",children:"AgriTender Connect offers several programs to help farmers overcome market access challenges:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Digital Marketplace"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"List your produce on our digital marketplace to connect directly with buyers"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading/marketplace"),children:"Access Marketplace"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Barter Exchange"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Exchange your produce with other farmers or for services you need"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading/barter"),children:"Join Barter Network"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Market Intelligence"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Access real-time price trends and market demand forecasts"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading/price-trends"),children:"View Market Data"})})]})]}),e.jsxs(N,{className:"w-full",onClick:()=>n("/commodity-trading"),children:["Explore All Market Access Services ",e.jsx(Je,{className:"ml-2 h-4 w-4"})]})]})]})]})})]})]})]})},kd=()=>e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Post-Harvest Losses"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl",children:"In Kenya, post-harvest losses account for up to 30-40% of harvested crops due to inadequate storage, transportation issues, and limited processing facilities. Our platform provides solutions to reduce these losses."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Storage Solutions"}),e.jsx(O,{children:"Improved storage techniques and facilities"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"mb-4",children:"Access affordable storage solutions like hermetic bags, metal silos, and community cold storage facilities that can extend the shelf life of your produce."}),e.jsx(N,{asChild:!0,children:e.jsx(V,{to:"/supply-chain-api",children:"Find Storage Providers"})})]})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Preservation Methods"}),e.jsx(O,{children:"Value addition through processing"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"mb-4",children:"Learn about low-cost preservation methods such as solar drying, fermenting, and canning that can transform perishable produce into items with longer shelf life."}),e.jsx(N,{asChild:!0,children:e.jsx(V,{to:"/supply-chain-problems/quality-control",children:"Explore Preservation Techniques"})})]})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Market Linkages"}),e.jsx(O,{children:"Faster routes to market"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"mb-4",children:"Connect directly with buyers to reduce the time between harvest and sale, minimizing the risk of spoilage during extended storage periods."}),e.jsx(N,{asChild:!0,children:e.jsx(V,{to:"/commodity-trading",children:"Connect with Buyers"})})]})]})]}),e.jsxs("div",{className:"bg-muted/30 p-6 rounded-lg mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Post-Harvest Loss Statistics in Kenya"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-background p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"30-40%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Overall post-harvest losses"})]}),e.jsxs("div",{className:"bg-background p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"50%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fruits & vegetables losses"})]}),e.jsxs("div",{className:"bg-background p-6 rounded-lg text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"$500M"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Annual economic impact"})]})]})]}),e.jsxs(w,{className:"mb-10",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Quality Control & Contract Farming"}),e.jsx(O,{children:"Improving quality and reliability through partnerships"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Organic Certification"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Organic certification through KEBS or international bodies helps farmers access premium markets and improve product value while reducing chemical inputs."}),e.jsx(N,{variant:"outline",asChild:!0,className:"w-full",children:e.jsx(V,{to:"/supply-chain-problems/quality-control",children:"Learn About Certification"})})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Contract Farming"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Partner with buyers from planting to harvest, receiving quality inputs, technical support, and guaranteed markets while meeting specific standards."}),e.jsx(N,{variant:"outline",asChild:!0,className:"w-full",children:e.jsx(V,{to:"/supply-chain-problems/market-access",children:"Find Contract Partners"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Meru Potato Farmers Cooperative"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Reduced losses from 35% to 8% through community cold storage"}),e.jsx(N,{variant:"link",className:"px-0",asChild:!0,children:e.jsx(V,{to:"/supply-chain-api",children:"Read More"})})]}),e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"font-medium mb-1",children:"Kitui Mango Processors"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Transformed excess mangoes into dried products and juices"}),e.jsx(N,{variant:"link",className:"px-0",asChild:!0,children:e.jsx(V,{to:"/supply-chain-problems/quality-control",children:"Read More"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",children:"Nakuru Grain Farmers"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Adopted hermetic bags to prevent pest damage during storage"}),e.jsx(N,{variant:"link",className:"px-0",asChild:!0,children:e.jsx(V,{to:"/supply-chain-api",children:"Read More"})})]})]})]})]})]}),e.jsx("footer",{className:"bg-muted/30 py-8 px-6 text-center text-sm text-muted-foreground",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," Soko-Connect. All rights reserved."]})})})]}),Sd=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState("overview"),n=ve();l.useEffect(()=>{(async()=>{r(!0);try{const u=await ft();t(u)}catch(u){console.error("Error fetching Kilimo data:",u)}finally{r(!1)}})()},[]);const o=()=>[{month:"Jan",maize:45,volatility:12,beans:120,potatoes:35},{month:"Feb",maize:52,volatility:18,beans:135,potatoes:42},{month:"Mar",maize:38,volatility:25,beans:110,potatoes:28},{month:"Apr",maize:65,volatility:35,beans:150,potatoes:55},{month:"May",maize:48,volatility:15,beans:125,potatoes:38},{month:"Jun",maize:55,volatility:20,beans:140,potatoes:45}],h=()=>[{name:"Weather Variations",impact:40,color:"#0088FE"},{name:"Market Speculation",impact:25,color:"#00C49F"},{name:"Supply Chain Disruptions",impact:20,color:"#FFBB28"},{name:"Seasonal Demand",impact:15,color:"#FF8042"}],m=[{title:"Unpredictable Income",description:"Farmers cannot predict their income from season to season due to price fluctuations.",impact:"Difficulty in planning investments, inability to secure loans, and reduced quality of life.",solution:"Forward contracts, price stabilization mechanisms, and diversified income sources."},{title:"Market Timing Challenges",description:"Farmers struggle to time their sales optimally due to rapid price changes.",impact:"Selling at suboptimal prices, increased storage costs, and post-harvest losses.",solution:"Real-time market information, storage solutions, and market intelligence systems."},{title:"Investment Planning",description:"High price volatility makes it difficult to plan for farm investments and expansion.",impact:"Delayed modernization, reduced productivity, and missed growth opportunities.",solution:"Risk management tools, crop insurance, and government support programs."},{title:"Credit Access",description:"Volatile income streams make farmers appear risky to financial institutions.",impact:"Limited access to credit, high interest rates, and reliance on informal lending.",solution:"Income smoothing mechanisms, collateral alternatives, and financial literacy programs."}],p=[{title:"Contract Farming",description:"Pre-agreed prices and volumes with buyers to reduce price risk.",benefits:["Guaranteed income","Reduced market risk","Access to inputs and technical support"],implementation:"Partner with processors, exporters, or large retailers for direct contracts."},{title:"Cooperative Marketing",description:"Farmers pool resources to achieve better market power and price negotiation.",benefits:["Collective bargaining power","Shared storage costs","Market information sharing"],implementation:"Form or join existing farmer cooperatives for collective selling."},{title:"Value Addition",description:"Processing raw products to create value-added products with stable demand.",benefits:["Higher profit margins","Reduced perishability","Market differentiation"],implementation:"Invest in simple processing equipment or partner with processors."},{title:"Diversification",description:"Growing multiple crops or combining farming with other income sources.",benefits:["Risk spreading","Stable income streams","Reduced dependency on single commodity"],implementation:"Plan crop rotation and explore complementary income activities."}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Price Volatility"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Understanding and managing agricultural price fluctuations that impact farmer incomes and market stability"})]}),e.jsxs(ue,{value:i,onValueChange:c,className:"w-full",children:[e.jsxs(me,{className:"w-full grid grid-cols-1 sm:grid-cols-3 gap-2 mb-8",children:[e.jsxs(R,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Price Trends"})]}),e.jsxs(R,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Impact Analysis"})]}),e.jsxs(R,{value:"solutions",className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"Risk Management"})]})]}),e.jsx(B,{value:"overview",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Price Volatility Analysis"}),e.jsx(O,{children:"Historical price trends and volatility patterns for major agricultural commodities in Kenya"})]}),e.jsxs(C,{children:[e.jsx(M,{variant:"outline",className:"mb-6 bg-blue-50",children:"Based on Kilimo statistics and market data analysis"}),a?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Price Trends and Volatility (KES/kg)"}),e.jsx(Re,{width:"100%",height:400,children:e.jsxs(Yt,{data:o(),children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"month"}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Fs,{}),e.jsx(ls,{type:"monotone",dataKey:"maize",stroke:"#8884d8",strokeWidth:2}),e.jsx(ls,{type:"monotone",dataKey:"beans",stroke:"#82ca9d",strokeWidth:2}),e.jsx(ls,{type:"monotone",dataKey:"potatoes",stroke:"#ffc658",strokeWidth:2}),e.jsx(ls,{type:"monotone",dataKey:"volatility",stroke:"#ff7300",strokeDasharray:"5 5",name:"Volatility Index"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Volatility Causes"}),e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Gt,{children:[e.jsx(Wt,{data:h(),cx:"50%",cy:"50%",labelLine:!1,label:({name:d,percent:u})=>`${d}: ${(u*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"impact",children:h().map((d,u)=>e.jsx(ht,{fill:d.color},`cell-${u}`))}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Average Price Volatility"}),e.jsx(M,{variant:"outline",children:"±25%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Seasonal Price Variation"}),e.jsx(M,{variant:"outline",children:"±40%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Highest Volatility Crop"}),e.jsx(M,{variant:"destructive",children:"Vegetables"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Most Stable Crop"}),e.jsx(M,{variant:"default",children:"Cereals"})]})]})]})]})]})]})]})}),e.jsx(B,{value:"challenges",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Impact of Price Volatility"}),e.jsx(O,{children:"How price fluctuations affect farmers and the agricultural sector"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map((d,u)=>e.jsxs(w,{className:"border-l-4 border-l-red-500",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:d.title})}),e.jsxs(C,{className:"space-y-2",children:[e.jsx("p",{children:d.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",d.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Solutions:"})," ",d.solution]})]})]},u))}),e.jsxs("div",{className:"mt-10 p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Economic Impact of Price Volatility"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Smallholder farmers lose an estimated 15-30% of potential income due to poor market timing"}),e.jsx("li",{children:"Price volatility increases the cost of agricultural credit by 2-5 percentage points"}),e.jsx("li",{children:"High volatility discourages investment in productivity-enhancing technologies"}),e.jsx("li",{children:"Food security is threatened as farmers shift to subsistence farming to avoid market risks"})]})]})]}),e.jsx(re,{children:e.jsx(N,{onClick:()=>c("solutions"),className:"ml-auto",children:"Explore Risk Management Solutions"})})]})}),e.jsx(B,{value:"solutions",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Price Risk Management Strategies"}),e.jsx(O,{children:"Proven approaches to reduce exposure to price volatility"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map((d,u)=>e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:d.title})}),e.jsxs(C,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:d.description}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Benefits:"}),e.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1",children:d.benefits.map((x,f)=>e.jsx("li",{children:x},f))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Implementation:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.implementation})]})]})]},u))}),e.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-green-50",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"AgriTender Connect Price Risk Tools"}),e.jsx("p",{className:"mb-4",children:"Our platform offers several tools to help farmers manage price volatility:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Price Alerts"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Get notified when prices reach your target levels"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/market-information"),children:"Set Price Alerts"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Forward Contracts"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Lock in prices for future delivery to reduce risk"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/commodity-trading"),children:"Explore Contracts"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Market Intelligence"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Access forecasts and trend analysis for better timing"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>n("/market-information"),children:"View Forecasts"})})]})]}),e.jsx(N,{className:"w-full",onClick:()=>n("/commodity-trading"),children:"Start Managing Price Risk Today"})]})]})]})})]})]})]})},_d=()=>{const[s,t]=l.useState("standards"),a=ve(),r=()=>[{crop:"Coffee",grade_a:45,grade_b:35,grade_c:20},{crop:"Tea",grade_a:60,grade_b:30,grade_c:10},{crop:"Maize",grade_a:25,grade_b:50,grade_c:25},{crop:"Beans",grade_a:40,grade_b:40,grade_c:20},{crop:"Potatoes",grade_a:30,grade_b:45,grade_c:25}],i=()=>[{name:"Organic Certified",value:15,color:"#0088FE"},{name:"GAP Certified",value:25,color:"#00C49F"},{name:"Fair Trade",value:10,color:"#FFBB28"},{name:"No Certification",value:50,color:"#FF8042"}],c=[{title:"Kenya Bureau of Standards (KEBS)",description:"National standards for agricultural products including grading, packaging, and labeling requirements.",scope:"Cereals, pulses, fruits, vegetables, and processed foods",benefits:"Market access, consumer confidence, export opportunities",certification_process:"Application → Inspection → Testing → Certification → Annual surveillance"},{title:"GlobalGAP Certification",description:"International standard for good agricultural practices ensuring food safety and sustainability.",scope:"Fresh produce, aquaculture, and livestock",benefits:"Access to export markets, premium pricing, risk reduction",certification_process:"Training → Implementation → Self-assessment → External audit → Certification"},{title:"Organic Certification",description:"Standards for organic production methods without synthetic chemicals and GMOs.",scope:"All agricultural products including crops and livestock",benefits:"Premium pricing (20-40% higher), niche market access, environmental benefits",certification_process:"Transition period (3 years) → Application → Inspection → Certification → Annual renewal"},{title:"Fair Trade Certification",description:"Social and economic standards ensuring fair prices and working conditions for farmers.",scope:"Coffee, tea, cocoa, bananas, sugar, and other export crops",benefits:"Guaranteed minimum price, social premium, market stability",certification_process:"Group formation → Training → Implementation → Audit → Certification"}],n=[{title:"Lack of Standardization",description:"Inconsistent quality metrics and grading systems across different markets and buyers.",impact:"Price disputes, market rejection, reduced competitiveness",solution:"Adoption of standardized grading systems and quality measurement tools"},{title:"Limited Testing Facilities",description:"Few accessible laboratories for quality testing and certification in rural areas.",impact:"Inability to verify quality claims, limited certification opportunities",solution:"Mobile testing units, decentralized testing centers, and rapid testing kits"},{title:"Poor Post-Harvest Handling",description:"Inadequate storage, processing, and transportation practices affecting product quality.",impact:"Quality degradation, shorter shelf life, reduced market value",solution:"Training on best practices, improved infrastructure, and technology adoption"},{title:"Cost of Certification",description:"High certification costs and complex procedures limiting smallholder farmer participation.",impact:"Exclusion from premium markets, continued dependence on commodity pricing",solution:"Group certification, subsidized programs, and simplified procedures for smallholders"}],o=[{title:"Farmer Field Schools",description:"Hands-on training programs teaching quality production and post-harvest practices.",target:"Smallholder farmers and farmer groups",delivery:"Weekly sessions over full crop cycle",topics:["Good Agricultural Practices","Pest and Disease Management","Harvest Timing","Post-Harvest Handling"]},{title:"Quality Management Systems",description:"Implementation of systematic approaches to quality control and documentation.",target:"Farmer cooperatives and agribusinesses",delivery:"Consultancy and training workshops",topics:["HACCP Implementation","Traceability Systems","Record Keeping","Continuous Improvement"]},{title:"Technology Adoption Support",description:"Assistance in adopting quality-enhancing technologies and equipment.",target:"Progressive farmers and cooperatives",delivery:"Demonstrations, subsidies, and technical support",topics:["Quality Testing Equipment","Sorting and Grading Machines","Storage Technologies","Processing Equipment"]},{title:"Market Linkage Programs",description:"Connecting quality-conscious farmers with premium market opportunities.",target:"Certified farmers and high-quality producers",delivery:"B2B platforms and trade facilitation",topics:["Buyer Identification","Contract Negotiation","Quality Agreements","Payment Guarantees"]}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Quality Control"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Implementing quality standards and certification systems to access premium markets and improve farmer incomes"})]}),e.jsxs(ue,{value:s,onValueChange:t,className:"w-full",children:[e.jsxs(me,{className:"w-full grid grid-cols-1 sm:grid-cols-4 gap-2 mb-8",children:[e.jsxs(R,{value:"standards",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"h-4 w-4"}),e.jsx("span",{children:"Standards"})]}),e.jsxs(R,{value:"challenges",className:"flex items-center gap-2",children:[e.jsx(_a,{className:"h-4 w-4"}),e.jsx("span",{children:"Challenges"})]}),e.jsxs(R,{value:"programs",className:"flex items-center gap-2",children:[e.jsx(si,{className:"h-4 w-4"}),e.jsx("span",{children:"Programs"})]}),e.jsxs(R,{value:"impact",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Impact"})]})]}),e.jsx(B,{value:"standards",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Quality Standards and Certification"}),e.jsx(O,{children:"Overview of major quality standards and certification systems for Kenyan agriculture"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.map((h,m)=>e.jsxs(w,{className:"border-l-4 border-l-green-500",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:h.title})}),e.jsxs(C,{className:"space-y-3",children:[e.jsx("p",{children:h.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Scope:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.scope})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Benefits:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.benefits})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Certification Process:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.certification_process})]})]})]},m))}),e.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Benefits of Quality Certification"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"20-40%"}),e.jsx("div",{className:"text-sm",children:"Price Premium"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"60%"}),e.jsx("div",{className:"text-sm",children:"Market Access Improvement"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"80%"}),e.jsx("div",{className:"text-sm",children:"Customer Satisfaction"})]})]})]})]})]})}),e.jsx(B,{value:"challenges",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Quality Control Challenges"}),e.jsx(O,{children:"Common barriers to implementing effective quality control in agricultural value chains"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map((h,m)=>e.jsxs(w,{className:"border-l-4 border-l-red-500",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:h.title})}),e.jsxs(C,{className:"space-y-2",children:[e.jsx("p",{children:h.description}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",h.impact]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Solution:"})," ",h.solution]})]})]},m))}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Current Quality Distribution"}),e.jsx(Re,{width:"100%",height:400,children:e.jsxs(Ws,{data:r(),children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"crop"}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Fs,{}),e.jsx(Qe,{dataKey:"grade_a",stackId:"a",fill:"#22c55e",name:"Grade A (Premium)"}),e.jsx(Qe,{dataKey:"grade_b",stackId:"a",fill:"#eab308",name:"Grade B (Standard)"}),e.jsx(Qe,{dataKey:"grade_c",stackId:"a",fill:"#ef4444",name:"Grade C (Below Standard)"})]})})]})]})]})}),e.jsx(B,{value:"programs",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Quality Improvement Programs"}),e.jsx(O,{children:"Training and support programs to help farmers meet quality standards"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map((h,m)=>e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:h.title})}),e.jsxs(C,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm",children:h.description}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Target:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.target})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Delivery:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.delivery})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Key Topics:"}),e.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1 mt-2",children:h.topics.map((p,d)=>e.jsx("li",{children:p},d))})]})]})]},m))}),e.jsxs("div",{className:"mt-10 p-6 border rounded-lg bg-green-50",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Join Our Quality Improvement Programs"}),e.jsx("p",{className:"mb-4",children:"AgriTender Connect partners with certification bodies and training organizations to offer:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Training Workshops"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Regular training on quality standards and best practices"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/service-providers"),children:"Find Training"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-base",children:"Certification Support"})}),e.jsx(C,{children:e.jsx("p",{className:"text-sm",children:"Guidance and support through certification processes"})}),e.jsx(re,{children:e.jsx(N,{variant:"outline",size:"sm",className:"w-full",onClick:()=>a("/service-providers"),children:"Get Support"})})]})]})]})]})]})}),e.jsx(B,{value:"impact",children:e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Impact of Quality Improvements"}),e.jsx(O,{children:"Measuring the benefits of quality control and certification programs"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Certification Status in Kenya"}),e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Gt,{children:[e.jsx(Wt,{data:i(),cx:"50%",cy:"50%",labelLine:!1,label:({name:h,percent:m})=>`${h}: ${(m*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:i().map((h,m)=>e.jsx(ht,{fill:h.color},`cell-${m}`))}),e.jsx(ze,{})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Success Story: Nyeri Coffee Cooperative"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Implemented quality management systems and achieved specialty coffee certification"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Price Increase:"}),e.jsx(M,{variant:"default",children:"+45%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Rejection Rate:"}),e.jsx(M,{variant:"destructive",children:"-60%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Export Markets:"}),e.jsx(M,{variant:"default",children:"+3"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Success Story: Meru Organic Farmers"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Transitioned to organic farming and achieved organic certification"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Premium Pricing:"}),e.jsx(M,{variant:"default",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Input Costs:"}),e.jsx(M,{variant:"destructive",children:"-25%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Soil Health:"}),e.jsx(M,{variant:"default",children:"Improved"})]})]})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-muted/30",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Measurable Impact of Quality Programs"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[e.jsx("li",{children:"Farmers with certification earn 20-40% higher prices compared to non-certified farmers"}),e.jsx("li",{children:"Quality-focused cooperatives reduce post-harvest losses by up to 50%"}),e.jsx("li",{children:"Certified farms have 30% lower rejection rates from buyers"}),e.jsx("li",{children:"Quality improvement programs increase farmer income by an average of 35%"}),e.jsx("li",{children:"Export opportunities increase by 60% for certified producers"})]})]})]}),e.jsx(re,{children:e.jsx(N,{onClick:()=>a("/commodity-trading"),className:"ml-auto",children:"Start Your Quality Journey"})})]})})]})]})]})};delete pt.Icon.Default.prototype._getIconUrl;pt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const kt=s=>{const t={storage:"#3b82f6",transport:"#f59e0b","quality-control":"#ef4444","market-linkage":"#8b5cf6",training:"#10b981","input-supplier":"#6366f1",inspector:"#f97316","insurance-provider":"#06b6d4","soil-testing-provider":"#84cc16","drone-satellite-imagery-provider":"#ec4899","iot-sensor-data-provider":"#14b8a6","export-transporters":"#f59e0b",shippers:"#8b5cf6"};return pt.divIcon({className:"custom-marker",html:`<div style="background-color: ${t[s]}; width: 24px; height: 24px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">
      <div style="width: 8px; height: 8px; background-color: white; border-radius: 50%;"></div>
    </div>`,iconSize:[30,30],iconAnchor:[15,15],popupAnchor:[0,-15]})},Ad=({providers:s,selectedType:t})=>{X();const a=[-1.2921,36.8219],r=i=>{var n,o;return(n=i.location.coordinates)!=null&&n.latitude&&((o=i.location.coordinates)!=null&&o.longitude)?[i.location.coordinates.latitude,i.location.coordinates.longitude]:{Nairobi:[-1.2921,36.8219],Mombasa:[-4.0435,39.6682],Kisumu:[-.0917,34.768],Nakuru:[-.3031,36.08],Eldoret:[.5143,35.2698],Thika:[-1.0332,37.0692],Malindi:[-3.2194,40.1169],Kitale:[1.0153,35.0006],Garissa:[-.4536,39.6401],Kakamega:[.2827,34.7519]}[i.location.county]||[-1.2921,36.8219]};return e.jsxs("div",{className:"w-full h-[500px] rounded-lg overflow-hidden border",children:[e.jsxs(ti,{center:a,zoom:6,style:{height:"100%",width:"100%"},zoomControl:!0,scrollWheelZoom:!0,children:[e.jsx(ai,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(et,{position:[-1.2921,36.8219],icon:kt("transport"),children:e.jsx(st,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold",children:"A1 Highway Hub"}),e.jsx("p",{className:"text-sm",children:"Nairobi - Mombasa Corridor"})]})})}),e.jsx(et,{position:[-4.0435,39.6682],icon:kt("transport"),children:e.jsx(st,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold",children:"Port of Mombasa"}),e.jsx("p",{className:"text-sm",children:"Major freight gateway"})]})})}),e.jsx(et,{position:[-.3031,36.08],icon:kt("storage"),children:e.jsx(st,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold",children:"A2 Distribution Center"}),e.jsx("p",{className:"text-sm",children:"Nakuru Agricultural Hub"})]})})}),s.map((i,c)=>{const n=r(i);return e.jsx(et,{position:n,icon:kt(i.businessType),children:e.jsx(st,{maxWidth:300,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:i.name}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[i.businessType," • ",i.location.county]})]}),e.jsx("p",{className:"text-sm",children:i.description}),i.services&&i.services.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Services:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[i.services.slice(0,3).map((o,h)=>e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:o},h)),i.services.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",i.services.length-3," more"]})]})]}),i.contactInfo&&e.jsx("div",{className:"text-sm",children:e.jsxs("p",{children:["📞 ",i.contactInfo]})})]})})},i.id||c)})]}),s.length>0&&e.jsx("div",{className:"absolute top-4 right-4 bg-white p-3 rounded-md shadow-md z-[1000]",children:e.jsxs("p",{className:"font-medium text-sm",children:["Showing ",s.length," providers",t!=="all"?` of type ${t}`:""]})})]})},Pd=()=>e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mt-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(je,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-sm",children:"Transport"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(os,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Storage"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(Bs,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"text-sm",children:"Training"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(Oe,{className:"h-5 w-5 text-amber-500"}),e.jsx("span",{className:"text-sm",children:"Input Supply"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(mt,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm",children:"Quality Control"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-md",children:[e.jsx(Z,{className:"h-5 w-5 text-teal-500"}),e.jsx("span",{className:"text-sm",children:"Market Linkage"})]})]}),Td=({selectedType:s,setSelectedType:t,selectedCounty:a,setSelectedCounty:r,searchTerm:i,setSearchTerm:c,filteredProvidersCount:n})=>{const o=[{value:"all",label:"All Providers",icon:Z},{value:"transport",label:"Transport Services",icon:je},{value:"storage",label:"Storage Facilities",icon:os},{value:"quality-control",label:"Quality Control",icon:mt},{value:"training",label:"Training Providers",icon:Bs},{value:"input-supplier",label:"Input Suppliers",icon:Oe},{value:"inspector",label:"Inspectors",icon:mt},{value:"market-linkage",label:"Market Linkage",icon:Z}],h=[{value:"all",label:"All Counties"},{value:"nairobi",label:"Nairobi"},{value:"mombasa",label:"Mombasa"},{value:"kisumu",label:"Kisumu"},{value:"nakuru",label:"Nakuru"},{value:"kiambu",label:"Kiambu"},{value:"meru",label:"Meru"},{value:"kakamega",label:"Kakamega"},{value:"nyeri",label:"Nyeri"},{value:"machakos",label:"Machakos"},{value:"uasin-gishu",label:"Uasin Gishu"},{value:"kilifi",label:"Kilifi"}];return e.jsxs(w,{className:"mb-6",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Find Service Providers"}),e.jsx(O,{children:"Filter by service type, location, or search by name"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type of Service"}),e.jsxs(Q,{value:s,onValueChange:m=>t(m),children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select service type"})}),e.jsx(Y,{children:o.map(m=>e.jsx(_,{value:m.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m.icon,{className:"h-4 w-4"}),e.jsx("span",{children:m.label})]})},m.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"County"}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select county"})}),e.jsx(Y,{children:h.map(m=>e.jsx(_,{value:m.value,children:m.label},m.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Search"}),e.jsx(D,{placeholder:"Search by name or service",value:i,onChange:m=>c(m.target.value)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{id:"verified"}),e.jsx("label",{htmlFor:"verified",className:"text-sm",children:"Show verified providers only"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",n," providers"]})]})]})]})},Dd=ll,Md=cl,Fd=ol,Qi=l.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(ri,{ref:r,sideOffset:t,className:z("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));Qi.displayName=ri.displayName;const Ed=({providers:s,isLoading:t,resetFilters:a})=>{const r=[{value:"all",label:"All Providers",icon:Z},{value:"transport",label:"Transport Services",icon:je},{value:"storage",label:"Storage Facilities",icon:os},{value:"quality-control",label:"Quality Control",icon:mt},{value:"training",label:"Training Providers",icon:Bs},{value:"input-supplier",label:"Input Suppliers",icon:Oe},{value:"inspector",label:"Inspectors",icon:mt},{value:"market-linkage",label:"Market Linkage",icon:Z}];return t?e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((i,c)=>e.jsxs(w,{className:"animate-pulse",children:[e.jsx(k,{className:"h-32 bg-muted"}),e.jsxs(C,{className:"pt-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-5/6 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-4/6"})]})]},c))}):s.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(ii,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No providers found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filters"}),e.jsx(N,{onClick:a,children:"Reset Filters"})]}):e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.slice(0,9).map(i=>{const c=r.find(o=>o.value===i.businessType)||r[0],n=c.icon;return e.jsxs(w,{className:"overflow-hidden",children:[e.jsx("div",{className:`h-2 w-full ${i.businessType==="transport"?"bg-blue-500":i.businessType==="storage"?"bg-green-500":i.businessType==="training"?"bg-purple-500":i.businessType==="quality-control"?"bg-red-500":i.businessType==="input-supplier"?"bg-amber-500":"bg-teal-500"}`}),e.jsx(k,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5 text-muted-foreground"}),i.name]}),e.jsx(O,{children:c.label})]}),i.verified&&e.jsx(Dd,{children:e.jsxs(Md,{children:[e.jsx(Fd,{children:e.jsx(M,{variant:"secondary",children:"Verified"})}),e.jsx(Qi,{children:e.jsx("p",{children:"This provider has been verified by our team"})})]})})]})}),e.jsxs(C,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsxs("span",{children:[i.location.county,", ",i.location.specificLocation]})]}),e.jsx("p",{className:"line-clamp-2 text-sm text-muted-foreground",children:i.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 pt-2",children:[i.tags.slice(0,3).map(o=>e.jsx(M,{variant:"outline",className:"text-xs",children:o},o)),i.tags.length>3&&e.jsxs(M,{variant:"outline",className:"text-xs",children:["+",i.tags.length-3," more"]})]})]}),e.jsx(re,{className:"flex justify-end pt-0",children:e.jsx(N,{variant:"outline",size:"sm",children:"View Details"})})]},i.id)})})},Id=()=>e.jsxs(w,{className:"mt-10",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Join Our Agricultural Service Network"}),e.jsx(O,{children:"Help strengthen Kenya's agricultural ecosystem by registering your services on our platform."})]}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-medium",children:"Transport Providers"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with farmers needing reliable transportation for their produce"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(os,{className:"h-5 w-5 text-green-500"}),e.jsx("h3",{className:"font-medium",children:"Storage Facilities"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Offer your warehousing and cold storage solutions to reduce post-harvest losses"})]}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(dl,{className:"h-5 w-5 text-amber-500"}),e.jsx("h3",{className:"font-medium",children:"Training & Services"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"List your agricultural training, quality control, or market linkage services"})]})]})}),e.jsxs(re,{className:"flex flex-col sm:flex-row justify-center gap-4 pb-6",children:[e.jsx(N,{className:"w-full sm:w-auto",variant:"default",onClick:()=>window.location.href="/service-provider-registration",children:"Register as Service Provider"}),e.jsx(N,{className:"w-full sm:w-auto",variant:"outline",onClick:()=>window.location.href="/transporter-signup",children:"Register as Transporter"})]})]}),Ld=()=>{const{toast:s}=X(),[t,a]=l.useState(!0),[r,i]=l.useState([]),[c,n]=l.useState([]),[o,h]=l.useState("all"),[m,p]=l.useState("all"),[d,u]=l.useState("");l.useEffect(()=>{(async()=>{try{a(!0);const g=await Gi();i(g),n(g)}catch(g){console.error("Error fetching providers:",g),s({title:"Error",description:"Failed to load service providers. Please try again.",variant:"destructive"})}finally{a(!1)}})()},[s]),l.useEffect(()=>{let f=[...r];if(o!=="all"&&(f=f.filter(g=>g.businessType===o)),m!=="all"&&(f=f.filter(g=>g.location.county.toLowerCase()===m.toLowerCase())),d){const g=d.toLowerCase();f=f.filter(v=>v.name.toLowerCase().includes(g)||v.description.toLowerCase().includes(g)||v.services.some(j=>j.toLowerCase().includes(g))||v.tags.some(j=>j.toLowerCase().includes(g)))}n(f)},[r,o,m,d]);const x=()=>{h("all"),p("all"),u("")};return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Logistics Solutions Map"}),e.jsx("p",{className:"text-muted-foreground",children:"Find service providers near you on the interactive map"})]}),e.jsx(Td,{selectedType:o,setSelectedType:h,selectedCounty:m,setSelectedCounty:p,searchTerm:d,setSearchTerm:u,filteredProvidersCount:c.length}),e.jsx(Pd,{}),e.jsx(Ad,{providers:c,selectedType:o}),e.jsx(Ed,{providers:c,isLoading:t,resetFilters:x}),!t&&c.length>9&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(N,{variant:"outline",children:["Show More (",c.length-9," remaining)"]})}),e.jsx(Id,{})]})]})},tr=[{id:"1",crop:"Tomatoes",location:"Wakulima Market",county:"Nairobi",demandLevel:"high",pricePerKg:120,buyerCount:15,description:"High demand for fresh tomatoes with consistent supply for restaurants and hotels",lastUpdated:new Date("2025-04-22")},{id:"2",crop:"Potatoes",location:"Nakuru Main Market",county:"Nakuru",demandLevel:"high",pricePerKg:45,buyerCount:12,description:"Wholesale buyers looking for bulk potato supply for distribution to retail outlets",lastUpdated:new Date("2025-04-23")},{id:"3",crop:"Maize",location:"Eldoret Grain Market",county:"Uasin Gishu",demandLevel:"medium",pricePerKg:35,buyerCount:8,description:"Millers seeking quality maize with moisture content below 13%",lastUpdated:new Date("2025-04-21")},{id:"4",crop:"Mangoes",location:"Mombasa Fruit Market",county:"Mombasa",demandLevel:"high",pricePerKg:90,buyerCount:10,description:"Export buyers seeking apple and ngowe mango varieties for international markets",lastUpdated:new Date("2025-04-20")},{id:"5",crop:"Avocados",location:"Thika Market",county:"Kiambu",demandLevel:"high",pricePerKg:150,buyerCount:7,description:"Processing companies looking for hass avocados for oil extraction and export",lastUpdated:new Date("2025-04-22")}],qd=()=>{const[s,t]=l.useState(""),[a,r]=l.useState(""),[i,c]=l.useState(tr);return l.useEffect(()=>{document.title="Market Demand Hotspots | Kilimo Connect";let n=[...tr];s&&(n=n.filter(o=>o.crop.toLowerCase().includes(s.toLowerCase()))),a&&(n=n.filter(o=>o.county.toLowerCase().includes(a.toLowerCase()))),c(n)},[s,a]),e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsx("div",{className:"container flex h-16 items-center",children:e.jsx(ns,{})})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Market Demand Hotspots"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Discover where buyers are actively looking for specific crops and connect directly with them"})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"crop",className:"block text-sm font-medium mb-1",children:"Crop"}),e.jsxs(Q,{value:s,onValueChange:t,children:[e.jsx(W,{id:"crop",children:e.jsx(J,{placeholder:"All Crops"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"",children:"All Crops"}),e.jsx(_,{value:"tomatoes",children:"Tomatoes"}),e.jsx(_,{value:"potatoes",children:"Potatoes"}),e.jsx(_,{value:"maize",children:"Maize"}),e.jsx(_,{value:"mangoes",children:"Mangoes"}),e.jsx(_,{value:"avocados",children:"Avocados"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"county",className:"block text-sm font-medium mb-1",children:"County"}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{id:"county",children:e.jsx(J,{placeholder:"All Counties"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"",children:"All Counties"}),e.jsx(_,{value:"nairobi",children:"Nairobi"}),e.jsx(_,{value:"nakuru",children:"Nakuru"}),e.jsx(_,{value:"uasin gishu",children:"Uasin Gishu"}),e.jsx(_,{value:"mombasa",children:"Mombasa"}),e.jsx(_,{value:"kiambu",children:"Kiambu"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(N,{variant:"outline",className:"w-full",onClick:()=>{t(""),r("")},children:"Clear Filters"})})]}),e.jsxs("div",{className:"relative h-[300px] w-full border rounded-md bg-muted/20 flex items-center justify-center mb-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Market Demand Heatmap Visualization"}),i.map(n=>e.jsx("div",{className:`absolute w-4 h-4 rounded-full flex items-center justify-center
                ${n.demandLevel==="high"?"bg-red-500":n.demandLevel==="medium"?"bg-orange-400":"bg-yellow-300"}`,style:{top:`${Math.random()*70+15}%`,left:`${Math.random()*70+15}%`},title:`${n.crop} demand in ${n.location}, ${n.county}`,children:e.jsx(Z,{className:"h-3 w-3 text-white"})},n.id))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.map(n=>e.jsxs(w,{className:n.demandLevel==="high"?"border-red-200 bg-red-50":n.demandLevel==="medium"?"border-orange-200 bg-orange-50":"border-yellow-200 bg-yellow-50",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{children:n.crop}),e.jsxs(O,{children:[n.location,", ",n.county]})]}),e.jsxs("div",{className:`rounded-full px-2 py-1 text-xs font-medium 
                    ${n.demandLevel==="high"?"bg-red-100 text-red-800":n.demandLevel==="medium"?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:[n.demandLevel.charAt(0).toUpperCase()+n.demandLevel.slice(1)," Demand"]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current Price"}),e.jsxs("span",{className:"font-medium",children:["KSh ",n.pricePerKg,"/kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Buyers"}),e.jsx("span",{className:"font-medium",children:n.buyerCount})]}),e.jsx("p",{className:"text-sm mt-2",children:n.description})]})}),e.jsxs(re,{className:"flex justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Updated: ",n.lastUpdated.toLocaleDateString()]}),e.jsx(N,{size:"sm",children:"Connect with Buyers"})]})]},n.id)),i.length===0&&e.jsxs("div",{className:"col-span-full text-center p-12",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(ne,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No demand hotspots found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Try changing your filter criteria or check back later for new demand opportunities."})]})]})]})]})},vt=l.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:z("w-full caption-bottom text-sm",s),...t})}));vt.displayName="Table";const yt=l.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:z("[&_tr]:border-b",s),...t}));yt.displayName="TableHeader";const Nt=l.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:z("[&_tr:last-child]:border-0",s),...t}));Nt.displayName="TableBody";const Rd=l.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Rd.displayName="TableFooter";const ms=l.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:z("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));ms.displayName="TableRow";const pe=l.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:z("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));pe.displayName="TableHead";const ge=l.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:z("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));ge.displayName="TableCell";const zd=l.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:z("mt-4 text-sm text-muted-foreground",s),...t}));zd.displayName="TableCaption";const Kd=({isLoading:s,filteredProduce:t})=>{const{toast:a}=X(),[r,i]=l.useState({}),c=async(n,o,h,m,p)=>{try{i(d=>({...d,[h]:!0})),await qs(1e3),a({title:"Order Placed Successfully",description:`${n==="buy"?"Buy":"Sell"} order placed for ${m} ${o} at KES ${p} per unit`})}catch(d){console.error("Error placing order:",d),a({title:"Order Failed",description:"Could not place your order. Please try again.",variant:"destructive"})}finally{i(d=>({...d,[h]:!1}))}};return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):t.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No commodities found. Try a different search or filter."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsxs(ms,{children:[e.jsx(pe,{children:"Commodity"}),e.jsx(pe,{children:"Category"}),e.jsx(pe,{children:"Quantity"}),e.jsx(pe,{children:"Quality"}),e.jsx(pe,{children:"Available From"}),e.jsx(pe,{children:"County"}),e.jsx(pe,{children:"Seller"}),e.jsx(pe,{children:"Actions"})]})}),e.jsx(Nt,{children:t.map(n=>{const o=Math.floor(Math.random()*100)+50;return e.jsxs(ms,{children:[e.jsx(ge,{className:"font-medium",children:n.name}),e.jsx(ge,{children:n.category}),e.jsxs(ge,{children:[n.quantity," ",n.unit]}),e.jsx(ge,{children:n.qualityGrade}),e.jsx(ge,{children:n.availableFrom}),e.jsx(ge,{children:n.county}),e.jsx(ge,{children:n.farmer}),e.jsx(ge,{children:e.jsx(N,{size:"sm",onClick:()=>c("buy",n.name,n.id,n.quantity,o),disabled:r[n.id],children:r[n.id]?"Processing...":"Buy"})})]},n.id)})})]})})},Od=({isLoading:s,searchTerm:t})=>{const[a,r]=l.useState([{id:1,type:"buy",commodity:"Maize",quantity:1e3,price:42,buyer:"Nairobi Mills"},{id:2,type:"sell",commodity:"Maize",quantity:500,price:45,seller:"John Kamau"},{id:3,type:"buy",commodity:"Coffee",quantity:300,price:340,buyer:"Kenya Coffee Exporters"},{id:4,type:"sell",commodity:"Coffee",quantity:200,price:350,seller:"Mary Wanjiku"},{id:5,type:"buy",commodity:"Tea",quantity:400,price:270,buyer:"Global Tea Traders"},{id:6,type:"sell",commodity:"Tea",quantity:300,price:280,seller:"Sarah Muthoni"}]),i=a.filter(n=>t===""||n.commodity.toLowerCase().includes(t.toLowerCase())),c=async(n,o,h,m)=>{try{await qs(1e3);const p={id:a.length+1,type:n,commodity:o,quantity:h,price:m,buyer:n==="buy"?"Your Company":"",seller:n==="sell"?"Your Company":""};r([...a,p]),alert(`${n==="buy"?"Buy":"Sell"} order placed successfully for ${h} ${o} at KES ${m} per unit`)}catch(p){console.error("Error placing order:",p)}};return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsxs(e.Fragment,{children:[i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsxs(ms,{children:[e.jsx(pe,{children:"Type"}),e.jsx(pe,{children:"Commodity"}),e.jsx(pe,{children:"Quantity"}),e.jsx(pe,{children:"Price (KES)"}),e.jsx(pe,{children:"Buyer/Seller"}),e.jsx(pe,{children:"Actions"})]})}),e.jsx(Nt,{children:i.map(n=>e.jsxs(ms,{children:[e.jsx(ge,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.type==="buy"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:n.type==="buy"?"Buy":"Sell"})}),e.jsx(ge,{className:"font-medium",children:n.commodity}),e.jsx(ge,{children:n.quantity}),e.jsx(ge,{children:n.price}),e.jsx(ge,{children:n.type==="buy"?n.buyer:n.seller}),e.jsx(ge,{children:e.jsx(N,{size:"sm",variant:n.type==="buy"?"outline":"default",onClick:()=>c(n.type==="buy"?"sell":"buy",n.commodity,n.quantity,n.price),children:n.type==="buy"?"Sell to":"Buy from"})})]},n.id))})]})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No active orders found. Try a different search or place a new order."})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Place New Order"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-green-600",children:"Buy Order"})}),e.jsx(C,{children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"buy-commodity",children:"Commodity"}),e.jsxs(Q,{defaultValue:"Maize",children:[e.jsx(W,{id:"buy-commodity",children:e.jsx(J,{placeholder:"Select commodity"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"Maize",children:"Maize"}),e.jsx(_,{value:"Coffee",children:"Coffee"}),e.jsx(_,{value:"Tea",children:"Tea"}),e.jsx(_,{value:"Beans",children:"Beans"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"buy-quantity",children:"Quantity (kg)"}),e.jsx(D,{id:"buy-quantity",type:"number",min:"1",defaultValue:"100"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"buy-price",children:"Price per kg (KES)"}),e.jsx(D,{id:"buy-price",type:"number",min:"1",defaultValue:"45"})]}),e.jsx(N,{type:"button",className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>c("buy","Maize",100,45),children:"Place Buy Order"})]})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-blue-600",children:"Sell Order"})}),e.jsx(C,{children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"sell-commodity",children:"Commodity"}),e.jsxs(Q,{defaultValue:"Beans",children:[e.jsx(W,{id:"sell-commodity",children:e.jsx(J,{placeholder:"Select commodity"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"Maize",children:"Maize"}),e.jsx(_,{value:"Coffee",children:"Coffee"}),e.jsx(_,{value:"Tea",children:"Tea"}),e.jsx(_,{value:"Beans",children:"Beans"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"sell-quantity",children:"Quantity (kg)"}),e.jsx(D,{id:"sell-quantity",type:"number",min:"1",defaultValue:"200"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"sell-price",children:"Price per kg (KES)"}),e.jsx(D,{id:"sell-price",type:"number",min:"1",defaultValue:"110"})]}),e.jsx(N,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>c("sell","Beans",200,110),children:"Place Sell Order"})]})})]})]})]})]})},Bd=({isLoading:s,searchTerm:t})=>{const[a]=l.useState([{id:1,commodity:"Maize",quantity:500,price:45,seller:"John Kamau",buyer:"Nairobi Mills",date:"2023-11-20",status:"completed"},{id:2,commodity:"Coffee",quantity:200,price:350,seller:"Mary Wanjiku",buyer:"Kenya Coffee Exporters",date:"2023-11-22",status:"pending"},{id:3,commodity:"Tea",quantity:300,price:280,seller:"Sarah Muthoni",buyer:"Global Tea Traders",date:"2023-11-25",status:"completed"},{id:4,commodity:"Beans",quantity:400,price:110,seller:"John Kamau",buyer:"Local Market Vendors",date:"2023-11-28",status:"pending"}]),r=a.filter(i=>t===""||i.commodity.toLowerCase().includes(t.toLowerCase()));return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):r.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{children:"No trades found. Complete an order to see your trade history."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsxs(ms,{children:[e.jsx(pe,{children:"Commodity"}),e.jsx(pe,{children:"Quantity"}),e.jsx(pe,{children:"Price (KES)"}),e.jsx(pe,{children:"Seller"}),e.jsx(pe,{children:"Buyer"}),e.jsx(pe,{children:"Date"}),e.jsx(pe,{children:"Status"})]})}),e.jsx(Nt,{children:r.map(i=>e.jsxs(ms,{children:[e.jsx(ge,{className:"font-medium",children:i.commodity}),e.jsx(ge,{children:i.quantity}),e.jsx(ge,{children:i.price}),e.jsx(ge,{children:i.seller}),e.jsx(ge,{children:i.buyer}),e.jsx(ge,{children:i.date}),e.jsx(ge,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.status==="completed"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800"}`,children:i.status==="completed"?"Completed":"Pending"})})]},i.id))})]})})},Ji=({title:s,text:t,url:a=window.location.href,size:r="md",variant:i="buttons"})=>{const{toast:c}=X(),n=`${s}

${t}

Shared via AgriConnect: ${a}`,o=encodeURIComponent(n),h=encodeURIComponent(a),m=()=>{const x=`https://wa.me/?text=${o}`;window.open(x,"_blank","noopener,noreferrer"),c({title:"Shared via WhatsApp",description:"Opening WhatsApp to share this content."})},p=()=>{const x=`https://t.me/share/url?url=${h}&text=${encodeURIComponent(s+`

`+t)}`;window.open(x,"_blank","noopener,noreferrer"),c({title:"Shared via Telegram",description:"Opening Telegram to share this content."})},d=async()=>{try{await navigator.clipboard.writeText(n),c({title:"Copied to Clipboard",description:"Content copied! You can now paste it anywhere."})}catch{c({title:"Copy Failed",description:"Couldn't copy to clipboard. Please try again.",variant:"destructive"})}},u=r==="sm"?"sm":r==="lg"?"lg":"default";return i==="card"?e.jsx(w,{className:"w-full max-w-md",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-medium",children:"Share this content"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(N,{onClick:m,size:u,variant:"outline",className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(cs,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),e.jsxs(N,{onClick:p,size:u,variant:"outline",className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(ga,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-xs",children:"Telegram"})]}),e.jsxs(N,{onClick:d,size:u,variant:"outline",className:"flex flex-col items-center gap-1 h-auto py-3",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs",children:"Copy"})]})]})]})}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{onClick:m,size:u,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4 text-green-600"}),r!=="sm"&&"WhatsApp"]}),e.jsxs(N,{onClick:p,size:u,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ga,{className:"h-4 w-4 text-blue-600"}),r!=="sm"&&"Telegram"]}),i==="buttons"&&e.jsxs(N,{onClick:d,size:u,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(nt,{className:"h-4 w-4"}),r!=="sm"&&"Copy"]})]})},Ud=({listing:s,isSelected:t,onSelect:a})=>{const[r,i]=l.useState(!1),c=o=>e.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((h,m)=>e.jsx(Be,{className:`h-4 w-4 ${m<Math.floor(o)?"text-yellow-500 fill-yellow-500":m<o?"text-yellow-500 fill-yellow-500 opacity-50":"text-gray-300"}`},m)),e.jsx("span",{className:"ml-1 text-sm font-medium",children:o.toFixed(1)})]}),n=`Check out this barter listing: ${s.commodity} (${s.quantity} ${s.unit}) available in ${s.location}. Looking to trade for: ${s.seekingCommodities.join(", ")}.`;return e.jsx(w,{className:`overflow-hidden hover:shadow-md transition-shadow ${t?"ring-2 ring-primary":""}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"md:w-1/4 bg-muted",children:e.jsx("div",{className:"aspect-square relative",children:e.jsx("img",{src:s.imageUrl,alt:s.commodity,className:"object-cover w-full h-full"})})}),e.jsxs("div",{className:"p-4 md:w-3/4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",onClick:()=>a(s),children:[e.jsx("h3",{className:"text-lg font-semibold cursor-pointer",children:s.commodity}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Z,{className:"h-3.5 w-3.5 mr-1"}),s.location]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[s.quantity," ",s.unit," available"]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>i(!r),children:e.jsx(nt,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-6 w-6",children:e.jsx(Ls,{children:s.owner.charAt(0)})}),e.jsx("span",{className:"text-sm font-medium",children:s.owner})]}),e.jsx("div",{className:"ml-3",children:c(s.ownerRating)})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Seeking:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.seekingCommodities.map((o,h)=>e.jsx(M,{variant:"secondary",children:o},h))})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Listed: ",s.listedDate]})}),r&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(Ji,{title:`Barter Opportunity: ${s.commodity}`,text:n,size:"sm"})})]})]})})},$d=async()=>{try{const{data:s,error:t}=await F.from("barter_listings").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)return console.error("Error fetching barter listings:",t),[];const a=(s==null?void 0:s.map(i=>i.user_id))||[],{data:r}=await F.from("profiles").select("id, full_name, avatar_url").in("id",a);return(s==null?void 0:s.map(i=>{var n;const c=r==null?void 0:r.find(o=>o.id===i.user_id);return{id:i.id,commodity:i.commodity,quantity:Number(i.offering_quantity),unit:i.unit,description:i.description||"",imageUrl:((n=i.image_urls)==null?void 0:n[0])||"/placeholder.svg",location:i.location,county:i.county,seekingCommodities:i.seeking_commodities||[],owner:(c==null?void 0:c.full_name)||"Anonymous User",ownerRating:4.5,listedDate:new Date(i.created_at).toLocaleDateString(),status:i.status,userId:i.user_id}}))||[]}catch(s){return console.error("Error fetching barter listings:",s),[]}},Vd=({searchTerm:s="",selectedCategory:t="",selectedLocation:a="",isLoading:r=!1})=>{const[i,c]=l.useState([]),[n,o]=l.useState([]),[h,m]=l.useState(null),[p,d]=l.useState(s),[u,x]=l.useState(t),[f,g]=l.useState(!0),{toast:v}=X();l.useEffect(()=>{j()},[]),l.useEffect(()=>{y()},[i,p,u]);const j=async()=>{try{g(!0);const T=await $d();c(T)}catch(T){console.error("Error loading barter listings:",T),v({title:"Error",description:"Failed to load barter listings",variant:"destructive"})}finally{g(!1)}},y=()=>{let T=i;p&&(T=T.filter(E=>E.commodity.toLowerCase().includes(p.toLowerCase())||E.location.toLowerCase().includes(p.toLowerCase())||E.description.toLowerCase().includes(p.toLowerCase()))),u!=="all"&&u&&(T=T.filter(E=>E.commodity.toLowerCase().includes(u.toLowerCase()))),o(T)},b=["all","cereals","vegetables","fruits","livestock","seeds"];return f||r?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"Loading barter listings..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Browse Barter Listings"}),e.jsxs(N,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Listing"]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(D,{placeholder:"Search by commodity, location, or description...",value:p,onChange:T=>d(T.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(T=>e.jsx(M,{variant:u===T?"default":"outline",className:"cursor-pointer capitalize",onClick:()=>x(T),children:T},T))})]})]})})]}),n.length===0?e.jsx(w,{children:e.jsxs(C,{className:"p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No listings found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:p||u!=="all"?"Try adjusting your search or filters":"Be the first to create a barter listing!"}),e.jsxs(N,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create First Listing"]})]})}):e.jsx("div",{className:"grid gap-6",children:n.map(T=>e.jsx(Ud,{listing:T,isSelected:(h==null?void 0:h.id)===T.id,onSelect:m},T.id))})]})},Hd=(s,t=20,a=30)=>{const r=new Date,i=[];for(let c=a;c>=0;c--){const n=new Date;n.setDate(r.getDate()-c);const o=Math.random()*t*2-t,h=Math.max(s+o,s*.7);i.push({date:n.toISOString().split("T")[0],price:Math.round(h*10)/10})}return i},Gd=s=>{if(!s.length)return null;const t=s.map(o=>o.price),a=Math.min(...t),r=Math.max(...t),i=t.reduce((o,h)=>o+h,0)/t.length,c=t[t.length-1]>t[0]?"rising":"falling",n=Math.sqrt(t.reduce((o,h)=>o+Math.pow(h-i,2),0)/t.length);return{min:Math.round(a*10)/10,max:Math.round(r*10)/10,avg:Math.round(i*10)/10,trend:c,volatility:Math.round(n*10)/10,priceRange:Math.round((r-a)*10)/10}},Wd=({data:s,type:t,height:a=200})=>{const r={line:Yt,bar:Ws,area:ml}[t],i=()=>{switch(t){case"line":return e.jsx(ls,{type:"monotone",dataKey:"price",stroke:"#8884d8",activeDot:{r:8}});case"bar":return e.jsx(Qe,{dataKey:"price",fill:"#8884d8"});case"area":return e.jsx(ul,{type:"monotone",dataKey:"price",stroke:"#8884d8",fill:"#8884d8"});default:return null}};return e.jsx(Re,{width:"100%",height:a,children:e.jsxs(r,{data:s,margin:{top:5,right:5,left:5,bottom:5},children:[e.jsx(as,{strokeDasharray:"3 3",stroke:"#eee"}),e.jsx(rs,{dataKey:"date",tick:{fontSize:12},tickFormatter:c=>{const n=new Date(c);return`${n.getDate()}/${n.getMonth()+1}`}}),e.jsx(is,{domain:["auto","auto"],label:{value:"KES",angle:-90,position:"insideLeft"}}),e.jsx(ze,{formatter:c=>[`KES ${c}`,"Price"],labelFormatter:c=>`Date: ${c}`}),e.jsx(Fs,{}),i()]})})},Yd=({isLoading:s,markets:t})=>{const[a,r]=l.useState("line");return s?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"No market data available. Please try again later."})}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Price Trends Visualization"}),e.jsxs(Q,{value:a,onValueChange:i=>r(i),children:[e.jsx(W,{className:"w-[180px]",children:e.jsx(J,{placeholder:"Select chart type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"line",children:"Line Chart"}),e.jsx(_,{value:"bar",children:"Bar Chart"}),e.jsx(_,{value:"area",children:"Area Chart"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(i=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsxs(k,{children:[e.jsx(S,{children:i.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:i.county})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-6",children:[i.producePrices.map((c,n)=>{const o=Hd(c.price),h=Gd(o);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{children:c.produceName}),e.jsxs("span",{className:"font-medium",children:["KES ",c.price," per ",c.unit]})]}),h&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price Range"}),e.jsxs("div",{className:"font-medium",children:["KES ",h.priceRange]})]}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Price"}),e.jsxs("div",{className:"font-medium",children:["KES ",h.avg]})]}),e.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price Trend"}),e.jsx("div",{className:"font-medium capitalize",children:e.jsx(M,{variant:h.trend==="rising"?"default":"secondary",children:h.trend})})]})]}),e.jsx("div",{className:"h-[200px] mt-2 mb-4",children:e.jsx(Wd,{data:o,type:a})})]},n)}),e.jsxs("div",{className:"text-sm mt-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Demand:"})," ",i.demand]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Operating Hours:"})," ",i.operatingHours]})]})]})})]},i.id))})]})},Qd=()=>{ve(),X();const[s,t]=l.useState("marketplace"),[a,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(""),[h,m]=l.useState([]),[p,d]=l.useState([]),[u,x]=l.useState(!1),f=["All Categories","Cereals","Legumes","Cash Crops","Fruits","Vegetables","Dairy","Meat"],g=["All Locations","Nairobi County","Nakuru County","Kiambu County","Meru County","Nyandarua County","Machakos County","Kisumu County"],v=async()=>{x(!0);try{if(s==="marketplace"||s==="orders"){const T=await to();m(T)}if(s==="marketplace"||s==="price-trends"){const T=await so();d(T)}}catch(T){console.error("Error fetching data:",T)}finally{x(!1)}};l.useEffect(()=>{v()},[s]);const j=T=>{t(T),r(""),c("")},y=T=>{T.preventDefault(),v()},b=h.filter(T=>{const E=a===""||T.name.toLowerCase().includes(a.toLowerCase()),P=i===""||i==="All Categories"||T.category.toLowerCase()===i.toLowerCase();return E&&P});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Agricultural Commodity Exchange"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Buy, sell, and barter agricultural commodities directly with farmers, processors, and exporters across Kenya."})]}),e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Commodity Exchange Platform"}),e.jsx(O,{children:"Explore available commodities, place orders, barter goods, and track market trends"})]}),e.jsx(C,{children:e.jsxs(ue,{value:s,onValueChange:j,className:"w-full",children:[e.jsxs(me,{className:"w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-2 mb-8",children:[e.jsxs(R,{value:"marketplace",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"Marketplace"})]}),e.jsxs(R,{value:"orders",className:"flex items-center gap-2",children:[e.jsx(xl,{className:"h-4 w-4"}),e.jsx("span",{children:"Orders"})]}),e.jsxs(R,{value:"my-trades",className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{children:"My Trades"})]}),e.jsxs(R,{value:"barter-exchange",className:"flex items-center gap-2",children:[e.jsx(hl,{className:"h-4 w-4"}),e.jsx("span",{children:"Barter Exchange"})]}),e.jsxs(R,{value:"price-trends",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Price Trends"})]})]}),e.jsx("div",{className:"mt-2 mb-6",children:e.jsxs("form",{onSubmit:y,className:"flex flex-col md:flex-row items-end gap-4",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(A,{htmlFor:"search",className:"mb-2 block",children:"Search"}),e.jsx(D,{id:"search",placeholder:"Search commodities...",value:a,onChange:T=>r(T.target.value)})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(A,{htmlFor:"category",className:"mb-2 block",children:"Category"}),e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{id:"category",children:e.jsx(J,{placeholder:"All Categories"})}),e.jsx(Y,{children:f.map(T=>e.jsx(_,{value:T,children:T},T))})]})]}),s==="barter-exchange"&&e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(A,{htmlFor:"location",className:"mb-2 block",children:"Location"}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{id:"location",children:e.jsx(J,{placeholder:"All Locations"})}),e.jsx(Y,{children:g.map(T=>e.jsx(_,{value:T,children:T},T))})]})]}),e.jsx(N,{type:"submit",disabled:u,className:"mt-4 md:mt-0",children:u?"Loading...":"Search"})]})}),e.jsx(B,{value:"marketplace",className:"mt-6",children:e.jsx(Kd,{isLoading:u,filteredProduce:b})}),e.jsx(B,{value:"orders",className:"mt-6",children:e.jsx(Od,{isLoading:u,searchTerm:a})}),e.jsx(B,{value:"my-trades",className:"mt-6",children:e.jsx(Bd,{isLoading:u,searchTerm:a})}),e.jsx(B,{value:"barter-exchange",children:e.jsx(Vd,{searchTerm:a,selectedCategory:i,selectedLocation:n,isLoading:u})}),e.jsx(B,{value:"price-trends",className:"mt-6",children:e.jsx(Yd,{isLoading:u,markets:p})})]})})]})]})]})},Jd=()=>{const[s,t]=l.useState(""),r=[{id:"1",title:"Trade Maize for Fertilizer",offeredItem:"Maize - 10 bags (90kg each)",requestedItem:"NPK Fertilizer - 5 bags (50kg each)",location:"Nakuru County",farmerName:"John Maina",contact:"+254 700 123456",postedDate:"2024-01-15",category:"Grains"},{id:"2",title:"Beans for Transport Services",offeredItem:"Green Beans - 20 bags (50kg each)",requestedItem:"Transport to Nairobi Market",location:"Meru County",farmerName:"Mary Wanjiku",contact:"+254 701 234567",postedDate:"2024-01-14",category:"Legumes"},{id:"3",title:"Equipment Exchange",offeredItem:"Tractor Use - 2 days per month",requestedItem:"Harvester Use - 1 day",location:"Uasin Gishu County",farmerName:"Peter Kiprotich",contact:"+254 702 345678",postedDate:"2024-01-13",category:"Equipment"}].filter(i=>i.title.toLowerCase().includes(s.toLowerCase())||i.offeredItem.toLowerCase().includes(s.toLowerCase())||i.requestedItem.toLowerCase().includes(s.toLowerCase()));return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Barter Exchange"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Trade agricultural goods and services directly with other farmers without using money"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search barter opportunities...",value:s,onChange:i=>t(i.target.value),className:"pl-10"})]}),e.jsx(N,{children:"Post Barter Offer"})]})]}),e.jsx("div",{className:"grid gap-6",children:r.map(i=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl mb-2",children:i.title}),e.jsx(M,{variant:"secondary",children:i.category})]}),e.jsx("div",{className:"text-right text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-4 w-4"}),new Date(i.postedDate).toLocaleDateString()]})})]})}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Offering:"}),e.jsx("p",{className:"text-green-700",children:i.offeredItem})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Looking for:"}),e.jsx("p",{className:"text-blue-700",children:i.requestedItem})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(ee,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:i.farmerName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:i.location})]})]}),e.jsx(N,{children:"Contact Farmer"})]})]})]},i.id))}),r.length===0&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No barter opportunities found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search terms or be the first to post a barter offer!"}),e.jsx(N,{children:"Post Your First Barter Offer"})]})})]})]})},Zd=()=>{const[s,t]=l.useState(!1),{toast:a}=X(),r=[{id:"1",offering:"Maize",quantity_offering:500,unit_offering:"Kg",seeking:"Fertilizer",quantity_seeking:50,unit_seeking:"Kg",location:"Nairobi",trader:"John Doe",description:"Quality maize for trade",created_at:new Date().toISOString()},{id:"2",offering:"Beans",quantity_offering:200,unit_offering:"Kg",seeking:"Seeds",quantity_seeking:20,unit_seeking:"Packets",location:"Kiambu",trader:"Mary Smith",description:"Fresh beans ready for exchange",created_at:new Date().toISOString()}],i=()=>{a({title:"Success",description:"Barter offer created successfully"}),t(!1)};return e.jsxs("div",{className:"min-h-screen pb-20 lg:pb-0",children:[e.jsx(Js,{title:"Barter Trade"}),e.jsxs("main",{className:"py-6 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(Ua,{className:"h-8 w-8 text-primary"}),"Barter Trade Exchange"]}),e.jsx("p",{className:"text-muted-foreground",children:"Trade agricultural products without money"}),e.jsx(w,{className:"mt-4 bg-amber-50 dark:bg-amber-950 border-amber-200",children:e.jsxs(C,{className:"pt-4 space-y-2 text-sm",children:[e.jsx("p",{className:"font-semibold",children:"Important Guidelines:"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Verify product quality before exchanging"}),e.jsx("li",{children:"• Meet in safe, public locations"}),e.jsx("li",{children:"• Consider fair market values for both items"}),e.jsx("li",{children:"• Document exchanges with receipts/photos"})]}),e.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400 pt-2",children:[e.jsx("strong",{children:"Disclaimer:"})," SokoConnect facilitates connections only. We are not responsible for product quality, fairness of trades, or disputes. Trade at your own discretion."]})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs(_e,{open:s,onOpenChange:t,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{className:"w-full sm:w-auto",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Create Barter Offer"]})}),e.jsxs(Se,{className:"max-w-2xl",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Create Barter Trade Offer"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"What I'm Offering"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Product"}),e.jsx(D,{placeholder:"e.g., Maize"})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Quantity"}),e.jsx(D,{type:"number",placeholder:"Amount"})]})]})]}),e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"What I'm Seeking"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Product"}),e.jsx(D,{placeholder:"e.g., Fertilizer"})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Quantity"}),e.jsx(D,{type:"number",placeholder:"Amount"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Location"}),e.jsx(D,{placeholder:"Your location"})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Description"}),e.jsx(ie,{placeholder:"Add details about your offer..."})]}),e.jsx(N,{onClick:i,className:"w-full",children:"Create Offer"})]})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:r.map(c=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Trade Offer"}),e.jsx(M,{variant:"secondary",children:"Active"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["By ",c.trader]})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Offering"}),e.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[e.jsx(ae,{className:"h-4 w-4 text-green-600"}),c.offering]}),e.jsxs("div",{className:"text-sm",children:[c.quantity_offering," ",c.unit_offering]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Seeking"}),e.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-600"}),c.seeking]}),e.jsxs("div",{className:"text-sm",children:[c.quantity_seeking," ",c.unit_seeking]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),c.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),new Date(c.created_at).toLocaleDateString()]})]}),e.jsxs(N,{className:"w-full",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Propose Trade"]})]})})]},c.id))})]}),e.jsx(Rs,{})]})},Xd=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState(""),{toast:n}=X();l.useEffect(()=>{o()},[]);async function o(){try{const{data:m,error:p}=await F.from("food_rescue_listings").select(`
          *,
          donor:donor_id (
            full_name
          )
        `).eq("status","available").order("created_at",{ascending:!1});if(p)throw p;t(m||[])}catch(m){console.error("Error:",m),n({title:"Error",description:"Failed to load donations",variant:"destructive"})}finally{r(!1)}}const h=s.filter(m=>m.product_name.toLowerCase().includes(i.toLowerCase())||m.pickup_location.toLowerCase().includes(i.toLowerCase()));return e.jsxs("div",{className:"min-h-screen pb-20 lg:pb-0",children:[e.jsx(Js,{title:"Food Donations"}),e.jsxs("main",{className:"py-6 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"Available Food Donations"}),e.jsx("p",{className:"text-muted-foreground",children:"Help reduce food waste by claiming surplus food"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search donations...",value:i,onChange:m=>c(m.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a?e.jsx("div",{className:"col-span-full text-center py-12",children:"Loading donations..."}):h.length>0?h.map(m=>{var p;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg",children:m.product_name}),e.jsxs(M,{variant:"secondary",children:[e.jsx(ae,{className:"mr-1 h-3 w-3"}),m.quantity," ",m.unit]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["By ",((p=m.donor)==null?void 0:p.full_name)||"Anonymous"]})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 text-primary"}),m.pickup_location]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"h-4 w-4 text-primary"}),"Expires: ",new Date(m.expiry_date).toLocaleDateString()]}),m.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:m.description}),e.jsxs(N,{className:"w-full",size:"sm",children:[e.jsx(ys,{className:"mr-2 h-4 w-4"}),"Claim Donation"]})]})})]},m.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(ae,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No donations available at the moment"})]})})]}),e.jsx(Rs,{})]})},ar=()=>{const{user:s}=we(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState({}),{toast:o}=X();l.useEffect(()=>{h()},[]);async function h(){try{const{data:p,error:d}=await F.from("city_market_products").select(`
          *,
          agent:agent_id (
            full_name
          )
        `).eq("status","fresh").order("created_at",{ascending:!1}).limit(20);if(d)throw d;a(p||[])}catch(p){console.error("Error:",p),o({title:"Error",description:"Failed to load auctions",variant:"destructive"})}finally{i(!1)}}const m=async p=>{if(!s){o({title:"Authentication Required",description:"Please sign in to place bids",variant:"destructive"});return}const d=parseFloat(c[p]);if(!d||d<=0){o({title:"Invalid Bid",description:"Please enter a valid bid amount",variant:"destructive"});return}try{const{error:u}=await F.from("city_market_bids").insert({auction_id:p,bidder_user_id:s.id,bid_amount:d});if(u)throw u;o({title:"Bid Placed!",description:"Your bid has been submitted successfully"}),n({...c,[p]:""})}catch(u){console.error("Error:",u),o({title:"Error",description:"Failed to place bid",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen pb-20 lg:pb-0",children:[e.jsx(Js,{title:"Auctions"}),e.jsxs("main",{className:"py-6 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(At,{className:"h-8 w-8 text-primary"}),"Live Auctions"]}),e.jsx("p",{className:"text-muted-foreground",children:"Bid on fresh agricultural products"}),e.jsx(w,{className:"mt-4 bg-amber-50 dark:bg-amber-950 border-amber-200",children:e.jsxs(C,{className:"pt-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"How Auctions Work"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Browse live auctions from verified sellers"}),e.jsx("li",{children:"• Place bids on products you're interested in"}),e.jsx("li",{children:"• Highest bid wins when auction closes"}),e.jsx("li",{children:"• Arrange pickup at the specified market location"}),e.jsx("li",{children:"• Complete payment as agreed with seller"})]}),e.jsxs("p",{className:"text-xs mt-3 text-amber-700 dark:text-amber-400",children:[e.jsx("strong",{children:"Disclaimer:"})," SokoConnect is a platform connecting buyers and sellers. We are not liable for product quality, delivery, or disputes. Always verify products before payment."]})]})})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r?e.jsx("div",{className:"col-span-full text-center py-12",children:"Loading auctions..."}):t.length>0?t.map(p=>{var d;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(M,{variant:"default",className:"gap-1",children:[e.jsx(ne,{className:"h-3 w-3"}),"Live"]}),e.jsx(M,{variant:"outline",children:p.category})]}),e.jsx(S,{className:"text-lg",children:p.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["By ",((d=p.agent)==null?void 0:d.full_name)||"Verified Seller"]})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Quantity"}),e.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),p.quantity," ",p.unit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted-foreground",children:"Starting Price"}),e.jsxs("div",{className:"font-semibold flex items-center gap-1",children:[e.jsx(De,{className:"h-3 w-3"}),"KES ",p.price_per_unit,"/",p.unit]})]})]}),p.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:p.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ze,{className:"h-3 w-3"}),"Posted ",new Date(p.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{type:"number",placeholder:"Bid amount",value:c[p.id]||"",onChange:u=>n({...c,[p.id]:u.target.value}),className:"flex-1"}),e.jsxs(N,{onClick:()=>m(p.id),size:"sm",children:[e.jsx(At,{className:"h-4 w-4 mr-1"}),"Bid"]})]})]})})]},p.id)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(At,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active auctions at the moment"})]})})]}),e.jsx(Rs,{})]})},em=()=>{const[s,t]=l.useState(""),[a,r]=l.useState(""),i=[{id:"1",name:"Premium Maize",category:"Grains",quantity:"50 bags (90kg each)",price:"KES 4,500 per bag",quality:"Grade A",location:"Kitale, Trans Nzoia",farmer:"Samuel Wekesa",contact:"+254 700 111222",rating:4.8,harvestDate:"2024-01-10",description:"Freshly harvested yellow maize, moisture content 13.5%"},{id:"2",name:"Organic Tomatoes",category:"Vegetables",quantity:"200 crates (20kg each)",price:"KES 800 per crate",quality:"Premium",location:"Naivasha, Nakuru",farmer:"Grace Muthoni",contact:"+254 701 222333",rating:4.9,harvestDate:"2024-01-12",description:"Certified organic Roma tomatoes, perfect for processing"},{id:"3",name:"French Beans",category:"Vegetables",quantity:"100 kg",price:"KES 120 per kg",quality:"Export Grade",location:"Meru County",farmer:"John Mwenda",contact:"+254 702 333444",rating:4.7,harvestDate:"2024-01-13",description:"Export quality French beans, ready for immediate delivery"}],c=i.filter(o=>{const h=o.name.toLowerCase().includes(s.toLowerCase())||o.category.toLowerCase().includes(s.toLowerCase()),m=!a||o.category===a;return h&&m}),n=Array.from(new Set(i.map(o=>o.category)));return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Agricultural Marketplace"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Buy fresh agricultural produce directly from verified farmers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search produce...",value:s,onChange:o=>t(o.target.value),className:"pl-10"})]}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Categories"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"",children:"All Categories"}),n.map(o=>e.jsx(_,{value:o,children:o},o))]})]}),e.jsxs(N,{variant:"outline",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),e.jsx("div",{className:"grid gap-6",children:c.map(o=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl mb-2",children:o.name}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(M,{variant:"secondary",children:o.category}),e.jsx(M,{variant:"default",children:o.quality})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:o.price}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Available: ",o.quantity]})]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:o.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:o.location})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:o.farmer})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsxs("span",{className:"text-sm",children:[o.rating,"/5.0"]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Harvest Date:"}),e.jsx("div",{className:"text-sm font-medium mb-2",children:new Date(o.harvestDate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Freshness:"}),e.jsx(M,{variant:"outline",className:"text-green-600 border-green-600",children:"Fresh (2 days)"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(N,{className:"flex-1",children:"Contact Farmer"}),e.jsx(N,{variant:"outline",children:"Add to Cart"}),e.jsx(N,{variant:"outline",children:"Request Quote"})]})]})]},o.id))}),c.length===0&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No produce found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria to find what you're looking for."})]})})]})]})},sm=()=>{var p,d;const[s,t]=l.useState("maize"),[a,r]=l.useState("6months"),i={maize:[{month:"Jul 2023",price:4200,market:"Average"},{month:"Aug 2023",price:4350,market:"Average"},{month:"Sep 2023",price:4100,market:"Average"},{month:"Oct 2023",price:4500,market:"Average"},{month:"Nov 2023",price:4800,market:"Average"},{month:"Dec 2023",price:4650,market:"Average"},{month:"Jan 2024",price:4400,market:"Average"}],beans:[{month:"Jul 2023",price:8500,market:"Average"},{month:"Aug 2023",price:9200,market:"Average"},{month:"Sep 2023",price:8800,market:"Average"},{month:"Oct 2023",price:9500,market:"Average"},{month:"Nov 2023",price:10200,market:"Average"},{month:"Dec 2023",price:9800,market:"Average"},{month:"Jan 2024",price:9400,market:"Average"}]},c=i[s]||i.maize,n=((p=c[c.length-1])==null?void 0:p.price)||0,o=((d=c[c.length-2])==null?void 0:d.price)||0,h=n-o,m=o?(h/o*100).toFixed(1):"0";return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Price Trends Analysis"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Track historical price movements and market trends for agricultural commodities"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs(Q,{value:s,onValueChange:t,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"Select Commodity"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"maize",children:"Maize"}),e.jsx(_,{value:"beans",children:"Beans"}),e.jsx(_,{value:"wheat",children:"Wheat"}),e.jsx(_,{value:"rice",children:"Rice"})]})]}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"Select Period"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"3months",children:"Last 3 Months"}),e.jsx(_,{value:"6months",children:"Last 6 Months"}),e.jsx(_,{value:"1year",children:"Last Year"}),e.jsx(_,{value:"2years",children:"Last 2 Years"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Current Price"})}),e.jsxs(C,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",n.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"per 90kg bag"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Price Change"})}),e.jsxs(C,{children:[e.jsxs("div",{className:`text-2xl font-bold flex items-center gap-2 ${h>=0?"text-green-600":"text-red-600"}`,children:[h>=0?e.jsx(ne,{className:"h-5 w-5"}):e.jsx(Es,{className:"h-5 w-5"}),h>=0?"+":"","KES ",h.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h>=0?"+":"",m,"% from last month"]})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Market Outlook"})}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Stable"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Based on seasonal trends"})]})]})]}),e.jsxs(w,{className:"mb-8",children:[e.jsx(k,{children:e.jsx(S,{children:"Price Trend Chart"})}),e.jsx(C,{children:e.jsx(Re,{width:"100%",height:400,children:e.jsxs(Yt,{data:c,children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"month"}),e.jsx(is,{}),e.jsx(ze,{formatter:u=>[`KES ${u.toLocaleString()}`,"Price"]}),e.jsx(Fs,{}),e.jsx(ls,{type:"monotone",dataKey:"price",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb",strokeWidth:2,r:4},name:"Price (KES per 90kg bag)"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Market Analysis"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Key Factors Affecting Prices:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Seasonal demand patterns"}),e.jsx("li",{children:"• Weather conditions and rainfall"}),e.jsx("li",{children:"• Input costs (fertilizer, fuel)"}),e.jsx("li",{children:"• Regional supply and demand"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Price Forecast:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Prices expected to remain stable over the next month, with potential increase during dry season (March-May)."})]})]})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Regional Price Comparison"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Nairobi Market"}),e.jsx("span",{className:"font-medium",children:"KES 4,600"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Nakuru Market"}),e.jsx("span",{className:"font-medium",children:"KES 4,200"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Kitale Market"}),e.jsx("span",{className:"font-medium",children:"KES 3,900"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[e.jsx("span",{className:"text-sm",children:"Mombasa Market"}),e.jsx("span",{className:"font-medium",children:"KES 4,800"})]})]})})]})]})]})]})},tm=()=>{const[s,t]=l.useState("active"),a=[{id:"1",type:"sale",commodity:"Maize",quantity:"50 bags (90kg each)",price:"KES 4,500 per bag",buyer:"Nakuru Grain Millers",status:"confirmed",deliveryDate:"2024-01-20",totalValue:"KES 225,000"},{id:"2",type:"purchase",commodity:"NPK Fertilizer",quantity:"20 bags (50kg each)",price:"KES 3,200 per bag",seller:"Agro-Supplies Ltd",status:"pending",deliveryDate:"2024-01-18",totalValue:"KES 64,000"}],r=[{id:"3",type:"sale",commodity:"French Beans",quantity:"200 kg",price:"KES 120 per kg",buyer:"Export Company Ltd",status:"completed",completedDate:"2024-01-10",totalValue:"KES 24,000"},{id:"4",type:"purchase",commodity:"Seeds - Maize",quantity:"10 kg",price:"KES 450 per kg",seller:"Kenya Seed Company",status:"completed",completedDate:"2024-01-05",totalValue:"KES 4,500"}],i=n=>{switch(n){case"confirmed":return"default";case"pending":return"secondary";case"completed":return"default";case"cancelled":return"destructive";default:return"secondary"}},c=n=>n==="sale"?"text-green-600":"text-blue-600";return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"My Trades"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Track and manage your agricultural trading activities"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Active Trades"})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:"2"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Total Value (Active)"})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:"KES 289,000"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Completed This Month"})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:"2"})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-sm font-medium",children:"Success Rate"})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"95%"})})]})]})]}),e.jsxs(ue,{value:s,onValueChange:t,className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsx(R,{value:"active",children:"Active Trades"}),e.jsx(R,{value:"completed",children:"Completed"}),e.jsx(R,{value:"analytics",children:"Analytics"})]}),e.jsx(B,{value:"active",className:"space-y-6",children:a.map(n=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"h-5 w-5"}),n.commodity,e.jsx(M,{variant:"outline",className:c(n.type),children:n.type==="sale"?"Selling":"Buying"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.type==="sale"?`Buyer: ${n.buyer}`:`Seller: ${n.seller}`})]}),e.jsx(M,{variant:i(n.status),children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]})}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsx("div",{className:"font-medium",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("div",{className:"font-medium",children:n.price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Delivery Date"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),new Date(n.deliveryDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"}),e.jsx("div",{className:"font-medium text-lg",children:n.totalValue})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(N,{size:"sm",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Contact ",n.type==="sale"?"Buyer":"Seller"]})]})]})]},n.id))}),e.jsx(B,{value:"completed",className:"space-y-6",children:r.map(n=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2 mb-2",children:[e.jsx(ae,{className:"h-5 w-5"}),n.commodity,e.jsx(M,{variant:"outline",className:c(n.type),children:n.type==="sale"?"Sold":"Purchased"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.type==="sale"?`Buyer: ${n.buyer}`:`Seller: ${n.seller}`})]}),e.jsx(M,{variant:"default",children:"Completed"})]})}),e.jsx(C,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsx("div",{className:"font-medium",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("div",{className:"font-medium",children:n.price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed Date"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),new Date(n.completedDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Value"}),e.jsx("div",{className:"font-medium text-lg",children:n.totalValue})]})]})})]},n.id))}),e.jsx(B,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),"Trading Summary"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Trades This Year"}),e.jsx("span",{className:"font-medium",children:"24"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Sales Value"}),e.jsx("span",{className:"font-medium text-green-600",children:"KES 1,250,000"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Purchases"}),e.jsx("span",{className:"font-medium text-blue-600",children:"KES 340,000"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Net Profit"}),e.jsx("span",{className:"font-medium text-primary",children:"KES 910,000"})]})]})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Top Commodities Traded"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Maize"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full w-3/4"})}),e.jsx("span",{className:"text-sm",children:"12 trades"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"French Beans"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full w-1/2"})}),e.jsx("span",{className:"text-sm",children:"8 trades"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Fertilizer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full w-1/4"})}),e.jsx("span",{className:"text-sm",children:"4 trades"})]})]})]})})]})]})})]})]})]})},am=()=>{const[s,t]=l.useState(""),[a,r]=l.useState("all"),i=[{id:"all",name:"All Categories",count:156},{id:"crop-management",name:"Crop Management",count:45},{id:"pest-control",name:"Pest & Disease Control",count:32},{id:"market-prices",name:"Market Prices",count:28},{id:"farming-techniques",name:"Farming Techniques",count:51}],n=[{id:"1",title:"Best practices for maize farming in dry season",category:"crop-management",author:"John Mwangi",authorAvatar:"/avatars/john.jpg",timeAgo:"2 hours ago",replies:12,likes:24,excerpt:"Looking for advice on irrigation methods and drought-resistant varieties...",tags:["maize","irrigation","drought"]},{id:"2",title:"Current market prices for French beans in Nairobi",category:"market-prices",author:"Mary Wanjiku",authorAvatar:"/avatars/mary.jpg",timeAgo:"5 hours ago",replies:8,likes:15,excerpt:"Has anyone sold French beans in Nairobi recently? What are the current rates?",tags:["french-beans","nairobi","prices"]},{id:"3",title:"Organic pest control methods for tomatoes",category:"pest-control",author:"Peter Kiprotich",authorAvatar:"/avatars/peter.jpg",timeAgo:"1 day ago",replies:18,likes:32,excerpt:"Share your experience with natural pest control methods that actually work...",tags:["tomatoes","organic","pest-control"]},{id:"4",title:"Greenhouse farming setup and costs",category:"farming-techniques",author:"Sarah Ochieng",authorAvatar:"/avatars/sarah.jpg",timeAgo:"2 days ago",replies:25,likes:41,excerpt:"Planning to set up a greenhouse. What are the initial costs and best practices?",tags:["greenhouse","setup","investment"]}].filter(o=>{const h=o.title.toLowerCase().includes(s.toLowerCase())||o.excerpt.toLowerCase().includes(s.toLowerCase()),m=a==="all"||o.category===a;return h&&m});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Community Forums"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Connect with fellow farmers, share knowledge, and get expert advice"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search discussions...",value:s,onChange:o=>t(o.target.value),className:"pl-10"})]}),e.jsx(N,{children:"Start New Discussion"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Categories"})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-2",children:i.map(o=>e.jsx("button",{onClick:()=>r(o.id),className:`w-full text-left p-3 rounded-lg transition-colors ${a===o.id?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:o.name}),e.jsx(M,{variant:"secondary",className:"text-xs",children:o.count})]})},o.id))})})]}),e.jsxs(w,{className:"mt-6",children:[e.jsx(k,{children:e.jsx(S,{children:"Forum Stats"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Posts"}),e.jsx("span",{className:"font-medium",children:"1,247"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Members"}),e.jsx("span",{className:"font-medium",children:"3,456"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"New Today"}),e.jsx("span",{className:"font-medium",children:"23"})]})]})})]})]}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"space-y-6",children:n.map(o=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(S,{className:"text-lg mb-2 hover:text-primary cursor-pointer",children:o.title}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:o.tags.map(h=>e.jsx(M,{variant:"outline",className:"text-xs",children:h},h))}),e.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:o.excerpt})]})})}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Is,{className:"h-8 w-8",children:[e.jsx(Ys,{src:o.authorAvatar}),e.jsx(Ls,{children:o.author.split(" ").map(h=>h[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:o.author}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),o.timeAgo]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(pl,{className:"h-4 w-4"}),o.likes]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(Ke,{className:"h-4 w-4"}),o.replies]}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(gl,{className:"h-4 w-4 mr-2"}),"Reply"]})]})]})})]},o.id))}),n.length===0&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No discussions found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or be the first to start a discussion in this category!"}),e.jsx(N,{children:"Start New Discussion"})]})})]})]})]})]})},rm=()=>{var f;const{user:s}=we(),{toast:t}=X(),[a,r]=l.useState({monthlyRevenue:0,totalArea:0,averageYield:0,activeAlerts:0}),[i,c]=l.useState([]),[n,o]=l.useState(null),[h,m]=l.useState(!0);l.useEffect(()=>{s&&p()},[s]);const p=async()=>{try{m(!0);const{data:g,error:v}=await F.from("farm_statistics").select("*").eq("user_id",s==null?void 0:s.id).single();v&&v.code!=="PGRST116"&&console.error("Error fetching farm stats:",v),g&&r({monthlyRevenue:g.monthly_revenue||0,totalArea:g.total_area||0,averageYield:g.average_yield||0,activeAlerts:g.active_alerts||0});const{data:j,error:y}=await F.from("farm_tasks").select("*").eq("user_id",s==null?void 0:s.id).order("created_at",{ascending:!1}).limit(5);y?console.error("Error fetching tasks:",y):c(j||[]);const{data:b,error:T}=await F.from("profiles").select("*").eq("id",s==null?void 0:s.id).single();T&&T.code!=="PGRST116"&&console.error("Error fetching profile:",T),b&&o(b)}catch(g){console.error("Error fetching dashboard data:",g),t({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{m(!1)}},d=async(g,v)=>{try{const{error:j}=await F.from("farm_tasks").update({status:v}).eq("id",g).eq("user_id",s==null?void 0:s.id);if(j)throw j;c(i.map(y=>y.id===g?{...y,status:v}:y)),t({title:"Success",description:"Task status updated successfully!"})}catch(j){console.error("Error updating task:",j),t({title:"Error",description:"Failed to update task",variant:"destructive"})}},u=g=>{switch(g){case"completed":return e.jsx(he,{className:"h-4 w-4 text-green-600"});case"in-progress":return e.jsx(Ze,{className:"h-4 w-4 text-yellow-600"});default:return e.jsx(fe,{className:"h-4 w-4 text-red-600"})}},x=g=>{switch(g){case"high":return"destructive";case"medium":return"secondary";default:return"outline"}};return h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((g,v)=>e.jsx(w,{className:"animate-pulse",children:e.jsxs(C,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})},v))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",(n==null?void 0:n.full_name)||((f=s==null?void 0:s.email)==null?void 0:f.split("@")[0])||"Farmer","!"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening on your farm today."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Monthly Revenue"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["KES ",a.monthlyRevenue.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx(ne,{className:"inline h-3 w-3 mr-1"}),"Track your earnings"]})]})]}),e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Total Farm Area"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.totalArea," acres"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your farmland"})]})]}),e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Average Yield"}),e.jsx(Ur,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.averageYield," kg/acre"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Production efficiency"})]})]}),e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Active Alerts"}),e.jsx(fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.activeAlerts}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Weather & market alerts"})]})]})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5"}),"Recent Farm Tasks"]})}),e.jsx(C,{children:i.length===0?e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(de,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No tasks found. Start by adding your first farm task!"})]}):e.jsx("div",{className:"space-y-4",children:i.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u(g.status),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:g.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.crop," • ",g.date]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:x(g.priority),children:g.priority}),g.status==="pending"&&e.jsx(N,{size:"sm",variant:"outline",onClick:()=>d(g.id,"completed"),children:"Mark Complete"})]})]},g.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Weather Forecast"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Check today's weather and upcoming conditions"}),e.jsx(N,{variant:"outline",size:"sm",className:"w-full",children:"View Weather"})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Market Prices"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Current commodity prices in your region"}),e.jsx(N,{variant:"outline",size:"sm",className:"w-full",children:"Check Prices"})]}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Add New Task"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Schedule upcoming farm activities"}),e.jsx(N,{size:"sm",className:"w-full",children:"Create Task"})]})]})]})},Zi=fl,Xi=vl,im=jl,en=l.forwardRef(({className:s,...t},a)=>e.jsx(ni,{className:z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));en.displayName=ni.displayName;const Fa=l.forwardRef(({className:s,...t},a)=>e.jsxs(im,{children:[e.jsx(en,{}),e.jsx(li,{ref:a,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Fa.displayName=li.displayName;const Ea=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col space-y-2 text-center sm:text-left",s),...t});Ea.displayName="AlertDialogHeader";const Ia=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Ia.displayName="AlertDialogFooter";const La=l.forwardRef(({className:s,...t},a)=>e.jsx(ci,{ref:a,className:z("text-lg font-semibold",s),...t}));La.displayName=ci.displayName;const qa=l.forwardRef(({className:s,...t},a)=>e.jsx(oi,{ref:a,className:z("text-sm text-muted-foreground",s),...t}));qa.displayName=oi.displayName;const Ra=l.forwardRef(({className:s,...t},a)=>e.jsx(di,{ref:a,className:z(ut(),s),...t}));Ra.displayName=di.displayName;const za=l.forwardRef(({className:s,...t},a)=>e.jsx(mi,{ref:a,className:z(ut({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));za.displayName=mi.displayName;const nm=({userProduce:s,onDeleteProduce:t,onEditProduce:a})=>{const{toast:r}=X(),i=n=>{t(n.id),r({title:"Produit supprimé",description:`${n.name} a été supprimé de vos annonces.`})},c=n=>{switch(n.toLowerCase()){case"a":return"bg-green-100 text-green-800 border-green-200";case"b":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"c":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),"Mes Produits en Vente"]})}),e.jsx(C,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucun produit en vente"}),e.jsx(N,{className:"mt-4",children:"Ajouter un produit"})]}):e.jsx("div",{className:"space-y-4",children:s.map(n=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[typeof n.image_url=="string"&&n.image_url&&e.jsx("img",{src:n.image_url,alt:n.name,className:"h-16 w-16 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:n.name}),e.jsx("p",{className:"text-muted-foreground",children:n.category})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{className:c(n.qualityGrade),children:["Grade ",n.qualityGrade]}),e.jsx(M,{variant:"outline",children:n.county})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantité"}),e.jsxs("p",{className:"font-medium",children:[n.quantity," ",n.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Disponible dès"}),e.jsx("p",{className:"font-medium",children:n.availableFrom})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Agriculteur"}),e.jsx("p",{className:"font-medium",children:n.farmer})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"ID Produit"}),e.jsxs("p",{className:"font-medium text-xs",children:[n.id.slice(0,8),"..."]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Voir"]}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>a(n),children:[e.jsx(Sa,{className:"h-4 w-4 mr-2"}),"Modifier"]}),e.jsxs(Zi,{children:[e.jsx(Xi,{asChild:!0,children:e.jsxs(N,{size:"sm",variant:"destructive",children:[e.jsx(yl,{className:"h-4 w-4 mr-2"}),"Supprimer"]})}),e.jsxs(Fa,{children:[e.jsxs(Ea,{children:[e.jsx(La,{children:"Confirmer la suppression"}),e.jsxs(qa,{children:['Êtes-vous sûr de vouloir supprimer "',n.name,'" de vos annonces ? Cette action est irréversible et supprimera définitivement votre produit de la marketplace.']})]}),e.jsxs(Ia,{children:[e.jsx(za,{children:"Annuler"}),e.jsx(Ra,{onClick:()=>i(n),className:"bg-red-600 hover:bg-red-700",children:"Supprimer définitivement"})]})]})]})]})]},n.id))})})]})},lm=({selectedParcel:s})=>{var h,m;const t=l.useRef(null),a=l.useRef(null),[r,i]=l.useState(""),[c,n]=l.useState(!1),o=async()=>{if(!(!t.current||!r))try{const p=await qt(()=>import("./vendor-SgBgPQKh.js").then(d=>d.m),__vite__mapDeps([0,1]));if(await qt(()=>import("./vendor-SgBgPQKh.js").then(d=>d.du),__vite__mapDeps([0,1])),p.default.accessToken=r,a.current=new p.default.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:(s==null?void 0:s.coordinates)||[36.8219,-1.2921],zoom:s?15:6}),a.current.addControl(new p.default.NavigationControl,"top-right"),a.current.addControl(new p.default.FullscreenControl,"top-right"),a.current.addControl(new p.default.ScaleControl({maxWidth:100,unit:"metric"})),s!=null&&s.coordinates){const d=document.createElement("div");d.className="custom-marker",d.style.backgroundImage="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTQiIGZpbGw9IiMyMmMzNWUiIHN0cm9rZT0iIzE2YTM0YSIgc3Ryb2tlLXdpZHRoPSI0Ii8+CjxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjYiIGZpbGw9IiNmZmZmZmYiLz4KPC9zdmc+)",d.style.width="32px",d.style.height="32px",d.style.backgroundSize="100%",new p.default.Marker(d).setLngLat(s.coordinates).setPopup(new p.default.Popup({offset:25}).setHTML(`<div class="p-2">
                <h3 class="font-bold text-sm">${s.name}</h3>
                <p class="text-xs text-gray-600">Size: ${s.size} acres</p>
                <p class="text-xs text-gray-600">Crop: ${s.crop}</p>
                <p class="text-xs text-green-600 mt-1">Coordinates: ${s.coordinates[1].toFixed(4)}, ${s.coordinates[0].toFixed(4)}</p>
              </div>`)).addTo(a.current),a.current.on("load",()=>{const u=Math.sqrt(s.size*4047)/2;a.current.addSource("farm-area",{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:s.coordinates}}}),a.current.addLayer({id:"farm-area-circle",type:"circle",source:"farm-area",paint:{"circle-radius":{base:1.75,stops:[[12,Math.max(5,u/100)],[22,Math.max(10,u/10)]]},"circle-color":"#22c55e","circle-opacity":.3,"circle-stroke-color":"#16a34a","circle-stroke-width":2,"circle-stroke-opacity":.8}})})}n(!0)}catch(p){console.error("Error loading Mapbox:",p)}};return l.useEffect(()=>(r&&o(),()=>{a.current&&a.current.remove()}),[r,s]),r?e.jsxs(w,{className:"h-full",children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Farm Map",s&&` - ${s.name}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"secondary",className:"text-xs",children:"Satellite View"}),s&&e.jsxs(M,{variant:"default",className:"text-xs",children:[s.size," acres"]})]})]}),e.jsxs(C,{className:"p-0 relative",children:[e.jsx("div",{ref:t,className:"h-[400px] w-full rounded-b-lg"}),!c&&r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 rounded-b-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading satellite imagery..."})]})}),c&&s&&e.jsx("div",{className:"absolute bottom-4 left-4 bg-white p-2 rounded shadow-lg",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-gray-600",children:["📍 ",(h=s.coordinates)==null?void 0:h[1].toFixed(4),", ",(m=s.coordinates)==null?void 0:m[0].toFixed(4)]}),e.jsxs("div",{className:"text-green-600",children:["🌾 ",s.crop]})]})})]})]}):e.jsxs(w,{className:"h-full",children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"Farm Map"]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(xt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Mapbox Integration"}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Mapbox provides free tier access with 50,000 map loads per month. Their technology is open-source and designed for agricultural applications."}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Free tier: 50,000 requests/month"}),e.jsx("li",{children:"• High-resolution satellite imagery"}),e.jsx("li",{children:"• Offline map capabilities"}),e.jsx("li",{children:"• Custom styling and agricultural overlays"})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Mapbox Public Token"}),e.jsx(D,{type:"password",placeholder:"pk.eyJ1IjoieW91ciUyMHVzZXJuYW1lIiwi...",value:r,onChange:p=>i(p.target.value)}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Get your free token from"," ",e.jsx("a",{href:"https://mapbox.com/",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600",children:"mapbox.com"})]}),e.jsx("p",{children:"• Create account → Account → Tokens → Create new token"}),e.jsx("p",{children:'• Ensure "Public" scopes are enabled for web use'})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",className:"text-xs",children:"Free Tier Available"}),e.jsx(M,{variant:"outline",className:"text-xs",children:"Open Source"}),e.jsx(M,{variant:"outline",className:"text-xs",children:"Agricultural Ready"})]})]})]})},cm=()=>{const[s]=l.useState([{id:"1",name:"Nakuru North",size:12.5,crop:"Maize",status:"active",lastHarvest:"8/15/2023",harvestIn:76,coordinates:[36.0667,-.3031]},{id:"2",name:"Kiambu South",size:8.3,crop:"Coffee",status:"active",lastHarvest:"6/10/2023",harvestIn:120,coordinates:[36.8356,-1.1743]},{id:"3",name:"Meru East",size:5.2,crop:"Beans",status:"active",lastHarvest:"9/20/2023",harvestIn:45,coordinates:[37.6573,.0472]}]),[t,a]=l.useState(""),[r,i]=l.useState(),c=s.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())||n.crop.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Land & Parcel Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor all your agricultural parcels across Kenya"})]}),e.jsxs(N,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add New Parcel"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(D,{placeholder:"Search parcels...",value:t,onChange:n=>a(n.target.value),className:"max-w-sm"}),e.jsxs("select",{className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{children:"All Status"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Inactive"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:c.map(n=>e.jsxs(w,{className:`border-l-4 border-l-green-500 cursor-pointer transition-all hover:shadow-md ${(r==null?void 0:r.id)===n.id?"ring-2 ring-primary":""}`,onClick:()=>i(n),children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:n.name}),e.jsx(M,{variant:n.status==="active"?"default":"secondary",className:"mt-1",children:n.status==="active"?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(Sa,{className:"h-4 w-4"})}),e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(N,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(gt,{className:"h-4 w-4"})})]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Size:"}),e.jsxs("span",{className:"font-medium",children:[n.size," acres"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last harvest:"}),e.jsx("span",{children:n.lastHarvest})]}),e.jsxs("div",{className:"mt-3 p-2 bg-green-50 rounded",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:n.crop}),e.jsxs("div",{className:"text-xs text-green-600",children:["Next harvest in: ",n.harvestIn," days"]})]})]})})]},n.id))}),e.jsx("div",{className:"space-y-4",children:e.jsx(lm,{selectedParcel:r})})]})]})},om=()=>{const[s]=l.useState([{id:"1",name:"Maize",currentYield:25,previousYield:20,unit:"bags/acre",quality:"Good",surface:12500},{id:"2",name:"Coffee",currentYield:15,previousYield:12,unit:"kg/tree",quality:"Excellent",surface:2300},{id:"3",name:"Beans",currentYield:8,previousYield:10,unit:"bags/acre",quality:"Good",surface:3500},{id:"4",name:"Potatoes",currentYield:180,previousYield:150,unit:"bags/acre",quality:"Average",surface:4200},{id:"5",name:"Tea",currentYield:2200,previousYield:2e3,unit:"kg/ha",quality:"Good",surface:1800}]),t=s.map(r=>({name:r.name,"Current Yield":r.currentYield,"Previous Yield":r.previousYield})),a=r=>{switch(r){case"Excellent":return"bg-green-100 text-green-800";case"Good":return"bg-blue-100 text-blue-800";case"Average":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Crop Management & Tracking"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your crop yields and quality for major Kenyan agricultural products"})]}),e.jsxs(N,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add New Crop"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ui,{className:"h-5 w-5 text-blue-500"}),"Yield Tracking for Kenyan Crops"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor yields and quality for major crops grown in Kenya"})]}),e.jsx(C,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(Ws,{data:t,children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"name",tick:{fontSize:12}}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Qe,{dataKey:"Current Yield",fill:"#22c55e"}),e.jsx(Qe,{dataKey:"Previous Yield",fill:"#7c2d12"})]})})})})]}),e.jsx("div",{className:"space-y-4",children:s.map(r=>e.jsx(w,{children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Area: ",r.surface," m²"]})]}),e.jsx(N,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(gt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Current yield"}),e.jsxs("span",{className:"font-medium",children:[r.currentYield," ",r.unit]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Previous yield"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.previousYield," ",r.unit]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Quality"}),e.jsx(M,{className:a(r.quality),children:r.quality})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4 text-green-500"}),e.jsxs("span",{className:"text-green-600",children:["+",((r.currentYield-r.previousYield)/r.previousYield*100).toFixed(1),"%"]})]})]})]})},r.id))})]})]})},dm=()=>{const[s]=l.useState([{id:"1",name:"Diesel Fuel",category:"Fuel",quantity:350,unit:"L",unitPrice:150,totalValue:52500,status:"normal",minimum:100},{id:"2",name:"NPK Fertilizer",category:"Fertilizers",quantity:800,unit:"kg",unitPrice:80,totalValue:64e3,status:"normal",minimum:200},{id:"3",name:"Maize Seeds",category:"Seeds",quantity:150,unit:"kg",unitPrice:300,totalValue:45e3,status:"normal",minimum:50},{id:"4",name:"Roundup Herbicide",category:"Pesticides",quantity:50,unit:"L",unitPrice:1200,totalValue:6e4,status:"normal",minimum:20},{id:"5",name:"Engine Oil",category:"Lubricants",quantity:25,unit:"L",unitPrice:800,totalValue:2e4,status:"normal",minimum:10},{id:"6",name:"Bean Seeds",category:"Seeds",quantity:80,unit:"kg",unitPrice:400,totalValue:32e3,status:"warning",minimum:100},{id:"7",name:"Coffee Seedlings",category:"Planting Material",quantity:500,unit:"pieces",unitPrice:25,totalValue:12500,status:"normal",minimum:200}]),[t,a]=l.useState(""),[r,i]=l.useState("All Categories"),c=["All Categories",...Array.from(new Set(s.map(m=>m.category)))],n=s.filter(m=>{const p=m.name.toLowerCase().includes(t.toLowerCase()),d=r==="All Categories"||m.category===r;return p&&d}),o=s.filter(m=>m.quantity<=m.minimum),h=m=>{switch(m){case"critical":return e.jsx(M,{variant:"destructive",children:"Critical"});case"warning":return e.jsx(M,{className:"bg-yellow-100 text-yellow-800",children:"Warning"});default:return e.jsx(M,{className:"bg-green-100 text-green-800",children:"Normal"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Inventory & Stock Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your farm inventory and track stock levels for Kenyan agricultural operations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(N,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Stock Item"]})]})]}),o.length>0&&e.jsxs(w,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(fe,{className:"h-5 w-5"}),"Low Stock Alerts"]})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-2",children:o.map(m=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"font-medium",children:m.name}),e.jsxs("div",{children:[e.jsxs("span",{children:["Current stock: ",m.quantity]}),e.jsxs("span",{className:"text-muted-foreground ml-2",children:["Minimum: ",m.minimum]})]})]},m.id))})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(D,{placeholder:"Search inventory...",value:t,onChange:m=>a(m.target.value),className:"max-w-sm"}),e.jsx("select",{value:r,onChange:m=>i(m.target.value),className:"px-3 py-2 border rounded-md",children:c.map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsxs(N,{variant:"outline",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Filter by date"]})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(S,{children:"Stock Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",children:"List"}),e.jsx(N,{size:"sm",variant:"outline",children:"Statistics"}),e.jsx(N,{size:"sm",variant:"outline",children:"Export"}),e.jsx(N,{size:"sm",variant:"outline",children:"Import"}),e.jsxs(N,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your inventory and track stock levels"})]}),e.jsx(C,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsxs(ms,{children:[e.jsx(pe,{children:"Item"}),e.jsx(pe,{children:"Category"}),e.jsx(pe,{children:"Quantity"}),e.jsx(pe,{children:"Unit Price"}),e.jsx(pe,{children:"Total Value"}),e.jsx(pe,{children:"Status"}),e.jsx(pe,{children:"Actions"})]})}),e.jsx(Nt,{children:n.map(m=>e.jsxs(ms,{children:[e.jsx(ge,{className:"font-medium",children:m.name}),e.jsx(ge,{children:m.category}),e.jsxs(ge,{children:[m.quantity," ",m.unit]}),e.jsxs(ge,{children:["KES ",m.unitPrice.toFixed(2)]}),e.jsxs(ge,{children:["KES ",m.totalValue.toFixed(2)]}),e.jsx(ge,{children:h(m.status)}),e.jsx(ge,{children:e.jsx(N,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(gt,{className:"h-4 w-4"})})})]},m.id))})]})})})]})]})},mm=()=>{const[s,t]=l.useState(""),[a,r]=l.useState(""),[i,c]=l.useState(!1),{toast:n}=X(),o=async()=>{if(!s||!a){n({title:"Missing Information",description:"Please select both report type and period",variant:"destructive"});return}c(!0),setTimeout(()=>{const h={reportType:s,period:a,generatedAt:new Date().toISOString(),data:{totalRevenue:8900,totalExpenses:4720,netProfit:4180,activeParcels:3,totalArea:26,averageYield:2.3}},m=`Report Type,${s}
Period,${a}
Generated At,${new Date().toLocaleString()}

Financial Summary
Total Revenue,KES ${h.data.totalRevenue.toLocaleString()}
Total Expenses,KES ${h.data.totalExpenses.toLocaleString()}
Net Profit,KES ${h.data.netProfit.toLocaleString()}

Farm Summary
Active Parcels,${h.data.activeParcels}
Total Area,${h.data.totalArea} acres
Average Yield,${h.data.averageYield} t/ha`,p=new Blob([m],{type:"text/csv"}),d=window.URL.createObjectURL(p),u=document.createElement("a");u.href=d,u.download=`farm-report-${s}-${a}-${new Date().getTime()}.csv`,u.click(),window.URL.revokeObjectURL(d),c(!1),n({title:"Report Generated",description:"Your farm report has been downloaded successfully"})},2e3)};return e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-5 w-5"}),"Generate Reports"]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Report Type"}),e.jsxs(Q,{value:s,onValueChange:t,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select report type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"financial",children:"Financial Report"}),e.jsx(_,{value:"production",children:"Production Report"}),e.jsx(_,{value:"inventory",children:"Inventory Report"}),e.jsx(_,{value:"comprehensive",children:"Comprehensive Report"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Period"}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select period"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"current-month",children:"Current Month"}),e.jsx(_,{value:"last-month",children:"Last Month"}),e.jsx(_,{value:"quarter",children:"This Quarter"}),e.jsx(_,{value:"year",children:"This Year"}),e.jsx(_,{value:"custom",children:"Custom Range"})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(N,{onClick:o,disabled:i||!s||!a,className:"flex-1",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):e.jsx(Nl,{className:"h-4 w-4 mr-2"}),i?"Generating...":"Generate Report"]})})]})]})},um=()=>{var H;const{user:s}=we(),[t,a]=l.useState(null),[r,i]=l.useState([]),[c,n]=l.useState([]),[o,h]=l.useState([]),[m,p]=l.useState({year:new Date().getFullYear(),category:"",subcategory:"",planned_amount:"",actual_amount:"",notes:""}),[d,u]=l.useState(!1),[x,f]=l.useState(!0),[g,v]=l.useState(null),[j,y]=l.useState(null),[b,T]=l.useState(null);l.useEffect(()=>{if(!s)return;f(!0),(async()=>{const{data:le}=await F.from("farm_statistics").select("*").eq("user_id",s.id).single();a(le);const{data:xe}=await F.from("market_forecasts").select("*").order("created_at",{ascending:!1}).limit(10);i(xe||[]);const{data:xs}=await F.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(xs||[]);const{data:Zt}=await F.from("payment_transactions").select("*").eq("user_id",s.id).order("created_at",{ascending:!1}).limit(10);h(Zt||[]),f(!1)})()},[s]);const E=K=>{const{name:le,value:xe}=K.target;p(xs=>({...xs,[le]:xe}))},P=async K=>{K.preventDefault(),u(!0),await F.from("farm_budgets").insert({user_id:s.id,year:Number(m.year),category:m.category,subcategory:m.subcategory,planned_amount:Number(m.planned_amount),actual_amount:m.actual_amount?Number(m.actual_amount):null,notes:m.notes}),p({year:new Date().getFullYear(),category:"",subcategory:"",planned_amount:"",actual_amount:"",notes:""}),u(!1);const{data:le}=await F.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(le||[])},L=K=>{v(K),y({...K})},G=K=>{const{name:le,value:xe}=K.target;y(xs=>({...xs,[le]:xe}))},I=async K=>{K.preventDefault(),await F.from("farm_budgets").update({year:Number(j.year),category:j.category,subcategory:j.subcategory,planned_amount:Number(j.planned_amount),actual_amount:j.actual_amount?Number(j.actual_amount):null,notes:j.notes,updated_at:new Date().toISOString()}).eq("id",g.id),v(null),y(null);const{data:le}=await F.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(le||[])},U=async K=>{T(K),await F.from("farm_budgets").delete().eq("id",K),T(null);const{data:le}=await F.from("farm_budgets").select("*").eq("user_id",s.id).order("year",{ascending:!1});n(le||[])},q=(t==null?void 0:t.monthly_revenue)||0,te=c.reduce((K,le)=>K+(le.actual_amount<0?Math.abs(le.actual_amount):0),0),Te=q-te;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Financial Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your farm revenue, expenses, and profitability"})]}),e.jsx(mm,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(w,{children:e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Income"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",q.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"+6.5%"]})]})})})}),e.jsx(w,{children:e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Expenses"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Outgoing"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["KES ",te.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-red-600 flex items-center",children:[e.jsx(Es,{className:"h-3 w-3 mr-1"}),"+2.1%"]})]})})})}),e.jsx(w,{children:e.jsx(C,{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue - Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",Te.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"+8.3%"]})]})})})})]}),e.jsxs(ue,{defaultValue:"overview",className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-5",children:[e.jsx(R,{value:"overview",children:"Overview"}),e.jsx(R,{value:"revenue",children:"Revenue"}),e.jsx(R,{value:"expenses",children:"Expenses"}),e.jsx(R,{value:"forecasts",children:"Forecasts"}),e.jsx(R,{value:"budget",children:"Budget"})]}),e.jsx(B,{value:"overview",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Monthly Overview"})}),e.jsx(C,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:t?e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsxs("div",{children:["Monthly Revenue: ",e.jsxs("b",{children:["KES ",((H=t.monthly_revenue)==null?void 0:H.toLocaleString())||0]})]}),e.jsxs("div",{children:["Average Yield: ",e.jsxs("b",{children:[t.average_yield||0," tons"]})]}),e.jsxs("div",{children:["Total Area: ",e.jsxs("b",{children:[t.total_area||0," acres"]})]}),e.jsxs("div",{children:["Active Alerts: ",e.jsx("b",{children:t.active_alerts||0})]})]})}):"Loading..."})})]}),e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between",children:[e.jsx(S,{children:"Recent Transactions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(Or,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(bl,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(N,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add"]})]})]}),e.jsx(C,{children:e.jsx("div",{className:"space-y-3",children:o.length>0?o.slice(0,5).map(K=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:K.payment_provider||K.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(K.created_at).toLocaleDateString()})]}),e.jsxs("span",{className:`font-bold ${K.amount>0?"text-green-600":"text-red-600"}`,children:[K.amount>0?"+":"","KES ",Math.abs(K.amount).toLocaleString()]})]},K.id)):e.jsx("div",{className:"text-muted-foreground",children:"No transactions found."})})})]})]})}),e.jsx(B,{value:"revenue",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Revenue Analysis"})}),e.jsx(C,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:o.length>0?e.jsx("ul",{className:"w-full",children:o.filter(K=>K.amount>0).map(K=>e.jsxs("li",{className:"flex justify-between border-b py-2",children:[e.jsx("span",{children:K.payment_provider||K.description}),e.jsxs("span",{className:"text-green-600 font-bold",children:["+KES ",K.amount.toLocaleString()]})]},K.id))}):"No revenue transactions."})})]})}),e.jsx(B,{value:"expenses",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Expense Analysis"})}),e.jsx(C,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:o.length>0?e.jsx("ul",{className:"w-full",children:o.filter(K=>K.amount<0).map(K=>e.jsxs("li",{className:"flex justify-between border-b py-2",children:[e.jsx("span",{children:K.payment_provider||K.description}),e.jsxs("span",{className:"text-red-600 font-bold",children:["-KES ",Math.abs(K.amount).toLocaleString()]})]},K.id))}):"No expense transactions."})})]})}),e.jsx(B,{value:"forecasts",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Financial Forecasts"})}),e.jsx(C,{children:e.jsx("div",{className:"h-64 overflow-y-auto",children:r.length>0?e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left",children:"Commodity"}),e.jsx("th",{className:"text-left",children:"County"}),e.jsx("th",{className:"text-left",children:"Forecast Price"}),e.jsx("th",{className:"text-left",children:"Confidence"}),e.jsx("th",{className:"text-left",children:"Period"})]})}),e.jsx("tbody",{children:r.map(K=>{var le;return e.jsxs("tr",{children:[e.jsx("td",{children:K.commodity_name}),e.jsx("td",{children:K.county}),e.jsxs("td",{children:["KES ",(le=K.forecast_price)==null?void 0:le.toLocaleString()]}),e.jsx("td",{children:K.confidence_level}),e.jsx("td",{children:K.period})]},K.id)})})]}):e.jsx("div",{className:"text-muted-foreground",children:"No forecasts found."})})})]})}),e.jsx(B,{value:"budget",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Budget Planning"})}),e.jsxs(C,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("form",{onSubmit:P,className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[e.jsx("div",{children:e.jsx(D,{name:"year",type:"number",min:"2020",max:"2100",value:m.year,onChange:E,placeholder:"Year",required:!0})}),e.jsx("div",{children:e.jsx(D,{name:"category",value:m.category,onChange:E,placeholder:"Category (e.g. Seeds)",required:!0})}),e.jsx("div",{children:e.jsx(D,{name:"subcategory",value:m.subcategory,onChange:E,placeholder:"Subcategory (e.g. Maize seed)"})}),e.jsx("div",{children:e.jsx(D,{name:"planned_amount",type:"number",value:m.planned_amount,onChange:E,placeholder:"Planned Amount",required:!0})}),e.jsx("div",{children:e.jsx(D,{name:"actual_amount",type:"number",value:m.actual_amount,onChange:E,placeholder:"Actual Amount"})}),e.jsx("div",{children:e.jsx(N,{type:"submit",disabled:d,children:d?"Adding...":"Add Budget Item"})}),e.jsx("div",{className:"md:col-span-6",children:e.jsx(ie,{name:"notes",value:m.notes,onChange:E,placeholder:"Notes"})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Year"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Subcategory"}),e.jsx("th",{children:"Planned"}),e.jsx("th",{children:"Actual"}),e.jsx("th",{children:"Notes"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length>0?c.map(K=>{var le;return e.jsxs("tr",{children:[e.jsx("td",{children:K.year}),e.jsx("td",{children:K.category}),e.jsx("td",{children:K.subcategory}),e.jsxs("td",{children:["KES ",(le=K.planned_amount)==null?void 0:le.toLocaleString()]}),e.jsx("td",{children:K.actual_amount!==null?`KES ${K.actual_amount.toLocaleString()}`:"-"}),e.jsx("td",{children:K.notes}),e.jsxs("td",{children:[e.jsx(N,{size:"sm",variant:"outline",onClick:()=>L(K),className:"mr-2",children:"Edit"}),e.jsx(N,{size:"sm",variant:"destructive",onClick:()=>U(K.id),disabled:b===K.id,children:"Delete"})]})]},K.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted-foreground",children:"No budget items found."})})})]})})]})]})})]}),g&&e.jsx(_e,{open:!!g,onOpenChange:()=>v(null),children:e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Edit Budget Item"})}),e.jsxs("form",{onSubmit:I,className:"space-y-2",children:[e.jsx(D,{name:"year",type:"number",min:"2020",max:"2100",value:j.year,onChange:G,required:!0}),e.jsx(D,{name:"category",value:j.category,onChange:G,required:!0}),e.jsx(D,{name:"subcategory",value:j.subcategory,onChange:G}),e.jsx(D,{name:"planned_amount",type:"number",value:j.planned_amount,onChange:G,required:!0}),e.jsx(D,{name:"actual_amount",type:"number",value:j.actual_amount||"",onChange:G}),e.jsx(ie,{name:"notes",value:j.notes,onChange:G}),e.jsxs(Cs,{children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>v(null),children:"Cancel"}),e.jsx(N,{type:"submit",children:"Update"})]})]})]})})]})},xm=()=>{const[s]=l.useState([{id:"1",name:"Maize Yield",value:85,target:90,unit:"bags/acre",trend:"up",category:"production"},{id:"2",name:"Bean Yield",value:12,target:15,unit:"bags/acre",trend:"down",category:"production"},{id:"3",name:"Profit per Hectare",value:45e3,target:5e4,unit:"KES",trend:"up",category:"financial"},{id:"4",name:"Cost Efficiency",value:78,target:85,unit:"%",trend:"stable",category:"efficiency"},{id:"5",name:"Market Price Advantage",value:12,target:10,unit:"%",trend:"up",category:"financial"},{id:"6",name:"Resource Utilization",value:88,target:90,unit:"%",trend:"up",category:"efficiency"}]),t=[{crop:"Maize",currentYield:85,previousYield:75,efficiency:88},{crop:"Beans",currentYield:12,previousYield:15,efficiency:75},{crop:"Potatoes",currentYield:45,previousYield:40,efficiency:92},{crop:"Tomatoes",currentYield:32,previousYield:28,efficiency:85},{crop:"Onions",currentYield:25,previousYield:22,efficiency:80}],a=[{size:2.5,profit:65e3,efficiency:88},{size:1.8,profit:45e3,efficiency:85},{size:3.2,profit:95e3,efficiency:92},{size:1.2,profit:32e3,efficiency:78},{size:4.1,profit:125e3,efficiency:95}],r=c=>{switch(c){case"up":return e.jsx(ne,{className:"h-4 w-4 text-green-500"});case"down":return e.jsx(Es,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Ye,{className:"h-4 w-4 text-blue-500"})}},i=c=>{switch(c){case"production":return"bg-green-100 text-green-800";case"financial":return"bg-blue-100 text-blue-800";case"efficiency":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Performance Analytics & KPIs"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your farm's key performance indicators and analytics for Kenyan agriculture"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(c=>e.jsx(w,{children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:c.name}),e.jsxs("p",{className:"text-2xl font-bold",children:[c.value.toLocaleString()," ",c.unit]})]}),r(c.trend)]}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsx(M,{className:i(c.category),children:c.category}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Target: ",c.target," ",c.unit]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${c.value>=c.target?"bg-green-500":"bg-yellow-500"}`,style:{width:`${Math.min(c.value/c.target*100,100)}%`}})})})]})},c.id))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-5 w-5 text-green-500"}),"Crop Performance Analysis"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare current vs previous season yields for major Kenyan crops"})]}),e.jsx(C,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(Ws,{data:t,children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"crop",tick:{fontSize:12}}),e.jsx(is,{}),e.jsx(ze,{}),e.jsx(Qe,{dataKey:"currentYield",fill:"#22c55e",name:"Current Season"}),e.jsx(Qe,{dataKey:"previousYield",fill:"#7c2d12",name:"Previous Season"})]})})})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(wa,{className:"h-5 w-5 text-blue-500"}),"Land Efficiency vs Profitability"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyze the relationship between farm size, efficiency, and profit per hectare"})]}),e.jsx(C,{children:e.jsx("div",{className:"h-64 w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(wl,{data:a,children:[e.jsx(as,{strokeDasharray:"3 3"}),e.jsx(rs,{dataKey:"size",name:"Farm Size (Ha)"}),e.jsx(is,{dataKey:"profit",name:"Profit (KES)"}),e.jsx(ze,{formatter:(c,n)=>[n==="profit"?`KES ${c.toLocaleString()}`:`${c}%`,n==="profit"?"Annual Profit":"Efficiency"],labelFormatter:c=>`Farm Size: ${c} Ha`}),e.jsx(Cl,{dataKey:"profit",fill:"#3b82f6",children:a.map((c,n)=>e.jsx(ht,{fill:c.efficiency>85?"#22c55e":"#f59e0b"},`cell-${n}`))})]})})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(w,{children:e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(De,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold",children:"KES 2.4M"}),e.jsx("p",{className:"text-sm text-green-600",children:"+15.3% from last season"})]})]})})}),e.jsx(w,{children:e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(Ye,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"EBITDA Margin"}),e.jsx("p",{className:"text-2xl font-bold",children:"32.5%"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Industry avg: 28%"})]})]})})}),e.jsx(w,{children:e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(ee,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Market Reach"}),e.jsx("p",{className:"text-2xl font-bold",children:"8 Counties"}),e.jsx("p",{className:"text-sm text-purple-600",children:"Expanding to 12"})]})]})})})]})]})},hm=({onSubmit:s})=>{const{toast:t}=X(),[a,r]=l.useState({name:"",category:"",quantity:"",unit:"kg",quality:"Grade A",isOrganic:!1,certifications:[],harvestDate:"",description:"",handlingPractices:"",storageConditions:"",images:[],price:"",location:"",availableFrom:"",availableTo:""}),[i,c]=l.useState({sizeUniformity:"",colorUniformity:"",defects:"",cleanlinessLevel:"",packagingType:""}),[n,o]=l.useState(null),[h,m]=l.useState(""),p=["Cereals","Legumes","Cash Crops","Fruits","Vegetables","Dairy","Meat"],d=["Grade A (Premium)","Grade B (Standard)","Grade C (Economy)"],u=[{id:"organic",label:"Organic Certified"},{id:"kebs",label:"KEBS Certified"},{id:"export",label:"Export Quality"},{id:"gmp",label:"Good Manufacturing Practices"}],x=y=>{const{name:b,value:T}=y.target;r(E=>({...E,[b]:T}))},f=(y,b)=>{r(T=>({...T,[y]:b}))},g=y=>{r(b=>{const T=b.certifications;return T.includes(y)?{...b,certifications:T.filter(E=>E!==y)}:{...b,certifications:[...T,y]}})},v=async y=>{var G;const b=(G=y.target.files)==null?void 0:G[0];if(!b)return;if(!["image/jpeg","image/png","image/webp"].includes(b.type)){t({title:"Invalid file type",description:"Only JPEG, PNG, or WebP images are allowed."});return}if(b.size>1024*1024){t({title:"File too large",description:"Image must be less than 1MB."});return}o(b);const{supabase:E}=await qt(async()=>{const{supabase:I}=await Promise.resolve().then(()=>bc);return{supabase:I}},void 0),{data:P,error:L}=await E.storage.from("product-images").upload(`products/${Date.now()}_${b.name}`,b);if(P!=null&&P.path){const{data:I}=E.storage.from("product-images").getPublicUrl(P.path);I!=null&&I.publicUrl&&m(I.publicUrl)}},j=y=>{y.preventDefault();const b={...a,qualityDetails:i,imageUrl:h,submittedAt:new Date};s&&s(b),t({title:"Product Added Successfully",description:"Your product has been added to the marketplace."}),r({name:"",category:"",quantity:"",unit:"kg",quality:"Grade A",isOrganic:!1,certifications:[],harvestDate:"",description:"",handlingPractices:"",storageConditions:"",images:[],price:"",location:"",availableFrom:"",availableTo:""}),c({sizeUniformity:"",colorUniformity:"",defects:"",cleanlinessLevel:"",packagingType:""}),o(null),m("")};return e.jsxs(w,{className:"w-full max-w-3xl mx-auto",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Add Your Agricultural Product"}),e.jsx(O,{children:"Provide detailed information about your product to help buyers assess its quality"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"name",children:"Product Name"}),e.jsx(D,{id:"name",name:"name",value:a.name,onChange:x,placeholder:"e.g., Fresh Tomatoes",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"category",children:"Category"}),e.jsxs(Q,{value:a.category,onValueChange:y=>f("category",y),children:[e.jsx(W,{id:"category",children:e.jsx(J,{placeholder:"Select category"})}),e.jsx(Y,{children:p.map(y=>e.jsx(_,{value:y,children:y},y))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"quantity",children:"Quantity"}),e.jsx(D,{id:"quantity",name:"quantity",type:"number",value:a.quantity,onChange:x,placeholder:"Amount",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"unit",children:"Unit"}),e.jsxs(Q,{value:a.unit,onValueChange:y=>f("unit",y),children:[e.jsx(W,{id:"unit",children:e.jsx(J,{placeholder:"Select unit"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"kg",children:"Kilograms (kg)"}),e.jsx(_,{value:"tonnes",children:"Tonnes"}),e.jsx(_,{value:"boxes",children:"Boxes"}),e.jsx(_,{value:"crates",children:"Crates"}),e.jsx(_,{value:"bags",children:"Bags"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"price",children:"Price (KES per unit)"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"product-image",className:"block text-sm font-medium text-gray-700",children:"Product Image (max 1MB, JPEG/PNG/WebP)"}),e.jsx("input",{type:"file",id:"product-image",accept:"image/jpeg,image/png,image/webp",onChange:v}),h&&e.jsx("img",{src:h,alt:"Product",className:"mt-2 h-24 rounded"})]}),e.jsx(D,{id:"price",name:"price",type:"number",value:a.price,onChange:x,placeholder:"e.g., 150",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"harvestDate",children:"Harvest Date"}),e.jsx(D,{id:"harvestDate",name:"harvestDate",type:"date",value:a.harvestDate,onChange:x,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"location",children:"Location"}),e.jsx(D,{id:"location",name:"location",value:a.location,onChange:x,placeholder:"e.g., Nakuru County",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"description",children:"Product Description"}),e.jsx(ie,{id:"description",name:"description",value:a.description,onChange:x,placeholder:"Describe your product in detail",rows:3,required:!0})]})]}),e.jsx(be,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Quality Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"quality",children:"Quality Grade"}),e.jsxs(Q,{value:a.quality,onValueChange:y=>f("quality",y),children:[e.jsx(W,{id:"quality",children:e.jsx(J,{placeholder:"Select quality grade"})}),e.jsx(Y,{children:d.map(y=>e.jsx(_,{value:y,children:y},y))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"sizeUniformity",children:"Size Uniformity"}),e.jsxs(Q,{value:i.sizeUniformity,onValueChange:y=>c(b=>({...b,sizeUniformity:y})),children:[e.jsx(W,{id:"sizeUniformity",children:e.jsx(J,{placeholder:"Select uniformity"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"very-uniform",children:"Very Uniform"}),e.jsx(_,{value:"mostly-uniform",children:"Mostly Uniform"}),e.jsx(_,{value:"somewhat-varied",children:"Somewhat Varied"}),e.jsx(_,{value:"mixed-sizes",children:"Mixed Sizes"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"defects",children:"Defects"}),e.jsxs(Q,{value:i.defects,onValueChange:y=>c(b=>({...b,defects:y})),children:[e.jsx(W,{id:"defects",children:e.jsx(J,{placeholder:"Select defect level"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"none",children:"None to Very Few"}),e.jsx(_,{value:"minor",children:"Minor Defects"}),e.jsx(_,{value:"moderate",children:"Moderate Defects"}),e.jsx(_,{value:"significant",children:"Significant Defects"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{children:"Certifications & Standards"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:u.map(y=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:y.id,checked:a.certifications.includes(y.id),onCheckedChange:()=>g(y.id)}),e.jsx(A,{htmlFor:y.id,className:"font-normal",children:y.label})]},y.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"handlingPractices",children:"Post-Harvest Handling Practices"}),e.jsx(ie,{id:"handlingPractices",name:"handlingPractices",value:a.handlingPractices,onChange:x,placeholder:"Describe how the produce was handled after harvesting",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"storageConditions",children:"Storage Conditions"}),e.jsx(ie,{id:"storageConditions",name:"storageConditions",value:a.storageConditions,onChange:x,placeholder:"Describe current storage conditions",rows:2})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(N,{type:"submit",className:"w-full",children:"Submit Product"})})]})})]})},pm=({userId:s})=>{const[t,a]=l.useState([]),[r,i]=l.useState(!1),[c,n]=l.useState({}),[o,h]=l.useState(null),[m,p]=l.useState(""),[d,u]=l.useState(null);l.useEffect(()=>{x()},[s]);async function x(){i(!0);const{data:j,error:y}=await F.from("animals").select("*").eq("user_id",s);y||a(j||[]),i(!1)}async function f(){i(!0);let j=m;if(o){if(!["image/jpeg","image/png","image/webp"].includes(o.type)){alert("Only JPEG, PNG, or WebP images are allowed."),i(!1);return}if(o.size>1024*1024){alert("Image must be less than 1MB."),i(!1);return}const{data:b}=await F.storage.from("animal-images").upload(`animals/${Date.now()}_${o.name}`,o);if(b!=null&&b.path){const{data:T}=F.storage.from("animal-images").getPublicUrl(b.path);j=T.publicUrl}}d?await F.from("animals").update({...c,image_url:j}).eq("id",d):await F.from("animals").insert({...c,user_id:s,image_url:j}),n({}),h(null),p(""),u(null),x()}async function g(j){i(!0),await F.from("animals").delete().eq("id",j),x()}function v(j){n(j),p(j.image_url||""),u(j.id)}return e.jsxs("div",{className:"max-w-2xl mx-auto p-4 bg-white rounded shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Animal Management"}),e.jsxs("form",{className:"mb-4 grid grid-cols-2 gap-2",onSubmit:j=>{j.preventDefault(),f()},children:[e.jsx("input",{className:"border p-2 rounded",placeholder:"Name",value:c.name||"",onChange:j=>n(y=>({...y,name:j.target.value})),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Species",value:c.species||"",onChange:j=>n(y=>({...y,species:j.target.value})),required:!0}),e.jsx("input",{className:"border p-2 rounded",placeholder:"Breed",value:c.breed||"",onChange:j=>n(y=>({...y,breed:j.target.value}))}),e.jsx("input",{className:"border p-2 rounded",type:"date",placeholder:"Birth Date",value:c.birth_date||"",onChange:j=>n(y=>({...y,birth_date:j.target.value}))}),e.jsx("input",{className:"border p-2 rounded",type:"date",placeholder:"Acquisition Date",value:c.acquisition_date||"",onChange:j=>n(y=>({...y,acquisition_date:j.target.value}))}),e.jsxs("select",{className:"border p-2 rounded",value:c.status||"active",onChange:j=>n(y=>({...y,status:j.target.value})),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"sold",children:"Sold"}),e.jsx("option",{value:"deceased",children:"Deceased"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"animal-image",className:"block text-sm font-medium text-gray-700",children:"Animal Image (max 1MB, JPEG/PNG/WebP)"}),e.jsx("input",{type:"file",id:"animal-image",accept:"image/jpeg,image/png,image/webp",onChange:j=>{var b;const y=(b=j.target.files)==null?void 0:b[0];y&&(h(y),p(""))}}),m&&e.jsx("img",{src:m,alt:"Animal",className:"mt-2 h-24 rounded"})]}),e.jsxs(N,{type:"submit",className:"col-span-2",children:[d?"Update":"Add"," Animal"]})]}),r&&e.jsx("div",{children:"Loading..."}),e.jsxs("div",{className:"space-y-2",children:[t.map(j=>e.jsxs(w,{className:"p-2 flex justify-between items-center",children:[e.jsxs(C,{children:[e.jsxs("div",{className:"font-bold flex items-center gap-2",children:[j.image_url&&e.jsx("img",{src:j.image_url,alt:"Animal",className:"h-10 w-10 rounded-full object-cover"}),j.name," (",j.species,")"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Breed: ",j.breed||"N/A"," | Status: ",j.status]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Birth: ",j.birth_date||"N/A"," | Acquired: ",j.acquisition_date||"N/A"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",onClick:()=>v(j),children:"Edit"}),e.jsx(N,{size:"sm",variant:"destructive",onClick:()=>g(j.id),children:"Delete"})]})]},j.id)),t.length===0&&!r&&e.jsx("div",{className:"text-gray-500",children:"No animals found."})]})]})},sn=({userId:s,onSubmitted:t})=>{const[a,r]=l.useState({product:"",quantity:"",unit:"kg",description:"",imageFile:null,imageUrl:""}),[i,c]=l.useState(!1),n=m=>{const{name:p,value:d}=m.target;r(u=>({...u,[p]:d}))},o=async m=>{var x;const p=(x=m.target.files)==null?void 0:x[0];if(!p)return;if(!["image/jpeg","image/png","image/webp"].includes(p.type)){alert("Only JPEG, PNG, or WebP images are allowed.");return}if(p.size>1024*1024){alert("Image must be less than 1MB.");return}r(f=>({...f,imageFile:p}));const{data:u}=await F.storage.from("buy-request-images").upload(`buy-requests/${Date.now()}_${p.name}`,p);if(u!=null&&u.path){const{data:f}=F.storage.from("buy-request-images").getPublicUrl(u.path);r(g=>({...g,imageUrl:f.publicUrl}))}},h=async m=>{m.preventDefault(),c(!0),await F.from("buy_requests").insert({user_id:s,product:a.product,quantity:a.quantity,unit:a.unit,description:a.description,image_url:a.imageUrl}),c(!1),r({product:"",quantity:"",unit:"kg",description:"",imageFile:null,imageUrl:""}),t&&t()};return e.jsxs(w,{className:"max-w-xl mx-auto my-4",children:[e.jsx(k,{children:e.jsx(S,{children:"Post a Buy Request"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx("input",{className:"border p-2 rounded w-full",name:"product",placeholder:"Product",value:a.product,onChange:n,required:!0}),e.jsx("input",{className:"border p-2 rounded w-full",name:"quantity",placeholder:"Quantity",value:a.quantity,onChange:n,required:!0}),e.jsxs("select",{className:"border p-2 rounded w-full",name:"unit",value:a.unit,onChange:m=>r(p=>({...p,unit:m.target.value})),children:[e.jsx("option",{value:"kg",children:"Kilograms (kg)"}),e.jsx("option",{value:"tonnes",children:"Tonnes"}),e.jsx("option",{value:"bags",children:"Bags"})]}),e.jsx("textarea",{className:"border p-2 rounded w-full",name:"description",placeholder:"Describe your request",value:a.description,onChange:n,required:!0}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"buy-request-image",className:"block text-sm font-medium text-gray-700",children:"Image (max 1MB, JPEG/PNG/WebP)"}),e.jsx("input",{type:"file",id:"buy-request-image",accept:"image/jpeg,image/png,image/webp",onChange:o}),a.imageUrl&&e.jsx("img",{src:a.imageUrl,alt:"Request",className:"mt-2 h-24 rounded"})]}),e.jsx(N,{type:"submit",disabled:i,children:i?"Posting...":"Post Buy Request"})]})})]})},gm=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!1);l.useEffect(()=>{i()},[]);async function i(){r(!0);const{data:c,error:n}=await F.from("buy_requests").select("*").order("created_at",{ascending:!1});n||t(c||[]),r(!1)}return e.jsxs(w,{className:"max-w-2xl mx-auto my-4",children:[e.jsx(k,{children:e.jsx(S,{children:"Buy Requests"})}),e.jsxs(C,{children:[a&&e.jsx("div",{children:"Loading..."}),s.length===0&&!a&&e.jsx("div",{className:"text-gray-500",children:"No buy requests found."}),e.jsx("div",{className:"space-y-4",children:s.map(c=>e.jsxs("div",{className:"p-4 border rounded flex items-center gap-4",children:[c.image_url&&e.jsx("img",{src:c.image_url,alt:"Request",className:"h-16 w-16 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold",children:[c.product," (",c.quantity," ",c.unit,")"]}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:c.description}),e.jsx(N,{size:"sm",variant:"secondary",onClick:()=>window.open(`mailto:${c.user_id}`),children:"Contact Buyer"})]})]},c.id))})]})]})},jm=()=>{const s=ve(),{user:t}=we(),[a,r]=l.useState([{id:"1",name:"Maize",category:"Grains",county:"Nakuru",quantity:500,unit:"kg",qualityGrade:"A",availableFrom:"2023-10-15",farmer:"John Kariuki",farmerId:"farmer-1"},{id:"2",name:"Tomatoes",category:"Vegetables",county:"Kiambu",quantity:200,unit:"kg",qualityGrade:"B",availableFrom:"2023-10-20",farmer:"John Kariuki",farmerId:"farmer-1"}]),i=n=>{r(o=>o.filter(h=>h.id!==n))},c=n=>{console.log("Editing produce:",n)};return Ms.useEffect(()=>{t||s("/auth")},[t,s]),t?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Farmer Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your farm operations, crops, and animals"})]}),e.jsxs(ue,{defaultValue:"dashboard",className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:e.jsxs(me,{className:"flex w-max min-w-full space-x-2 px-1",children:[e.jsx(R,{value:"dashboard",children:"Dashboard"}),e.jsx(R,{value:"parcels",children:"Land Parcels"}),e.jsx(R,{value:"crops",children:"Crops"}),e.jsx(R,{value:"animals",children:"Animals"}),e.jsx(R,{value:"inventory",children:"Inventory"}),e.jsx(R,{value:"finances",children:"Finances"}),e.jsx(R,{value:"analytics",children:"Analytics"}),e.jsx(R,{value:"products",children:"My Products"}),e.jsx(R,{value:"buy-requests",children:"Buy Requests"}),e.jsx(R,{value:"add-buy-request",children:"Post Buy Request"}),e.jsx(R,{value:"add-product",children:"Add Product"})]})}),e.jsx(B,{value:"dashboard",children:e.jsx(rm,{})}),e.jsx(B,{value:"parcels",children:e.jsx(cm,{})}),e.jsx(B,{value:"crops",children:e.jsx(om,{})}),e.jsx(B,{value:"animals",children:e.jsx(pm,{userId:t==null?void 0:t.id})}),e.jsx(B,{value:"inventory",children:e.jsx(dm,{})}),e.jsx(B,{value:"finances",children:e.jsx(um,{})}),e.jsx(B,{value:"analytics",children:e.jsx(xm,{})}),e.jsx(B,{value:"products",children:e.jsx(nm,{userProduce:a,onDeleteProduce:i,onEditProduce:c})}),e.jsx(B,{value:"buy-requests",children:e.jsx(gm,{})}),e.jsx(B,{value:"add-buy-request",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(sn,{userId:t.id})})}),e.jsx(B,{value:"add-product",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(hm,{})})})]})]})]}):null},fm=async s=>{try{const{data:{user:t}}=await F.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:a,error:r}=await F.from("farmer_exporter_collaborations").insert({farmer_id:t.id,...s}).select().single();if(r)throw console.error("Error creating farmer collaboration:",r),r;return a}catch(t){throw console.error("Error creating farmer collaboration:",t),t}},vm=async()=>{try{const{data:s,error:t}=await F.from("farmer_exporter_collaborations").select("*").eq("is_active",!0).order("created_at",{ascending:!1});return t?(console.error("Error fetching farmer collaborations:",t),[]):(s||[]).map(r=>({...r,farmer_coordinates:r.farmer_coordinates}))}catch(s){return console.error("Error fetching farmer collaborations:",s),[]}},ym=async s=>{try{const{data:{user:t}}=await F.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:a,error:r}=await F.from("exporter_profiles").insert({user_id:t.id,...s}).select().single();if(r)throw console.error("Error creating exporter profile:",r),r;return a}catch(t){throw console.error("Error creating exporter profile:",t),t}},tn=async()=>{try{const{data:s,error:t}=await F.from("exporter_profiles").select("*").eq("is_active",!0).order("rating",{ascending:!1});return t?(console.error("Error fetching exporter profiles:",t),[]):(s||[]).map(r=>({...r,office_coordinates:r.office_coordinates}))}catch(s){return console.error("Error fetching exporter profiles:",s),[]}},Nm=()=>{const[s,t]=l.useState("create"),[a,r]=l.useState(!1),[i,c]=l.useState([]),[n,o]=l.useState([]),{toast:h}=X(),[m,p]=l.useState({farmer_name:"",farmer_phone:"",farmer_email:"",farmer_location:"",farmer_county:"",farm_size_acres:"",commodity_name:"",commodity_variety:"",estimated_quantity:"",unit:"kg",quality_grade:"",harvest_date:"",availability_period:"",farmer_experience_years:"",has_export_documentation:!1,documentation_needs:[],farmer_profile_description:"",collaboration_type:"supply_partnership",target_markets:[],pricing_expectations:"",special_requirements:[],farmer_certifications:[]});l.useEffect(()=>{d()},[]);const d=async()=>{try{const[v,j]=await Promise.all([vm(),tn()]);c(v),o(j)}catch(v){console.error("Error loading data:",v)}},u=async v=>{if(v.preventDefault(),!m.farmer_name||!m.farmer_phone||!m.commodity_name||!m.estimated_quantity){h({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}try{r(!0);const j={...m,estimated_quantity:parseFloat(m.estimated_quantity),farm_size_acres:m.farm_size_acres?parseFloat(m.farm_size_acres):void 0,farmer_experience_years:m.farmer_experience_years?parseInt(m.farmer_experience_years):void 0,collaboration_status:"seeking_exporter",is_active:!0};await fm(j),h({title:"Success",description:"Your collaboration request has been created successfully"}),p({farmer_name:"",farmer_phone:"",farmer_email:"",farmer_location:"",farmer_county:"",farm_size_acres:"",commodity_name:"",commodity_variety:"",estimated_quantity:"",unit:"kg",quality_grade:"",harvest_date:"",availability_period:"",farmer_experience_years:"",has_export_documentation:!1,documentation_needs:[],farmer_profile_description:"",collaboration_type:"supply_partnership",target_markets:[],pricing_expectations:"",special_requirements:[],farmer_certifications:[]}),d()}catch(j){console.error("Error creating collaboration:",j),h({title:"Error",description:"Failed to create collaboration request",variant:"destructive"})}finally{r(!1)}},x=["Nairobi","Kiambu","Nakuru","Kisumu","Machakos","Uasin Gishu","Meru","Nyeri","Murang'a","Kakamega","Bungoma","Trans Nzoia","Nandi","Kericho","Bomet"],f=["Maize","Wheat","Rice","Beans","Potatoes","Sweet Potatoes","Tomatoes","Onions","Carrots","Cabbages","Spinach","Bananas","Mangoes","Avocados","Coffee","Tea","Pyrethrum","Cotton","Sunflower","Groundnuts"],g=["Export License","Phytosanitary Certificate","Certificate of Origin","Quality Certificates","Organic Certification","Fair Trade Certification"];return e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Farmer-Exporter Collaboration"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Connect with exporters to access international markets and get help with documentation"})]}),e.jsxs(ue,{value:s,onValueChange:t,children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsx(R,{value:"create",children:"Create Request"}),e.jsx(R,{value:"browse",children:"Browse Requests"}),e.jsx(R,{value:"exporters",children:"Find Exporters"})]}),e.jsx(B,{value:"create",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Create Collaboration Request"}),e.jsx(O,{children:"Tell exporters about your produce and what kind of collaboration you're looking for"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Farmer Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farmer_name",children:"Full Name *"}),e.jsx(D,{id:"farmer_name",value:m.farmer_name,onChange:v=>p(j=>({...j,farmer_name:v.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farmer_phone",children:"Phone Number *"}),e.jsx(D,{id:"farmer_phone",value:m.farmer_phone,onChange:v=>p(j=>({...j,farmer_phone:v.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farmer_email",children:"Email Address"}),e.jsx(D,{id:"farmer_email",type:"email",value:m.farmer_email,onChange:v=>p(j=>({...j,farmer_email:v.target.value}))})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farmer_county",children:"County *"}),e.jsxs(Q,{value:m.farmer_county,onValueChange:v=>p(j=>({...j,farmer_county:v})),children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select county"})}),e.jsx(Y,{children:x.map(v=>e.jsx(_,{value:v,children:v},v))})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(A,{htmlFor:"farmer_location",children:"Specific Location *"}),e.jsx(D,{id:"farmer_location",value:m.farmer_location,onChange:v=>p(j=>({...j,farmer_location:v.target.value})),placeholder:"e.g., Kiambu Town, near ABC Market",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Commodity Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"commodity_name",children:"Commodity *"}),e.jsxs(Q,{value:m.commodity_name,onValueChange:v=>p(j=>({...j,commodity_name:v})),children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select commodity"})}),e.jsx(Y,{children:f.map(v=>e.jsx(_,{value:v,children:v},v))})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"commodity_variety",children:"Variety"}),e.jsx(D,{id:"commodity_variety",value:m.commodity_variety,onChange:v=>p(j=>({...j,commodity_variety:v.target.value})),placeholder:"e.g., H614 for maize"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"estimated_quantity",children:"Estimated Quantity *"}),e.jsx(D,{id:"estimated_quantity",type:"number",value:m.estimated_quantity,onChange:v=>p(j=>({...j,estimated_quantity:v.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"unit",children:"Unit"}),e.jsxs(Q,{value:m.unit,onValueChange:v=>p(j=>({...j,unit:v})),children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"kg",children:"Kilograms"}),e.jsx(_,{value:"tons",children:"Tons"}),e.jsx(_,{value:"bags",children:"Bags"}),e.jsx(_,{value:"crates",children:"Crates"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Documentation & Requirements"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"has_export_documentation",checked:m.has_export_documentation,onCheckedChange:v=>p(j=>({...j,has_export_documentation:!!v}))}),e.jsx(A,{htmlFor:"has_export_documentation",children:"I already have export documentation"})]}),!m.has_export_documentation&&e.jsxs("div",{children:[e.jsx(A,{children:"What documentation do you need help with?"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:g.map(v=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:v,checked:m.documentation_needs.includes(v),onCheckedChange:j=>{p(j?y=>({...y,documentation_needs:[...y.documentation_needs,v]}):y=>({...y,documentation_needs:y.documentation_needs.filter(b=>b!==v)}))}}),e.jsx(A,{htmlFor:v,className:"text-sm",children:v})]},v))})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farmer_profile_description",children:"About Your Farm"}),e.jsx(ie,{id:"farmer_profile_description",value:m.farmer_profile_description,onChange:v=>p(j=>({...j,farmer_profile_description:v.target.value})),placeholder:"Tell exporters about your farming experience, practices, and what makes your produce special...",rows:4})]}),e.jsx(N,{type:"submit",disabled:a,className:"w-full",children:a?"Creating...":"Create Collaboration Request"})]})})]})}),e.jsx(B,{value:"browse",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:i.map(v=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),v.commodity_name,v.commodity_variety&&` (${v.commodity_variety})`]}),e.jsxs(O,{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"h-4 w-4"}),v.farmer_name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),v.farmer_county]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-4 w-4"}),v.estimated_quantity," ",v.unit]})]})]}),e.jsx(M,{variant:v.collaboration_status==="seeking_exporter"?"default":"secondary",children:v.collaboration_status.replace("_"," ")})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[v.farmer_profile_description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:v.farmer_profile_description}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ke,{className:"h-4 w-4"}),v.farmer_phone]}),v.farmer_email&&e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx($e,{className:"h-4 w-4"}),v.farmer_email]}),v.harvest_date&&e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(de,{className:"h-4 w-4"}),"Harvest: ",new Date(v.harvest_date).toLocaleDateString()]})]}),!v.has_export_documentation&&v.documentation_needs&&v.documentation_needs.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Documentation Needs:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:v.documentation_needs.map(j=>e.jsx(M,{variant:"outline",className:"text-xs",children:j},j))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Posted ",new Date(v.created_at).toLocaleDateString()]}),e.jsx(N,{size:"sm",children:"Contact Farmer"})]})]})})]},v.id))})}),e.jsx(B,{value:"exporters",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:n.map(v=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5"}),v.company_name]}),e.jsxs(O,{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ks,{className:"h-4 w-4"}),v.contact_person_name]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),v.office_county]}),v.years_in_business&&e.jsxs("span",{className:"text-sm",children:[v.years_in_business," years in business"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold",children:[v.rating.toFixed(1),"/5"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[v.total_collaborations," collaborations"]})]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[v.company_description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:v.company_description}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Export Markets:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:v.export_markets.map(j=>e.jsxs(M,{variant:"outline",className:"text-xs",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),j]},j))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Commodities Handled:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:v.commodities_handled.map(j=>e.jsx(M,{variant:"secondary",className:"text-xs",children:j},j))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Services Offered:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:v.services_offered.map(j=>e.jsx(M,{variant:"outline",className:"text-xs",children:j},j))})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-4 w-4"}),v.contact_phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"h-4 w-4"}),v.contact_email]})]}),e.jsx(N,{size:"sm",children:"Contact Exporter"})]})]})})]},v.id))})})]})]})},bm=()=>{const[s,t]=l.useState(!1),[a,r]=l.useState(null),{toast:i}=X(),[c,n]=l.useState({company_name:"",company_registration_number:"",business_license_number:"",export_license_number:"",company_description:"",contact_person_name:"",contact_phone:"",contact_email:"",office_location:"",office_county:"",website_url:"",years_in_business:"",export_markets:[],commodities_handled:[],services_offered:[],minimum_quantity_tons:"",maximum_quantity_tons:"",certifications:[],documentation_services:!0,logistics_services:!1,quality_assurance_services:!1,financing_services:!1,is_active:!0});l.useEffect(()=>{o()},[]);const o=async()=>{try{const u=await tn();u.length>0&&r(u[0])}catch(u){console.error("Error checking existing profile:",u)}},h=async u=>{if(u.preventDefault(),!c.company_name||!c.contact_person_name||!c.contact_phone||!c.contact_email){i({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}try{t(!0);const x={...c,years_in_business:c.years_in_business?parseInt(c.years_in_business):void 0,minimum_quantity_tons:c.minimum_quantity_tons?parseFloat(c.minimum_quantity_tons):void 0,maximum_quantity_tons:c.maximum_quantity_tons?parseFloat(c.maximum_quantity_tons):void 0};await ym(x),i({title:"Success",description:"Your exporter profile has been created successfully"}),o()}catch(x){console.error("Error creating exporter profile:",x),i({title:"Error",description:"Failed to create exporter profile",variant:"destructive"})}finally{t(!1)}},m=["East Africa","Europe","Middle East","Asia","North America","Australia","South Africa","West Africa","South America"],p=["Maize","Wheat","Rice","Beans","Potatoes","Sweet Potatoes","Tomatoes","Onions","Carrots","Cabbages","Spinach","Bananas","Mangoes","Avocados","Coffee","Tea","Pyrethrum","Cotton","Sunflower","Groundnuts"],d=["Documentation Support","Quality Certification","Logistics Coordination","Market Access","Price Negotiation","Payment Processing","Insurance","Storage Services","Transport Arrangement","Customs Clearance"];return a?e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Exporter Profile"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Your exporter profile is active and visible to farmers"})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ds,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx(S,{children:a.company_name}),e.jsx(O,{children:a.contact_person_name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Active Profile"})]})]})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Export Markets"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.export_markets.map(u=>e.jsxs(M,{variant:"outline",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),u]},u))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Commodities Handled"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.commodities_handled.map(u=>e.jsxs(M,{variant:"secondary",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),u]},u))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Services Offered"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:a.services_offered.map(u=>e.jsx(M,{variant:"outline",children:u},u))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.rating.toFixed(1)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.total_collaborations}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Collaborations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.successful_exports}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Successful Exports"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{variant:"outline",children:"Edit Profile"})})]})]})]}):e.jsxs("div",{className:"container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Exporter Profile"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Create your profile to connect with farmers who need export services"})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Exporter Information"}),e.jsx(O,{children:"Provide detailed information about your export business to help farmers find you"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(D,{id:"company_name",value:c.company_name,onChange:u=>n(x=>({...x,company_name:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"company_registration_number",children:"Registration Number"}),e.jsx(D,{id:"company_registration_number",value:c.company_registration_number,onChange:u=>n(x=>({...x,company_registration_number:u.target.value}))})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"business_license_number",children:"Business License"}),e.jsx(D,{id:"business_license_number",value:c.business_license_number,onChange:u=>n(x=>({...x,business_license_number:u.target.value}))})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"export_license_number",children:"Export License"}),e.jsx(D,{id:"export_license_number",value:c.export_license_number,onChange:u=>n(x=>({...x,export_license_number:u.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"company_description",children:"Company Description"}),e.jsx(ie,{id:"company_description",value:c.company_description,onChange:u=>n(x=>({...x,company_description:u.target.value})),placeholder:"Describe your company, experience, and what sets you apart...",rows:4})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_person_name",children:"Contact Person *"}),e.jsx(D,{id:"contact_person_name",value:c.contact_person_name,onChange:u=>n(x=>({...x,contact_person_name:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_phone",children:"Phone Number *"}),e.jsx(D,{id:"contact_phone",value:c.contact_phone,onChange:u=>n(x=>({...x,contact_phone:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_email",children:"Email Address *"}),e.jsx(D,{id:"contact_email",type:"email",value:c.contact_email,onChange:u=>n(x=>({...x,contact_email:u.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"website_url",children:"Website"}),e.jsx(D,{id:"website_url",type:"url",value:c.website_url,onChange:u=>n(x=>({...x,website_url:u.target.value}))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Export Markets"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:m.map(u=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:u,checked:c.export_markets.includes(u),onCheckedChange:x=>{n(x?f=>({...f,export_markets:[...f.export_markets,u]}):f=>({...f,export_markets:f.export_markets.filter(g=>g!==u)}))}}),e.jsx(A,{htmlFor:u,className:"text-sm",children:u})]},u))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Commodities Handled"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:p.map(u=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:u,checked:c.commodities_handled.includes(u),onCheckedChange:x=>{n(x?f=>({...f,commodities_handled:[...f.commodities_handled,u]}):f=>({...f,commodities_handled:f.commodities_handled.filter(g=>g!==u)}))}}),e.jsx(A,{htmlFor:u,className:"text-sm",children:u})]},u))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Services Offered"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:d.map(u=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:u,checked:c.services_offered.includes(u),onCheckedChange:x=>{n(x?f=>({...f,services_offered:[...f.services_offered,u]}):f=>({...f,services_offered:f.services_offered.filter(g=>g!==u)}))}}),e.jsx(A,{htmlFor:u,className:"text-sm",children:u})]},u))})]}),e.jsx(N,{type:"submit",disabled:s,className:"w-full",children:s?"Creating Profile...":"Create Exporter Profile"})]})})]})]})},da=[{id:"1",farmerName:"John Kimani",farmerLocation:"Nakuru",farmerAvatar:"/placeholder.svg",title:"Doubling My Potato Yield with Modern Farming Techniques",summary:"How I transformed my small farm from producing 5 tons to 12 tons of potatoes per season",content:"When I started farming potatoes five years ago, I was struggling with poor yields and pest problems. After attending a training session organized by the local agricultural office, I learned about proper spacing, quality certified seeds, and integrated pest management. I implemented these practices and saw amazing results within just one season. My yields doubled, and the quality of potatoes improved significantly, allowing me to negotiate better prices with buyers. I also joined a cooperative that helped me access reliable markets and negotiate as a group.",cropType:"Potatoes",tags:["modern techniques","yield improvement","pest management","certified seeds"],likes:128,comments:23,publishedDate:new Date("2025-03-15"),verified:!0},{id:"2",farmerName:"Sarah Wanjiku",farmerLocation:"Kiambu",farmerAvatar:"/placeholder.svg",title:"From Market Frustration to Direct Exports: My Avocado Journey",summary:"How joining a farmer group helped me bypass middlemen and access export markets directly",content:"I used to sell my avocados to middlemen who would offer very low prices, claiming that the market was flooded. After joining a local farmer group, we pooled our resources to meet the volume requirements of exporters. We also invested in Global GAP certification, which opened doors to premium markets in Europe. Today, I receive three times the price I used to get from middlemen, and payments are transparent and timely. This success has allowed me to expand my farm from 1 acre to 5 acres and invest in a drip irrigation system.",cropType:"Avocados",tags:["export market","value addition","farmer group","certification"],likes:236,comments:41,publishedDate:new Date("2025-02-28"),verified:!0},{id:"3",farmerName:"David Ochieng",farmerLocation:"Kisumu",farmerAvatar:"/placeholder.svg",title:"Weather-Proofing My Farm: Success with Climate-Smart Agriculture",summary:"Using water harvesting and drought-resistant varieties to maintain profitability despite climate challenges",content:"After three consecutive seasons of crop failure due to erratic rainfall, I decided to invest in climate-smart agricultural practices. I constructed water pans that harvest rainwater during the rainy season, which I then use for supplemental irrigation during dry spells. I also switched to drought-resistant maize varieties that can withstand water stress. The results were immediate - while my neighbors experienced significant losses during a recent drought, I maintained about 80% of my normal yield. I've now become a demonstration farmer, teaching others in my community about these techniques.",cropType:"Maize",tags:["climate-smart","water harvesting","drought-resistant","adaptation"],likes:157,comments:29,publishedDate:new Date("2025-04-05"),verified:!0},{id:"4",farmerName:"Alice Muthoni",farmerLocation:"Meru",farmerAvatar:"/placeholder.svg",title:"Transforming My Tomato Business with Value Addition",summary:"How I started making tomato paste to reduce post-harvest losses and increase profits",content:"I used to lose about 30% of my tomato harvest due to gluts in the market and transportation challenges. After attending a value addition workshop, I invested in simple processing equipment to make tomato paste. Now, whenever market prices drop below profitable levels, I process the tomatoes into paste and sell it to local schools, restaurants, and individual consumers. This has increased my income by 45% and virtually eliminated post-harvest losses. I've also created employment for three young people from my community who help with processing and marketing.",cropType:"Tomatoes",tags:["value addition","post-harvest","processing","employment creation"],likes:192,comments:37,publishedDate:new Date("2025-03-22"),verified:!0}],wm=()=>{const[s,t]=l.useState("all"),[a,r]=l.useState(""),[i,c]=l.useState(da);l.useEffect(()=>{document.title="Farmer Success Stories | Kilimo Connect";let o=[...da];s!=="all"&&(o=o.filter(h=>h.cropType.toLowerCase()===s.toLowerCase())),a&&(o=o.filter(h=>h.tags.some(m=>m.toLowerCase().includes(a.toLowerCase())))),c(o)},[s,a]);const n=Array.from(new Set(da.flatMap(o=>o.tags)));return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsx("div",{className:"container flex h-16 items-center",children:e.jsx(ns,{})})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Farmer Success Stories"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Learn from the experiences of successful farmers across Kenya"})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsx(ue,{defaultValue:"all",value:s,onValueChange:t,className:"w-full sm:w-auto",children:e.jsxs(me,{children:[e.jsx(R,{value:"all",children:"All Crops"}),e.jsx(R,{value:"potatoes",children:"Potatoes"}),e.jsx(R,{value:"avocados",children:"Avocados"}),e.jsx(R,{value:"maize",children:"Maize"}),e.jsx(R,{value:"tomatoes",children:"Tomatoes"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",children:"Filter"}),e.jsx(N,{children:"Share Your Success"})]})]}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[e.jsx(M,{variant:a===""?"default":"outline",className:"cursor-pointer",onClick:()=>r(""),children:"All Tags"}),n.map(o=>e.jsx(M,{variant:a===o?"default":"outline",className:"cursor-pointer",onClick:()=>r(o===a?"":o),children:o},o))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.map(o=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Is,{children:[e.jsx(Ys,{src:o.farmerAvatar,alt:o.farmerName}),e.jsx(Ls,{children:o.farmerName.substring(0,2).toUpperCase()})]}),e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:o.farmerName}),e.jsx(O,{children:o.farmerLocation})]})]}),o.verified&&e.jsx(M,{variant:"secondary",children:"Verified Success"})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-xl",children:o.title}),e.jsx("p",{className:"text-muted-foreground mt-1",children:o.summary})]}),e.jsx("div",{className:"text-sm line-clamp-3",children:o.content}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:"outline",children:o.cropType}),o.tags.slice(0,2).map(h=>e.jsx(M,{variant:"outline",children:h},h)),o.tags.length>2&&e.jsxs(M,{variant:"outline",children:["+",o.tags.length-2," more"]})]})]}),e.jsxs(re,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ys,{className:"h-4 w-4 mr-1"}),o.likes]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),o.comments]}),e.jsx("span",{children:o.publishedDate.toLocaleDateString()})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(N,{variant:"ghost",size:"sm",children:[e.jsx(kl,{className:"h-4 w-4 mr-1"}),"Share"]}),e.jsx(N,{size:"sm",children:"Read More"})]})]})]},o.id)),i.length===0&&e.jsxs("div",{className:"col-span-full text-center p-12",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(Ns,{className:"mx-auto h-12 w-12 opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium",children:"No success stories found"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Try changing your filters or be the first to share a success story for this category."}),e.jsx(N,{className:"mt-4",children:"Share Your Success"})]})]})]})]})},an=l.forwardRef(({className:s,...t},a)=>e.jsx(xi,{className:z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(Sl,{className:z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));an.displayName=xi.displayName;const Cm=({onSubmit:s,onCancel:t})=>{const[a,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState("general"),[h,m]=l.useState(""),[p,d]=l.useState([]),[u,x]=l.useState(""),[f,g]=l.useState(!1),[v,j]=l.useState(""),[y,b]=l.useState(["",""]),T=()=>{u.trim()&&!p.includes(u.trim())&&(d([...p,u.trim()]),x(""))},E=U=>{d(p.filter(q=>q!==U))},P=()=>{b([...y,""])},L=(U,q)=>{const te=[...y];te[U]=q,b(te)},G=U=>{y.length>2&&b(y.filter((q,te)=>te!==U))},I=U=>{U.preventDefault();const q={title:a,content:i,category:n,location:h||null,tags:p,poll:f?{question:v,options:y.filter(te=>te.trim())}:null};s(q)};return e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Create New Post"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"title",children:"Title"}),e.jsx(D,{id:"title",value:a,onChange:U=>r(U.target.value),placeholder:"What's your post about?",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"content",children:"Content"}),e.jsx(ie,{id:"content",value:i,onChange:U=>c(U.target.value),placeholder:"Share your thoughts, questions, or experiences...",rows:4,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"category",children:"Category"}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"general",children:"General Discussion"}),e.jsx(_,{value:"crops",children:"Crops & Farming"}),e.jsx(_,{value:"livestock",children:"Livestock"}),e.jsx(_,{value:"market",children:"Market Information"}),e.jsx(_,{value:"technology",children:"Technology"}),e.jsx(_,{value:"weather",children:"Weather & Climate"}),e.jsx(_,{value:"business",children:"Agribusiness"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location (Optional)"}),e.jsx(D,{id:"location",value:h,onChange:U=>m(U.target.value),placeholder:"County or region"})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:p.map(U=>e.jsxs(M,{variant:"secondary",className:"flex items-center gap-1",children:[U,e.jsx(Ue,{className:"h-3 w-3 cursor-pointer",onClick:()=>E(U)})]},U))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{value:u,onChange:U=>x(U.target.value),placeholder:"Add a tag",onKeyPress:U=>U.key==="Enter"&&(U.preventDefault(),T())}),e.jsx(N,{type:"button",variant:"outline",onClick:T,children:e.jsx(oe,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(an,{id:"poll-toggle",checked:f,onCheckedChange:g}),e.jsxs(A,{htmlFor:"poll-toggle",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Add a poll"]})]}),f&&e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"poll-question",children:"Poll Question"}),e.jsx(D,{id:"poll-question",value:v,onChange:U=>j(U.target.value),placeholder:"What would you like to ask?",required:f})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Poll Options"}),y.map((U,q)=>e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(D,{value:U,onChange:te=>L(q,te.target.value),placeholder:`Option ${q+1}`,required:f}),y.length>2&&e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>G(q),children:e.jsx(Ue,{className:"h-4 w-4"})})]},q)),e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:P,className:"mt-2",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"Add Option"]})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(N,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(N,{type:"submit",children:"Create Post"})]})]})})]})};function km({postId:s,postTitle:t,postContent:a}){const[r,i]=l.useState(""),[c,n]=l.useState(!1),{toast:o}=X(),h=async()=>{const f=`${t}

${a}

View on SokoConnect`,g=`https://wa.me/?text=${encodeURIComponent(f)}`;await u("whatsapp"),window.open(g,"_blank")},m=async()=>{const f=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;await u("facebook"),window.open(f,"_blank","width=600,height=400")},p=async()=>{const f=`${t} - ${a.substring(0,100)}...`,g=`https://twitter.com/intent/tweet?text=${encodeURIComponent(f)}`;await u("twitter"),window.open(g,"_blank","width=600,height=400")},d=async()=>{await navigator.clipboard.writeText(window.location.href),await u("copy_link"),o({title:"Link Copied",description:"Post link copied to clipboard"})},u=async f=>{try{const{data:{user:g}}=await F.auth.getUser();if(!g)return;await F.from("community_post_shares").insert({post_id:s,user_id:g.id,platform:f})}catch(g){console.error("Error recording share:",g)}},x=async()=>{try{const{data:{user:f}}=await F.auth.getUser();if(!f){o({title:"Authentication Required",description:"Please sign in to repost",variant:"destructive"});return}n(!0);const{error:g}=await F.from("community_post_reposts").insert({original_post_id:s,reposted_by:f.id,repost_caption:r});if(g)throw g;o({title:"Reposted",description:"Post has been reposted to your profile"}),i("")}catch(f){o({title:"Error",description:f.message,variant:"destructive"})}finally{n(!1)}};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"sm",children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Share"]})}),e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Share Post"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[e.jsxs(N,{onClick:h,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5 text-green-600"}),"WhatsApp"]}),e.jsxs(N,{onClick:m,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(_l,{className:"h-5 w-5 text-blue-600"}),"Facebook"]}),e.jsxs(N,{onClick:p,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Al,{className:"h-5 w-5 text-blue-400"}),"Twitter"]}),e.jsxs(N,{onClick:d,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-5 w-5"}),"Copy Link"]})]})]})]}),e.jsxs(_e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"sm",children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Repost"]})}),e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Repost to Your Profile"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"font-semibold text-sm",children:t}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mt-2",children:a})]}),e.jsx(ie,{placeholder:"Add your thoughts (optional)...",value:r,onChange:f=>i(f.target.value),rows:3}),e.jsx(N,{onClick:x,disabled:c,className:"w-full",children:c?"Reposting...":"Repost"})]})]})]})]})}const Sm=({postId:s})=>{const{user:t}=we(),{toast:a}=X(),[r,i]=l.useState(!1),[c,n]=l.useState(""),[o,h]=l.useState(""),[m,p]=l.useState(!1),d=[{value:"spam",label:"Spam or misleading"},{value:"inappropriate",label:"Inappropriate content"},{value:"harassment",label:"Harassment or hate speech"},{value:"false_info",label:"False information"},{value:"scam",label:"Scam or fraud"},{value:"other",label:"Other"}],u=async()=>{if(!t){a({title:"Authentication Required",description:"Please sign in to report posts",variant:"destructive"});return}if(!c||!o){a({title:"Missing Information",description:"Please select a report type and provide details",variant:"destructive"});return}p(!0);try{const{error:x}=await F.from("post_reports").insert({post_id:s,reporter_id:t.id,report_type:c,details:o});if(x)throw x;a({title:"Report Submitted",description:"Thank you for helping keep our community safe. We will review this report."}),i(!1),n(""),h("")}catch(x){console.error("Error submitting report:",x),a({title:"Error",description:"Failed to submit report. Please try again.",variant:"destructive"})}finally{p(!1)}};return e.jsxs(_e,{open:r,onOpenChange:i,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"sm",children:[e.jsx(hi,{className:"h-4 w-4 mr-2"}),"Report"]})}),e.jsxs(Se,{className:"sm:max-w-[425px]",children:[e.jsxs(Ae,{children:[e.jsx(Pe,{children:"Report Post"}),e.jsx(jt,{children:"Help us maintain a safe and respectful community. Your report will be reviewed by our moderation team."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"report-type",children:"Reason for Report"}),e.jsxs(Q,{value:c,onValueChange:n,children:[e.jsx(W,{id:"report-type",children:e.jsx(J,{placeholder:"Select a reason"})}),e.jsx(Y,{children:d.map(x=>e.jsx(_,{value:x.value,children:x.label},x.value))})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"details",children:"Additional Details"}),e.jsx(ie,{id:"details",value:o,onChange:x=>h(x.target.value),placeholder:"Please provide more information about why you're reporting this post...",rows:4})]})]}),e.jsxs(Cs,{children:[e.jsx(N,{variant:"outline",onClick:()=>i(!1),disabled:m,children:"Cancel"}),e.jsx(N,{onClick:u,disabled:m,children:m?"Submitting...":"Submit Report"})]})]})]})},_m=({post:s,onLike:t,onComment:a,onShare:r,onVote:i})=>{const[c,n]=l.useState(!1);l.useState(!1);const o=()=>{n(!c),t==null||t(s.id)},h=p=>{s.poll&&!s.poll.userVote!==void 0&&(i==null||i(s.poll.id,p))},m=(p,d)=>d>0?p/d*100:0;return e.jsxs(w,{className:"w-full",children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Is,{children:[e.jsx(Ys,{src:s.author.avatar}),e.jsx(Ls,{children:s.author.name.split(" ").map(p=>p[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:s.author.name}),s.author.isVerified&&e.jsx(M,{variant:"secondary",className:"text-xs",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-3 w-3"}),Tl(new Date(s.createdAt),{addSuffix:!0}),s.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(Z,{className:"h-3 w-3"}),s.location]})]})]})]}),e.jsx(N,{variant:"ghost",size:"sm",children:e.jsx(Dl,{className:"h-4 w-4"})})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.content})]}),s.poll&&e.jsxs(w,{className:"p-4 bg-muted/20",children:[e.jsx("h4",{className:"font-medium mb-3",children:s.poll.question}),e.jsx("div",{className:"space-y-2",children:s.poll.options.map((p,d)=>{const u=m(p.votes,s.poll.totalVotes),x=s.poll.userVote!==void 0,f=s.poll.userVote===d;return e.jsx("div",{className:"space-y-1",children:e.jsxs(N,{variant:f?"default":"outline",className:"w-full justify-start relative overflow-hidden",onClick:()=>h(d),disabled:x,children:[x&&e.jsx("div",{className:"absolute left-0 top-0 h-full bg-primary/20 transition-all",style:{width:`${u}%`}}),e.jsx("span",{className:"relative z-10",children:p.text}),x&&e.jsxs("span",{className:"relative z-10 ml-auto text-sm",children:[p.votes," (",u.toFixed(1),"%)"]})]})},d)})}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[s.poll.totalVotes," total votes"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:"outline",children:s.category}),s.tags.map(p=>e.jsxs(M,{variant:"secondary",children:["#",p]},p))]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{variant:"ghost",size:"sm",onClick:o,className:c?"text-red-500":"",children:[e.jsx(ys,{className:`h-4 w-4 mr-1 ${c?"fill-current":""}`}),s.likes]}),e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>a==null?void 0:a(s.id),children:[e.jsx(cs,{className:"h-4 w-4 mr-1"}),s.comments]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sm,{postId:s.id}),e.jsx(km,{postId:s.id,postTitle:s.title,postContent:s.content})]})]})]})]})},Am=({searchTerm:s,onSearchChange:t,category:a,onCategoryChange:r,sortBy:i,onSortChange:c})=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search posts, topics, or keywords...",value:s,onChange:n=>t(n.target.value),className:"pl-10"})]}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Categories"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Categories"}),e.jsx(_,{value:"general",children:"General Discussion"}),e.jsx(_,{value:"crops",children:"Crops & Farming"}),e.jsx(_,{value:"livestock",children:"Livestock"}),e.jsx(_,{value:"market",children:"Market Information"}),e.jsx(_,{value:"technology",children:"Technology"}),e.jsx(_,{value:"weather",children:"Weather & Climate"}),e.jsx(_,{value:"business",children:"Agribusiness"})]})]}),e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"Sort by"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"recent",children:"Most Recent"}),e.jsx(_,{value:"popular",children:"Most Popular"}),e.jsx(_,{value:"commented",children:"Most Commented"}),e.jsx(_,{value:"oldest",children:"Oldest First"})]})]})]}),Pm=()=>{const{user:s}=we(),{toast:t}=X(),[a,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(!1),[h,m]=l.useState(""),[p,d]=l.useState("all"),[u,x]=l.useState("recent");l.useEffect(()=>{f()},[p,u]);const f=async()=>{try{let j=F.from("community_posts").select(`
          *,
          profiles:author_id (
            full_name,
            avatar_url
          )
        `).eq("status","active");switch(p!=="all"&&(j=j.eq("category",p)),u){case"popular":j=j.order("upvotes",{ascending:!1});break;case"commented":j=j.order("downvotes",{ascending:!1});break;case"oldest":j=j.order("created_at",{ascending:!0});break;default:j=j.order("created_at",{ascending:!1})}const{data:y,error:b}=await j;if(b)throw b;r(y||[])}catch(j){console.error("Error fetching posts:",j),t({title:"Error",description:"Failed to load community posts",variant:"destructive"})}finally{c(!1)}},g=async j=>{if(!s){t({title:"Authentication Required",description:"Please sign in to create a post",variant:"destructive"});return}try{const{data:y,error:b}=await F.from("community_posts").insert({author_id:s.id,title:j.title,content:j.content,category:j.category,tags:j.tags}).select().single();if(b)throw b;t({title:"Success",description:"Your post has been created successfully!"}),o(!1),f()}catch(y){console.error("Error creating post:",y),t({title:"Error",description:"Failed to create post",variant:"destructive"})}},v=a.filter(j=>h===""||j.title.toLowerCase().includes(h.toLowerCase())||j.content.toLowerCase().includes(h.toLowerCase())||j.tags.some(y=>y.toLowerCase().includes(h.toLowerCase())));return i?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("div",{className:"container mx-auto py-8",children:e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Community Forum"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with fellow farmers and agricultural experts"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Active Discussions"]})}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Posts this month"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ee,{className:"h-5 w-5"}),"Community Members"]})}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2,500+"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active farmers"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ne,{className:"h-5 w-5"}),"Popular Topics"]})}),e.jsx(C,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("div",{children:"#maize-farming"}),e.jsx("div",{children:"#weather-alerts"}),e.jsx("div",{children:"#market-prices"})]})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:"Quick Actions"})}),e.jsx(C,{children:e.jsxs(N,{onClick:()=>o(!0),className:"w-full",disabled:!s,children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"New Post"]})})]})]}),n&&e.jsx("div",{className:"mb-8",children:e.jsx(Cm,{onSubmit:g,onCancel:()=>o(!1)})}),e.jsx(Am,{searchTerm:h,onSearchChange:m,category:p,onCategoryChange:d,sortBy:u,onSortChange:x}),e.jsx("div",{className:"space-y-6",children:v.length===0?e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(Ke,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No posts found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:h?"Try adjusting your search terms.":"Be the first to start a discussion!"}),!n&&s&&e.jsxs(N,{onClick:()=>o(!0),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create First Post"]})]})}):v.map(j=>{var y,b;return e.jsx(_m,{post:{id:j.id,title:j.title,content:j.content,author:{name:((y=j.profiles)==null?void 0:y.full_name)||"Anonymous",avatar:(b=j.profiles)==null?void 0:b.avatar_url,isVerified:!1},category:j.category,tags:j.tags||[],location:j.location,likes:j.upvotes||0,comments:j.downvotes||0,createdAt:j.created_at}},j.id)})})]})]})},Tm=()=>{const{user:s}=we(),{toast:t}=X(),[a,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(!1),[h,m]=l.useState({title:"",content:"",post_type:"discussion",tags:""});l.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:u,error:x}=await F.from("community_posts").select(`
          *,
          profiles:author_id (
            full_name,
            avatar_url
          )
        `).eq("category","carbon_credits").eq("status","active").order("created_at",{ascending:!1});if(x)throw x;r(u||[])}catch(u){console.error("Error:",u)}finally{c(!1)}},d=async()=>{if(!s){t({title:"Authentication Required",description:"Please sign in to create a post",variant:"destructive"});return}if(!h.title||!h.content){t({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}try{const{error:u}=await F.from("community_posts").insert({author_id:s.id,title:h.title,content:h.content,category:"carbon_credits",post_type:h.post_type,tags:h.tags.split(",").map(x=>x.trim()).filter(Boolean)});if(u)throw u;t({title:"Success",description:"Your post has been created"}),m({title:"",content:"",post_type:"discussion",tags:""}),o(!1),p()}catch(u){console.error("Error:",u),t({title:"Error",description:"Failed to create post",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-4 flex items-center justify-center gap-2",children:[e.jsx(Ft,{className:"h-10 w-10 text-green-600"}),"Carbon Credits & Circular Economy Forum"]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto mb-6",children:"Connect with experts, learn about carbon credits, share success stories, and discover opportunities in sustainable agriculture. Join farmers and organizations working towards a greener future."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ne,{className:"h-5 w-5 text-green-600"}),"Market Value"]})}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$15-30"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Per ton CO2e in Kenya"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ee,{className:"h-5 w-5 text-blue-600"}),"Interested Farmers"]})}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"Growing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Join the movement"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ke,{className:"h-5 w-5 text-purple-600"}),"Discussions"]})}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active conversations"})]})]})]}),e.jsxs(w,{className:"mb-8 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950 dark:to-blue-950",children:[e.jsx(k,{children:e.jsx(S,{children:"Why Carbon Credits Matter for Kenyan Farmers"})}),e.jsxs(C,{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"💰 Additional Income:"})," Earn $15-30 per ton of CO2e sequestered through regenerative farming practices"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🌱 Sustainable Practices:"})," Get paid for conservation agriculture, agroforestry, and organic farming"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"📈 Market Access:"})," Connect with international buyers and carbon credit aggregators"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🎓 Training & Support:"})," Free training on measurement, reporting, and verification (MRV)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🤝 Collective Action:"})," Join farmer groups to access carbon markets more easily"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Community Posts"}),e.jsxs(_e,{open:n,onOpenChange:o,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Post"]})}),e.jsxs(Se,{className:"max-w-2xl",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Create New Post"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Post Type"}),e.jsxs(Q,{value:h.post_type,onValueChange:u=>m({...h,post_type:u}),children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"discussion",children:"Discussion"}),e.jsx(_,{value:"success_story",children:"Success Story"}),e.jsx(_,{value:"opportunity",children:"Opportunity"}),e.jsx(_,{value:"question",children:"Question"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Title"}),e.jsx(D,{value:h.title,onChange:u=>m({...h,title:u.target.value}),placeholder:"Enter post title"})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Content"}),e.jsx(ie,{value:h.content,onChange:u=>m({...h,content:u.target.value}),placeholder:"Share your thoughts, experiences, or questions...",rows:8})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Tags (comma separated)"}),e.jsx(D,{value:h.tags,onChange:u=>m({...h,tags:u.target.value}),placeholder:"carbon-credits, agroforestry, regenerative"})]}),e.jsx(N,{onClick:d,className:"w-full",children:"Create Post"})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:i?e.jsx("div",{className:"text-center py-12",children:"Loading posts..."}):a.length>0?a.map(u=>{var x;return e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg mb-2",children:u.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:((x=u.profiles)==null?void 0:x.full_name)||"Anonymous"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(u.created_at).toLocaleDateString()})]})]}),e.jsx(M,{children:u.post_type})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm mb-3",children:u.content}),u.tags&&u.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:u.tags.map((f,g)=>e.jsxs(M,{variant:"outline",className:"text-xs",children:["#",f]},g))})]})]},u.id)}):e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(Ft,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No posts yet. Be the first to start a conversation!"}),e.jsxs(N,{onClick:()=>o(!0),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create First Post"]})]})})})]})]})};delete pt.Icon.Default.prototype._getIconUrl;pt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const ma=[{id:"A1",name:"A1 - Nairobi-Mombasa Highway",coordinates:[[-1.2921,36.8219],[-1.5177,37.2634],[-2.2833,37.9167],[-3.2167,38.5667],[-3.9667,38.5667],[-4.0333,39.6667]],color:"#FF5733"},{id:"A2",name:"A2 - Nairobi-Nakuru-Eldoret Highway",coordinates:[[-1.2921,36.8219],[-.9,36.65],[-.3031,36.08],[.5143,35.2698]],color:"#3357FF"},{id:"A3",name:"A3 - Nairobi-Kisumu Highway",coordinates:[[-1.2921,36.8219],[-.3031,36.08],[-.0917,35.2833],[-.0917,34.75]],color:"#33FF57"},{id:"A104",name:"A104 - Thika Superhighway",coordinates:[[-1.2921,36.8219],[-1.0332,37.069]],color:"#FF33F5"}],Dm=({center:s})=>{const t=Fl();return l.useEffect(()=>{t.setView(s,t.getZoom())},[s,t]),null},Mm=()=>{const{toast:s}=X(),[t,a]=l.useState([{id:"1",name:"Machakos Fresh Produce",route:"A1",location:"Machakos Junction",lat:-1.5177,lng:37.2634,services:["Fresh Produce","Cold Storage"],products:["Tomatoes","Onions"],rating:4.5,phone:"+254 712 345 678",verified:!0},{id:"2",name:"Nakuru Dairy Hub",route:"A2",location:"Nakuru Town",lat:-.3031,lng:36.08,services:["Dairy Products","Refrigerated Transport"],products:["Milk","Yogurt"],rating:4.7,phone:"+254 734 567 890",verified:!0},{id:"3",name:"Thika Pineapple Vendors",route:"A104",location:"Thika Blue Post",lat:-1.0332,lng:37.069,services:["Fresh Fruits","Wholesale"],products:["Pineapples","Avocados"],rating:4.3,phone:"+254 745 678 901",verified:!1}]),[r,i]=l.useState("all"),[c,n]=l.useState([-1.2921,36.8219]),[o,h]=l.useState(""),m=t.filter(d=>(r==="all"||d.route===r)&&(o===""||d.name.toLowerCase().includes(o.toLowerCase())||d.location.toLowerCase().includes(o.toLowerCase()))),p=d=>{n([d.lat,d.lng]),s({title:d.name,description:d.location})};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Interactive Major Routes Map"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Explore Kenya's major highways and find farmers, traders, and service providers along the routes. Click on markers to see details or use the filters below."}),e.jsxs(w,{className:"mb-6 bg-blue-50 dark:bg-blue-950",children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"h-5 w-5"}),"How It Works"]})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"🗺️ Interactive Map:"})," Click and drag to navigate, zoom in/out to explore"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"📍 Vendor Markers:"})," Red markers show verified businesses along major routes"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"🛣️ Highway Lines:"})," Colored lines represent different highway routes (A1, A2, A3, A104)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"📞 Contact Directly:"})," Click markers to see contact information and services offered"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"➕ Add Your Location:"})," Businesses can register to appear on the map"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsx(D,{placeholder:"Search vendors or locations...",value:o,onChange:d=>h(d.target.value)}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx(N,{variant:r==="all"?"default":"outline",onClick:()=>i("all"),children:"All Routes"}),ma.map(d=>e.jsx(N,{variant:r===d.id?"default":"outline",onClick:()=>i(d.id),children:d.id},d.id))]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(w,{className:"h-[600px] overflow-hidden",children:e.jsxs(ti,{center:c,zoom:7,style:{height:"100%",width:"100%"},children:[e.jsx(Dm,{center:c}),e.jsx(ai,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),ma.map(d=>(r==="all"||r===d.id)&&e.jsx(Ml,{positions:d.coordinates,pathOptions:{color:d.color,weight:4,opacity:.7}},d.id)),m.map(d=>e.jsx(et,{position:[d.lat,d.lng],children:e.jsx(st,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("h3",{className:"font-bold mb-1",children:d.name}),d.verified&&e.jsx(M,{variant:"secondary",className:"mb-2 text-xs",children:"Verified"}),e.jsxs("p",{className:"text-sm mb-2 flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),d.location]}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"Products:"})," ",d.products.join(", ")]}),e.jsxs("p",{className:"text-sm mb-2 flex items-center gap-1",children:[e.jsx(Be,{className:"h-3 w-3 fill-yellow-500 text-yellow-500"}),d.rating]}),e.jsxs(N,{size:"sm",className:"w-full",variant:"outline",children:[e.jsx(ke,{className:"h-3 w-3 mr-1"}),d.phone]})]})})},d.id))]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Route Legend"})}),e.jsx(C,{className:"space-y-2",children:ma.map(d=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:d.color}}),e.jsx("span",{className:"text-sm",children:d.name})]},d.id))})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{children:["Nearby Vendors (",m.length,")"]})}),e.jsx(C,{className:"space-y-3 max-h-[400px] overflow-y-auto",children:m.map(d=>e.jsxs("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-accent transition-colors",onClick:()=>p(d),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm",children:d.name}),d.verified&&e.jsx(M,{variant:"secondary",className:"text-xs",children:"✓"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2 flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),d.location]}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx(Be,{className:"h-3 w-3 fill-yellow-500 text-yellow-500"}),e.jsx("span",{className:"text-xs",children:d.rating})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.products.slice(0,2).map(u=>e.jsx(M,{variant:"outline",className:"text-xs",children:u},u))})]},d.id))})]}),e.jsxs(N,{className:"w-full",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Add My Business to Map"]})]})]})]})]})},Fm=()=>{const[s,t]=l.useState(!navigator.onLine);return l.useEffect(()=>{const a=()=>t(!1),r=()=>t(!0);return window.addEventListener("online",a),window.addEventListener("offline",r),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",r)}},[]),s?e.jsx("div",{style:{background:"#fbbf24",color:"#1f2937",padding:"8px",textAlign:"center",position:"fixed",top:0,width:"100%",zIndex:1e3},children:"You are offline. Some features may be limited. Actions will sync when you reconnect."}):null},Em=({formStep:s})=>e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center ${s>=1?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"1"}),e.jsx("div",{className:`h-1 w-12 ${s>=2?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center ${s>=2?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"2"}),e.jsx("div",{className:`h-1 w-12 ${s>=3?"bg-primary":"bg-muted"}`}),e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center ${s>=3?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"3"})]})}),Im=["Mombasa","Kwale","Kilifi","Tana River","Lamu","Taita-Taveta","Garissa","Wajir","Mandera","Marsabit","Isiolo","Meru","Tharaka-Nithi","Embu","Kitui","Machakos","Makueni","Nyandarua","Nyeri","Kirinyaga","Murang'a","Kiambu","Turkana","West Pokot","Samburu","Trans-Nzoia","Uasin Gishu","Elgeyo-Marakwet","Nandi","Baringo","Laikipia","Nakuru","Narok","Kajiado","Kericho","Bomet","Kakamega","Vihiga","Bungoma","Busia","Siaya","Kisumu","Homa Bay","Migori","Kisii","Nyamira","Nairobi"],Lm=({formErrors:s,businessName:t,setBusinessName:a,phone:r,setPhone:i,email:c,setEmail:n,selectedCounties:o,handleCountySelection:h,businessReg:m,setBusinessReg:p,yearsInBusiness:d,setYearsInBusiness:u,description:x,setDescription:f,handleNextStep:g,user:v,counties:j})=>e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"businessName",className:s.businessName?"text-destructive":"",children:"Business Name*"}),e.jsx(D,{id:"businessName",value:t,onChange:y=>a(y.target.value),placeholder:"Your transport company name",className:s.businessName?"border-destructive":""}),s.businessName&&e.jsx("p",{className:"text-xs text-destructive",children:s.businessName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"phone",className:s.phone?"text-destructive":"",children:"Phone Number*"}),e.jsx(D,{id:"phone",value:r,onChange:y=>i(y.target.value),placeholder:"+254...",className:s.phone?"border-destructive":""}),s.phone&&e.jsx("p",{className:"text-xs text-destructive",children:s.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"email",className:s.email?"text-destructive":"",children:"Email Address*"}),e.jsx(D,{id:"email",type:"email",value:c,onChange:y=>n(y.target.value),placeholder:"contact@yourcompany.com",className:s.email?"border-destructive":""}),s.email&&e.jsx("p",{className:"text-xs text-destructive",children:s.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:s.counties?"text-destructive":"",children:"Counties Served*"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-[200px] overflow-y-auto border rounded-md p-3",children:Im.map(y=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:`county-${y}`,checked:o.includes(y),onCheckedChange:()=>h(y)}),e.jsx("label",{htmlFor:`county-${y}`,className:"text-sm cursor-pointer",children:y})]},y))}),o.length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",o.length," counties"]}),s.counties&&e.jsx("p",{className:"text-xs text-destructive",children:s.counties})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"businessReg",children:"Business Registration Number (Optional)"}),e.jsx(D,{id:"businessReg",value:m,onChange:y=>p(y.target.value),placeholder:"KE12345678"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"yearsInBusiness",className:s.yearsInBusiness?"text-destructive":"",children:"Years in Business*"}),e.jsxs(Q,{value:d,onValueChange:u,children:[e.jsx(W,{className:s.yearsInBusiness?"border-destructive":"",children:e.jsx(J,{placeholder:"Select years"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"<1",children:"Less than 1 year"}),e.jsx(_,{value:"1-3",children:"1-3 years"}),e.jsx(_,{value:"3-5",children:"3-5 years"}),e.jsx(_,{value:"5+",children:"More than 5 years"})]})]}),s.yearsInBusiness&&e.jsx("p",{className:"text-xs text-destructive",children:s.yearsInBusiness})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"description",className:s.description?"text-destructive":"",children:"Business Description*"}),e.jsx(ie,{id:"description",value:x,onChange:y=>f(y.target.value),placeholder:"Tell us more about your transport services...",rows:4,className:s.description?"border-destructive":""}),s.description&&e.jsx("p",{className:"text-xs text-destructive",children:s.description})]})]}),!v&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md flex items-start",children:[e.jsx(Os,{className:"h-5 w-5 text-yellow-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["You are not logged in. Please ",e.jsx("a",{href:"/login",className:"text-primary font-medium",children:"sign in"})," or",e.jsx("a",{href:"/signup",className:"text-primary font-medium",children:" create an account"})," to register as a transporter."]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(N,{onClick:g,disabled:!v,children:"Continue"})})]}),qm=({formErrors:s,vehicleType:t,setVehicleType:a,vehicleCount:r,setVehicleCount:i,loadCapacity:c,setLoadCapacity:n,rates:o,setRates:h,availableTimes:m,handleAvailableTimeToggle:p,specialFeatures:d,handleSpecialFeatureToggle:u,handleSubmit:x,isSubmitting:f,setFormStep:g})=>e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:x,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"vehicleType",className:s.vehicleType?"text-destructive":"",children:"Vehicle Type*"}),e.jsxs(Q,{value:t,onValueChange:a,children:[e.jsx(W,{className:s.vehicleType?"border-destructive":"",children:e.jsx(J,{placeholder:"Select vehicle type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"pickup",children:"Pickup"}),e.jsx(_,{value:"van",children:"Van"}),e.jsx(_,{value:"truck-small",children:"Truck (3-5 tons)"}),e.jsx(_,{value:"truck-medium",children:"Truck (5-10 tons)"}),e.jsx(_,{value:"truck-large",children:"Heavy Truck (10+ tons)"}),e.jsx(_,{value:"motorcycle",children:"Motorcycle"})]})]}),s.vehicleType&&e.jsx("p",{className:"text-xs text-destructive",children:s.vehicleType})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"vehicleCount",className:s.vehicleCount?"text-destructive":"",children:"Number of Vehicles*"}),e.jsxs(Q,{value:r,onValueChange:i,children:[e.jsx(W,{className:s.vehicleCount?"border-destructive":"",children:e.jsx(J,{placeholder:"Select count"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"1",children:"1"}),e.jsx(_,{value:"2-5",children:"2-5"}),e.jsx(_,{value:"6-10",children:"6-10"}),e.jsx(_,{value:"10+",children:"More than 10"})]})]}),s.vehicleCount&&e.jsx("p",{className:"text-xs text-destructive",children:s.vehicleCount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"loadCapacity",className:s.loadCapacity?"text-destructive":"",children:"Load Capacity*"}),e.jsxs(Q,{value:c,onValueChange:n,children:[e.jsx(W,{className:s.loadCapacity?"border-destructive":"",children:e.jsx(J,{placeholder:"Select capacity"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"<1",children:"Less than 1 ton"}),e.jsx(_,{value:"1-3",children:"1-3 tons"}),e.jsx(_,{value:"3-5",children:"3-5 tons"}),e.jsx(_,{value:"5-10",children:"5-10 tons"}),e.jsx(_,{value:"10+",children:"More than 10 tons"})]})]}),s.loadCapacity&&e.jsx("p",{className:"text-xs text-destructive",children:s.loadCapacity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"rates",className:s.rates?"text-destructive":"",children:"Average Rates*"}),e.jsx(D,{id:"rates",value:o,onChange:v=>h(v.target.value),placeholder:"e.g., KES 5,000 per trip",className:s.rates?"border-destructive":""}),s.rates&&e.jsx("p",{className:"text-xs text-destructive",children:s.rates})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"availableTimes",className:s.availableTimes?"text-destructive":"",children:"Available Times*"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"morning",checked:m.includes("morning"),onCheckedChange:()=>p("morning")}),e.jsx("label",{htmlFor:"morning",className:"text-sm",children:"Morning (5AM-11AM)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"afternoon",checked:m.includes("afternoon"),onCheckedChange:()=>p("afternoon")}),e.jsx("label",{htmlFor:"afternoon",className:"text-sm",children:"Afternoon (11AM-4PM)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"evening",checked:m.includes("evening"),onCheckedChange:()=>p("evening")}),e.jsx("label",{htmlFor:"evening",className:"text-sm",children:"Evening (4PM-9PM)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"night",checked:m.includes("night"),onCheckedChange:()=>p("night")}),e.jsx("label",{htmlFor:"night",className:"text-sm",children:"Night (9PM-5AM)"})]})]}),s.availableTimes&&e.jsx("p",{className:"text-xs text-destructive",children:s.availableTimes})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Special Features"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"refrigeration",checked:d.includes("refrigeration"),onCheckedChange:()=>u("refrigeration")}),e.jsx("label",{htmlFor:"refrigeration",className:"text-sm",children:"Refrigerated Transport"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"tracking",checked:d.includes("tracking"),onCheckedChange:()=>u("tracking")}),e.jsx("label",{htmlFor:"tracking",className:"text-sm",children:"GPS Tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"insurance",checked:d.includes("insurance"),onCheckedChange:()=>u("insurance")}),e.jsx("label",{htmlFor:"insurance",className:"text-sm",children:"Cargo Insurance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"loading",checked:d.includes("loading"),onCheckedChange:()=>u("loading")}),e.jsx("label",{htmlFor:"loading",className:"text-sm",children:"Loading/Unloading Service"})]})]})]})]})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(N,{variant:"outline",onClick:()=>g(1),children:"Back"}),e.jsx(N,{onClick:x,disabled:f,children:f?"Registering...":"Complete Registration"})]})]}),Rm=()=>{const s=ve();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(qe,{className:"w-8 h-8 text-primary"})})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Your account has been successfully created. You will start receiving transport requests from farmers in your area soon."}),e.jsxs("div",{className:"flex flex-col items-center space-y-3 my-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Access to transport requests in your regions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Geographic route planning and optimization"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Verified transporter badge on the platform"})]})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{onClick:()=>s("/"),children:"Go to Dashboard"})})]})},rn=ce.object({businessName:ce.string().min(3,"Business name must be at least 3 characters"),phone:ce.string().min(10,"Please enter a valid phone number"),email:ce.string().email("Please enter a valid email address"),counties:ce.array(ce.string()).min(1,"Please select at least one county"),businessReg:ce.string().optional(),yearsInBusiness:ce.string().min(1,"Please select years in business"),description:ce.string().min(20,"Description must be at least 20 characters"),vehicleType:ce.string().min(1,"Please select a vehicle type"),vehicleCount:ce.string().min(1,"Please select number of vehicles"),loadCapacity:ce.string().min(1,"Please select load capacity"),rates:ce.string().min(3,"Please provide your rates"),availableTimes:ce.array(ce.string()).min(1,"Please select at least one available time"),specialFeatures:ce.array(ce.string()).optional()}),zm=(s,t,a,r,i,c,n)=>{try{const o={businessName:s,phone:t,email:a,counties:r,businessReg:i,yearsInBusiness:c,description:n};return rn.pick({businessName:!0,phone:!0,email:!0,counties:!0,yearsInBusiness:!0,description:!0}).parse(o),{valid:!0,errors:{}}}catch(o){if(o instanceof ce.ZodError){const h={};return o.errors.forEach(m=>{const p=m.path[0];h[p]=m.message}),{valid:!1,errors:h}}return{valid:!1,errors:{form:"Validation failed"}}}},Km=(s,t,a,r,i,c)=>{try{const n={vehicleType:s,vehicleCount:t,loadCapacity:a,rates:r,availableTimes:i,specialFeatures:c};return rn.pick({vehicleType:!0,vehicleCount:!0,loadCapacity:!0,rates:!0,availableTimes:!0,specialFeatures:!0}).parse(n),{valid:!0,errors:{}}}catch(n){if(n instanceof ce.ZodError){const o={};return n.errors.forEach(h=>{const m=h.path[0];o[m]=h.message}),{valid:!1,errors:o}}return{valid:!1,errors:{form:"Validation failed"}}}},Om=()=>{const{toast:s}=X(),[t,a]=l.useState(!1),[r,i]=l.useState(1),[c,n]=l.useState({}),[o,h]=l.useState(null),[m,p]=l.useState(""),[d,u]=l.useState(""),[x,f]=l.useState(""),[g,v]=l.useState([]),[j,y]=l.useState(""),[b,T]=l.useState(""),[E,P]=l.useState(""),[L,G]=l.useState(""),[I,U]=l.useState(""),[q,te]=l.useState(""),[Te,H]=l.useState(""),[K,le]=l.useState([]),[xe,xs]=l.useState([]),Zt=["Nairobi","Mombasa","Kisumu","Nakuru","Kiambu","Meru","Kakamega","Nyeri","Machakos","Uasin Gishu","Kirinyaga","Bungoma","Bomet"];l.useEffect(()=>{(async()=>{var Xe;const{data:bt}=await F.auth.getSession();h(((Xe=bt.session)==null?void 0:Xe.user)||null)})();const{data:Ve}=F.auth.onAuthStateChange((bt,Xe)=>{h((Xe==null?void 0:Xe.user)||null)});return()=>{Ve.subscription.unsubscribe()}},[]);const hn=Me=>{g.includes(Me)?v(g.filter(Ve=>Ve!==Me)):v([...g,Me])},pn=Me=>{K.includes(Me)?le(K.filter(Ve=>Ve!==Me)):le([...K,Me])},gn=Me=>{xe.includes(Me)?xs(xe.filter(Ve=>Ve!==Me)):xs([...xe,Me])},jn=()=>{const{valid:Me,errors:Ve}=zm(m,d,x,g,j,b,E);Me?(n({}),i(2)):(n(Ve),s({title:"Validation Error",description:"Please fix the errors in the form before continuing.",variant:"destructive"}))},fn=async Me=>{Me.preventDefault();const{valid:Ve,errors:bt}=Km(L,I,q,Te,K,xe);if(!Ve){n(bt),s({title:"Validation Error",description:"Please fix the errors in the form before submitting.",variant:"destructive"});return}if(a(!0),!o){s({title:"Authentication Required",description:"You need to be logged in to register as a transporter.",variant:"destructive"}),a(!1);return}try{const Xe={user_id:o.id,name:m,service_type:"transport",counties:g,contact_info:`${d} | ${x}`,capacity:I,load_capacity:parseInt(q.split("-")[0])||1e3,rates:Te,has_refrigeration:xe.includes("refrigeration"),vehicle_type:L},{data:fx,error:Ka}=await F.from("transporters").insert(Xe).select();if(Ka)throw new Error(Ka.message);s({title:"Registration Successful",description:"Your transporter account has been created. You'll start receiving transport requests soon."}),i(3)}catch(Xe){console.error("Error submitting transporter data:",Xe),s({title:"Registration Failed",description:"There was an error creating your account. Please try again.",variant:"destructive"})}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Transport Provider Registration"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Join our network of transport providers and connect with farmers who need to move their produce to markets"})]}),e.jsx(Em,{formStep:r}),e.jsxs(w,{className:"max-w-4xl mx-auto",children:[r===1&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Business Information"}),e.jsx(O,{children:"Tell us about your transport business"})]}),e.jsx(C,{children:e.jsx(Lm,{formErrors:c,businessName:m,setBusinessName:p,phone:d,setPhone:u,email:x,setEmail:f,selectedCounties:g,handleCountySelection:hn,businessReg:j,setBusinessReg:y,yearsInBusiness:b,setYearsInBusiness:T,description:E,setDescription:P,handleNextStep:jn,user:o,counties:Zt})})]}),r===2&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Vehicle & Service Details"}),e.jsx(O,{children:"Tell us about your transportation capabilities"})]}),e.jsx(C,{children:e.jsx(qm,{formErrors:c,vehicleType:L,setVehicleType:G,vehicleCount:I,setVehicleCount:U,loadCapacity:q,setLoadCapacity:te,rates:Te,setRates:H,availableTimes:K,handleAvailableTimeToggle:pn,specialFeatures:xe,handleSpecialFeatureToggle:gn,handleSubmit:fn,isSubmitting:t,setFormStep:i})})]}),r===3&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-center",children:"Registration Complete!"}),e.jsx(O,{className:"text-center",children:"Thank you for joining our transport provider network"})]}),e.jsx(C,{children:e.jsx(Rm,{})})]})]})]})]})},Bm=()=>{const s=ve(),{toast:t}=X(),[a,r]=l.useState(""),[i,c]=l.useState(""),[n,o]=l.useState(""),[h,m]=l.useState(["Storage","Transport","Quality Control","Market Linkage","Training","Input Supplier","Inspector"]),[p,d]=l.useState([]),[u,x]=l.useState(""),[f,g]=l.useState(""),[v,j]=l.useState(""),[y,b]=l.useState(""),[T,E]=l.useState(["Organic","Fair Trade","Affordable","Reliable","Certified"]),[P,L]=l.useState([]),[G,I]=l.useState(!1),U=["Nairobi","Mombasa","Kisumu","Nakuru","Eldoret","Machakos","Kiambu","Nyeri","Kakamega","Kisii","Thika","Garissa","Lamu","Turkana"],q=H=>{d(K=>K.includes(H)?K.filter(le=>le!==H):[...K,H])},te=H=>{L(K=>K.includes(H)?K.filter(le=>le!==H):[...K,H])},Te=H=>{H.preventDefault();const K={name:a,businessType:i,description:n,services:p,location:{county:u,specificLocation:f},contactInfo:v,website:y,tags:P,rates:"Contact for rates",verified:!1,rating:0,reviewCount:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Submitting service provider:",K),t({title:"Service registered",description:"Your service has been submitted for verification."}),I(!0)};return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx("header",{className:"sticky top-0 z-30 w-full border-b bg-background",children:e.jsxs("div",{className:"container flex h-16 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(ns,{})}),e.jsx("div",{className:"md:hidden",children:e.jsx(Ss,{})})]})}),e.jsxs("main",{className:"flex-1 container py-6",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Service Provider Registration"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Register your agricultural service to connect with farmers in need."}),G&&e.jsxs("div",{className:"rounded-md bg-green-50 p-4 mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Registration Successful!"}),e.jsx("div",{className:"mt-2 text-sm text-green-700",children:"Your service has been registered and is awaiting verification."}),e.jsx(N,{variant:"link",onClick:()=>s("/"),children:"Back to Home"})]}),e.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"name",children:"Service Name"}),e.jsx(D,{id:"name",type:"text",value:a,onChange:H=>r(H.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"businessType",children:"Business Type"}),e.jsxs(Q,{value:i,onValueChange:c,required:!0,children:[e.jsx(W,{id:"businessType",children:e.jsx(J,{placeholder:"Select a business type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"storage",children:"Storage"}),e.jsx(_,{value:"transport",children:"Transport"}),e.jsx(_,{value:"quality-control",children:"Quality Control"}),e.jsx(_,{value:"market-linkage",children:"Market Linkage"}),e.jsx(_,{value:"training",children:"Training"}),e.jsx(_,{value:"input-supplier",children:"Input Supplier"}),e.jsx(_,{value:"inspector",children:"Inspector"})]})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description"}),e.jsx(ie,{id:"description",value:n,onChange:H=>o(H.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Services Offered"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(H=>e.jsxs("div",{className:"space-x-2",children:[e.jsx(Ce,{id:`service-${H}`,checked:p.includes(H),onCheckedChange:()=>q(H)}),e.jsx(A,{htmlFor:`service-${H}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:H})]},H))})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"county",children:"County"}),e.jsxs(Q,{value:u,onValueChange:x,required:!0,children:[e.jsx(W,{id:"county",children:e.jsx(J,{placeholder:"Select a county"})}),e.jsx(Y,{children:U.map(H=>e.jsx(_,{value:H,children:H},H))})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"specificLocation",children:"Specific Location"}),e.jsx(D,{id:"specificLocation",type:"text",value:f,onChange:H=>g(H.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contactInfo",children:"Contact Information"}),e.jsx(D,{id:"contactInfo",type:"text",value:v,onChange:H=>j(H.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"website",children:"Website (optional)"}),e.jsx(D,{id:"website",type:"url",value:y,onChange:H=>b(H.target.value)})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(H=>e.jsxs("div",{className:"space-x-2",children:[e.jsx(Ce,{id:`tag-${H}`,checked:P.includes(H),onCheckedChange:()=>te(H)}),e.jsx(A,{htmlFor:`tag-${H}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:H})]},H))})]}),e.jsx(N,{type:"submit",children:"Register Service"})]})]})]})},rr=({data:s,title:t,type:a})=>{const r=l.useRef(null);l.useEffect(()=>{if(!r.current||!s.length)return;const h=Xt(r.current);h.selectAll("*").remove();const m={top:20,right:30,bottom:40,left:40},p=400-m.left-m.right,d=300-m.top-m.bottom,u=h.attr("width",p+m.left+m.right).attr("height",d+m.top+m.bottom).append("g").attr("transform",`translate(${m.left},${m.top})`);switch(a){case"bar":i(u,s,p,d);break;case"pie":c(u,s,p,d);break;case"scatter":n(u,s,p,d);break;case"line":o(u,s,p,d);break}},[s,a]);const i=(h,m,p,d)=>{const u=El().domain(m.map(f=>f.name)).range([0,p]).padding(.1),x=Zs().domain([0,Il(m,f=>f.value)||0]).range([d,0]);h.append("g").attr("transform",`translate(0,${d})`).call(ea(u)),h.append("g").call(sa(x)),h.selectAll(".bar").data(m).enter().append("rect").attr("class","bar").attr("x",f=>u(f.name)||0).attr("width",u.bandwidth()).attr("y",f=>x(f.value)).attr("height",f=>d-x(f.value)).attr("fill","#22c55e").on("mouseover",function(f,g){Xt(this).attr("fill","#16a34a")}).on("mouseout",function(f,g){Xt(this).attr("fill","#22c55e")})},c=(h,m,p,d)=>{const u=Math.min(p,d)/2,x=Ll(ql),f=Rl().value(j=>j.value),g=zl().innerRadius(0).outerRadius(u),v=f(m);h.attr("transform",`translate(${p/2},${d/2})`),h.selectAll(".arc").data(v).enter().append("g").attr("class","arc").append("path").attr("d",g).attr("fill",(j,y)=>x(y.toString())),h.selectAll(".arc").append("text").attr("transform",j=>`translate(${g.centroid(j)})`).attr("text-anchor","middle").text(j=>j.data.name)},n=(h,m,p,d)=>{const u=Zs().domain(wt(m,(f,g)=>g)).range([0,p]),x=Zs().domain(wt(m,f=>f.value)).range([d,0]);h.append("g").attr("transform",`translate(0,${d})`).call(ea(u)),h.append("g").call(sa(x)),h.selectAll(".dot").data(m).enter().append("circle").attr("class","dot").attr("cx",(f,g)=>u(g)).attr("cy",f=>x(f.value)).attr("r",5).attr("fill","#3b82f6")},o=(h,m,p,d)=>{const u=Zs().domain(wt(m,(g,v)=>v)).range([0,p]),x=Zs().domain(wt(m,g=>g.value)).range([d,0]),f=Kl().x((g,v)=>u(v)).y(g=>x(g.value));h.append("g").attr("transform",`translate(0,${d})`).call(ea(u)),h.append("g").call(sa(x)),h.append("path").datum(m).attr("fill","none").attr("stroke","#ef4444").attr("stroke-width",2).attr("d",f)};return e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{className:"text-lg",children:t})}),e.jsx(C,{children:e.jsx("svg",{ref:r})})]})},ir={knbs:"https://www.knbs.or.ke/agricultural-statistics/",kilimo:"https://kilimo.go.ke/",fao:"https://www.fao.org/faostat/en/#country/114",worldBank:"https://data.worldbank.org/country/KE?view=chart",centralBank:"https://www.centralbank.go.ke/"},nn=[{id:"1",name:"Maize Production",category:"Staple Crops",county:"Uasin Gishu",value:"2.1 million bags",unit:"bags (90kg)",source:"KNBS Economic Survey 2023",verified:!0},{id:"2",name:"Tea Production",category:"Cash Crops",county:"Kericho",value:"485,000 tonnes",unit:"tonnes",source:"Tea Board of Kenya 2023",verified:!0},{id:"3",name:"Coffee Production",category:"Cash Crops",county:"Nyeri",value:"45,000 tonnes",unit:"tonnes",source:"Coffee Board of Kenya 2023",verified:!0},{id:"4",name:"Potato Production",category:"Food Crops",county:"Nyandarua",value:"1.8 million tonnes",unit:"tonnes",source:"KNBS Agricultural Census 2023",verified:!0},{id:"5",name:"Dairy Production",category:"Livestock",county:"Kiambu",value:"5.2 billion litres",unit:"litres/year",source:"Kenya Dairy Board 2023",verified:!0}],nr=["Baringo","Bomet","Bungoma","Busia","Elgeyo-Marakwet","Embu","Garissa","Homa Bay","Isiolo","Kajiado","Kakamega","Kericho","Kiambu","Kilifi","Kirinyaga","Kisii","Kisumu","Kitui","Kwale","Laikipia","Lamu","Machakos","Makueni","Mandera","Marsabit","Meru","Migori","Mombasa","Murang'a","Nairobi","Nakuru","Nandi","Narok","Nyamira","Nyandarua","Nyeri","Samburu","Siaya","Taita-Taveta","Tana River","Tharaka-Nithi","Trans Nzoia","Turkana","Uasin Gishu","Vihiga","Wajir","West Pokot"],Um=async()=>Promise.resolve(nn),$m=()=>{const[s,t]=l.useState("real-data"),[a,r]=l.useState(nn),[i,c]=l.useState(""),[n,o]=l.useState("");l.useEffect(()=>{(async()=>{try{const u=await Um();r(u)}catch(u){console.error("Error loading real data:",u)}})()},[]);const h=[...new Set(a.map(d=>d.category))],m=a.filter(d=>{const u=!i||i==="All Categories"||d.category===i,x=!n||n==="All Counties"||d.county===n;return u&&x}),p=m.slice(0,10).map(d=>({name:d.name,value:parseFloat(d.value.toString().replace(/[^\d.]/g,""))||0,category:d.category}));return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-8 px-4 md:px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Verified Agricultural Data for Kenya"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto mb-4",children:"Real-time integration with verified Kenyan government and institutional data sources"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(zs,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"All data verified from legitimate sources"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Verified data sources:"}),Object.entries(ir).map(([d,u])=>e.jsxs("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs bg-green-50 hover:bg-green-100 px-3 py-1 rounded-full text-green-700 hover:text-green-800 transition-colors border border-green-200",children:[e.jsx(Je,{className:"h-3 w-3 mr-1"}),d==="knbs"?"Kenya National Bureau of Statistics":d==="kilimo"?"Ministry of Agriculture":d==="fao"?"FAO Kenya":d==="worldBank"?"World Bank Kenya":"Central Bank of Kenya"]},d))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5 text-green-600"}),"Verified Kenya Agricultural Data"]}),e.jsx(O,{children:"Explore verified data from Kenya's leading agricultural institutions"})]}),e.jsx(C,{children:e.jsxs(ue,{value:s,onValueChange:t,className:"w-full",children:[e.jsxs(me,{className:"w-full mb-6",children:[e.jsx(R,{value:"real-data",children:"Verified Data"}),e.jsx(R,{value:"sources",children:"Data Sources"})]}),e.jsxs(B,{value:"real-data",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-end gap-4",children:[e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(A,{htmlFor:"category",className:"mb-2 block",children:"Category"}),e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{id:"category",children:e.jsx(J,{placeholder:"All Categories"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"All Categories",children:"All Categories"}),h.map(d=>e.jsx(_,{value:d,children:d},d))]})]})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx(A,{htmlFor:"county",className:"mb-2 block",children:"County"}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{id:"county",children:e.jsx(J,{placeholder:"All Counties"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"All Counties",children:"All Counties"}),nr.map(d=>e.jsx(_,{value:d,children:d},d))]})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Commodity"}),e.jsx("th",{className:"text-left p-2",children:"Category"}),e.jsx("th",{className:"text-left p-2",children:"County"}),e.jsx("th",{className:"text-right p-2",children:"Production"}),e.jsx("th",{className:"text-left p-2",children:"Source"}),e.jsx("th",{className:"text-center p-2",children:"Verified"})]})}),e.jsx("tbody",{children:m.map(d=>e.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[e.jsx("td",{className:"p-2 font-medium",children:d.name}),e.jsx("td",{className:"p-2",children:e.jsx(M,{variant:"outline",children:d.category})}),e.jsx("td",{className:"p-2",children:d.county}),e.jsx("td",{className:"p-2 text-right font-medium",children:d.value}),e.jsx("td",{className:"p-2 text-sm text-muted-foreground",children:d.source||"Verified Source"}),e.jsx("td",{className:"p-2 text-center",children:d.verified&&e.jsx(zs,{className:"h-4 w-4 text-green-600 mx-auto"})})]},d.id))})]})})]}),e.jsx(B,{value:"sources",children:e.jsx("div",{className:"space-y-4",children:Object.entries(ir).map(([d,u])=>e.jsx(w,{children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:d==="knbs"?"Kenya National Bureau of Statistics":d==="kilimo"?"Ministry of Agriculture & Livestock Development":d==="fao"?"Food and Agriculture Organization (Kenya)":d==="worldBank"?"World Bank (Kenya Data)":"Central Bank of Kenya"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Official government/institutional source"})]}),e.jsxs("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-800",children:["Visit Source ",e.jsx(Je,{className:"h-4 w-4"})]})]})})},d))})})]})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Real Data Visualizations"}),e.jsx(O,{children:"Interactive charts based on verified Kenyan agricultural data"})]}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(rr,{data:p,title:"Production by Category",type:"bar"}),e.jsx(rr,{data:p,title:"County Distribution",type:"pie"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-amber-600"}),"Data Integrity Notice"]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"All data displayed is sourced from verified Kenyan government and institutional sources. We do not use mock, sample, or fabricated data."}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(zs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Government verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(zs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Real-time updates"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(zs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Institutional sources"})]})]})]})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Kenya Agricultural Overview"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700",children:nr.length}),e.jsx("div",{className:"text-sm text-green-600",children:"Counties Covered"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:h.length}),e.jsx("div",{className:"text-sm text-blue-600",children:"Crop Categories"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:"100%"}),e.jsx("div",{className:"text-sm text-purple-600",children:"Data Verified"})]})]})})]})]})]})]})]})},Vm=()=>e.jsxs(w,{className:"border-green-200",children:[e.jsx(k,{children:e.jsx(S,{children:"Production API Overview"})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Base URL"}),e.jsx("code",{className:"bg-muted p-2 rounded-md block",children:"https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Available API Endpoints"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(w,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:"Farmers API"})}),e.jsxs(C,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Access farmer data from across Kenya with different access levels based on your subscription tier."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-farmers"})})]})]}),e.jsxs(w,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:"Markets API"})}),e.jsxs(C,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Get market information with real price data and analytics. Available to Developer and Enterprise tiers."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-markets"})})]})]}),e.jsxs(w,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:"Commodities API"})}),e.jsxs(C,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Access commodity pricing and trend data with different data depths based on subscription tier."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-commodities"})})]})]}),e.jsxs(w,{className:"flex flex-col border-green-200 bg-green-50",children:[e.jsx(k,{className:"pb-2",children:e.jsx(S,{className:"text-lg",children:"Supply Chain API"})}),e.jsxs(C,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm mb-4",children:"Enterprise-tier access to comprehensive supply chain analytics, logistics data, and forecasts."}),e.jsx("div",{className:"text-xs bg-white p-2 rounded",children:e.jsx("code",{children:"GET /api-supply-chain"})})]})]})]})]}),e.jsxs("div",{className:"bg-green-100 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Production Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Security"}),e.jsxs("ul",{className:"space-y-2 list-disc pl-5 text-sm",children:[e.jsx("li",{children:"API key authentication with SHA-256 hashing"}),e.jsx("li",{children:"Rate limiting by subscription tier"}),e.jsx("li",{children:"Request validation and sanitization"}),e.jsx("li",{children:"Row-level security policies"}),e.jsx("li",{children:"Comprehensive request logging"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Performance"}),e.jsxs("ul",{className:"space-y-2 list-disc pl-5 text-sm",children:[e.jsx("li",{children:"Auto-scaling serverless functions"}),e.jsx("li",{children:"Response time monitoring"}),e.jsx("li",{children:"Traffic-based optimization"}),e.jsx("li",{children:"Global CDN distribution"}),e.jsx("li",{children:"Request caching mechanisms"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Getting Started"}),e.jsxs("ol",{className:"space-y-2 list-decimal pl-5",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Generate an API key: "}),e.jsxs(V,{to:"/api-docs?tab=keys",className:"text-blue-600 inline-flex items-center hover:underline",children:["Visit the API Keys tab ",e.jsx(Je,{className:"h-3 w-3 ml-1"})]})]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Send requests with your key: "}),"Include your API key in the X-API-Key header"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Upgrade your subscription: "}),"Purchase a business advertisement to access higher tiers"]})]})]})]})]}),Hm=()=>(X(),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"API Authentication"})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"API Key Authentication"}),e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg mb-4",children:[e.jsx("p",{className:"font-medium text-green-800 mb-2",children:"✅ Production-Ready API Keys"}),e.jsx("p",{className:"text-sm mb-4",children:"You can generate real API keys that work with our endpoints by visiting the API Keys tab."}),e.jsx(V,{to:"/api-docs?tab=keys",children:e.jsxs(N,{className:"flex items-center",children:["Go to API Keys Management",e.jsx(Vs,{className:"ml-2 h-4 w-4"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Using Your API Key"}),e.jsxs("p",{className:"mb-4",children:["Include your API key in the ",e.jsx("code",{children:"X-API-Key"})," header of all API requests:"]}),e.jsx("div",{className:"bg-muted p-3 rounded-md",children:e.jsx("pre",{className:"text-xs overflow-auto",children:`// Example: X-API-Key header
X-API-Key: your_api_key_here

// Example curl request
curl -H "X-API-Key: your_api_key_here" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-farmers`})}),e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"⚠️ API Key Security"}),e.jsxs("ul",{className:"space-y-2 text-sm list-disc pl-5 text-yellow-800",children:[e.jsx("li",{children:"Never expose your API key in client-side code"}),e.jsx("li",{children:"Use environment variables to store keys in your server code"}),e.jsx("li",{children:"Set up proper CORS policies on your server"}),e.jsx("li",{children:"Rotate your API keys periodically for added security"}),e.jsx("li",{children:"Delete inactive API keys to prevent unauthorized access"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Rate Limiting"}),e.jsx("p",{className:"mb-2",children:"Our API enforces the following rate limits based on your subscription tier:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted",children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"Subscription"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Rate Limit"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Monthly Requests"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Data Access"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:"Free"}),e.jsx("td",{className:"border px-4 py-2",children:"100 req/minute"}),e.jsx("td",{className:"border px-4 py-2",children:"1,000"}),e.jsx("td",{className:"border px-4 py-2",children:"Basic (Limited)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:"Developer"}),e.jsx("td",{className:"border px-4 py-2",children:"500 req/minute"}),e.jsx("td",{className:"border px-4 py-2",children:"50,000"}),e.jsx("td",{className:"border px-4 py-2",children:"Standard"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2",children:"Enterprise"}),e.jsx("td",{className:"border px-4 py-2",children:"2,000 req/minute"}),e.jsx("td",{className:"border px-4 py-2",children:"500,000"}),e.jsx("td",{className:"border px-4 py-2",children:"Premium (Full)"})]})]})]})}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"ℹ️ Rate Limit Response"}),e.jsx("p",{className:"text-sm mb-2 text-blue-700",children:"When rate limited, the API returns a 429 status code with headers:"}),e.jsx("pre",{className:"bg-white p-2 rounded text-xs",children:`{
  "error": "Rate limit exceeded",
  "meta": {
    "limit": 100,
    "remaining": 0,
    "reset_time": "2025-06-11T12:30:00Z"
  }
}`})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error Handling"}),e.jsx("p",{className:"mb-2",children:"Common API error responses:"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{children:[e.jsx("code",{children:"401 Unauthorized"})," - Invalid or missing API key"]}),e.jsxs("li",{children:[e.jsx("code",{children:"403 Forbidden"})," - Subscription level doesn't allow access"]}),e.jsxs("li",{children:[e.jsx("code",{children:"404 Not Found"})," - Endpoint or resource not found"]}),e.jsxs("li",{children:[e.jsx("code",{children:"429 Too Many Requests"})," - Rate limit exceeded"]}),e.jsxs("li",{children:[e.jsx("code",{children:"500 Internal Server Error"})," - Server-side error"]})]})]})]})]}));class ua{static async getUserApiKeys(){var t;try{const{data:{session:a}}=await F.auth.getSession();if(!a)throw new Error("Not authenticated");const r=await F.functions.invoke("api-keys-management",{method:"GET",headers:{Authorization:`Bearer ${a.access_token}`}});if(r.error)throw new Error("Failed to fetch API keys");return((t=r.data)==null?void 0:t.data)||[]}catch(a){return console.error("Error fetching API keys:",a),[]}}static async createApiKey(t){try{const{data:{session:a}}=await F.auth.getSession();if(!a)throw new Error("Not authenticated");const r=await F.functions.invoke("api-keys-management",{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:{name:t}});if(r.error)throw new Error("Failed to create API key");return r.data}catch(a){throw console.error("Error creating API key:",a),a}}static async deleteApiKey(t){try{const{data:{session:a}}=await F.auth.getSession();if(!a)throw new Error("Not authenticated");if((await F.functions.invoke("api-keys-management",{method:"DELETE",headers:{Authorization:`Bearer ${a.access_token}`},body:{id:t}})).error)throw new Error("Failed to delete API key")}catch(a){throw console.error("Error deleting API key:",a),a}}}const Gm=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState(!1),[n,o]=l.useState(""),[h,m]=l.useState(""),[p,d]=l.useState(!1),{toast:u}=X();l.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const j=await ua.getUserApiKeys();t(j)}catch{u({title:"Error",description:"Failed to load API keys",variant:"destructive"})}finally{r(!1)}},f=async()=>{if(!n.trim()){u({title:"Error",description:"Please enter a name for the API key",variant:"destructive"});return}try{const j=await ua.createApiKey(n);m(j.api_key),d(!0),o(""),c(!1),await x(),u({title:"Success",description:"API key created successfully"})}catch{u({title:"Error",description:"Failed to create API key",variant:"destructive"})}},g=async j=>{try{await ua.deleteApiKey(j),await x(),u({title:"Success",description:"API key deleted successfully"})}catch{u({title:"Error",description:"Failed to delete API key",variant:"destructive"})}},v=j=>{navigator.clipboard.writeText(j),u({title:"Copied!",description:"API key copied to clipboard"})};return a?e.jsx(w,{children:e.jsx(C,{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading API keys..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{children:"API Key Management"}),e.jsxs(_e,{open:i,onOpenChange:c,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create API Key"]})}),e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Create New API Key"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"keyName",children:"API Key Name"}),e.jsx(D,{id:"keyName",value:n,onChange:j=>o(j.target.value),placeholder:"e.g., Production API Key"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(N,{onClick:f,children:"Create Key"})]})]})]})]})]})}),e.jsx(C,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No API keys found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first API key to start accessing the API"})]}):e.jsx("div",{className:"space-y-4",children:s.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:j.name}),e.jsx(M,{variant:j.is_active?"default":"secondary",children:j.is_active?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Key: ",j.key_preview]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(j.created_at).toLocaleDateString(),j.last_used_at&&e.jsxs("span",{className:"ml-4",children:["Last used: ",new Date(j.last_used_at).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Zi,{children:[e.jsx(Xi,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",children:e.jsx(gt,{className:"h-4 w-4"})})}),e.jsxs(Fa,{children:[e.jsxs(Ea,{children:[e.jsx(La,{children:"Delete API Key"}),e.jsx(qa,{children:"Are you sure you want to delete this API key? This action cannot be undone."})]}),e.jsxs(Ia,{children:[e.jsx(za,{children:"Cancel"}),e.jsx(Ra,{onClick:()=>g(j.id),children:"Delete"})]})]})]})})]},j.id))})})]}),h&&e.jsx(_e,{open:p,onOpenChange:d,children:e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"API Key Created Successfully"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Your API Key:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 text-sm bg-background p-2 rounded border",children:h}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>v(h),children:e.jsx(js,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"This is the only time you'll see this key"}),e.jsx("li",{children:"Store it securely in your application"}),e.jsx("li",{children:"Never share your API key publicly"})]})]}),e.jsx(N,{onClick:()=>d(!1),className:"w-full",children:"I've Saved My API Key"})]})]})})]})};class Wm{static async createAdvertisement(t){try{const{data:{user:a}}=await F.auth.getUser();if(!a)return{success:!1,error:"User not authenticated"};const{data:r,error:i}=await F.from("business_advertisements").insert({user_id:a.id,business_name:t.business_name,business_description:t.business_description,business_category:t.business_category,contact_email:t.contact_email,contact_phone:t.contact_phone,location:t.location,website_url:t.website_url,image_url:t.image_url,ad_content:t.ad_content,target_audience:t.target_audience}).select().single();return i?(console.error("Error creating advertisement:",i),{success:!1,error:i.message}):{success:!0,id:r.id}}catch(a){return console.error("Error in createAdvertisement:",a),{success:!1,error:"Failed to create advertisement"}}}static async getActiveAdvertisements(){try{const{data:t,error:a}=await F.from("business_advertisements").select("*").eq("is_active",!0).eq("payment_status","paid").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});return a?(console.error("Error fetching advertisements:",a),[]):(t||[]).map(r=>({...r,payment_status:r.payment_status}))}catch(t){return console.error("Error in getActiveAdvertisements:",t),[]}}static async getUserAdvertisements(){try{const{data:{user:t}}=await F.auth.getUser();if(!t)return[];const{data:a,error:r}=await F.from("business_advertisements").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});return r?(console.error("Error fetching user advertisements:",r),[]):(a||[]).map(i=>({...i,payment_status:i.payment_status}))}catch(t){return console.error("Error in getUserAdvertisements:",t),[]}}static async updatePaymentStatus(t,a,r){try{const i=r==="paid"?new Date(Date.now()+2592e6).toISOString():null,{error:c}=await F.from("business_advertisements").update({payment_status:r,payment_id:a,is_active:r==="paid",expires_at:i,amount_paid:r==="paid"?20:null}).eq("id",t);return c?(console.error("Error updating payment status:",c),{success:!1,error:c.message}):{success:!0}}catch(i){return console.error("Error in updatePaymentStatus:",i),{success:!1,error:"Failed to update payment status"}}}static async recordTransaction(t){try{const{data:{user:a}}=await F.auth.getUser();if(!a)return{success:!1,error:"User not authenticated"};const{error:r}=await F.from("payment_transactions").insert({user_id:a.id,advertisement_id:t.advertisement_id,payment_provider:t.payment_provider,transaction_id:t.transaction_id,amount:t.amount,currency:t.currency,status:t.status,payment_details:t.payment_details});return r?(console.error("Error recording transaction:",r),{success:!1,error:r.message}):{success:!0}}catch(a){return console.error("Error in recordTransaction:",a),{success:!1,error:"Failed to record transaction"}}}static async checkApiAccess(){try{const{data:{user:t}}=await F.auth.getUser();if(!t)return{hasAccess:!1,subscriptionType:null,requestsRemaining:0};const{data:a,error:r}=await F.from("business_advertisements").select("payment_status, expires_at, amount_paid").eq("user_id",t.id).eq("payment_status","paid").gt("expires_at",new Date().toISOString());if(r)return console.error("Error checking API access:",r),{hasAccess:!1,subscriptionType:"free",requestsRemaining:1e3};let i="free",c=1e3,n;if(a&&a.length>0){const o=a.reduce((h,m)=>(m.amount_paid||0)>(h.amount_paid||0)?m:h);o.amount_paid&&(o.amount_paid>=15e3?(i="enterprise",c=5e5):o.amount_paid>=2500&&(i="developer",c=5e4),n=o.expires_at)}return{hasAccess:!0,subscriptionType:i,requestsRemaining:c,expiresAt:n}}catch(t){return console.error("Error in checkApiAccess:",t),{hasAccess:!1,subscriptionType:"free",requestsRemaining:1e3}}}static async incrementViewCount(t){try{const{data:a}=await F.from("business_advertisements").select("views_count").eq("id",t).single();if(a){const r=(a.views_count||0)+1;await F.from("business_advertisements").update({views_count:r}).eq("id",t)}}catch(a){console.error("Error incrementing view count:",a)}}static async incrementClickCount(t){try{const{data:a}=await F.from("business_advertisements").select("clicks_count").eq("id",t).single();if(a){const r=(a.clicks_count||0)+1;await F.from("business_advertisements").update({clicks_count:r}).eq("id",t)}}catch(a){console.error("Error incrementing click count:",a)}}static async getAnalytics(){try{const[t,a]=await Promise.all([F.from("business_advertisements").select("id",{count:"exact"}),F.from("business_advertisements").select("id",{count:"exact"}).eq("is_active",!0)]),{data:r}=await F.from("business_advertisements").select("amount_paid").eq("payment_status","paid"),i=(r==null?void 0:r.reduce((h,m)=>h+(m.amount_paid||0),0))||0,{data:c}=await F.from("business_advertisements").select("business_category"),n={};c==null||c.forEach(h=>{n[h.business_category]=(n[h.business_category]||0)+1});const o=Object.entries(n).map(([h,m])=>({category:h,count:m})).sort((h,m)=>m.count-h.count).slice(0,5);return{totalAds:t.count||0,activeAds:a.count||0,totalRevenue:i,topCategories:o}}catch(t){return console.error("Error in getAnalytics:",t),{totalAds:0,activeAds:0,totalRevenue:0,topCategories:[]}}}static async renewAdvertisement(t){try{const a=new Date(Date.now()+2592e6).toISOString(),{error:r}=await F.from("business_advertisements").update({expires_at:a,is_active:!0,payment_status:"paid"}).eq("id",t);return r?(console.error("Error renewing advertisement:",r),{success:!1,error:r.message}):{success:!0}}catch(a){return console.error("Error in renewAdvertisement:",a),{success:!1,error:"Failed to renew advertisement"}}}}class Ym{static async getPricingTiers(){try{const{data:t,error:a}=await F.from("pricing_tiers").select("*").eq("is_active",!0).order("price",{ascending:!0});return a?(console.error("Error fetching pricing tiers:",a),[{id:"free",name:"Free Tier",price:0,currency:"KES",period:"/month",requests:30,features:["Basic API access","Community support","Standard rate limits","30 API calls per month"],is_popular:!1,is_active:!0},{id:"developer",name:"Developer",price:2500,currency:"KES",period:"/month",requests:1e4,features:["Advanced API access","Email support","Higher rate limits","Analytics dashboard","10,000 API calls per month"],is_popular:!0,is_active:!0},{id:"enterprise",name:"Enterprise",price:15e3,currency:"KES",period:"/month",requests:1e5,features:["Full API access","Priority support","Custom rate limits","Dedicated account manager","Custom integrations","100,000 API calls per month"],is_popular:!1,is_active:!0}]):t||[]}catch(t){return console.error("Error fetching pricing tiers:",t),[]}}static async updatePricingTier(t){try{const{error:a}=await F.from("pricing_tiers").update({name:t.name,price:t.price,currency:t.currency,period:t.period,requests:t.requests,features:t.features,is_popular:t.is_popular,is_active:t.is_active}).eq("id",t.id);return!a}catch(a){return console.error("Error updating pricing tier:",a),!1}}}const Qm=()=>{const[s,t]=l.useState(!1),[a,r]=l.useState({hasAccess:!1,subscriptionType:null,requestsRemaining:0}),[i,c]=l.useState([]),[n,o]=l.useState(!0),{toast:h}=X(),{user:m}=we();l.useEffect(()=>{p(),d()},[]);const p=async()=>{const f=await Wm.checkApiAccess();r(f)},d=async()=>{o(!0);const f=await Ym.getPricingTiers();c(f),o(!1)},u=f=>{navigator.clipboard.writeText(f),t(!0),h({title:"Copied!",description:"API example copied to clipboard"}),setTimeout(()=>t(!1),2e3)},x=f=>{h({title:"Subscription Required",description:`Please purchase a business advertisement to access ${f} tier API features.`})};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"AgriConnect API Documentation"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl",children:"Production-ready API access to Kenya's agricultural data, market information, and supply chain intelligence"}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a.hasAccess?e.jsx(Ol,{className:"h-4 w-4 text-green-600"}):e.jsx(Aa,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-sm",children:["Current Plan: ",e.jsx(M,{variant:a.subscriptionType==="free"?"outline":"default",children:a.subscriptionType||"None"})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Requests Remaining: ",a.requestsRemaining.toLocaleString()]})]})]}),m&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Welcome, ",m.email]})]})})}),e.jsx("main",{className:"py-8 px-4 md:px-6 max-w-7xl mx-auto",children:e.jsxs(ue,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(me,{className:"grid grid-cols-5 w-full max-w-2xl mx-auto",children:[e.jsx(R,{value:"overview",children:"Overview"}),e.jsx(R,{value:"authentication",children:"Auth"}),e.jsx(R,{value:"endpoints",children:"Endpoints"}),e.jsx(R,{value:"keys",children:"API Keys"}),e.jsx(R,{value:"pricing",children:"Pricing"})]}),e.jsx(B,{value:"overview",children:e.jsx(Vm,{})}),e.jsx(B,{value:"authentication",children:e.jsx(Hm,{})}),e.jsx(B,{value:"endpoints",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Production API Endpoints"}),e.jsx("p",{className:"text-muted-foreground",children:"Live API endpoints with authentication and subscription-based access control"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Authentication"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Include your API key in the ",e.jsx("code",{children:"X-API-Key"})," header:"]}),e.jsx("code",{className:"bg-muted p-2 rounded-md block text-sm",children:"X-API-Key: your_api_key_here"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-farmers"}),e.jsx(M,{variant:"outline",className:"text-xs",children:"All Tiers"})]}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>u('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-farmers'),children:[s?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Get farmer data (limited by subscription tier)"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-farmers"]})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-markets"}),e.jsx(M,{variant:"outline",className:"text-xs",children:"Developer+ Required"})]}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>u('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-markets'),children:[s?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Access real market prices and demand data"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-markets"]})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-supply-chain"}),e.jsx(M,{variant:"destructive",className:"text-xs",children:"Enterprise Only"})]}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>u('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-supply-chain'),children:[s?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Comprehensive supply chain analytics"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-supply-chain"]})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"GET"}),e.jsx("code",{className:"text-sm",children:"/api-commodities"}),e.jsx(M,{variant:"outline",className:"text-xs",children:"All Tiers"})]}),e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>u('curl -H "X-API-Key: YOUR_API_KEY" https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-commodities'),children:[s?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"}),"Copy"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Get commodity prices and market trends"}),e.jsx("div",{className:"bg-muted p-2 rounded text-xs",children:e.jsxs("pre",{children:['curl -H "X-API-Key: YOUR_API_KEY" \\',`
`,"     https://cwcduhvwkihpnuaoflps.supabase.co/functions/v1/api-commodities"]})})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"✅ Production Ready"}),e.jsx("p",{className:"text-sm text-green-700",children:"All endpoints are fully functional with authentication, rate limiting, and subscription-tier access control. Try them with a valid API key!"})]})]})]})}),e.jsx(B,{value:"keys",className:"space-y-6",children:e.jsx(Gm,{})}),e.jsx(B,{value:"pricing",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"API Pricing Plans"}),e.jsx("p",{className:"text-muted-foreground",children:"API access is linked to your business advertisement subscription. Purchase an advertisement to unlock higher API tiers."})]}),e.jsxs(C,{children:[n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map((f,g)=>{const v=f.name==="Free Tier"||f.name==="Developer"&&(a.subscriptionType==="developer"||a.subscriptionType==="enterprise")||f.name==="Enterprise"&&a.subscriptionType==="enterprise";return e.jsxs("div",{className:`border rounded-lg p-6 ${f.is_popular?"border-primary shadow-lg":""} ${v?"bg-green-50":"bg-gray-50"}`,children:[f.is_popular&&e.jsx(M,{className:"mb-4",children:"Most Popular"}),v&&e.jsx(M,{variant:"outline",className:"mb-4 bg-green-100 text-green-800",children:"Active"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:f.name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[f.currency," ",f.price.toLocaleString()]}),e.jsx("span",{className:"text-muted-foreground",children:f.period})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Up to ",f.requests.toLocaleString()," API requests per month"]}),e.jsx("ul",{className:"space-y-2 mb-6",children:f.features.map((j,y)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qe,{className:"h-4 w-4 text-green-500"}),j]},y))}),e.jsx(N,{className:"w-full",variant:f.is_popular?"default":"outline",disabled:v||f.name==="Free Tier",onClick:()=>x(f.name),children:v?"Current Plan":f.name==="Free Tier"?"Active":"Subscribe"})]},f.id)})}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"How API Access Works:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Free tier: Available to all registered users"}),e.jsx("li",{children:"• Developer tier: Unlocked by purchasing business advertisements (KES 2,500+)"}),e.jsx("li",{children:"• Enterprise tier: Unlocked by purchasing premium advertisements (KES 15,000+)"}),e.jsx("li",{children:"• API access renews automatically with your advertisement subscription"})]})]})]})]})})]})})]})},Jm=()=>{const[s,t]=l.useState(!1),[a,r]=l.useState("developer"),{user:i}=we(),c=m=>{navigator.clipboard.writeText(m),t(!0),setTimeout(()=>t(!1),2e3)},n=[{id:"starter",name:"Free Tier",price:0,currency:"KES",period:"month",requests:"30",features:["Basic market data access","County-level statistics","Standard rate limits","Community support"],popular:!1,buttonText:"Get Started Free"},{id:"developer",name:"Developer",price:2500,currency:"KES",period:"month",requests:"10,000",features:["Full market data access","Real-time price feeds","Supply chain analytics","Priority email support","API analytics dashboard"],popular:!0,buttonText:"Start Developer Plan"},{id:"enterprise",name:"Enterprise",price:15e3,currency:"KES",period:"month",requests:"100,000+",features:["Unlimited API access","Custom integrations","Dedicated account manager","SLA guarantees","Custom data feeds","White-label options"],popular:!1,buttonText:"Contact Sales"}],o=[{method:"GET",endpoint:"/api/v1/supply-chain/farmers",description:"Retrieve farmer data across Kenya with location and crop information",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/farmers?county=nakuru'},{method:"GET",endpoint:"/api/v1/supply-chain/markets",description:"Access real-time market prices and demand data for agricultural commodities",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/markets?commodity=maize'},{method:"GET",endpoint:"/api/v1/supply-chain/logistics",description:"Transportation and warehouse data for supply chain optimization",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/logistics?type=transport'},{method:"GET",endpoint:"/api/v1/supply-chain/analytics",description:"Advanced analytics and forecasting for agricultural supply chains",example:'curl -H "Authorization: Bearer YOUR_API_KEY" https://api.agriconnect.co.ke/v1/supply-chain/analytics?metric=price-forecast'}],h=[{title:"Agribusiness Integration",description:"Integrate real-time market data into your agricultural business applications",icon:e.jsx(Ye,{className:"h-8 w-8 text-blue-600"}),revenue:"KES 500K+/month"},{title:"Fintech Agriculture",description:"Build financial products for farmers using our verified agricultural data",icon:e.jsx(De,{className:"h-8 w-8 text-green-600"}),revenue:"KES 1M+/month"},{title:"Logistics Optimization",description:"Optimize transportation routes and costs using our supply chain APIs",icon:e.jsx(je,{className:"h-8 w-8 text-orange-600"}),revenue:"KES 300K+/month"},{title:"Research & Analytics",description:"Access comprehensive datasets for agricultural research and analysis",icon:e.jsx(Us,{className:"h-8 w-8 text-purple-600"}),revenue:"KES 200K+/month"}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Supply Chain API Platform"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto mb-4",children:"Monetized access to Kenya's most comprehensive agricultural supply chain data and analytics"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx(M,{className:"bg-green-100 text-green-800",children:"Live API ✅"}),e.jsx(M,{className:"bg-blue-100 text-blue-800",children:"99.9% Uptime"}),e.jsx(M,{className:"bg-purple-100 text-purple-800",children:"Enterprise Ready"}),e.jsx(M,{className:"bg-orange-100 text-orange-800",children:"Hosted: Supabase Edge Functions"})]}),i&&e.jsxs("div",{className:"text-sm text-muted-foreground mb-4",children:["Signed in as: ",i.email]})]}),e.jsx("div",{className:"mb-8 max-w-4xl mx-auto",children:e.jsx(w,{className:"border-green-200 bg-green-50",children:e.jsxs(C,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ts,{className:"h-6 w-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"API Security Status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:"✅ Authentication"}),e.jsx("div",{className:"text-green-600",children:"API Key validation active"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:"✅ Rate Limiting"}),e.jsx("div",{className:"text-green-600",children:"Per-tier limits enforced"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:"✅ Monitoring"}),e.jsx("div",{className:"text-green-600",children:"Usage tracking enabled"})]})]})]})})}),e.jsxs("main",{className:"py-8 px-4 md:px-6 max-w-7xl mx-auto",children:[e.jsxs(ue,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(me,{className:"grid grid-cols-4 w-full max-w-2xl mx-auto",children:[e.jsx(R,{value:"overview",children:"Overview"}),e.jsx(R,{value:"pricing",children:"Pricing"}),e.jsx(R,{value:"endpoints",children:"API Docs"}),e.jsx(R,{value:"examples",children:"Examples"})]}),e.jsxs(B,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(w,{children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx(Ie,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"47"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Counties Covered"})]})}),e.jsx(w,{children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx(ee,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"50K+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Registered Farmers"})]})}),e.jsx(w,{children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx(Rt,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"2M+"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"API Calls/Month"})]})}),e.jsx(w,{children:e.jsxs(C,{className:"p-6 text-center",children:[e.jsx(De,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"99.9%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"API Uptime"})]})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Revenue-Generating Use Cases"})}),e.jsx(C,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map((m,p)=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[m.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:m.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:m.description}),e.jsxs(M,{variant:"outline",className:"text-green-600 border-green-200",children:["Revenue Potential: ",m.revenue]})]})]})},p))})})]})]}),e.jsxs(B,{value:"pricing",className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Choose Your API Plan"}),e.jsx("p",{className:"text-muted-foreground",children:"Updated pricing with new request limits"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.map(m=>e.jsxs(w,{className:`relative ${m.popular?"border-green-500 shadow-lg":""}`,children:[m.popular&&e.jsx(M,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-green-600",children:"Most Popular"}),e.jsxs(k,{className:"text-center",children:[e.jsx(S,{children:m.name}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[m.currency," ",m.price.toLocaleString()]}),e.jsxs("span",{className:"text-muted-foreground",children:["/",m.period]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Up to ",m.requests," API requests"]})]}),e.jsxs(C,{children:[e.jsx("ul",{className:"space-y-2 mb-6",children:m.features.map((p,d)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(qe,{className:"h-4 w-4 text-green-500"}),p]},d))}),e.jsx(N,{className:"w-full",variant:m.popular?"default":"outline",onClick:()=>r(m.id),children:m.buttonText})]})]},m.id))})]}),e.jsx(B,{value:"endpoints",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"API Endpoints"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete reference for our supply chain API"})]}),e.jsx(C,{children:e.jsx("div",{className:"space-y-4",children:o.map((m,p)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{variant:"secondary",className:"bg-green-100 text-green-800",children:m.method}),e.jsx("code",{className:"text-sm font-mono",children:m.endpoint})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:m.description}),e.jsx("div",{className:"bg-muted p-3 rounded text-sm font-mono overflow-x-auto",children:m.example}),e.jsxs(N,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>c(m.example),children:[s?e.jsx(qe,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"}),"Copy Example"]})]},p))})})]})}),e.jsxs(B,{value:"examples",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"JavaScript/Node.js"})}),e.jsx(C,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("pre",{className:"text-sm overflow-auto",children:`const response = await fetch(
  'https://api.agriconnect.co.ke/v1/supply-chain/farmers',
  {
    headers: {
      'Authorization': 'Bearer YOUR_API_KEY',
      'Content-Type': 'application/json'
    }
  }
);

const farmers = await response.json();
console.log(\`Found \${farmers.length} farmers\`);`})})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Python"})}),e.jsx(C,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("pre",{className:"text-sm overflow-auto",children:`import requests

headers = {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.agriconnect.co.ke/v1/supply-chain/markets',
    headers=headers
)

markets = response.json()
print(f"Found {len(markets)} markets")`})})})]})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Revenue Integration Example"})}),e.jsx(C,{children:e.jsx("div",{className:"bg-muted p-4 rounded-md",children:e.jsx("pre",{className:"text-sm overflow-auto",children:`// Example: Building a profitable agritech app
const buildProfitableApp = async () => {
  // Get market data for price predictions
  const markets = await agriConnectAPI.getMarkets();
  
  // Get farmer data for targeted services
  const farmers = await agriConnectAPI.getFarmers();
  
  // Build premium features with our data
  const premiumInsights = await agriConnectAPI.getAnalytics();
  
  // Monetize with subscription model
  return {
    monthlyRevenue: 'KES 500,000+',
    userBase: farmers.length,
    features: premiumInsights
  };
};`})})})]})]})]}),e.jsx(w,{className:"mt-12 bg-gradient-to-r from-green-50 to-blue-50",children:e.jsxs(C,{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Ready to Build the Future of Agriculture?"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Join hundreds of developers building profitable agricultural applications with our comprehensive API platform"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(N,{size:"lg",className:"bg-green-600 hover:bg-green-700",children:"Start Building Today"}),e.jsx(N,{size:"lg",variant:"outline",children:"Contact Enterprise Sales"})]})]})})]})]})},ln=l.createContext(null);function Jt(){const s=l.useContext(ln);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const cn=l.forwardRef(({orientation:s="horizontal",opts:t,setApi:a,plugins:r,className:i,children:c,...n},o)=>{const[h,m]=Bl({...t,axis:s==="horizontal"?"x":"y"},r),[p,d]=l.useState(!1),[u,x]=l.useState(!1),f=l.useCallback(y=>{y&&(d(y.canScrollPrev()),x(y.canScrollNext()))},[]),g=l.useCallback(()=>{m==null||m.scrollPrev()},[m]),v=l.useCallback(()=>{m==null||m.scrollNext()},[m]),j=l.useCallback(y=>{y.key==="ArrowLeft"?(y.preventDefault(),g()):y.key==="ArrowRight"&&(y.preventDefault(),v())},[g,v]);return l.useEffect(()=>{!m||!a||a(m)},[m,a]),l.useEffect(()=>{if(m)return f(m),m.on("reInit",f),m.on("select",f),()=>{m==null||m.off("select",f)}},[m,f]),e.jsx(ln.Provider,{value:{carouselRef:h,api:m,opts:t,orientation:s||((t==null?void 0:t.axis)==="y"?"vertical":"horizontal"),scrollPrev:g,scrollNext:v,canScrollPrev:p,canScrollNext:u},children:e.jsx("div",{ref:o,onKeyDownCapture:j,className:z("relative",i),role:"region","aria-roledescription":"carousel",...n,children:c})})});cn.displayName="Carousel";const on=l.forwardRef(({className:s,...t},a)=>{const{carouselRef:r,orientation:i}=Jt();return e.jsx("div",{ref:r,className:"overflow-hidden",children:e.jsx("div",{ref:a,className:z("flex",i==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...t})})});on.displayName="CarouselContent";const dn=l.forwardRef(({className:s,...t},a)=>{const{orientation:r}=Jt();return e.jsx("div",{ref:a,role:"group","aria-roledescription":"slide",className:z("min-w-0 shrink-0 grow-0 basis-full",r==="horizontal"?"pl-4":"pt-4",s),...t})});dn.displayName="CarouselItem";const mn=l.forwardRef(({className:s,variant:t="outline",size:a="icon",...r},i)=>{const{orientation:c,scrollPrev:n,canScrollPrev:o}=Jt();return e.jsxs(N,{ref:i,variant:t,size:a,className:z("absolute  h-8 w-8 rounded-full",c==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!o,onClick:n,...r,children:[e.jsx(Xr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});mn.displayName="CarouselPrevious";const un=l.forwardRef(({className:s,variant:t="outline",size:a="icon",...r},i)=>{const{orientation:c,scrollNext:n,canScrollNext:o}=Jt();return e.jsxs(N,{ref:i,variant:t,size:a,className:z("absolute h-8 w-8 rounded-full",c==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!o,onClick:n,...r,children:[e.jsx(Vs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});un.displayName="CarouselNext";const Zm=({partners:s})=>{const[t,a]=l.useState([]),r=[{id:"1",company_name:"Kenya Seed Company",logo_url:"https://via.placeholder.com/200x100?text=Kenya+Seed+Co",website:"https://kenyaseed.com",description:"Leading seed supplier in East Africa"},{id:"2",company_name:"Equity Bank",logo_url:"https://via.placeholder.com/200x100?text=Equity+Bank",website:"https://equitybank.co.ke",description:"Agricultural financing partner"},{id:"3",company_name:"Safaricom",logo_url:"https://via.placeholder.com/200x100?text=Safaricom",website:"https://safaricom.co.ke",description:"M-Pesa integration partner"},{id:"4",company_name:"Ministry of Agriculture",logo_url:"https://via.placeholder.com/200x100?text=Ministry+Agric",website:"https://kilimo.go.ke",description:"Government strategic partner"},{id:"5",company_name:"Kenya Agricultural Research",logo_url:"https://via.placeholder.com/200x100?text=KALRO",website:"https://kalro.org",description:"Research and development partner"},{id:"6",company_name:"Twiga Foods",logo_url:"https://via.placeholder.com/200x100?text=Twiga+Foods",website:"https://twiga.com",description:"Distribution network partner"}];l.useEffect(()=>{a(s&&s.length>0?s:r)},[s]);const i=Ms.useRef(Ul({delay:3e3,stopOnInteraction:!0}));return!t||t.length===0?null:e.jsx("section",{className:"py-12 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Our Trusted Partners"}),e.jsx("p",{className:"text-muted-foreground",children:"Working together to transform agriculture in Kenya"})]}),e.jsxs(cn,{plugins:[i.current],className:"w-full",onMouseEnter:i.current.stop,onMouseLeave:i.current.reset,children:[e.jsx(on,{className:"-ml-2 md:-ml-4",children:t.map(c=>e.jsx(dn,{className:"pl-2 md:pl-4 md:basis-1/2 lg:basis-1/3",children:e.jsx(w,{className:"hover:shadow-lg transition-shadow h-full",children:e.jsxs(C,{className:"p-6 flex flex-col items-center justify-center h-full",children:[c.logo_url?e.jsx("img",{src:c.logo_url,alt:c.company_name,className:"h-20 w-auto object-contain mb-4",onError:n=>{n.currentTarget.src=`https://via.placeholder.com/200x100?text=${encodeURIComponent(c.company_name)}`}}):e.jsx("div",{className:"h-20 w-full bg-muted rounded flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-lg font-bold text-muted-foreground",children:c.company_name})}),e.jsx("h3",{className:"font-semibold text-lg text-center mb-2",children:c.company_name}),c.description&&e.jsx("p",{className:"text-sm text-muted-foreground text-center line-clamp-2",children:c.description}),c.website&&e.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline mt-2",children:"Visit Website"})]})})},c.id))}),e.jsx(mn,{className:"hidden md:flex"}),e.jsx(un,{className:"hidden md:flex"})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(N,{variant:"outline",onClick:()=>window.location.href="/partner-with-us",children:"Become a Partner"})})]})})},Xm=()=>{const s=ve(),[t,a]=l.useState([]),[r,i]=l.useState(!0);l.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:o,error:h}=await F.from("partners").select("*").order("created_at",{ascending:!1});if(h)throw h;a(o||[])}catch(o){console.error("Error fetching partners:",o)}finally{i(!1)}},n=[{label:"Active Partners",value:t.length.toString(),icon:e.jsx(ee,{className:"h-5 w-5"})},{label:"Partner Events",value:"50+",icon:e.jsx(ka,{className:"h-5 w-5"})},{label:"Farmers Reached",value:"50,000+",icon:e.jsx(ne,{className:"h-5 w-5"})}];return e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("section",{className:"relative h-[400px] flex items-center justify-center bg-gradient-to-br from-green-700 via-green-600 to-emerald-700 py-16",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-black/10"}),e.jsxs("div",{className:"container mx-auto px-4 text-center relative z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-white drop-shadow-[0_2px_4px_rgba(0,0,0,0.6)]",children:"Our Partners"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto text-white font-medium drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]",children:"Together with our partners, we're transforming agriculture and empowering farmers across Kenya"}),e.jsxs(N,{size:"lg",className:"bg-white text-green-700 hover:bg-gray-100 font-semibold shadow-lg",onClick:()=>s("/partner-with-us"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Become a Partner"]})]})]}),e.jsx("section",{className:"py-12 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((o,h)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:o.icon})}),e.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:o.value}),e.jsx("div",{className:"text-muted-foreground",children:o.label})]},h))})})}),e.jsx(Zm,{partners:t}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Meet Our Partners"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Our partners provide essential services, funding, and support to help farmers succeed"})]}),r?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading partners..."})}):t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No partners yet. Be the first!"}),e.jsx(N,{onClick:()=>s("/partner-with-us"),children:"Become a Partner"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[o.logo_url&&e.jsx("div",{className:"mb-4 h-24 flex items-center justify-center",children:e.jsx("img",{src:o.logo_url,alt:o.company_name,className:"max-h-full max-w-full object-contain",onError:h=>{h.currentTarget.style.display="none"}})}),e.jsx(S,{className:"text-xl",children:o.company_name})]}),e.jsxs(C,{children:[o.description&&e.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:o.description}),e.jsx(be,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[o.contact_email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($e,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("a",{href:`mailto:${o.contact_email}`,className:"text-primary hover:underline break-all",children:o.contact_email})]}),o.contact_phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("a",{href:`tel:${o.contact_phone}`,className:"text-primary hover:underline",children:o.contact_phone})]}),o.website&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs("a",{href:o.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1 break-all",children:["Visit Website",e.jsx(Je,{className:"h-3 w-3"})]})]})]})]})]},o.id))})]})}),e.jsx("section",{className:"py-16 bg-primary text-primary-foreground",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Interested in Partnering?"}),e.jsx("p",{className:"text-xl mb-8 max-w-2xl mx-auto opacity-90",children:"Join our ecosystem and help transform agriculture in Kenya"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[e.jsxs(N,{size:"lg",variant:"secondary",onClick:()=>s("/partner-with-us"),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Apply Now"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsx("a",{href:"mailto:sokoconnect@tenderzville-portal.co.ke",className:"hover:underline",children:"sokoconnect@tenderzville-portal.co.ke"})]})]})]})})]})},xa=[{id:"A1",name:"A1 - Nairobi-Mombasa Highway",description:"The busiest highway connecting Nairobi to Mombasa port"},{id:"A2",name:"A2 - Nairobi-Nakuru-Eldoret Highway",description:"Northern corridor to Eldoret and Uganda border"},{id:"A3",name:"A3 - Nairobi-Naivasha-Kisumu Highway",description:"Western route to Kisumu and Lake Victoria"},{id:"A104",name:"A104 - Nairobi-Thika Superhighway",description:"Modern expressway to Central Kenya"},{id:"B3",name:"B3 - Mombasa-Malindi-Lamu Highway",description:"Coastal route connecting major beach towns"},{id:"C77",name:"C77 - Nairobi-Namanga Highway",description:"Route to Tanzania border"},{id:"A109",name:"A109 - Nairobi Southern Bypass",description:"Bypass connecting southern suburbs"}],eu=()=>{var x,f;const s=ve(),{toast:t}=X(),[a,r]=l.useState("all"),[i,c]=l.useState(""),[n,o]=l.useState([]),[h,m]=l.useState(!0);l.useEffect(()=>{const g=[{id:"1",name:"Machakos Fresh Produce",route:"A1",location:"Machakos Junction, KM 65",coordinates:"-1.5177, 37.2634",services:["Fresh Produce","Cold Storage","Bulk Orders"],products:["Tomatoes","Onions","Potatoes","Cabbages"],rating:4.5,reviews:128,phone:"+254 712 345 678",verified:!0,description:"Quality fresh produce directly from Machakos farmers"},{id:"2",name:"Athi River Grain Store",route:"A1",location:"Athi River, KM 25",coordinates:"-1.4522, 36.9781",services:["Grain Trading","Warehousing","Transport Coordination"],products:["Maize","Beans","Green Grams","Rice"],rating:4.8,reviews:95,phone:"+254 723 456 789",verified:!0,description:"Large grain warehouse serving Nairobi-Mombasa corridor"},{id:"3",name:"Nakuru Dairy Hub",route:"A2",location:"Nakuru Town, KM 160",coordinates:"-0.3031, 36.0800",services:["Dairy Products","Refrigerated Transport","Quality Testing"],products:["Milk","Yogurt","Butter","Cheese"],rating:4.7,reviews:203,phone:"+254 734 567 890",verified:!0,description:"Fresh dairy from Nakuru farms delivered daily"},{id:"4",name:"Thika Pineapple Vendors",route:"A104",location:"Thika, Blue Post Area",coordinates:"-1.0332, 37.0690",services:["Fresh Fruits","Direct Farm Sales","Wholesale"],products:["Pineapples","Avocados","Bananas"],rating:4.3,reviews:76,phone:"+254 745 678 901",verified:!1,description:"Famous for the sweetest Thika pineapples"}];setTimeout(()=>{o(g),m(!1)},800)},[]);const p=n.filter(g=>{const v=a==="all"||g.route===a,j=g.name.toLowerCase().includes(i.toLowerCase())||g.location.toLowerCase().includes(i.toLowerCase())||g.products.some(y=>y.toLowerCase().includes(i.toLowerCase()));return v&&j}),d=(g,v)=>{t({title:"Calling...",description:`Dialing ${v} at ${g}`})},u=(g,v)=>{t({title:"Opening Maps",description:`Navigating to ${v}`})};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx(Rs,{}),e.jsxs("div",{className:"container mx-auto px-4 py-6 pb-20 md:pb-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-3 flex items-center gap-2",children:[e.jsx($a,{className:"h-8 w-8 text-primary"}),"Major Routes Marketplace"]}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Find farmers, traders, and service providers along Kenya's major highways. Direct access to quality produce and services on your route."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),e.jsx(D,{placeholder:"Search vendors, products, locations...",value:i,onChange:g=>c(g.target.value),className:"pl-10"})]}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select Route"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Routes"}),xa.map(g=>e.jsx(_,{value:g.id,children:g.name},g.id))]})]})]}),a!=="all"&&e.jsx(w,{className:"mb-6 bg-primary/5 border-primary/20",children:e.jsx(C,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($l,{className:"h-5 w-5 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:(x=xa.find(g=>g.id===a))==null?void 0:x.name}),e.jsx("p",{className:"text-muted-foreground text-sm",children:(f=xa.find(g=>g.id===a))==null?void 0:f.description})]})]})})})]}),h?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading vendors..."})}):p.length===0?e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx(Oe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No vendors found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search or route selection"}),e.jsx(N,{onClick:()=>{c(""),r("all")},children:"Clear Filters"})]})}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(g=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs(S,{className:"text-lg mb-1 flex items-center gap-2",children:[g.name,g.verified&&e.jsx(M,{variant:"secondary",className:"text-xs",children:"Verified"})]}),e.jsxs(O,{className:"flex items-center gap-1 text-sm",children:[e.jsx(Z,{className:"h-3 w-3"}),g.location]})]})}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Be,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"}),e.jsx("span",{className:"font-semibold",children:g.rating}),e.jsxs("span",{className:"text-muted-foreground",children:["(",g.reviews," reviews)"]})]})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:g.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-2",children:"PRODUCTS:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.products.slice(0,4).map(v=>e.jsx(M,{variant:"outline",className:"text-xs",children:v},v))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-2",children:"SERVICES:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.services.slice(0,3).map(v=>e.jsx(M,{variant:"secondary",className:"text-xs",children:v},v))})]}),e.jsxs(M,{className:"mb-4",children:[e.jsx($a,{className:"h-3 w-3 mr-1"}),"Route ",g.route]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>d(g.phone,g.name),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Call"]}),e.jsxs(N,{variant:"default",size:"sm",onClick:()=>u(g.coordinates,g.name),children:[e.jsx(pi,{className:"h-4 w-4 mr-2"}),"Navigate"]})]})]})]},g.id))}),e.jsx(w,{className:"mt-12 bg-gradient-to-r from-primary/10 to-secondary/10",children:e.jsxs(C,{className:"pt-6 pb-6 text-center",children:[e.jsx(je,{className:"h-12 w-12 mx-auto mb-4 text-primary"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Have a Business Along a Major Route?"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get discovered by thousands of travelers and traders. List your location, products, and services."}),e.jsx(N,{size:"lg",onClick:()=>s("/auth"),children:"Add Your Business"})]})})]}),e.jsx(Qs,{})]})},su=()=>e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Data Management & Integration Strategy"}),e.jsx("p",{className:"text-muted-foreground max-w-3xl mx-auto",children:"Comprehensive overview of how AgriTender Connect handles, stores, and secures agricultural data"})]}),e.jsxs(ue,{defaultValue:"overview",className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-5",children:[e.jsx(R,{value:"overview",children:"Overview"}),e.jsx(R,{value:"sources",children:"Data Sources"}),e.jsx(R,{value:"storage",children:"Storage"}),e.jsx(R,{value:"security",children:"Security"}),e.jsx(R,{value:"apis",children:"API Integration"})]}),e.jsx(B,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5 text-blue-600"}),"Real-Time Data"]}),e.jsx(O,{children:"Live integration with government and institutional sources"})]}),e.jsx(C,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Market prices updated hourly"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Production statistics from KNBS"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Weather data integration"]})]})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5 text-green-600"}),"Data Integrity"]}),e.jsx(O,{children:"100% verified sources with transparency badges"})]}),e.jsx(C,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Government source verification"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"No fake or sample data"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Source attribution required"]})]})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-600"}),"Performance"]}),e.jsx(O,{children:"Optimized for field operations and mobile use"})]}),e.jsx(C,{children:e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Sub-second response times"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Offline capability"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Mobile-first design"]})]})})]})]})}),e.jsx(B,{value:"sources",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Verified Data Sources"}),e.jsx(O,{children:"All data is sourced from legitimate Kenyan government and institutional sources"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Kenya National Bureau of Statistics (KNBS)"}),e.jsx(M,{variant:"outline",className:"text-green-600 border-green-600",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Official agricultural census, production statistics, and economic surveys"}),e.jsxs("a",{href:"https://www.knbs.or.ke/agricultural-statistics/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"knbs.or.ke/agricultural-statistics"]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Ministry of Agriculture & Livestock Development"}),e.jsx(M,{variant:"outline",className:"text-green-600 border-green-600",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Policy updates, crop forecasts, and agricultural development programs"}),e.jsxs("a",{href:"https://kilimo.go.ke/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),"kilimo.go.ke"]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Nairobi Grain Exchange"}),e.jsx(M,{variant:"outline",className:"text-green-600 border-green-600",children:"Verified"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Real-time commodity prices and trading data"})]})]})})]})}),e.jsx(B,{value:"storage",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Vl,{className:"h-5 w-5"}),"Data Storage Architecture"]}),e.jsx(O,{children:"Enterprise-grade storage with Supabase PostgreSQL backend"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(tt,{className:"h-4 w-4 text-blue-600"}),"Primary Storage"]}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Supabase PostgreSQL database"}),e.jsx("li",{children:"• Row Level Security (RLS) enabled"}),e.jsx("li",{children:"• Automatic backups every 6 hours"}),e.jsx("li",{children:"• 99.9% uptime guarantee"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Rt,{className:"h-4 w-4 text-yellow-600"}),"Caching Layer"]}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Redis for real-time data"}),e.jsx("li",{children:"• CDN for static assets"}),e.jsx("li",{children:"• Browser caching optimization"}),e.jsx("li",{children:"• Smart cache invalidation"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Data Retention Policy"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Market Prices:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"5 years historical data"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Production Data:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"10 years for analysis"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"User Data:"}),e.jsx("br",{}),e.jsx("span",{className:"text-muted-foreground",children:"As per user preferences"})]})]})]})]})})]})}),e.jsx(B,{value:"security",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Aa,{className:"h-5 w-5 text-red-600"}),"Data Security & Privacy"]}),e.jsx(O,{children:"Enterprise-grade security protecting farmer and market data"})]}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Encryption & Access Control"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"AES-256 encryption at rest"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"TLS 1.3 for data in transit"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Row Level Security (RLS)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Multi-factor authentication"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Compliance & Auditing"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Kenya Data Protection Act compliance"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Regular security audits"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Activity logging and monitoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),"Incident response procedures"]})]})]})]})})]})}),e.jsx(B,{value:"apis",className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"API Data Integration"}),e.jsx(O,{children:"How external data is integrated, validated, and used throughout the platform"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Data Integration Pipeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold text-sm",children:"1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Data Ingestion"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Automated fetching from verified sources every hour"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-semibold text-sm",children:"2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Validation & Cleaning"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Data quality checks and format standardization"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 font-semibold text-sm",children:"3"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Storage & Indexing"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Optimized storage for fast retrieval and analysis"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-semibold text-sm",children:"4"}),e.jsxs("div",{children:[e.jsx("strong",{children:"API Distribution"}),e.jsx("br",{}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Real-time access through our monetized API platform"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Real-Time Updates"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Market prices: Every 30 minutes"}),e.jsx("li",{children:"• Weather data: Every 15 minutes"}),e.jsx("li",{children:"• Production stats: Daily"}),e.jsx("li",{children:"• Policy updates: As announced"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Data Quality Assurance"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Source verification checks"}),e.jsx("li",{children:"• Anomaly detection algorithms"}),e.jsx("li",{children:"• Historical trend validation"}),e.jsx("li",{children:"• Manual review for critical data"})]})]})]})]})})]})})]})]})});class St{static async getAllStats(t){try{let a=F.from("kilimo_statistics").select("*").order("created_at",{ascending:!1});t!=null&&t.category&&(a=a.eq("category",t.category)),t!=null&&t.county&&(a=a.eq("county",t.county)),t!=null&&t.fetch_date&&(a=a.eq("fetch_date",t.fetch_date));const{data:r,error:i}=await a;return i?(console.error("Error fetching Kilimo stats:",i),[]):r||[]}catch(a){return console.error("Error in getAllStats:",a),[]}}static async getLatestStats(t=50){try{const{data:a,error:r}=await F.from("kilimo_statistics").select("*").order("fetch_date",{ascending:!1}).order("created_at",{ascending:!1}).limit(t);return r?(console.error("Error fetching latest stats:",r),[]):a||[]}catch(a){return console.error("Error in getLatestStats:",a),[]}}static async getFetchLogs(t=20){try{const{data:a,error:r}=await F.from("data_fetch_logs").select("*").order("created_at",{ascending:!1}).limit(t);return r?(console.error("Error fetching logs:",r),[]):a||[]}catch(a){return console.error("Error in getFetchLogs:",a),[]}}static async triggerManualFetch(){try{const t=await F.functions.invoke("fetch-kilimo-data",{body:{manual:!0}});return t.error?(console.error("Error invoking function:",t.error),{success:!1,message:t.error.message||"Failed to trigger manual fetch"}):t.data||{success:!0,message:"Data fetch triggered successfully"}}catch(t){return console.error("Error triggering manual fetch:",t),{success:!1,message:"Failed to trigger manual fetch"}}}static async getAnalytics(){try{const[t,a]=await Promise.all([this.getAllStats(),this.getFetchLogs(5)]),r=new Set(t.map(n=>n.category)),i=new Set(t.map(n=>n.county)),c=t.length>0?t[0].fetch_date:"Never";return{totalRecords:t.length,categoriesCount:r.size,countiesCount:i.size,lastUpdateDate:c,recentActivity:a}}catch(t){return console.error("Error in getAnalytics:",t),{totalRecords:0,categoriesCount:0,countiesCount:0,lastUpdateDate:"Never",recentActivity:[]}}}}const tu=()=>{const[s,t]=l.useState(!0),[a,r]=l.useState(null),[i,c]=l.useState([]),[n,o]=l.useState(null),[h,m]=l.useState([]),{toast:p}=X();l.useEffect(()=>{d()},[]);const d=async()=>{var x;t(!0);try{console.log("Testing Kilimo API...");const f=await fetch("https://statistics.kilimo.go.ke/en/api/apputils/",{method:"GET",headers:{Accept:"application/json"}});if(f.ok){const g=await f.json();r({status:"success",message:`API working. Counties: ${((x=g.county)==null?void 0:x.length)||0}`,data:g}),console.log("API Response:",g)}else r({status:"error",message:`API returned ${f.status}`,data:null})}catch(f){console.error("API Test Error:",f),r({status:"error",message:"Failed to connect to API",data:null})}try{const[f,g,v]=await Promise.all([St.getLatestStats(20),St.getAnalytics(),St.getFetchLogs(10)]);c(f),o(g),m(v),console.log("Database Data:",{data:f.length,analytics:g})}catch(f){console.error("Database Error:",f)}t(!1)},u=async()=>{try{p({title:"Triggering data fetch...",description:"Please wait while we fetch new data"});const x=await St.triggerManualFetch();x.success?(p({title:"Success",description:x.message}),setTimeout(()=>d(),2e3)):p({title:"Error",description:x.message||"Failed to fetch data",variant:"destructive"})}catch(x){console.error("Manual fetch error:",x),p({title:"Error",description:"Failed to trigger data fetch",variant:"destructive"})}};return s?e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})}):e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"System Data Status Check"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time verification of API connectivity and data collection"}),e.jsxs(N,{onClick:d,className:"mt-4 mr-4",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Refresh Status"]}),e.jsxs(N,{onClick:u,variant:"outline",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),"Trigger Data Fetch"]})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[(a==null?void 0:a.status)==="success"?e.jsx(he,{className:"h-5 w-5 text-green-600"}):e.jsx(_a,{className:"h-5 w-5 text-red-600"}),"Kilimo API Status"]}),e.jsx(O,{children:"Direct connection to https://statistics.kilimo.go.ke/"})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(M,{variant:(a==null?void 0:a.status)==="success"?"default":"destructive",children:(a==null?void 0:a.status)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Message:"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a==null?void 0:a.message})]}),(a==null?void 0:a.data)&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"API Response Sample:"}),e.jsxs("pre",{className:"text-xs overflow-x-auto",children:[JSON.stringify(a.data,null,2).slice(0,500),"..."]})]}),e.jsxs("a",{href:"https://statistics.kilimo.go.ke/en/api/apputils/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 text-sm",children:["Test API Directly ",e.jsx(Je,{className:"h-4 w-4"})]})]})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"h-5 w-5 text-blue-600"}),"Database Storage Status"]}),e.jsx(O,{children:"Stored data from automatic and manual fetches"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.totalRecords)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Records"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.categoriesCount)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.countiesCount)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Counties"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.lastUpdateDate)!=="Never"?new Date(n.lastUpdateDate).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Update"})]})]}),i.length>0?e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Recent Data Sample:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Name"}),e.jsx("th",{className:"text-left p-2",children:"Category"}),e.jsx("th",{className:"text-left p-2",children:"County"}),e.jsx("th",{className:"text-left p-2",children:"Value"}),e.jsx("th",{className:"text-left p-2",children:"Date"})]})}),e.jsx("tbody",{children:i.slice(0,5).map((x,f)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:x.name}),e.jsx("td",{className:"p-2",children:e.jsx(M,{variant:"outline",children:x.category})}),e.jsx("td",{className:"p-2",children:x.county}),e.jsx("td",{className:"p-2",children:x.value}),e.jsx("td",{className:"p-2",children:new Date(x.fetch_date).toLocaleDateString()})]},f))})]})})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No data found in database. Try triggering a manual fetch."})]})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Recent Fetch Logs"}),e.jsx(O,{children:"History of data collection attempts"})]}),e.jsx(C,{children:h.length>0?e.jsx("div",{className:"space-y-3",children:h.map((x,f)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:x.status==="success"?"default":"destructive",children:x.status}),e.jsx("span",{className:"font-medium",children:x.source})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),e.jsxs("div",{className:"text-sm",children:["Records: ",x.records_count," | Time: ",x.execution_time_ms,"ms",x.error_message&&e.jsxs("div",{className:"text-red-600 mt-1",children:["Error: ",x.error_message]})]})]},f))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No fetch logs found"})})]})]})})},au=()=>{const[s,t]=l.useState({daily:!1,weekly:!1,monthly:!1,all:!1,test:!1}),[a,r]=l.useState({}),i=async h=>{t(m=>({...m,[h]:!0}));try{let m;switch(h){case"daily":m=await Ti();break;case"weekly":m=await Di();break;case"monthly":m=await Mi();break;case"all":m=await io();break;case"test":m=await no();break}r(p=>({...p,[h]:m})),m.success!==!1?Ne.success(`${h.charAt(0).toUpperCase()+h.slice(1)} job completed successfully`):Ne.error(`${h.charAt(0).toUpperCase()+h.slice(1)} job failed: ${m.message}`)}catch(m){console.error(`Error running ${h} job:`,m),Ne.error(`Error running ${h} job: ${m}`)}finally{t(m=>({...m,[h]:!1}))}},c=h=>new Date(h).toLocaleString(),n=h=>h?e.jsx("div",{className:"bg-muted p-4 rounded-md overflow-auto max-h-[400px]",children:e.jsx("pre",{className:"text-xs",children:JSON.stringify(h,null,2)})}):null,o=h=>{const m=a[h];if(!m||!m.data)return null;let p=[];return Array.isArray(m.data)&&(p=m.data.slice(0,3).map((d,u)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"font-medium",children:d.commodity}),e.jsxs("span",{className:"text-right",children:["KES ",d.price," per ",d.unit]})]},u))),p.length>0?e.jsxs("div",{className:"mt-4 border rounded-md p-3 bg-muted/30",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Latest Prices:"}),p]}):null};return e.jsxs("div",{className:"container py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Data Jobs & API Integration"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and test automated data jobs for AMIS Kenya and Kilimo statistics integration"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Daily AMIS Kenya Updates"}),e.jsx(O,{children:"Fetch latest prices from AMIS Kenya (daily updates)"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run this job to fetch the most recent commodity prices from AMIS Kenya markets."}),o("daily")]}),e.jsx(re,{children:e.jsx(N,{onClick:()=>i("daily"),disabled:s.daily,className:"w-full",children:s.daily?"Running...":"Run Daily Job"})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Weekly Kilimo Stats"}),e.jsx(O,{children:"Update agricultural statistics from Kilimo (weekly)"})]}),e.jsx(C,{children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run this job to update agricultural statistics from the Kilimo platform."})}),e.jsx(re,{children:e.jsx(N,{onClick:()=>i("weekly"),disabled:s.weekly,className:"w-full",children:s.weekly?"Running...":"Run Weekly Job"})})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Monthly Data Archive"}),e.jsx(O,{children:"Archive historical data for trend analysis"})]}),e.jsx(C,{children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Run this job to archive current data snapshots for long-term trend analysis."})}),e.jsx(re,{children:e.jsx(N,{onClick:()=>i("monthly"),disabled:s.monthly,className:"w-full",children:s.monthly?"Running...":"Run Monthly Job"})})]})]}),e.jsxs("div",{className:"mt-8 grid gap-6 md:grid-cols-2",children:[e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Run All Jobs"}),e.jsx(O,{children:"Execute all scheduled jobs at once"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This will run all automated jobs in sequence and report results."}),e.jsx(N,{onClick:()=>i("all"),disabled:s.all,className:"w-full",children:s.all?"Running All Jobs...":"Run All Jobs"})]})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Test Data Extraction"}),e.jsx(O,{children:"Test API connectivity and data extraction"})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This will test connectivity to the APIs and extract sample data to verify integration."}),e.jsx(N,{onClick:()=>i("test"),disabled:s.test,className:"w-full",variant:"secondary",children:s.test?"Testing...":"Run Extraction Test"})]})]})]}),e.jsxs(w,{className:"mt-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Job Results"}),e.jsx(O,{children:"View the results of your most recent job runs"})]}),e.jsx(C,{children:e.jsxs(ue,{defaultValue:"daily",children:[e.jsxs(me,{className:"grid grid-cols-5 mb-4",children:[e.jsx(R,{value:"daily",children:"Daily"}),e.jsx(R,{value:"weekly",children:"Weekly"}),e.jsx(R,{value:"monthly",children:"Monthly"}),e.jsx(R,{value:"all",children:"All Jobs"}),e.jsx(R,{value:"test",children:"Test"})]}),e.jsx(B,{value:"daily",children:a.daily?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{variant:a.daily.success!==!1?"default":"destructive",children:a.daily.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.daily.timestamp&&c(a.daily.timestamp)})]}),n(a.daily)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the daily job to see data here."})}),e.jsx(B,{value:"weekly",children:a.weekly?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{variant:a.weekly.success!==!1?"default":"destructive",children:a.weekly.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.weekly.timestamp&&c(a.weekly.timestamp)})]}),n(a.weekly)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the weekly job to see data here."})}),e.jsx(B,{value:"monthly",children:a.monthly?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{variant:a.monthly.success!==!1?"default":"destructive",children:a.monthly.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.monthly.timestamp&&c(a.monthly.timestamp)})]}),n(a.monthly)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the monthly job to see data here."})}),e.jsx(B,{value:"all",children:a.all?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{variant:"outline",children:"Combined Results"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.all.timestamp&&c(a.all.timestamp)})]}),n(a.all)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run all jobs to see combined data here."})}),e.jsx(B,{value:"test",children:a.test?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(M,{variant:a.test.success!==!1?"default":"destructive",children:a.test.success!==!1?"Success":"Failed"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.test.timestamp&&c(a.test.timestamp)})]}),n(a.test)]}):e.jsx("p",{className:"text-center py-6 text-muted-foreground",children:"No results yet. Run the test to see extraction results here."})})]})})]})]})},ha={name:"AgriTender Connect",version:"2.0.0",description:"Comprehensive Agricultural Platform for Kenya",api:{baseUrl:"https://api.agritender.co.ke/v1",timeout:1e4,retryAttempts:3,rateLimit:{requests:100,window:6e4}},database:{maxConnections:100,connectionTimeout:3e4,queryTimeout:15e3,retryAttempts:3},cache:{defaultTTL:3e5,maxSize:1e3,enableCompression:!0},performance:{enableLazyLoading:!0,chunkSize:50,prefetchDistance:2,virtualScrolling:!0},security:{enableCSP:!0,enableHSTS:!0,maxFileSize:10*1024*1024,allowedFileTypes:["jpg","jpeg","png","pdf","doc","docx"],sessionTimeout:24*60*60*1e3},features:{realTimeUpdates:!0,advancedAnalytics:!0,mobileApp:!0,offlineMode:!1,betaFeatures:!1},services:{amis:{baseUrl:"https://amis.kilimo.go.ke/en/api",timeout:5e3,retryAttempts:2},weather:{enabled:!0,provider:"openweather"},maps:{enabled:!0,provider:"mapbox"}}};class ru{constructor(){ye(this,"startTime",Date.now())}async checkDatabase(){const t=Date.now();try{const{data:a,error:r}=await F.from("profiles").select("count").limit(1),i=Date.now()-t;return r?{service:"database",status:"unhealthy",responseTime:i,details:r.message,timestamp:new Date}:{service:"database",status:i>1e3?"degraded":"healthy",responseTime:i,timestamp:new Date}}catch(a){return{service:"database",status:"unhealthy",responseTime:Date.now()-t,details:a instanceof Error?a.message:"Unknown error",timestamp:new Date}}}async checkExternalAPI(){const t=Date.now();try{const a=await fetch(ha.services.amis.baseUrl,{method:"HEAD",signal:AbortSignal.timeout(ha.services.amis.timeout)}),r=Date.now()-t;return{service:"external_api",status:a.ok?r>2e3?"degraded":"healthy":"unhealthy",responseTime:r,details:a.ok?void 0:`HTTP ${a.status}`,timestamp:new Date}}catch(a){return{service:"external_api",status:"unhealthy",responseTime:Date.now()-t,details:a instanceof Error?a.message:"Connection failed",timestamp:new Date}}}async checkMemoryUsage(){const t=Date.now();try{const a=performance.memory;if(!a)return{service:"memory",status:"healthy",responseTime:Date.now()-t,details:"Memory API not available",timestamp:new Date};const r=a.usedJSHeapSize/1024/1024,i=a.totalJSHeapSize/1024/1024,c=r/i*100;let n="healthy";return c>90?n="unhealthy":c>75&&(n="degraded"),{service:"memory",status:n,responseTime:Date.now()-t,details:`${r.toFixed(1)}MB / ${i.toFixed(1)}MB (${c.toFixed(1)}%)`,timestamp:new Date}}catch(a){return{service:"memory",status:"unhealthy",responseTime:Date.now()-t,details:a instanceof Error?a.message:"Memory check failed",timestamp:new Date}}}async performHealthCheck(){const t=await Promise.all([this.checkDatabase(),this.checkExternalAPI(),this.checkMemoryUsage()]),a=t.filter(c=>c.status==="healthy").length,r=t.filter(c=>c.status==="unhealthy").length;let i="healthy";return r>0?i="unhealthy":a<t.length&&(i="degraded"),{overall:i,services:t,uptime:Date.now()-this.startTime,version:ha.version}}}const iu=new ru,nu=({size:s="md",className:t,text:a})=>{const r={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"};return e.jsxs("div",{className:z("flex flex-col items-center justify-center",t),children:[e.jsx(Lt,{className:z("animate-spin text-primary",r[s])}),a&&e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:a})]})},lu=()=>{const[s,t]=l.useState(null),[a,r]=l.useState(!0),[i,c]=l.useState(null),n=async()=>{r(!0);try{const p=await iu.performHealthCheck();t(p),c(new Date)}catch(p){console.error("Health check failed:",p)}finally{r(!1)}};l.useEffect(()=>{n();const p=setInterval(n,3e4);return()=>clearInterval(p)},[]);const o=p=>{switch(p){case"healthy":return e.jsx(he,{className:"h-4 w-4 text-green-500"});case"degraded":return e.jsx(Os,{className:"h-4 w-4 text-yellow-500"});case"unhealthy":return e.jsx(_a,{className:"h-4 w-4 text-red-500"});default:return e.jsx(Os,{className:"h-4 w-4 text-gray-500"})}},h=p=>{switch(p){case"healthy":return"bg-green-100 text-green-800";case"degraded":return"bg-yellow-100 text-yellow-800";case"unhealthy":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},m=p=>{const d=Math.floor(p/1e3),u=Math.floor(d/60),x=Math.floor(u/60),f=Math.floor(x/24);return f>0?`${f}d ${x%24}h ${u%60}m`:x>0?`${x}h ${u%60}m`:u>0?`${u}m ${d%60}s`:`${d}s`};return a&&!s?e.jsx(w,{children:e.jsx(C,{className:"p-6",children:e.jsx(nu,{text:"Performing health check..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex flex-row items-center justify-between",children:[e.jsx(S,{children:"System Health Dashboard"}),e.jsxs(N,{variant:"outline",size:"sm",onClick:n,disabled:a,children:[e.jsx(dt,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]}),e.jsx(C,{children:s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o(s.overall),e.jsx("span",{className:"font-medium",children:"Overall Status"})]}),e.jsx(M,{className:h(s.overall),children:s.overall.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Version"}),e.jsx("p",{className:"font-mono text-lg",children:s.version})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime"}),e.jsx("p",{className:"font-mono text-lg",children:m(s.uptime)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-mono text-lg",children:i?i.toLocaleTimeString():"Never"})]})]})]})})]}),s&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.services.map(p=>e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-base capitalize",children:p.service.replace("_"," ")}),o(p.status)]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),e.jsx(M,{className:h(p.status),variant:"outline",children:p.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Response Time:"}),e.jsxs("span",{className:"text-sm font-mono",children:[p.responseTime,"ms"]})]}),p.details&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Details:"}),e.jsx("p",{className:"text-xs font-mono bg-muted p-1 rounded",children:p.details})]})]})})]},p.service))})]})},cu=()=>{const[s,t]=l.useState({isConnected:!1,isHealthy:!1,latency:0,lastChecked:new Date,retryCount:0}),a=l.useCallback(async()=>{const i=Date.now();try{const{data:c,error:n}=await F.from("profiles").select("count").limit(1),o=Date.now()-i;if(n)throw n;return t(h=>({...h,isConnected:!0,isHealthy:o<1e3,latency:o,lastChecked:new Date,retryCount:0})),!0}catch(c){return console.error("Supabase connection check failed:",c),t(n=>({...n,isConnected:!1,isHealthy:!1,latency:Date.now()-i,lastChecked:new Date,retryCount:n.retryCount+1})),!1}},[]),r=l.useCallback(async(i=3)=>{for(let c=0;c<i;c++){if(await a())return!0;const o=Math.min(1e3*Math.pow(2,c),1e4);await new Promise(h=>setTimeout(h,o))}return!1},[a]);return l.useEffect(()=>{a();const i=setInterval(a,3e4);return()=>clearInterval(i)},[a]),{status:s,checkConnection:a,reconnect:r}},ou=(s={enableMonitoring:!0,sampleRate:.1,reportingInterval:3e4})=>{const[t,a]=l.useState({loadTime:0,renderTime:0,memoryUsage:0,networkLatency:0}),[r,i]=l.useState(!1),c=l.useCallback(()=>{if(!s.enableMonitoring||Math.random()>s.sampleRate)return;const h=performance.getEntriesByType("navigation")[0],m=performance.memory,p={loadTime:h?h.loadEventEnd-h.loadEventStart:0,renderTime:h?h.domContentLoadedEventEnd-h.domContentLoadedEventStart:0,memoryUsage:m?m.usedJSHeapSize/1024/1024:0,networkLatency:h?h.responseEnd-h.requestStart:0};a(p),i(p.loadTime<3e3&&p.renderTime<1e3&&p.memoryUsage<100&&p.networkLatency<2e3)},[s]),n=l.useCallback(()=>{s.enableMonitoring&&console.log("Performance Metrics:",t)},[t,s.enableMonitoring]);l.useEffect(()=>{c();const h=setInterval(n,s.reportingInterval);return()=>clearInterval(h)},[c,n,s.reportingInterval]);const o=l.useCallback(()=>{"caches"in window&&caches.keys().then(h=>{h.forEach(m=>{(m.includes("old")||m.includes("v1"))&&caches.delete(m)})}),window.gc&&window.gc(),setTimeout(c,1e3)},[c]);return{metrics:t,isOptimized:r,optimizePerformance:o,measurePerformance:c}};class du{constructor(){ye(this,"sessionId");ye(this,"isProduction");ye(this,"logs",[]);ye(this,"maxLogs",1e3);this.sessionId=crypto.randomUUID(),this.isProduction=!0}createLogEntry(t,a,r){return{level:t,message:a,timestamp:new Date,context:r,sessionId:this.sessionId}}debug(t,a){const r=this.createLogEntry("DEBUG",t,a);this.isProduction||console.debug(`[${r.timestamp.toISOString()}] DEBUG: ${t}`,a),this.addToBuffer(r)}info(t,a){const r=this.createLogEntry("INFO",t,a);console.info(`[${r.timestamp.toISOString()}] INFO: ${t}`,a),this.addToBuffer(r)}warn(t,a){const r=this.createLogEntry("WARN",t,a);console.warn(`[${r.timestamp.toISOString()}] WARN: ${t}`,a),this.addToBuffer(r),this.isProduction&&this.sendToExternalService(r)}error(t,a,r){const i={...r,error:a?{name:a.name,message:a.message,stack:a.stack}:void 0},c=this.createLogEntry("ERROR",t,i);console.error(`[${c.timestamp.toISOString()}] ERROR: ${t}`,a,r),this.addToBuffer(c),this.isProduction&&this.sendToExternalService(c)}addToBuffer(t){this.logs.push(t),this.logs.length>this.maxLogs&&this.logs.shift()}async sendToExternalService(t){try{await fetch("/api/logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(a){console.error("Failed to send log to external service:",a)}}startTimer(t){const a=performance.now();return()=>{const r=performance.now()-a;this.info(`Performance: ${t}`,{duration:`${r.toFixed(2)}ms`})}}trackUserAction(t,a){this.info(`User Action: ${t}`,{action:t,properties:a,url:window.location.href,userAgent:navigator.userAgent})}trackApiCall(t,a,r,i){const c=r>=400?"ERROR":r>=300?"WARN":"INFO";this[c.toLowerCase()](`API Call: ${t} ${a}`,{method:t,url:a,status:r,duration:`${i}ms`})}getRecentLogs(t=50){return this.logs.slice(-t)}clearLogs(){this.logs=[]}}const mu=new du,uu=()=>{const{status:s}=cu(),{metrics:t,isOptimized:a}=ou(),[r,i]=l.useState({totalUsers:0,activeUsers:0,totalTrades:0,systemUptime:0});l.useEffect(()=>{i({totalUsers:1250,activeUsers:89,totalTrades:3420,systemUptime:Date.now()-new Date("2025-01-01").getTime()})},[]);const c=o=>{const h=Math.floor(o/864e5),m=Math.floor(o%(1e3*60*60*24)/(1e3*60*60));return`${h}d ${m}h`},n=o=>e.jsx(M,{variant:o?"default":"destructive",children:o?"Good":"Issues"});return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"System Status Dashboard"}),e.jsx(N,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(w,{children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Us,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Database"})]}),n(s.isHealthy)]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Latency: ",s.latency,"ms"]})]})}),e.jsx(w,{children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Rt,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"font-medium",children:"Performance"})]}),n(a)]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Memory: ",t.memoryUsage.toFixed(1),"MB"]})]})}),e.jsx(w,{children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"font-medium",children:"Users"})]}),e.jsx("span",{className:"font-bold",children:r.activeUsers})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Total: ",r.totalUsers.toLocaleString()]})]})}),e.jsx(w,{children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{className:"font-medium",children:"Uptime"})]}),e.jsx("span",{className:"font-bold",children:c(r.systemUptime)})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Trades: ",r.totalTrades.toLocaleString()]})]})})]}),e.jsxs(ue,{defaultValue:"health",className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-4",children:[e.jsx(R,{value:"health",children:"Health Check"}),e.jsx(R,{value:"performance",children:"Performance"}),e.jsx(R,{value:"logs",children:"System Logs"}),e.jsx(R,{value:"analytics",children:"Analytics"})]}),e.jsx(B,{value:"health",children:e.jsx(lu,{})}),e.jsx(B,{value:"performance",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Performance Metrics"})}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Load Times"}),e.jsxs("p",{className:"text-sm",children:["Page Load: ",t.loadTime,"ms"]}),e.jsxs("p",{className:"text-sm",children:["Render Time: ",t.renderTime,"ms"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Network"}),e.jsxs("p",{className:"text-sm",children:["Latency: ",t.networkLatency,"ms"]}),e.jsxs("p",{className:"text-sm",children:["Status: ",a?"Optimized":"Needs Attention"]})]})]})})]})}),e.jsx(B,{value:"logs",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Recent System Logs"})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:mu.getRecentLogs(20).map((o,h)=>e.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[e.jsx(M,{variant:o.level==="ERROR"?"destructive":o.level==="WARN"?"secondary":"outline",className:"text-xs",children:o.level}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{children:o.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.timestamp.toLocaleString()})]})]},h))})})]})}),e.jsx(B,{value:"analytics",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"System Analytics"})}),e.jsx(C,{children:e.jsx("p",{className:"text-muted-foreground",children:"Detailed analytics and monitoring coming soon. This will include user behavior, API usage, and performance trends."})})]})})]})]})};class xu extends l.Component{constructor(a){super(a);ye(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorId:""})});ye(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorId:""}}static getDerivedStateFromError(a){const r=`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return{hasError:!0,error:a,errorId:r}}componentDidCatch(a,r){console.error("Error Boundary Caught:",{error:a.message,stack:a.stack,componentStack:r.componentStack,errorId:this.state.errorId}),fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errorId:this.state.errorId,message:a.message,stack:a.stack,componentStack:r.componentStack,url:window.location.href,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})}).catch(()=>{})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-50",children:e.jsxs(w,{className:"w-full max-w-md",children:[e.jsxs(k,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 text-red-500",children:e.jsx(fe,{className:"h-full w-full"})}),e.jsx(S,{className:"text-xl font-semibold text-gray-900",children:"Something went wrong"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"We're sorry! An unexpected error occurred. Our team has been notified."}),!1,e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Error ID: ",this.state.errorId]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs(N,{onClick:this.handleRetry,className:"flex-1",variant:"outline",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Try Again"]}),e.jsxs(N,{onClick:this.handleGoHome,className:"flex-1",children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})]})}):this.props.children}}const hu=()=>e.jsx(xu,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(se,{}),e.jsx("main",{children:e.jsx(uu,{})})]})}),pu=Wl,at=l.forwardRef(({className:s,...t},a)=>e.jsx(Hl,{ref:a,className:z("border-b",s),...t}));at.displayName="AccordionItem";const rt=l.forwardRef(({className:s,children:t,...a},r)=>e.jsx(Gl,{className:"flex",children:e.jsxs(gi,{ref:r,className:z("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...a,children:[t,e.jsx(zt,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));rt.displayName=gi.displayName;const it=l.forwardRef(({className:s,children:t,...a},r)=>e.jsx(ji,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e.jsx("div",{className:z("pb-4 pt-0",s),children:t})}));it.displayName=ji.displayName;const gu=()=>e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Frequently Asked Questions"})}),e.jsx(C,{children:e.jsxs(pu,{type:"single",collapsible:!0,children:[e.jsxs(at,{value:"item-1",children:[e.jsx(rt,{children:"How do I register as a farmer?"}),e.jsx(it,{children:'You can register by clicking the sign-up button and selecting "Farmer" as your account type.'})]}),e.jsxs(at,{value:"item-2",children:[e.jsx(rt,{children:"How do I list my products for sale?"}),e.jsx(it,{children:'Go to your Farmer Portal and use the "Add Product" tab to list your agricultural products.'})]}),e.jsxs(at,{value:"item-3",children:[e.jsx(rt,{children:"Is there a mobile app available?"}),e.jsx(it,{children:"Yes, AgriConnect is available as a mobile app for both Android and iOS devices."})]}),e.jsxs(at,{value:"item-4",children:[e.jsx(rt,{children:"How do I contact customer support?"}),e.jsx(it,{children:"You can contact our support team through the Contact page or email support@agriconnect.com"})]})]})})]})}),ju=()=>e.jsx("div",{className:"container mx-auto py-8 max-w-4xl",children:e.jsxs(w,{children:[e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ts,{className:"h-8 w-8 text-green-600"}),e.jsx(S,{className:"text-3xl",children:"Privacy Policy - AgriConnect"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:"outline",children:"Effective: January 1, 2024"}),e.jsxs(M,{variant:"outline",children:["Last Updated: ",new Date().toLocaleDateString()]}),e.jsx(M,{variant:"outline",children:"Version 2.1"})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(xt,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-blue-800",children:"This Privacy Policy complies with Kenya's Data Protection Act (2019) and international standards. By using AgriConnect, you agree to these terms and the collection and use of your information as described."})]})]})})]}),e.jsxs(C,{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(ws,{className:"mr-2 h-6 w-6 text-green-600"}),"1. Information We Collect"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Personal Information"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Account Data:"})," Full name, email address, phone number, location (county/region)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Profile Information:"})," Farm type, farm size, experience years, specialization, bio"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Contact Details:"})," Business information for service providers, contact preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Authentication Data:"})," Login credentials, session information, authentication tokens"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Agricultural Data"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Crop Information:"})," Types of crops, planting schedules, harvest data, yield records"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Production Data:"})," Quantities, quality grades, organic certifications, storage conditions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Market Activity:"})," Pricing information, trade history, market preferences"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Farm Management:"})," Task tracking, inventory management, financial records"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Usage and Technical Data"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Device Information:"})," Browser type, operating system, device identifiers"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Usage Analytics:"})," Pages visited, features used, time spent, interaction patterns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Location Data:"})," GPS coordinates (with permission), county/regional data for market matching"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"API Usage:"})," Request logs, response times, error rates for service optimization"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[e.jsx(fe,{className:"mr-2 h-5 w-5 text-amber-600"}),"External Data Sources"]}),e.jsx("p",{className:"text-sm mb-2",children:"We collect agricultural data from legitimate Kenyan government sources:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Kilimo Statistics API:"})," County agricultural data, crop statistics"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Kenya National Bureau of Statistics:"})," Market prices, production data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weather Services:"})," Climate data, weather alerts for farming decisions"]})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Yl,{className:"mr-2 h-6 w-6 text-green-600"}),"2. How We Use Your Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Platform Services"})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"• Connect farmers with buyers and service providers"}),e.jsx("p",{children:"• Provide real-time market prices and forecasts"}),e.jsx("p",{children:"• Facilitate transportation and logistics matching"}),e.jsx("p",{children:"• Enable warehouse booking and storage solutions"}),e.jsx("p",{children:"• Support quality control and certification tracking"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"AI-Powered Features"})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"• Provide personalized crop recommendations"}),e.jsx("p",{children:"• Analyze market trends and price predictions"}),e.jsx("p",{children:"• Offer farming advice and best practices"}),e.jsx("p",{children:"• Support pest and disease identification"}),e.jsx("p",{children:"• Optimize supply chain operations"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Communication"})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"• Send market opportunity notifications"}),e.jsx("p",{children:"• Provide weather alerts and farming tips"}),e.jsx("p",{children:"• Deliver customer support and assistance"}),e.jsx("p",{children:"• Share platform updates and new features"}),e.jsx("p",{children:"• Facilitate user-to-user communications"})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Legal Compliance"})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"• Comply with Kenyan agricultural regulations"}),e.jsx("p",{children:"• Maintain transaction records as required by law"}),e.jsx("p",{children:"• Support tax reporting and business compliance"}),e.jsx("p",{children:"• Respond to legal requests and court orders"}),e.jsx("p",{children:"• Prevent fraud and ensure platform security"})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Aa,{className:"mr-2 h-6 w-6 text-green-600"}),"3. Data Sharing and Disclosure"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"WE DO NOT SELL YOUR PERSONAL DATA"}),e.jsx("p",{className:"text-sm text-red-800",children:"AgriConnect never sells, trades, or rents your personal information to third parties for marketing purposes. Your data is used solely to improve our agricultural platform and connect you with legitimate opportunities."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Limited Sharing Scenarios:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Service Providers"}),e.jsx("p",{className:"text-sm",children:"Trusted partners who help operate our platform (Supabase for data storage, SMS providers, payment processors)"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Platform Users"}),e.jsx("p",{className:"text-sm",children:"Basic profile information visible to other users for legitimate agricultural business purposes"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Legal Requirements"}),e.jsx("p",{className:"text-sm",children:"When required by Kenyan law, court orders, or regulatory authorities (KNBS, Ministry of Agriculture)"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Aggregated Data"}),e.jsx("p",{className:"text-sm",children:"Anonymous, aggregated agricultural trends shared with research institutions for farming improvements"})]})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"4. Data Security Measures"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Technical Safeguards"})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Encryption:"})," AES-256 for sensitive data at rest"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Transmission:"})," TLS 1.3 for all communications"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Authentication:"})," Multi-factor authentication (SMS/Email)"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Access Control:"})," Role-based permissions and audit logs"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Database Security:"})," Row-level security and SQL injection protection"]})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Operational Security"})}),e.jsxs(C,{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"• Regular security audits and vulnerability assessments"}),e.jsx("p",{children:"• Employee access controls and security training"}),e.jsx("p",{children:"• Incident response and breach notification procedures"}),e.jsx("p",{children:"• Compliance with ISO 27001 security standards"}),e.jsx("p",{children:"• Regular backups and disaster recovery procedures"})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"5. Your Rights and Choices"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Data Protection Rights (Kenya Data Protection Act 2019)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Access Rights"}),e.jsx("p",{className:"text-sm",children:"Request a copy of all personal data we hold about you"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Correction Rights"}),e.jsx("p",{className:"text-sm",children:"Update or correct any inaccurate information"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Deletion Rights"}),e.jsx("p",{className:"text-sm",children:"Request deletion of your account and associated data"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Portability Rights"}),e.jsx("p",{className:"text-sm",children:"Export your data in a machine-readable format"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Communication Preferences"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Manage notification settings in your account preferences"}),e.jsx("li",{children:"Opt-out of marketing communications via email or SMS"}),e.jsx("li",{children:"Control weather alerts and price notifications"}),e.jsx("li",{children:"Customize AI assistant interaction preferences"})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"6. Data Retention Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Active Accounts"}),e.jsx("p",{className:"text-sm",children:"Data retained while account is active and for 2 years after last login"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Transaction Records"}),e.jsx("p",{className:"text-sm",children:"Kept for 7 years for tax compliance and agricultural business records"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Communication Logs"}),e.jsx("p",{className:"text-sm",children:"Retained for 1 year for customer support and dispute resolution"})]}),e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h4",{className:"font-medium",children:"Aggregated Analytics"}),e.jsx("p",{className:"text-sm",children:"Anonymous data may be retained indefinitely for agricultural research"})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"7. Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Data Protection Officer"})}),e.jsxs(C,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," privacy@agriconnect.co.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +254 700 000 000"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," Nairobi, Kenya"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Time:"})," 48-72 hours"]})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Regulatory Authority"})}),e.jsxs(C,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Office:"})," Data Protection Commissioner"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," P.O. Box 66156 – 00800, Nairobi"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," info@odpc.go.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Website:"})," www.odpc.go.ke"]})]})]})]})]}),e.jsx("div",{className:"mt-8 p-4 bg-green-50 border border-green-200 rounded-lg text-center",children:e.jsx("p",{className:"text-sm font-medium text-green-900",children:"By using AgriConnect, you acknowledge that you have read, understood, and agree to this Privacy Policy. This policy is governed by Kenyan data protection laws and international best practices."})})]})]})}),fu=()=>e.jsx("div",{className:"container mx-auto py-8 max-w-4xl",children:e.jsxs(w,{children:[e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ql,{className:"h-8 w-8 text-blue-600"}),e.jsx(S,{className:"text-3xl",children:"Terms of Service - AgriConnect"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:"outline",children:"Effective: January 1, 2024"}),e.jsxs(M,{variant:"outline",children:["Last Updated: ",new Date().toLocaleDateString()]}),e.jsx(M,{variant:"outline",children:"Version 2.2"})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Share Our Terms"}),e.jsx("p",{className:"text-sm text-blue-800",children:"Help other farmers understand AgriConnect's commitment to transparency and data protection."})]}),e.jsx(Ji,{title:"AgriConnect Terms of Service",text:"AgriConnect is committed to transparent agricultural technology. Our Terms of Service outline our commitment to farmers, data protection, and open agriculture policies in Kenya.",size:"sm"})]})}),e.jsx("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(fe,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900",children:"Legal Agreement"}),e.jsx("p",{className:"text-sm text-red-800",children:"These Terms of Service constitute a legally binding agreement between you and AgriConnect. By accessing or using our platform, you agree to be bound by these terms and all applicable laws."})]})]})})]}),e.jsxs(C,{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Ns,{className:"mr-2 h-6 w-6 text-blue-600"}),"1. Acceptance of Terms"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm leading-relaxed",children:"By accessing, browsing, or using the AgriConnect platform (website, mobile application, or API services), you acknowledge that you have read, understood, and agree to be bound by these Terms of Service and our Privacy Policy."}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Platform Scope"}),e.jsx("p",{className:"text-sm",children:"AgriConnect is an agricultural technology platform that connects farmers, buyers, service providers, and other stakeholders in Kenya's agricultural ecosystem. We facilitate connections but do not control or guarantee the quality, legality, or availability of products or services offered by users."})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(fe,{className:"mr-2 h-4 w-4 text-amber-600"}),"User Eligibility"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"You must be at least 18 years old to use AgriConnect"}),e.jsx("li",{children:"You must have legal capacity to enter into binding agreements"}),e.jsx("li",{children:"You must comply with all applicable laws in Kenya and your jurisdiction"}),e.jsx("li",{children:"Business users must have proper registration and licensing as required by law"})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Us,{className:"mr-2 h-6 w-6 text-blue-600"}),"2. Open Data Policy Compliance"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-green-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Kenya Ministry of Agriculture Open Data Adherence"}),e.jsx("p",{className:"text-sm mb-3",children:"AgriConnect fully adheres to the Kenya Ministry of Agriculture and Livestock Development's Open Data Policy, ensuring transparent, accessible, and responsible agricultural data sharing."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"Data Quality Standards"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Complete data without privacy violations"}),e.jsx("li",{children:"Primary data traceable to source"}),e.jsx("li",{children:"Timely updates preserving data value"}),e.jsx("li",{children:"Accessible to widest user range"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"Technical Standards"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Machine-processable structured data"}),e.jsx("li",{children:"Non-discriminatory access policies"}),e.jsx("li",{children:"License-free, non-proprietary formats"}),e.jsx("li",{children:"Reviewable with designated contacts"})]})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Our Data Commitments"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Open by Default:"})," Non-sensitive agricultural data freely available"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"High-Quality APIs:"})," Free, reliable application programming interfaces"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Government Partnerships:"})," Collaboration with MoA&LD and counties"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Security Standards:"})," Highest privacy and security protections"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Systematic Renewal:"})," Regular data updates and historical preservation"]})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(ee,{className:"mr-2 h-6 w-6 text-blue-600"}),"3. User Responsibilities and Conduct"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Account Security"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm",children:[e.jsx("li",{children:"Maintain the confidentiality of your account credentials"}),e.jsx("li",{children:"Notify us immediately of any unauthorized access to your account"}),e.jsx("li",{children:"Provide accurate, current, and complete information during registration"}),e.jsx("li",{children:"Update your information promptly when changes occur"}),e.jsx("li",{children:"You are responsible for all activities that occur under your account"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Acceptable Use"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-700 mb-2",children:"✓ Permitted Activities"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Legitimate agricultural trading and business"}),e.jsx("li",{children:"Seeking or providing agricultural services"}),e.jsx("li",{children:"Sharing educational farming content"}),e.jsx("li",{children:"Participating in community discussions"}),e.jsx("li",{children:"Using APIs for business integration"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"✗ Prohibited Activities"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Fraudulent or deceptive practices"}),e.jsx("li",{children:"Selling illegal or harmful products"}),e.jsx("li",{children:"Harassment or abusive behavior"}),e.jsx("li",{children:"Spam or unsolicited communications"}),e.jsx("li",{children:"Unauthorized data scraping or API abuse"})]})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center",children:[e.jsx(fe,{className:"mr-2 h-5 w-5 text-red-600"}),"Strictly Prohibited Activities"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Money laundering or financial crimes"}),e.jsx("li",{children:"Tax evasion or fraudulent reporting"}),e.jsx("li",{children:"Selling counterfeit agricultural products"}),e.jsx("li",{children:"Misrepresenting crop quality or certifications"})]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Violating intellectual property rights"}),e.jsx("li",{children:"Distributing malware or viruses"}),e.jsx("li",{children:"Attempting to hack or compromise the platform"}),e.jsx("li",{children:"Creating multiple accounts to circumvent restrictions"})]})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(ts,{className:"mr-2 h-6 w-6 text-blue-600"}),"4. Platform Disclaimers and Limitations"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-yellow-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Platform Role Disclaimer"}),e.jsxs("p",{className:"text-sm mb-2",children:[e.jsx("strong",{children:"AgriConnect is a technology platform that facilitates connections."})," We do not:"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Own, sell, or directly control any agricultural products or services"}),e.jsx("li",{children:"Guarantee the quality, safety, legality, or availability of user offerings"}),e.jsx("li",{children:"Manage farming operations or provide direct agricultural services"}),e.jsx("li",{children:"Act as a financial institution or provide banking services"}),e.jsx("li",{children:"Assume responsibility for user transactions or business relationships"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Data and Information Disclaimer"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Market Prices:"})," Provided for informational purposes only; not investment advice"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Weather Data:"})," Based on third-party sources; users should verify independently"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Agricultural Advice:"})," AI-generated suggestions are not professional consultations"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"External APIs:"})," We integrate with Kilimo Statistics API and other government sources but cannot guarantee their accuracy"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[e.jsx(fe,{className:"mr-2 h-4 w-4 text-red-600"}),"Service Availability"]}),e.jsx("p",{className:"text-sm",children:"While we strive for 99.9% uptime, we cannot guarantee uninterrupted service. The platform may be temporarily unavailable due to maintenance, updates, or technical issues. We are not liable for losses resulting from service interruptions."})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(At,{className:"mr-2 h-6 w-6 text-blue-600"}),"5. Limitation of Liability"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Maximum Liability Cap"}),e.jsx("p",{className:"text-sm",children:e.jsx("strong",{children:"AgriConnect's total liability to you for any claims arising from your use of the platform shall not exceed KES 50,000 or the amount you paid us in the 12 months preceding the claim, whichever is lower."})})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Excluded Damages"}),e.jsx("p",{className:"text-sm mb-2",children:"We are not liable for:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Crop losses or agricultural failures"}),e.jsx("li",{children:"Business losses or lost profits"}),e.jsx("li",{children:"Failed transactions between users"}),e.jsx("li",{children:"Data loss or corruption"})]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Third-party service failures"}),e.jsx("li",{children:"Consequential or indirect damages"}),e.jsx("li",{children:"User negligence or misuse"}),e.jsx("li",{children:"Force majeure events"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Indemnification"}),e.jsx("p",{className:"text-sm",children:"You agree to indemnify and hold AgriConnect harmless from any claims, damages, or expenses arising from your use of the platform, violation of these terms, or infringement of third-party rights."})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"6. Intellectual Property Rights"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"AgriConnect Intellectual Property"}),e.jsx("p",{className:"text-sm mb-2",children:"All platform content, features, and functionality are owned by AgriConnect, including:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Software code, algorithms, and AI models"}),e.jsx("li",{children:"Trademarks, logos, and brand elements"}),e.jsx("li",{children:"Database structures and aggregated data"}),e.jsx("li",{children:"User interface designs and documentation"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Content Rights"}),e.jsx("p",{className:"text-sm mb-2",children:"You retain ownership of content you submit but grant us a license to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Display your content on the platform"}),e.jsx("li",{children:"Use aggregated data for agricultural research"}),e.jsx("li",{children:"Moderate and remove inappropriate content"}),e.jsx("li",{children:"Create anonymized analytics and insights"})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"7. Payment and Financial Terms"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Platform Fees"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Basic Services:"})," Free for farmers and basic users"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Premium Features:"})," API access, advanced analytics (fees apply)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Business Services:"})," Advertising, premium listings (KES 2,500-15,000/month)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Transaction Fees:"})," May apply to facilitated payments (clearly disclosed)"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-amber-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Tax Responsibilities"}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Users are solely responsible for their tax obligations."})," This includes: income tax on sales, VAT where applicable, and proper record-keeping for tax authorities. AgriConnect provides transaction records but does not provide tax advice."]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Payment Processing"}),e.jsx("p",{className:"text-sm",children:"Payments are processed through secure third-party providers (PayPal, M-Pesa). We do not store payment card information. Refunds are subject to our refund policy and the terms of the specific service purchased."})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"8. Dispute Resolution"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Internal Resolution Process"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Direct Communication:"})," Users should first attempt to resolve disputes directly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Platform Mediation:"})," AgriConnect can facilitate discussions if requested"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Documentation:"})," Keep records of all communications and transactions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Support Escalation:"})," Contact support@agriconnect.co.ke for assistance"]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Legal Jurisdiction"}),e.jsx("p",{className:"text-sm",children:"These terms are governed by Kenyan law. Any legal disputes will be resolved in Kenyan courts, specifically in Nairobi. Users agree to submit to the jurisdiction of these courts."})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Alternative Dispute Resolution"}),e.jsx("p",{className:"text-sm",children:"Before initiating legal proceedings, parties agree to attempt resolution through the Nairobi Centre for International Arbitration or another mutually agreed arbitration service."})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"9. Termination"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"User Termination Rights"}),e.jsx("p",{className:"text-sm mb-2",children:"You may terminate your account at any time by:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Using the account deletion feature in your profile settings"}),e.jsx("li",{children:"Contacting our support team at support@agriconnect.co.ke"}),e.jsx("li",{children:"Data will be deleted according to our Privacy Policy retention schedule"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-red-50",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"AgriConnect Termination Rights"}),e.jsx("p",{className:"text-sm mb-2",children:"We may suspend or terminate accounts for:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Violation of these Terms of Service"}),e.jsx("li",{children:"Fraudulent or illegal activities"}),e.jsx("li",{children:"Abuse of platform features or other users"}),e.jsx("li",{children:"Extended inactivity (12+ months with notice)"})]})]})]})]}),e.jsx(be,{}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"10. Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Legal Department"})}),e.jsxs(C,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," legal@agriconnect.co.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +254 700 000 001"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," Nairobi, Kenya"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Time:"})," 5-7 business days"]})]})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-3",children:e.jsx(S,{className:"text-lg",children:"Customer Support"})}),e.jsxs(C,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," support@agriconnect.co.ke"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," +254 700 000 002"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hours:"})," 8 AM - 6 PM EAT, Mon-Fri"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emergency:"})," 24/7 for critical issues"]})]})]})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"By using AgriConnect, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service. These terms constitute the entire agreement between you and AgriConnect regarding the use of our platform."}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"For questions about these terms, please contact our legal department at legal@agriconnect.co.ke"})]})]})]})});async function vu(s){return F.from("partners").insert([s]).select()}async function yu(s){const t=F.from("partner_events").select("*");return s?t.eq("partner_id",s):t}const Nu=()=>{const{toast:s}=X(),[t,a]=l.useState({company_name:"",contact_email:"",contact_phone:"",website:"",description:"",logo_url:""}),[r,i]=l.useState(!1),[c,n]=l.useState(null),o=m=>{const{name:p,value:d}=m.target;a(u=>({...u,[p]:d}))},h=async m=>{m.preventDefault(),i(!0),n(null);try{const{error:p}=await vu(t);p?n(p.message):(s({title:"Application Submitted",description:"We will contact you soon."}),a({company_name:"",contact_email:"",contact_phone:"",website:"",description:"",logo_url:""}))}catch(p){n(p.message||"Submission failed")}i(!1)};return e.jsxs(w,{className:"max-w-xl mx-auto mb-8",children:[e.jsx(k,{children:e.jsx(S,{children:"Become a Partner"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx(D,{name:"company_name",value:t.company_name,onChange:o,placeholder:"Company Name",required:!0}),e.jsx(D,{name:"contact_email",value:t.contact_email,onChange:o,placeholder:"Contact Email",type:"email",required:!0}),e.jsx(D,{name:"contact_phone",value:t.contact_phone,onChange:o,placeholder:"Contact Phone"}),e.jsx(D,{name:"website",value:t.website,onChange:o,placeholder:"Website"}),e.jsx(ie,{name:"description",value:t.description,onChange:o,placeholder:"Describe your organization and partnership goals",rows:3,required:!0}),e.jsx(D,{name:"logo_url",value:t.logo_url,onChange:o,placeholder:"Logo URL (optional)"}),e.jsx(N,{type:"submit",className:"w-full",disabled:r,children:r?"Submitting...":"Submit"}),c&&e.jsx("div",{className:"text-red-500 text-sm mt-2",children:c})]})})]})},xn=()=>{const[s,t]=l.useState([]);return l.useEffect(()=>{yu().then(({data:a})=>{Array.isArray(a)?t((a||[]).map(i=>({id:i.id,title:i.title??i.name??"Partner Event",description:i.description??"",event_date:i.event_date??i.date??i.created_at??"",location:i.location??i.venue??"",image_url:i.image_url??i.featured_image_url??void 0,partner_id:i.partner_id??i.user_id??""}))):t([])})},[]),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(a=>e.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:a.title}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:[a.event_date," • ",a.location]}),e.jsx("p",{className:"mb-2",children:a.description}),a.image_url&&e.jsx("img",{src:a.image_url,alt:a.title,className:"h-32 object-cover rounded"})]},a.id))})},bu=()=>e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Partner With Us"}),e.jsxs("p",{className:"mb-6 text-muted-foreground",children:["Submit your organization to collaborate, host events, and reach the agri-community. For inquiries, contact us at"," ",e.jsx("a",{href:"mailto:sokoconnect@tenderzville-portal.co.ke",className:"text-primary hover:underline",children:"sokoconnect@tenderzville-portal.co.ke"})]}),e.jsx(Nu,{}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Upcoming & Past Partner Events"}),e.jsx(xn,{})]})]}),wu=()=>e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Partner Dashboard"}),e.jsx("p",{className:"mb-6 text-muted-foreground",children:"Manage your company profile and events."}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Your Events"}),e.jsx(xn,{})]})]}),Cu=()=>{const[s,t]=l.useState(""),[a,r]=l.useState("all"),[i,c]=l.useState([]),[n,o]=l.useState([]),[h,m]=l.useState(!0),{toast:p}=X();l.useEffect(()=>{d()},[]);const d=async()=>{try{m(!0);const{data:v,error:j}=await F.from("farm_input_products").select(`
          *,
          supplier:farm_input_suppliers (
            id,
            supplier_name,
            contact_phone
          )
        `).eq("is_active",!0);if(j)throw j;c(v||[])}catch(v){console.error("Error fetching products:",v),p({title:"Error",description:"Failed to load products. Please try again.",variant:"destructive"})}finally{m(!1)}},u=i.filter(v=>{var b;const j=v.product_name.toLowerCase().includes(s.toLowerCase())||((b=v.product_description)==null?void 0:b.toLowerCase().includes(s.toLowerCase())),y=a==="all"||!a||v.product_category===a;return j&&y}),x=Array.from(new Set(i.map(v=>v.product_category))),f=(v,j)=>{const y={id:v.id,product_name:v.product_name,quantity:j,price_per_unit:v.price_per_unit,supplier:{id:v.supplier.id,supplier_name:v.supplier.supplier_name,contact_phone:v.supplier.contact_phone}};o(b=>b.find(E=>E.id===v.id)?b.map(E=>E.id===v.id?{...E,quantity:E.quantity+j}:E):[...b,y]),p({title:"Added to Cart",description:`${j} ${v.unit_of_measure} of ${v.product_name} added to cart`})},g=async()=>{var v,j;if(n.length!==0)try{m(!0);const{data:{user:y}}=await F.auth.getUser();if(!y){p({title:"Authentication Required",description:"Please log in to place orders.",variant:"destructive"});return}const b=n.reduce((T,E)=>{const P=E.supplier.id;return T[P]||(T[P]={supplier:E.supplier,items:[],total:0}),T[P].items.push(E),T[P].total+=E.quantity*E.price_per_unit,T},{});for(const[T,E]of Object.entries(b)){const{data:P,error:L}=await F.from("farm_input_orders").insert({buyer_id:y.id,supplier_id:T,total_amount:E.total,delivery_method:"pickup",buyer_name:((v=y.user_metadata)==null?void 0:v.full_name)||"John Farmer",buyer_phone:((j=y.user_metadata)==null?void 0:j.phone)||"+254700000000",delivery_county:"Nairobi"}).select().single();if(L)throw L;const G=E.items.map(U=>({order_id:P.id,product_id:U.id,quantity:U.quantity,unit_price:U.price_per_unit,total_price:U.quantity*U.price_per_unit})),{error:I}=await F.from("farm_input_order_items").insert(G);if(I)throw I}o([]),p({title:"Orders Placed Successfully",description:`${Object.keys(b).length} order(s) have been placed with different suppliers.`})}catch(y){console.error("Error placing order:",y),p({title:"Error",description:"Failed to place order. Please try again.",variant:"destructive"})}finally{m(!1)}};return h?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg",children:"Loading farm inputs..."})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Farm Input Marketplace"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Source quality agricultural inputs from verified suppliers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search products...",value:s,onChange:v=>t(v.target.value),className:"pl-10"})]}),e.jsxs(Q,{value:a,onValueChange:r,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Categories"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Categories"}),x.map(v=>e.jsx(_,{value:v,children:v},v))]})]}),e.jsxs(N,{variant:"outline",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"More Filters"]})]})]}),e.jsx("div",{className:"grid gap-6",children:u.map(v=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl mb-2",children:v.product_name}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(M,{variant:"secondary",children:v.product_category}),e.jsxs(M,{variant:"default",children:[v.price_per_unit," KES / ",v.unit_of_measure]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:v.supplier.supplier_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:v.supplier.contact_phone})]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:v.product_description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Available Stock:"}),e.jsx("div",{className:"text-sm font-medium",children:v.stock_quantity})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Brand:"}),e.jsx("div",{className:"text-sm font-medium",children:v.brand_name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(D,{type:"number",placeholder:"Quantity",defaultValue:1,className:"w-24"}),e.jsxs(N,{onClick:()=>f(v,1),className:"flex-1",children:[e.jsx(Jl,{className:"h-4 w-4 mr-2"}),"Add to Cart"]})]})]})]},v.id))}),u.length===0&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria to find what you're looking for."})]})})]}),e.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ds,{className:"h-5 w-5"}),e.jsxs("span",{className:"font-medium",children:[n.length," items in cart"]})]}),e.jsx("div",{children:e.jsx(N,{onClick:g,disabled:n.length===0||h,children:h?e.jsx(e.Fragment,{children:"Placing Order..."}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Place Order"]})})})]})})]})},ku="/assets/marikiti-market-D20wpahJ.jpg",Su=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(""),[i,c]=l.useState("all"),[n,o]=l.useState("all"),[h,m]=l.useState(!0),{toast:p}=X();l.useEffect(()=>{d()},[]);const d=async()=>{try{m(!0);const{data:g,error:v}=await F.from("city_markets").select("*").eq("status","active").order("name");if(v)throw v;t(g||[])}catch(g){console.error("Error fetching markets:",g),p({title:"Error",description:"Failed to load city markets. Please try again.",variant:"destructive"})}finally{m(!1)}},u=s.filter(g=>{const v=g.name.toLowerCase().includes(a.toLowerCase())||g.location.toLowerCase().includes(a.toLowerCase()),j=i==="all"||g.market_type===i,y=n==="all"||g.location.includes(n);return v&&j&&y}),x=Array.from(new Set(s.map(g=>g.market_type).filter(Boolean))),f=Array.from(new Set(s.map(g=>g.location.split(",")[0]).filter(Boolean)));return h?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg",children:"Loading city markets..."})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("section",{className:"relative py-24 text-white overflow-hidden",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${ku})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:e.jsxs("div",{className:"container mx-auto px-4 text-center relative z-10",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6 drop-shadow-lg",children:"City Markets Directory"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto drop-shadow-md",children:"Discover local markets across Kenya. Find the best places to buy and sell agricultural products in your county."})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search markets...",value:a,onChange:g=>r(g.target.value),className:"pl-10"})]}),e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Market Type"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Types"}),x.map(g=>e.jsx(_,{value:g,children:g},g))]})]}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Location"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Locations"}),f.map(g=>e.jsx(_,{value:g,children:g},g))]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center",children:[u.length," markets found"]})]})}),e.jsx("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(g=>{var v;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl mb-2",children:g.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:g.location})]})]}),e.jsx(M,{variant:"secondary",children:g.market_type})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[g.operating_hours&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:g.operating_hours})]}),((v=g.contact_info)==null?void 0:v.phone)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:g.contact_info.phone})]}),g.facilities&&g.facilities.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Facilities"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[g.facilities.slice(0,3).map((j,y)=>e.jsx(M,{variant:"outline",className:"text-xs",children:j},y)),g.facilities.length>3&&e.jsxs(M,{variant:"outline",className:"text-xs",children:["+",g.facilities.length-3," more"]})]})]}),e.jsxs("div",{className:"pt-4 border-t flex gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Get Directions"]}),e.jsxs(N,{size:"sm",className:"flex-1",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]})})]},g.id)})}),u.length===0&&!h&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx(Oe,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No markets found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or check back later for new markets."}),e.jsx(N,{variant:"outline",onClick:()=>{alert("Market suggestion feature coming soon! Please contact us directly for now.")},children:"Suggest a Market"})]})}),e.jsxs("section",{className:"mt-16 bg-muted/30 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Market Information"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Everything you need to know about trading in city markets"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(de,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Operating Hours"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Most markets operate 6 AM - 6 PM daily"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(je,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Transport Access"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Good road access and parking facilities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ee,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Market Community"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Connect with local traders and farmers"})]})]})]})]})]})},_u=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState(""),[n,o]=l.useState("all"),[h,m]=l.useState("all");l.useEffect(()=>{p()},[]);async function p(){r(!0);const{data:f}=await F.from("products").select("id, name, description, category"),g=(f||[]).map(v=>({id:v.id,name:v.name,description:v.description,category:v.category,available_for:[],price:0,location:"",county:"",contact_phone:"",contact_email:""}));t(g),r(!1)}const d=Array.from(new Set(s.map(f=>f.category))),u=["rental","lease","purchase"],x=s.filter(f=>{const g=f.name.toLowerCase().includes(i.toLowerCase())||f.description&&f.description.toLowerCase().includes(i.toLowerCase()),v=n==="all"||f.category===n,j=h==="all"||f.available_for.includes(h);return g&&v&&j});return e.jsx("div",{className:"min-h-screen",children:e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Equipment Marketplace"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Find agricultural equipment for rental, lease, or purchase"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(D,{placeholder:"Search equipment...",value:i,onChange:f=>c(f.target.value),className:"sm:w-64"}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Categories"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Categories"}),d.map(f=>e.jsx(_,{value:f,children:f},f))]})]}),e.jsxs(Q,{value:h,onValueChange:m,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Types"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Types"}),u.map(f=>e.jsx(_,{value:f,children:f.charAt(0).toUpperCase()+f.slice(1)},f))]})]})]}),e.jsx("div",{className:"grid gap-6",children:a?e.jsx("div",{children:"Loading equipment..."}):x.length>0?x.map(f=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-xl mb-2",children:f.name}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(M,{variant:"secondary",children:f.category}),f.available_for.map(g=>e.jsx(M,{variant:"outline",children:g},g))]})]}),e.jsxs(C,{children:[e.jsx("div",{className:"mb-2 text-muted-foreground",children:f.description}),e.jsxs("div",{className:"mb-2",children:["Location: ",f.location||f.county]}),e.jsxs("div",{className:"mb-2",children:["Price: ",f.price?`KES ${f.price}`:"Contact for price"]}),e.jsxs("div",{className:"mb-2",children:["Contact: ",f.contact_phone," ",f.contact_email&&`| ${f.contact_email}`]})]})]},f.id)):e.jsx("div",{children:"No equipment found."})})]})})};function Au({user:s}){const{user:t}=we(),[a,r]=l.useState([]),[i,c]=l.useState([]),[n,o]=l.useState([]),[h,m]=l.useState(!0),[p,d]=l.useState(!1),[u,x]=l.useState(!1),{toast:f}=X();l.useEffect(()=>{g()},[]);async function g(){try{const[y,b,T]=await Promise.all([F.from("food_rescue_listings").select("*, donor:donor_id(full_name)").eq("status","available"),F.from("food_rescue_recipients").select("*").eq("verification_status","verified"),F.from("organizations").select("*").order("created_at",{ascending:!1})]);r(y.data||[]),c(b.data||[]),o(T.data||[])}catch(y){console.error("Error:",y),f({title:"Error",description:"Failed to load data",variant:"destructive"})}finally{m(!1)}}const v=async y=>{if(y.preventDefault(),!t){f({title:"Authentication Required",description:"Please sign in to register",variant:"destructive"});return}const b=new FormData(y.currentTarget);try{const{error:T}=await F.from("organizations").insert({user_id:t.id,org_name:b.get("org_name"),org_type:b.get("org_type"),registration_number:b.get("registration_number"),contact_person:b.get("contact_person"),contact_phone:b.get("contact_phone"),contact_email:b.get("contact_email"),physical_address:b.get("physical_address"),county:b.get("county"),description:b.get("description"),beneficiary_count:parseInt(b.get("beneficiary_count"))});if(T)throw T;f({title:"Success",description:"Organization registered! Pending verification."}),x(!1),g()}catch(T){console.error("Error:",T),f({title:"Error",description:"Failed to register organization",variant:"destructive"})}},j=async y=>{if(y.preventDefault(),!t){f({title:"Authentication Required",description:"Please sign in to create listing",variant:"destructive"});return}const b=new FormData(y.currentTarget);try{const{error:T}=await F.from("food_rescue_listings").insert({donor_id:t.id,product_name:b.get("product_name"),quantity:parseFloat(b.get("quantity")),unit:b.get("unit"),pickup_location:b.get("pickup_location"),expiry_date:b.get("expiry_date"),description:b.get("description"),transport_provided:b.get("transport_provided")==="true",transport_details:b.get("transport_details"),pickup_deadline:b.get("pickup_deadline")});if(T)throw T;f({title:"Success",description:"Surplus food listing created successfully"}),d(!1),g()}catch(T){console.error("Error:",T),f({title:"Error",description:"Failed to create listing",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen pb-20 lg:pb-0",children:[e.jsx(Js,{title:"Food Rescue"}),e.jsxs("main",{className:"py-6 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(ys,{className:"h-8 w-8 text-red-500"}),"Food Rescue Dashboard"]}),e.jsx("p",{className:"text-muted-foreground",children:"Connecting surplus food with those in need"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Available Listings"]})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.length})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Verified Recipients"]})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.length})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Organizations"]})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.length})})]})]}),e.jsxs(ue,{defaultValue:"listings",className:"w-full",children:[e.jsxs(me,{className:"w-full justify-start",children:[e.jsx(R,{value:"listings",children:"Available Food"}),e.jsx(R,{value:"recipients",children:"Recipients"}),e.jsx(R,{value:"organizations",children:"Organizations"})]}),e.jsxs(B,{value:"listings",className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{open:p,onOpenChange:d,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"List Surplus Food"]})}),e.jsxs(Se,{className:"max-w-2xl",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"List Surplus Food"})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Product Name*"}),e.jsx(D,{name:"product_name",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Quantity*"}),e.jsx(D,{name:"quantity",type:"number",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Unit*"}),e.jsxs("select",{name:"unit",className:"w-full border rounded-md p-2",required:!0,children:[e.jsx("option",{value:"Kg",children:"Kg"}),e.jsx("option",{value:"Bags",children:"Bags"}),e.jsx("option",{value:"Crates",children:"Crates"}),e.jsx("option",{value:"Pieces",children:"Pieces"})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Expiry Date*"}),e.jsx(D,{name:"expiry_date",type:"date",required:!0})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Pickup Location*"}),e.jsx(D,{name:"pickup_location",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Transport Provided?*"}),e.jsxs("select",{name:"transport_provided",className:"w-full border rounded-md p-2",required:!0,children:[e.jsx("option",{value:"false",children:"No - Recipient arranges transport"}),e.jsx("option",{value:"true",children:"Yes - I will deliver"})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Transport Details (optional)"}),e.jsx(ie,{name:"transport_details",placeholder:"Delivery radius, conditions, etc."})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Pickup Deadline (optional)"}),e.jsx(D,{name:"pickup_deadline",type:"datetime-local"})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Description"}),e.jsx(ie,{name:"description"})]}),e.jsx(N,{type:"submit",className:"w-full",children:"Create Listing"})]})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(y=>{var b;return e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-lg",children:y.product_name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["By ",((b=y.donor)==null?void 0:b.full_name)||"Anonymous"]})]}),e.jsxs(C,{className:"space-y-3",children:[e.jsxs(M,{variant:"secondary",children:[e.jsx(ae,{className:"mr-1 h-3 w-3"}),y.quantity," ",y.unit]}),e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-3 w-3"}),y.pickup_location]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-3 w-3"}),"Expires: ",new Date(y.expiry_date).toLocaleDateString()]})]}),e.jsx(N,{className:"w-full",size:"sm",children:"Claim"})]})]},y.id)})})]}),e.jsx(B,{value:"recipients",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:i.map(y=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:y.name}),e.jsx(M,{variant:"secondary",children:y.type})]}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Contact:"})," ",y.contact_person]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",y.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",y.address]})]})})]},y.id))})}),e.jsxs(B,{value:"organizations",className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(_e,{open:u,onOpenChange:x,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Register Organization"]})}),e.jsxs(Se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Register Your Organization"})}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Organization Name*"}),e.jsx(D,{name:"org_name",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Type*"}),e.jsxs("select",{name:"org_type",className:"w-full border rounded-md p-2",required:!0,children:[e.jsx("option",{value:"school",children:"School"}),e.jsx("option",{value:"hospital",children:"Hospital"}),e.jsx("option",{value:"cbo",children:"CBO"}),e.jsx("option",{value:"ngo",children:"NGO"}),e.jsx("option",{value:"charity",children:"Charity"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Registration Number*"}),e.jsx(D,{name:"registration_number",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"County*"}),e.jsx(D,{name:"county",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Contact Person*"}),e.jsx(D,{name:"contact_person",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Contact Phone*"}),e.jsx(D,{name:"contact_phone",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Email*"}),e.jsx(D,{name:"contact_email",type:"email",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Beneficiaries"}),e.jsx(D,{name:"beneficiary_count",type:"number"})]})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Physical Address*"}),e.jsx(D,{name:"physical_address",required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Description"}),e.jsx(ie,{name:"description"})]}),e.jsx(N,{type:"submit",className:"w-full",children:"Submit for Verification"})]})]})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(y=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{children:y.org_name}),e.jsx(M,{variant:"outline",className:"mt-1",children:y.org_type})]}),e.jsx(M,{variant:y.verification_status==="verified"?"default":"secondary",children:y.verification_status})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Contact:"})," ",y.contact_person]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",y.contact_phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"County:"})," ",y.county]}),y.beneficiary_count&&e.jsxs("div",{children:[e.jsx("strong",{children:"Beneficiaries:"})," ",y.beneficiary_count]}),y.trust_score>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Trust Score:"})," ",y.trust_score,"/5.0"]})]})})]},y.id))})]})]})]}),e.jsx(Rs,{})]})}function Pu(){return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Imperfect Surplus Produce Dashboard"}),e.jsx("div",{className:"bg-white rounded shadow p-4 mb-4",children:"Imperfect surplus produce UI goes here."})]})}async function Tu(s){return F.from("bulk_orders").insert(s).select()}async function Du(s){return F.from("processing_matches").insert(s).select()}async function Mu(s={}){return F.from("processing_matches").select("*").match(s)}const lr={product_type:"",quantity:"",unit:""};function Fu({onCreated:s}){const[t,a]=l.useState(lr),[r,i]=l.useState(!1),[c,n]=l.useState(""),o=m=>{a({...t,[m.target.name]:m.target.value})},h=async m=>{m.preventDefault(),i(!0),n("");try{const{data:p,error:d}=await Tu(t);d?n(d.message):(a(lr),s&&s(p))}catch{n("Failed to create order")}i(!1)};return e.jsxs("form",{className:"bg-white rounded shadow p-4 max-w-md mx-auto",onSubmit:h,children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Create Bulk Order"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Product Type"}),e.jsx("input",{name:"product_type",value:t.product_type,onChange:o,className:"input input-bordered w-full",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Quantity"}),e.jsx("input",{name:"quantity",type:"number",value:t.quantity,onChange:o,className:"input input-bordered w-full",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Unit"}),e.jsx("input",{name:"unit",value:t.unit,onChange:o,className:"input input-bordered w-full",required:!0})]}),c&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:c}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:r,children:r?"Submitting...":"Submit"})]})}const Eu=({onSelect:s})=>{const[t,a]=Ms.useState([]);return Ms.useEffect(()=>{(async()=>{const{data:i}=await F.from("bulk_orders").select("id, product_type, quantity, unit, location, status, deadline").order("created_at",{ascending:!1});i&&a(i)})()},[]),e.jsxs("section",{"aria-labelledby":"bulk-orders-heading",children:[e.jsx("h1",{id:"bulk-orders-heading",children:"Bulk Orders"}),e.jsx("ul",{children:t.map(r=>e.jsxs("li",{onClick:()=>s==null?void 0:s(r),style:{cursor:s?"pointer":"default"},children:[r.product_type," - ",r.quantity," ",r.unit," - ",r.location," - ",r.status]},r.id))})]})},cr={offer_price:""};function Iu({bulkOrderId:s,farmerId:t,onCreated:a}){const[r,i]=l.useState(cr),[c,n]=l.useState(!1),[o,h]=l.useState(""),m=d=>{i({...r,[d.target.name]:d.target.value})},p=async d=>{d.preventDefault(),n(!0),h("");try{const u={bulk_order_id:s,farmer_id:t,offer_price:r.offer_price,status:"pending",negotiation_log:[]},{data:x,error:f}=await Du(u);f?h(f.message):(i(cr),a&&a(x))}catch{h("Failed to submit match")}n(!1)};return e.jsxs("form",{className:"bg-white rounded shadow p-4 max-w-md mx-auto mt-4",onSubmit:p,children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Submit Offer"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Offer Price"}),e.jsx("input",{name:"offer_price",type:"number",value:r.offer_price,onChange:m,className:"input input-bordered w-full",required:!0})]}),o&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:o}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:c,children:c?"Submitting...":"Submit"})]})}function Na({type:s,title:t,description:a}){const{toast:r}=X();r({title:t,description:a})}function Lu({bulkOrderId:s}){const[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState([]);return l.useEffect(()=>{let o;const h=async()=>{i(!0);const{data:m}=await Mu({bulk_order_id:s});a(m||[]),i(!1),c.length>0&&m&&m.forEach(p=>{const d=c.find(f=>f.id===p.id),u=(p==null?void 0:p.offer_price)??(p==null?void 0:p.price)??"",x=(p==null?void 0:p.status)??"";d?d.status!==x&&Na({type:"match_status",title:"Offer Status Updated",description:`Offer: ${u}, Status: ${x}`}):Na({type:"match_new",title:"New Offer Received",description:`Offer: ${u}`})}),n(m||[])};return s&&(h(),o=setInterval(h,5e3)),()=>o&&clearInterval(o)},[s]),s?e.jsxs("div",{className:"bg-white rounded shadow p-4 max-w-2xl mx-auto mt-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Processing Matches"}),r?e.jsx("div",{children:"Loading..."}):t.length===0?e.jsx("div",{className:"text-gray-500",children:"No matches found."}):e.jsx("ul",{className:"divide-y divide-gray-200",children:t.map(o=>e.jsx("li",{className:"py-2 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Offer:"})," ",(o==null?void 0:o.offer_price)??(o==null?void 0:o.price)??"N/A",e.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["Status: ",(o==null?void 0:o.status)??"pending"]})]})},o.id))})]}):null}function qu({log:s}){return!s||s.length===0?e.jsx("div",{className:"text-gray-500",children:"No negotiation history."}):e.jsxs("div",{className:"bg-white rounded shadow p-4 max-w-2xl mx-auto mt-4",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Negotiation Log"}),e.jsx("ul",{className:"divide-y divide-gray-200",children:s.map((t,a)=>e.jsxs("li",{className:"py-2",children:[e.jsxs("span",{className:"font-semibold",children:[t.actor,":"]})," ",t.message,e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:t.timestamp})]},a))})]})}function Ru({user:s}){const[t,a]=l.useState(null),[r,i]=l.useState(!1),[c,n]=l.useState([]);return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx(Fu,{onCreated:()=>window.location.reload()}),e.jsx(Eu,{onSelect:o=>{a(o),i(!0)}}),r&&t&&e.jsx(Iu,{bulkOrderId:t.id,farmerId:s==null?void 0:s.id,onCreated:()=>window.location.reload()}),t&&e.jsx(Lu,{bulkOrderId:t.id}),c&&e.jsx(qu,{log:c})]})}const or={product_id:"",recipient_type:"",recipient_id:"",agent_id:"",feedback:"",feedback_rating:""};function zu({onDonated:s}){const[t,a]=l.useState(or),[r,i]=l.useState(!1),[c,n]=l.useState(""),o=m=>{a({...t,[m.target.name]:m.target.value})},h=async m=>{m.preventDefault(),i(!0),n("");try{a(or),Na({type:"donation_new",title:"Donation Submitted",description:`Product: ${t.product_id}, Recipient: ${t.recipient_type} (${t.recipient_id}), Agent: ${t.agent_id}`}),s&&s(t)}catch{n("Failed to submit donation")}i(!1)};return e.jsxs("form",{className:"bg-white rounded shadow p-4 max-w-md mx-auto",onSubmit:h,children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Submit Donation"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Product ID"}),e.jsx("input",{name:"product_id",value:t.product_id,onChange:o,className:"input input-bordered w-full",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Recipient Type"}),e.jsxs("select",{name:"recipient_type",value:t.recipient_type,onChange:o,className:"input input-bordered w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"school",children:"School"}),e.jsx("option",{value:"CBO",children:"CBO"}),e.jsx("option",{value:"hospital",children:"Hospital"}),e.jsx("option",{value:"church",children:"Church"}),e.jsx("option",{value:"hospice",children:"Hospice"})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Recipient ID"}),e.jsx("input",{name:"recipient_id",value:t.recipient_id,onChange:o,className:"input input-bordered w-full",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Agent ID"}),e.jsx("input",{name:"agent_id",value:t.agent_id,onChange:o,className:"input input-bordered w-full",required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Feedback (optional)"}),e.jsx("input",{name:"feedback",value:t.feedback,onChange:o,className:"input input-bordered w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Feedback Rating (1-5, optional)"}),e.jsx("input",{name:"feedback_rating",type:"number",min:"1",max:"5",value:t.feedback_rating,onChange:o,className:"input input-bordered w-full"})]}),c&&e.jsx("div",{className:"text-red-500 text-sm mb-2",children:c}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:r,children:r?"Submitting...":"Submit"})]})}const Ku=()=>e.jsx("div",{className:"container mx-auto py-8",children:e.jsx(zu,{onDonated:()=>{}})}),Ou=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(""),[i,c]=l.useState(!0),[n,o]=l.useState(!1),{toast:h}=X();l.useEffect(()=>{m()},[]);const m=async()=>{try{c(!0);const{data:u,error:x}=await F.from("buy_requests").select("*").eq("status","active").order("created_at",{ascending:!1});if(x)throw x;t(u||[])}catch(u){console.error("Error fetching buy requests:",u),h({title:"Error",description:"Failed to load buy requests. Please try again.",variant:"destructive"})}finally{c(!1)}},p=s.filter(u=>u.product_name.toLowerCase().includes(a.toLowerCase())||u.location.toLowerCase().includes(a.toLowerCase())),d=u=>{const x=new Date(u),f=new Date,g=x.getTime()-f.getTime(),v=Math.ceil(g/(1e3*60*60*24));return Math.max(0,v)};return i?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-lg",children:"Loading buy requests..."})})})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("section",{className:"bg-gradient-to-r from-primary to-primary-foreground text-primary-foreground py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Buy Requests"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto",children:"Connect with buyers looking for agricultural products. Post what you're selling or find buyers for your produce."}),e.jsxs(N,{size:"lg",variant:"secondary",onClick:()=>o(!0),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Buy Request"]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{className:"relative mb-4 md:mb-0",children:[e.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search buy requests...",value:a,onChange:u=>r(u.target.value),className:"pl-10 md:w-64"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[p.length," active buy requests"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[e.jsx(w,{className:"text-center",children:e.jsxs(C,{className:"pt-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ee,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Direct Connection"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect directly with verified buyers"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(C,{className:"pt-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ae,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Quality Assured"}),e.jsx("p",{className:"text-muted-foreground",children:"Pre-negotiated quality standards"})]})}),e.jsx(w,{className:"text-center",children:e.jsxs(C,{className:"pt-6",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Z,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Local Markets"}),e.jsx("p",{className:"text-muted-foreground",children:"Find buyers in your area"})]})})]}),e.jsx("div",{className:"grid lg:grid-cols-2 gap-6",children:p.map(u=>{const x=d(u.deadline);return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-xl mb-2",children:u.product_name}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:u.location})]})]}),e.jsxs(M,{variant:x>7?"default":"destructive",children:[x," days left"]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:u.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Quantity Needed"}),e.jsxs("div",{className:"font-medium",children:[u.quantity," ",u.unit]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Max Price"}),e.jsxs("div",{className:"font-medium",children:["KES ",u.max_price,"/",u.unit]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:["Deadline: ",new Date(u.deadline).toLocaleDateString()]})]}),e.jsxs("div",{className:"pt-4 border-t flex gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),e.jsxs(N,{size:"sm",className:"flex-1",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Contact Buyer"]})]})]})})]},u.id)})}),p.length===0&&!i&&e.jsx(w,{className:"text-center py-12",children:e.jsxs(C,{children:[e.jsx(ae,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No buy requests found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Be the first to create a buy request in your area."}),e.jsxs(N,{onClick:()=>o(!0),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Buy Request"]})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-background rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Create Buy Request"}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Close"})]}),e.jsx(sn,{userId:"temp-user-id",onSubmitted:()=>{o(!1),m()}})]})})]})},Bu=()=>{const{user:s}=we();return{user:s}},Uu=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState(""),[n,o]=l.useState("all"),[h,m]=l.useState("all"),{user:p}=Bu(),[d,u]=l.useState(null),[x,f]=l.useState([]);l.useState(!1);const[g,v]=l.useState([]),[j,y]=l.useState(null);l.useEffect(()=>{b()},[]);async function b(){r(!0);const{data:q}=await F.from("export_opportunities").select("*");q&&t(q),r(!1)}const T=Array.from(new Set(s.map(q=>q.crop_type))),E=Array.from(new Set(s.map(q=>q.destination_country))),P=s.filter(q=>{const te=q.buyer_name.toLowerCase().includes(i.toLowerCase()),Te=n==="all"||q.crop_type===n,H=h==="all"||q.destination_country===h;return te&&Te&&H});async function L(q){if(!window.confirm("Are you sure you want to delete this order?"))return;const{error:te}=await F.from("export_orders").delete().eq("id",q);te||(t(s.filter(Te=>Te.id!==q)),u(null))}async function G(q){const{data:te}=await F.from("timeline_events").select("*").eq("export_order_id",q).order("event_time");f(te||[])}async function I(q){const{data:te}=await F.from("export_documentation").select("*").eq("export_opportunity_id",q);v(te||[])}async function U(q,te){const{data:Te}=await F.from("price_comparisons").select("*").eq("commodity_name",q).eq("export_opportunity_id",te).single();y(Te)}return e.jsx("div",{className:"min-h-screen",children:e.jsxs("main",{className:"py-12 px-6 max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Export Market Opportunities"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Connect with international buyers and access global markets"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx(D,{placeholder:"Search buyers...",value:i,onChange:q=>c(q.target.value),className:"sm:w-64"}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Crops"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Crops"}),T.map(q=>e.jsx(_,{value:q,children:q},q))]})]}),e.jsxs(Q,{value:h,onValueChange:m,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Countries"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Countries"}),E.map(q=>e.jsx(_,{value:q,children:q},q))]})]})]}),e.jsx("div",{className:"grid gap-6",children:a?e.jsx("div",{children:"Loading opportunities..."}):P.length>0?P.map(q=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-xl mb-2 flex items-center justify-between",children:[e.jsx("span",{children:q.buyer_name}),e.jsxs(M,{variant:"secondary",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),q.destination_country]})]})}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx($t,{className:"mr-2 h-4 w-4 inline-block"}),"Crop: ",q.crop_type]}),e.jsxs("div",{children:[e.jsx(Zl,{className:"mr-2 h-4 w-4 inline-block"}),"Quantity: ",q.quantity_tons," tons"]}),e.jsxs("div",{children:["Price: KES ",q.price_per_ton,"/ton"]}),e.jsxs("div",{children:["Min Order: ",q.min_order_quantity," tons"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold",children:"Requirements:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:q.required_certifications.map(te=>e.jsx(M,{variant:"outline",children:te},te))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:()=>{u(q),G(q.id),I(q.id),U(q.crop_type,q.id)},children:"View Details"}),e.jsx(N,{variant:"outline",children:"Express Interest"}),e.jsx(N,{variant:"outline",children:"Form Consolidation"})]})]})]},q.id)):e.jsx("div",{children:"No export opportunities found."})}),d&&e.jsxs(w,{className:"mb-6",children:[e.jsx(k,{children:e.jsx(S,{children:"Order Timeline"})}),e.jsxs(C,{children:[e.jsx("ul",{className:"timeline-list",children:x.map(q=>e.jsxs("li",{className:"mb-2",children:[e.jsx("span",{className:"font-semibold",children:q.event_type}),": ",q.event_description," ",e.jsxs("span",{className:"text-muted-foreground",children:["(",new Date(q.event_time).toLocaleString(),")"]})]},q.id))}),((p==null?void 0:p.id)===d.created_by||(p==null?void 0:p.role)==="admin")&&e.jsx(N,{variant:"destructive",onClick:()=>L(d.id),children:"Delete Order"}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Export Documentation Checklist"}),e.jsx("ul",{children:g.map(q=>e.jsxs("li",{className:"mb-1",children:[q.document_type," - ",q.status,q.file_url?e.jsx("a",{href:q.file_url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 underline",children:"View"}):e.jsx("span",{className:"ml-2 text-red-600",children:"Not uploaded"})]},q.id))})]}),j&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Price Comparison"}),e.jsxs("div",{children:["Domestic: KES ",j.domestic_price," | Export: KES ",j.export_price]})]})]})]})]})})},$u=()=>{const{user:s}=we(),{toast:t}=X(),[a,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(""),[h,m]=l.useState("all"),[p,d]=l.useState("all"),[u,x]=l.useState(!1),[f,g]=l.useState({title:"",description:"",crops_involved:"",counties:"",requirements:"",benefits:"",contact_info:"",application_deadline:"",start_date:"",duration_months:"",minimum_quantity:"",price_range:"",max_participants:""});l.useEffect(()=>{v()},[]);async function v(){c(!0);try{const P=await Ei({linkage_type:"export_opportunity",activeOnly:!0});r(P||[])}catch(P){console.error("Error fetching export opportunities:",P),t({title:"Error",description:"Failed to load export opportunities",variant:"destructive"})}finally{c(!1)}}const j=Array.from(new Set(a.flatMap(P=>P.crops_involved||[]))),y=Array.from(new Set(a.flatMap(P=>P.counties||[]))),b=a.filter(P=>{const L=P.title.toLowerCase().includes(n.toLowerCase())||P.description.toLowerCase().includes(n.toLowerCase()),G=h==="all"||P.crops_involved&&P.crops_involved.includes(h),I=p==="all"||P.counties&&P.counties.includes(p);return L&&G&&I}),T=async()=>{if(!s){t({title:"Authentication Required",description:"Please sign in to create export opportunities",variant:"destructive"});return}try{await Fi({title:f.title,description:f.description,linkage_type:"export_opportunity",crops_involved:f.crops_involved.split(",").map(P=>P.trim()),counties:f.counties.split(",").map(P=>P.trim()),requirements:f.requirements.split(",").map(P=>P.trim()),benefits:f.benefits.split(",").map(P=>P.trim()),contact_info:f.contact_info,application_deadline:f.application_deadline||void 0,start_date:f.start_date||void 0,duration_months:f.duration_months?parseInt(f.duration_months):void 0,minimum_quantity:f.minimum_quantity?parseFloat(f.minimum_quantity):void 0,price_range:f.price_range||void 0,max_participants:f.max_participants?parseInt(f.max_participants):void 0}),t({title:"Success",description:"Export opportunity created successfully"}),x(!1),g({title:"",description:"",crops_involved:"",counties:"",requirements:"",benefits:"",contact_info:"",application_deadline:"",start_date:"",duration_months:"",minimum_quantity:"",price_range:"",max_participants:""}),v()}catch{t({title:"Error",description:"Failed to create export opportunity",variant:"destructive"})}},E=async P=>{if(!s){t({title:"Authentication Required",description:"Please sign in to apply",variant:"destructive"});return}try{await lo(P),t({title:"Success",description:"Application submitted successfully"}),v()}catch{t({title:"Error",description:"Failed to submit application",variant:"destructive"})}};return e.jsx(Hi,{title:"Export Opportunities",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl pb-24",children:[e.jsxs(w,{className:"mb-6 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ie,{className:"h-6 w-6 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx(S,{className:"text-2xl",children:"Export Market Opportunities"}),e.jsx(O,{className:"mt-2 text-base",children:"Connect with international buyers and grow your export business"})]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-muted-foreground leading-relaxed mb-4",children:"Access verified export opportunities from international markets. Get fair prices, technical support, and quality certification assistance to meet global standards."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[e.jsx(Ie,{className:"h-8 w-8 text-primary mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Global Markets"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Access to EU, US, Asian markets"})]}),e.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[e.jsx(ne,{className:"h-8 w-8 text-primary mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Premium Prices"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Higher returns for quality produce"})]}),e.jsxs("div",{className:"bg-background rounded-lg p-4 border",children:[e.jsx(ee,{className:"h-8 w-8 text-primary mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"Full Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Training, certification, logistics help"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(D,{placeholder:"Search opportunities...",value:n,onChange:P=>o(P.target.value),className:"sm:w-64"}),e.jsxs(Q,{value:h,onValueChange:m,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Crops"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Crops"}),j.map(P=>e.jsx(_,{value:P,children:P},P))]})]}),e.jsxs(Q,{value:p,onValueChange:d,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Counties"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Counties"}),y.map(P=>e.jsx(_,{value:P,children:P},P))]})]})]}),e.jsxs(_e,{open:u,onOpenChange:x,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{className:"w-full sm:w-auto",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),"Post Export Opportunity"]})}),e.jsxs(Se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Create Export Opportunity"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"title",children:"Title *"}),e.jsx(D,{id:"title",value:f.title,onChange:P=>g({...f,title:P.target.value}),placeholder:"e.g., Avocado Export to Europe"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description *"}),e.jsx(ie,{id:"description",value:f.description,onChange:P=>g({...f,description:P.target.value}),placeholder:"Describe the export opportunity...",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"crops",children:"Crops (comma separated) *"}),e.jsx(D,{id:"crops",value:f.crops_involved,onChange:P=>g({...f,crops_involved:P.target.value}),placeholder:"Avocado, Mango, Pineapple"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"counties",children:"Counties (comma separated) *"}),e.jsx(D,{id:"counties",value:f.counties,onChange:P=>g({...f,counties:P.target.value}),placeholder:"Murang'a, Kiambu, Nairobi"})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"requirements",children:"Requirements (comma separated) *"}),e.jsx(D,{id:"requirements",value:f.requirements,onChange:P=>g({...f,requirements:P.target.value}),placeholder:"GlobalGAP, Organic certification"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"benefits",children:"Benefits (comma separated) *"}),e.jsx(D,{id:"benefits",value:f.benefits,onChange:P=>g({...f,benefits:P.target.value}),placeholder:"Premium prices, Training, Logistics support"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"minQuantity",children:"Minimum Quantity (kg)"}),e.jsx(D,{id:"minQuantity",type:"number",value:f.minimum_quantity,onChange:P=>g({...f,minimum_quantity:P.target.value}),placeholder:"1000"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"priceRange",children:"Price Range (KES)"}),e.jsx(D,{id:"priceRange",value:f.price_range,onChange:P=>g({...f,price_range:P.target.value}),placeholder:"80-120 per kg"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"duration",children:"Duration (months)"}),e.jsx(D,{id:"duration",type:"number",value:f.duration_months,onChange:P=>g({...f,duration_months:P.target.value}),placeholder:"12"})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"maxParticipants",children:"Max Participants"}),e.jsx(D,{id:"maxParticipants",type:"number",value:f.max_participants,onChange:P=>g({...f,max_participants:P.target.value}),placeholder:"50"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"startDate",children:"Start Date"}),e.jsx(D,{id:"startDate",type:"date",value:f.start_date,onChange:P=>g({...f,start_date:P.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"deadline",children:"Application Deadline"}),e.jsx(D,{id:"deadline",type:"date",value:f.application_deadline,onChange:P=>g({...f,application_deadline:P.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact",children:"Contact Information *"}),e.jsx(D,{id:"contact",value:f.contact_info,onChange:P=>g({...f,contact_info:P.target.value}),placeholder:"Email and phone number"})]})]}),e.jsx(Cs,{children:e.jsx(N,{onClick:T,className:"w-full",children:"Create Opportunity"})})]})]})]}),e.jsx("div",{className:"grid gap-6",children:i?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading opportunities..."})]}):b.length>0?b.map(P=>{var L,G,I,U;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-2",children:[e.jsx(S,{className:"text-xl",children:P.title}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[P.application_deadline&&e.jsxs(M,{variant:"outline",children:[e.jsx(de,{className:"mr-1 h-3 w-3"}),"Deadline: ",new Date(P.application_deadline).toLocaleDateString()]}),e.jsxs(M,{variant:"default",children:[P.participants_count||0," / ",P.max_participants||"∞"," Applied"]})]})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:P.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Crops:"}),e.jsx("span",{className:"text-muted-foreground",children:(L=P.crops_involved)==null?void 0:L.join(", ")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Counties:"}),e.jsx("span",{className:"text-muted-foreground",children:(G=P.counties)==null?void 0:G.join(", ")})]}),P.price_range&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Price Range:"}),e.jsxs("span",{className:"text-muted-foreground",children:["KES ",P.price_range]})]})]}),e.jsxs("div",{className:"space-y-2",children:[P.minimum_quantity&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Min Quantity:"}),e.jsxs("span",{className:"text-muted-foreground",children:[P.minimum_quantity," kg"]})]}),P.duration_months&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Duration:"}),e.jsxs("span",{className:"text-muted-foreground",children:[P.duration_months," months"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",children:"Requirements"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(I=P.requirements)==null?void 0:I.map((q,te)=>e.jsx(M,{variant:"outline",className:"text-xs",children:q},te))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-sm",children:"Benefits"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(U=P.benefits)==null?void 0:U.map((q,te)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:q},te))})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(N,{onClick:()=>E(P.id),className:"flex-1",disabled:P.max_participants&&P.participants_count>=P.max_participants,children:P.max_participants&&P.participants_count>=P.max_participants?"Closed":"Apply Now"}),e.jsx(N,{variant:"outline",children:"Contact"})]})]})]},P.id)}):e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(Ie,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"No export opportunities found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n||h!=="all"||p!=="all"?"Try adjusting your filters":"Be the first to post an opportunity!"})]})})})]})})},Vu=()=>{const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState(""),[n,o]=l.useState("all"),[h,m]=l.useState("all"),[p,d]=l.useState(!1),{toast:u}=X(),[x,f]=l.useState({title:"",company_name:"",crop_type:"",contract_duration:"",price_per_unit:"",minimum_area:"",location:"",requirements:"",benefits:"",description:"",application_deadline:""});l.useEffect(()=>{g()},[]);async function g(){r(!0);try{const T=[{id:"1",title:"Premium Avocado Contract",company_name:"Fresh Exports Ltd",crop_type:"Avocado",contract_duration:24,price_per_unit:80,minimum_area:2,location:"Murang'a County",requirements:["GAP Certification","Irrigation system","Minimum 100 trees"],benefits:["Guaranteed market","Technical support","Input supply"],description:"Looking for avocado farmers for export market. Full support provided.",status:"active",created_at:new Date().toISOString(),application_deadline:"2024-12-31"},{id:"2",title:"Organic Coffee Contract",company_name:"Kenya Coffee Coop",crop_type:"Coffee",contract_duration:36,price_per_unit:120,minimum_area:1,location:"Kiambu County",requirements:["Organic certification","Altitude above 1500m"],benefits:["Premium pricing","Training provided","Equipment loans"],description:"Seeking organic coffee farmers for specialty market.",status:"active",created_at:new Date().toISOString(),application_deadline:"2024-11-30"}];t(T)}catch(T){console.error("Error fetching opportunities:",T),u({title:"Error",description:"Failed to load contract farming opportunities",variant:"destructive"})}finally{r(!1)}}const v=Array.from(new Set(s.map(T=>T.crop_type))),j=Array.from(new Set(s.map(T=>T.location))),y=s.filter(T=>{const E=T.title.toLowerCase().includes(i.toLowerCase())||T.company_name.toLowerCase().includes(i.toLowerCase()),P=n==="all"||T.crop_type===n,L=h==="all"||T.location===h;return E&&P&&L}),b=async()=>{try{u({title:"Success",description:"Contract farming opportunity created successfully"}),d(!1),f({title:"",company_name:"",crop_type:"",contract_duration:"",price_per_unit:"",minimum_area:"",location:"",requirements:"",benefits:"",description:"",application_deadline:""})}catch{u({title:"Error",description:"Failed to create opportunity",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen pb-20 lg:pb-0",children:[e.jsx(Js,{title:"Contract Farming"}),e.jsxs("main",{className:"py-6 px-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"Contract Farming Opportunities"}),e.jsx("p",{className:"text-muted-foreground",children:"Secure farming contracts with guaranteed markets and support"}),e.jsx(w,{className:"mt-4 bg-blue-50 dark:bg-blue-950 border-blue-200",children:e.jsxs(C,{className:"pt-4",children:[e.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5"}),"How We Protect Both Parties"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"For Farmers:"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Milestone-based payments"}),e.jsx("li",{children:"• Escrow payment system"}),e.jsx("li",{children:"• Dispute resolution process"}),e.jsx("li",{children:"• Contract document uploads (Google Drive)"}),e.jsx("li",{children:"• Protection warnings system"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"For Buyers:"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Quality verification at milestones"}),e.jsx("li",{children:"• Verified farmer profiles"}),e.jsx("li",{children:"• Progress tracking system"}),e.jsx("li",{children:"• Payment release controls"}),e.jsx("li",{children:"• Contract violation reporting"})]})]})]}),e.jsx("p",{className:"text-xs mt-3 text-blue-700 dark:text-blue-400",children:"Contract documents can be uploaded via Google Drive links during contract creation. All parties can access and verify documents."})]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(D,{placeholder:"Search opportunities...",value:i,onChange:T=>c(T.target.value),className:"sm:w-64"}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Crops"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Crops"}),v.map(T=>e.jsx(_,{value:T,children:T},T))]})]}),e.jsxs(Q,{value:h,onValueChange:m,children:[e.jsx(W,{className:"w-full sm:w-48",children:e.jsx(J,{placeholder:"All Locations"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"all",children:"All Locations"}),j.map(T=>e.jsx(_,{value:T,children:T},T))]})]})]}),e.jsxs(_e,{open:p,onOpenChange:d,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{className:"w-full sm:w-auto",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Create Contract Opportunity"]})}),e.jsxs(Se,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Create Contract Farming Opportunity"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"title",children:"Title"}),e.jsx(D,{id:"title",value:x.title,onChange:T=>f({...x,title:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"company",children:"Company Name"}),e.jsx(D,{id:"company",value:x.company_name,onChange:T=>f({...x,company_name:T.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"crop",children:"Crop Type"}),e.jsx(D,{id:"crop",value:x.crop_type,onChange:T=>f({...x,crop_type:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location"}),e.jsx(D,{id:"location",value:x.location,onChange:T=>f({...x,location:T.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"duration",children:"Duration (months)"}),e.jsx(D,{id:"duration",type:"number",value:x.contract_duration,onChange:T=>f({...x,contract_duration:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"price",children:"Price per Unit (KES)"}),e.jsx(D,{id:"price",type:"number",value:x.price_per_unit,onChange:T=>f({...x,price_per_unit:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"area",children:"Min Area (acres)"}),e.jsx(D,{id:"area",type:"number",value:x.minimum_area,onChange:T=>f({...x,minimum_area:T.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"requirements",children:"Requirements (comma separated)"}),e.jsx(D,{id:"requirements",value:x.requirements,onChange:T=>f({...x,requirements:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"benefits",children:"Benefits (comma separated)"}),e.jsx(D,{id:"benefits",value:x.benefits,onChange:T=>f({...x,benefits:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description"}),e.jsx(ie,{id:"description",value:x.description,onChange:T=>f({...x,description:T.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"deadline",children:"Application Deadline"}),e.jsx(D,{id:"deadline",type:"date",value:x.application_deadline,onChange:T=>f({...x,application_deadline:T.target.value})})]}),e.jsx(N,{onClick:b,className:"w-full",children:"Create Opportunity"})]})]})]})]}),e.jsx("div",{className:"grid gap-6",children:a?e.jsx("div",{className:"text-center py-12",children:"Loading opportunities..."}):y.length>0?y.map(T=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsx("span",{children:T.title}),e.jsxs(M,{variant:"outline",children:[e.jsx(de,{className:"mr-1 h-3 w-3"}),T.contract_duration," months"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ee,{className:"h-4 w-4"}),T.company_name]})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Crop:"})," ",T.crop_type]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),T.location]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"KES ",T.price_per_unit,"/unit"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Min:"})," ",T.minimum_area," acres"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:T.description}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Requirements"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:T.requirements.map((E,P)=>e.jsx(M,{variant:"outline",className:"text-xs",children:E},P))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Benefits"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:T.benefits.map((E,P)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:E},P))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{className:"flex-1",children:"Apply Now"}),e.jsx(N,{variant:"outline",children:"Learn More"})]})]})]},T.id)):e.jsx("div",{className:"text-center py-12",children:"No contract farming opportunities found."})})]}),e.jsx(Rs,{})]})},Hu=()=>{const{user:s}=we(),t=ve(),{toast:a}=X(),[r,i]=l.useState(!0),[c,n]=l.useState(!1),[o,h]=l.useState([]),[m,p]=l.useState([]),[d,u]=l.useState([]);l.useEffect(()=>{x()},[s]);async function x(){if(!s){t("/auth");return}try{const{data:j}=await F.from("user_roles").select("role").eq("user_id",s.id),y=j==null?void 0:j.some(b=>b.role==="admin");if(n(y||!1),!y){a({title:"Access Denied",description:"You do not have admin privileges",variant:"destructive"}),t("/");return}f()}catch(j){console.error("Error:",j)}finally{i(!1)}}async function f(){try{const[j,y,b]=await Promise.all([F.from("post_reports").select("*, community_posts(title)").eq("status","pending"),F.from("organizations").select("*").eq("verification_status","pending"),F.from("farmer_protection_warnings").select("*").order("created_at",{ascending:!1})]);h(j.data||[]),p(y.data||[]),u(b.data||[])}catch(j){console.error("Error:",j)}}async function g(j,y){try{const{error:b}=await F.from("organizations").update({verification_status:y}).eq("id",j);if(b)throw b;a({title:"Success",description:`Organization ${y}`}),f()}catch(b){console.error("Error:",b),a({title:"Error",description:"Failed to update organization",variant:"destructive"})}}async function v(j,y){try{const{error:b}=await F.from("post_reports").update({status:y}).eq("id",j);if(b)throw b;a({title:"Success",description:`Report ${y}`}),f()}catch(b){console.error("Error:",b)}}return r?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsx("div",{className:"container mx-auto py-12 text-center",children:"Loading..."})]}):c?e.jsxs("div",{className:"min-h-screen",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(ts,{className:"h-8 w-8 text-primary"}),"Admin Panel"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage reports, verify organizations, and moderate content"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(hi,{className:"h-4 w-4"}),"Pending Reports"]})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:o.length})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"Pending Verifications"]})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),e.jsxs(w,{children:[e.jsx(k,{className:"pb-2",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Active Warnings"]})}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(j=>j.status==="active").length})})]})]}),e.jsxs(ue,{defaultValue:"reports",className:"w-full",children:[e.jsxs(me,{className:"w-full justify-start",children:[e.jsx(R,{value:"reports",children:"Post Reports"}),e.jsx(R,{value:"organizations",children:"Organizations"}),e.jsx(R,{value:"warnings",children:"Farmer Warnings"})]}),e.jsx(B,{value:"reports",className:"space-y-4",children:o.length>0?o.map(j=>{var y;return e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{children:((y=j.community_posts)==null?void 0:y.title)||"Post"}),e.jsx(M,{variant:"outline",children:j.report_type})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:j.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"destructive",onClick:()=>v(j.id,"approved"),children:"Remove Post"}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>v(j.id,"dismissed"),children:"Dismiss"})]})]})]},j.id)}):e.jsx(w,{children:e.jsx(C,{className:"text-center py-12",children:"No pending reports"})})}),e.jsx(B,{value:"organizations",className:"space-y-4",children:m.length>0?m.map(j=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{children:j.org_name}),e.jsx(M,{children:j.org_type})]})}),e.jsxs(C,{children:[e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Registration:"})," ",j.registration_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contact:"})," ",j.contact_person," - ",j.contact_phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"County:"})," ",j.county]}),j.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",j.description]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",onClick:()=>g(j.id,"verified"),children:"Verify Organization"}),e.jsx(N,{size:"sm",variant:"destructive",onClick:()=>g(j.id,"rejected"),children:"Reject"})]})]})]},j.id)):e.jsx(w,{children:e.jsx(C,{className:"text-center py-12",children:"No pending verifications"})})}),e.jsx(B,{value:"warnings",className:"space-y-4",children:d.map(j=>e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"text-lg flex items-center justify-between",children:[e.jsx("span",{children:j.title}),e.jsx(M,{variant:j.severity==="critical"?"destructive":"default",children:j.severity})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm mb-2",children:j.description}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",children:j.warning_type}),e.jsx(M,{variant:"secondary",children:j.status})]})]})]},j.id))})]})]})]}):null},Gu=()=>{const s=bs();return l.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("h1",{className:"text-6xl font-bold mb-4 text-gray-800",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Oops! Page not found"}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("p",{className:"text-gray-500 mb-6",children:"The page you're looking for doesn't exist or may have been moved."}),e.jsx(V,{to:"/",className:"text-blue-500 hover:text-blue-700 underline block mb-4",children:"Return to Home"}),e.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"You might be interested in:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(V,{to:"/sentiment-analysis",children:e.jsx(N,{variant:"outline",className:"w-full",children:"Sentiment Analysis"})}),e.jsx(V,{to:"/market-demand-hotspot",children:e.jsx(N,{variant:"outline",className:"w-full",children:"Market Demand Hotspots"})}),e.jsx(V,{to:"/farmer-success-stories",children:e.jsx(N,{variant:"outline",className:"w-full",children:"Farmer Success Stories"})}),e.jsx(V,{to:"/commodity-trading",children:e.jsx(N,{variant:"outline",className:"w-full",children:"Commodity Trading"})})]})]})]})]})})},Wu=()=>{const{pathname:s}=bs();return l.useEffect(()=>{window.scrollTo(0,0)},[s]),null};class Yu{constructor(){ye(this,"isInitialized",!1);ye(this,"connectedDevices",new Map);ye(this,"messageQueue",[]);ye(this,"messageHandlers",[]);ye(this,"SERVICE_UUID","12345678-1234-1234-1234-123456789abc");ye(this,"MESSAGE_CHARACTERISTIC_UUID","87654321-4321-4321-4321-cba987654321");ye(this,"DEVICE_INFO_CHARACTERISTIC_UUID","11111111-2222-3333-4444-555555555555")}async initialize(){if(!Xl.isNativePlatform())return console.warn("Bluetooth messaging is only available on mobile devices"),!1;try{return await _s.initialize(),this.isInitialized=!0,await this.startAdvertising(),await this.startScanning(),console.log("Bluetooth mesh messaging initialized"),!0}catch(t){return console.error("Failed to initialize Bluetooth mesh messaging:",t),!1}}async startAdvertising(){console.log("Starting BLE advertising for mesh messaging")}async startScanning(){try{await _s.requestLEScan({services:[this.SERVICE_UUID]},t=>{this.handleDeviceDiscovered(t.device)}),setTimeout(()=>{_s.stopLEScan(),setTimeout(()=>this.startScanning(),5e3)},3e4)}catch(t){console.error("Error starting BLE scan:",t)}}async handleDeviceDiscovered(t){this.connectedDevices.has(t.deviceId)||(console.log("Discovered device:",t.name||t.deviceId),await this.connectToDevice(t))}async connectToDevice(t){try{await _s.connect(t.deviceId),this.connectedDevices.set(t.deviceId,t),console.log("Connected to device:",t.name||t.deviceId),await _s.startNotifications(t.deviceId,this.SERVICE_UUID,this.MESSAGE_CHARACTERISTIC_UUID,a=>{this.handleReceivedMessage(a)}),await this.processMessageQueue()}catch(a){console.error("Failed to connect to device:",a)}}handleReceivedMessage(t){try{const a=ec(t),r=String.fromCharCode(...a),i=JSON.parse(r);console.log("Received message:",i),this.messageHandlers.forEach(c=>c(i)),this.forwardMessage(i)}catch(a){console.error("Error processing received message:",a)}}async forwardMessage(t){`${t.sender}${t.timestamp}`;for(const[a,r]of this.connectedDevices)a!==t.sender&&await this.sendMessageToDevice(r,t)}async sendMessage(t,a){const r={id:`${Date.now()}-${Math.random()}`,content:t,timestamp:Date.now(),sender:await this.getDeviceId(),recipient:a,encrypted:!1};if(a){const i=Array.from(this.connectedDevices.values()).find(c=>c.deviceId===a);return i?await this.sendMessageToDevice(i,r):(this.messageQueue.push(r),console.log("Recipient not connected, message queued"),!1)}else{let i=!0;for(const c of this.connectedDevices.values()){const n=await this.sendMessageToDevice(c,r);i=i&&n}return i}}async sendMessageToDevice(t,a){try{const r=JSON.stringify(a),i=Array.from(r).map(n=>n.charCodeAt(0)),c=sc(i);return await _s.writeWithoutResponse(t.deviceId,this.SERVICE_UUID,this.MESSAGE_CHARACTERISTIC_UUID,c),console.log("Message sent to device:",t.name||t.deviceId),!0}catch(r){return console.error("Failed to send message to device:",r),!1}}async processMessageQueue(){const t=[];for(const a of this.messageQueue)if(a.recipient){const r=Array.from(this.connectedDevices.values()).find(i=>i.deviceId===a.recipient);r&&(await this.sendMessageToDevice(r,a),t.push(a))}this.messageQueue=this.messageQueue.filter(a=>!t.includes(a))}onMessage(t){this.messageHandlers.push(t)}removeMessageHandler(t){const a=this.messageHandlers.indexOf(t);a>-1&&this.messageHandlers.splice(a,1)}getConnectedDevices(){return Array.from(this.connectedDevices.values()).map(t=>({id:t.deviceId,name:t.name||"Unknown Device",rssi:0,lastSeen:Date.now()}))}async getDeviceId(){return"device-"+Math.random().toString(36).substr(2,9)}async disconnect(){for(const t of this.connectedDevices.keys())try{await _s.disconnect(t)}catch(a){console.error("Error disconnecting from device:",a)}this.connectedDevices.clear(),this.isInitialized=!1}}const _t=new Yu;class Qu{constructor(){ye(this,"prices",new Map);ye(this,"alerts",new Map);ye(this,"traders",new Map);ye(this,"priceListeners",[]);ye(this,"alertListeners",[]);ye(this,"traderListeners",[]);ye(this,"isInitialized",!1)}async initialize(){return this.isInitialized?!0:await _t.initialize()?(_t.onMessage(this.handleMarketplaceMessage.bind(this)),this.startPeriodicDiscovery(),this.startPeriodicDataShare(),this.isInitialized=!0,console.log("Bluetooth Marketplace initialized"),!0):!1}async broadcastPrice(t){const a={...t,id:`price-${Date.now()}-${Math.random()}`,timestamp:Date.now()};this.prices.set(a.id,a),await this.broadcastMessage("price_update",a),this.notifyPriceListeners()}async requestPrices(t,a){const r={type:"price_request",commodity:t,location:a,timestamp:Date.now(),requester_id:await this.getDeviceId()};await this.broadcastMessage("price_request",r)}getPricesNearby(t,a){return Array.from(this.prices.values()).filter(i=>t&&!i.commodity.toLowerCase().includes(t.toLowerCase())||a&&!i.location.toLowerCase().includes(a.toLowerCase())&&!i.county.toLowerCase().includes(a.toLowerCase())?!1:Date.now()-i.timestamp<24*60*60*1e3).sort((i,c)=>c.timestamp-i.timestamp)}async broadcastAlert(t){const a={...t,id:`alert-${Date.now()}-${Math.random()}`,timestamp:Date.now()};this.alerts.set(a.id,a),await this.broadcastMessage("marketplace_alert",a),this.notifyAlertListeners()}getAlertsNearby(t,a){return Array.from(this.alerts.values()).filter(i=>t&&!i.commodity.toLowerCase().includes(t.toLowerCase())||a&&!i.location.toLowerCase().includes(a.toLowerCase())&&!i.county.toLowerCase().includes(a.toLowerCase())?!1:Date.now()-i.timestamp<6*60*60*1e3).sort((i,c)=>c.timestamp-i.timestamp)}async announceTrader(t){const a={...t,id:`trader-${Date.now()}-${Math.random()}`,last_seen:Date.now(),device_id:await this.getDeviceId()};this.traders.set(a.device_id,a),await this.broadcastMessage("trader_announcement",a),this.notifyTraderListeners()}findTraders(t,a,r){return Array.from(this.traders.values()).filter(c=>t&&c.type!==t||a&&!c.commodities.some(n=>n.toLowerCase().includes(a.toLowerCase()))||r&&!c.location.toLowerCase().includes(r.toLowerCase())&&!c.county.toLowerCase().includes(r.toLowerCase())?!1:Date.now()-c.last_seen<30*60*1e3).sort((c,n)=>n.last_seen-c.last_seen)}async broadcastMessage(t,a){const r={type:"marketplace",subtype:t,data:a,timestamp:Date.now(),sender:await this.getDeviceId()};await _t.sendMessage(JSON.stringify(r))}handleMarketplaceMessage(t){try{const a=JSON.parse(t.content);if(a.type!=="marketplace")return;switch(a.subtype){case"price_update":this.handlePriceUpdate(a.data);break;case"price_request":this.handlePriceRequest(a.data);break;case"marketplace_alert":this.handleMarketplaceAlert(a.data);break;case"trader_announcement":this.handleTraderAnnouncement(a.data);break}}catch(a){console.error("Error processing marketplace message:",a)}}handlePriceUpdate(t){this.validatePriceData(t)&&(this.prices.set(t.id,t),this.notifyPriceListeners())}async handlePriceRequest(t){const a=this.getPricesNearby(t.commodity,t.location);if(a.length>0)for(const r of a.slice(0,5))await this.broadcastMessage("price_update",r)}handleMarketplaceAlert(t){this.validateAlertData(t)&&(this.alerts.set(t.id,t),this.notifyAlertListeners())}handleTraderAnnouncement(t){this.validateTraderData(t)&&(this.traders.set(t.device_id,t),this.notifyTraderListeners())}startPeriodicDiscovery(){setInterval(async()=>{const t=await this.getUserTraderProfile();t&&await this.announceTrader(t)},5*60*1e3)}startPeriodicDataShare(){setInterval(async()=>{const t=Array.from(this.prices.values()).filter(a=>Date.now()-a.timestamp<36e5).slice(0,3);for(const a of t)await this.broadcastMessage("price_update",a)},10*60*1e3)}validatePriceData(t){return!!(t.commodity&&t.price>0&&t.unit&&t.location)}validateAlertData(t){return!!(t.commodity&&t.message&&t.location&&t.type)}validateTraderData(t){var a;return!!(t.name&&t.type&&t.location&&((a=t.commodities)!=null&&a.length))}onPricesUpdate(t){this.priceListeners.push(t)}onAlertsUpdate(t){this.alertListeners.push(t)}onTradersUpdate(t){this.traderListeners.push(t)}notifyPriceListeners(){const t=Array.from(this.prices.values());this.priceListeners.forEach(a=>a(t))}notifyAlertListeners(){const t=Array.from(this.alerts.values());this.alertListeners.forEach(a=>a(t))}notifyTraderListeners(){const t=Array.from(this.traders.values());this.traderListeners.forEach(a=>a(t))}async getDeviceId(){return"device-"+Math.random().toString(36).substr(2,9)}async getUserTraderProfile(){return{name:"John Farmer",type:"seller",location:"Nakuru",county:"Nakuru",commodities:["maize","beans","potatoes"],contact:"+254700000000",rating:4.5}}async disconnect(){await _t.disconnect(),this.prices.clear(),this.alerts.clear(),this.traders.clear(),this.isInitialized=!1}}const gs=new Qu;function Ju(){const[s,t]=l.useState(!1),[a,r]=l.useState([]),[i,c]=l.useState([]),[n,o]=l.useState([]),[h,m]=l.useState(""),[p,d]=l.useState(!1);l.useEffect(()=>(u(),()=>{gs.disconnect()}),[]);const u=async()=>{d(!0);try{const b=await gs.initialize();t(b),b?(gs.onPricesUpdate(r),gs.onAlertsUpdate(c),gs.onTradersUpdate(o),Ne.success("Bluetooth marketplace connected!")):Ne.error("Failed to connect to Bluetooth marketplace")}catch(b){console.error("Bluetooth initialization error:",b),Ne.error("Bluetooth not available on this device")}finally{d(!1)}},x=async b=>{s&&(await gs.requestPrices(b),Ne.info(`Requesting ${b} prices from nearby farmers...`))},f=async()=>{s&&(await gs.broadcastPrice({commodity:"Maize",price:45,unit:"kg",location:"Nakuru Market",county:"Nakuru",market:"Nakuru Municipal Market",source:"user",quality:"Grade 1",contact:"+254700000000"}),Ne.success("Price shared with nearby devices!"))},g=async()=>{s&&(await gs.broadcastAlert({type:"high_demand",commodity:"Beans",location:"Nakuru",county:"Nakuru",message:"High demand for quality beans - good prices available!",user_id:"user123",contact:"+254700000000"}),Ne.success("Alert sent to nearby traders!"))},v=a.filter(b=>b.commodity.toLowerCase().includes(h.toLowerCase())||b.location.toLowerCase().includes(h.toLowerCase())),j=i.filter(b=>b.commodity.toLowerCase().includes(h.toLowerCase())||b.location.toLowerCase().includes(h.toLowerCase())),y=n.filter(b=>b.name.toLowerCase().includes(h.toLowerCase())||b.commodities.some(T=>T.toLowerCase().includes(h.toLowerCase()))||b.location.toLowerCase().includes(h.toLowerCase()));return e.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Bluetooth Marketplace"}),e.jsx("p",{className:"text-muted-foreground",children:"Discover prices, find traders, and share alerts offline via Bluetooth"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s?e.jsx(tc,{className:"h-6 w-6 text-blue-500"}):e.jsx(Vt,{className:"h-6 w-6 text-gray-400"}),e.jsx(M,{variant:s?"default":"secondary",children:s?"Connected":"Disconnected"})]})]}),!s&&e.jsx(w,{className:"border-yellow-200 bg-yellow-50",children:e.jsxs(C,{className:"flex items-center gap-3 pt-6",children:[e.jsx(ac,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Bluetooth marketplace offline"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Enable Bluetooth to discover nearby farmers, prices, and trading opportunities"})]}),e.jsx(N,{onClick:u,disabled:p,className:"ml-auto",children:p?"Connecting...":"Connect"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(w,{children:e.jsxs(C,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-2xl font-bold",children:a.length})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Live Prices Nearby"})]})}),e.jsx(w,{children:e.jsxs(C,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-2xl font-bold",children:i.length})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Alerts"})]})}),e.jsx(w,{children:e.jsxs(C,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold",children:n.length})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Traders Online"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{placeholder:"Search commodities, locations, or traders...",value:h,onChange:b=>m(b.target.value),className:"flex-1"}),e.jsx(N,{onClick:f,disabled:!s,children:"Share Price"}),e.jsx(N,{onClick:g,disabled:!s,variant:"outline",children:"Send Alert"})]}),e.jsxs(ue,{defaultValue:"prices",className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsxs(R,{value:"prices",children:["Live Prices (",a.length,")"]}),e.jsxs(R,{value:"alerts",children:["Alerts (",i.length,")"]}),e.jsxs(R,{value:"traders",children:["Traders (",n.length,")"]})]}),e.jsxs(B,{value:"prices",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Commodity Prices Nearby"}),e.jsx(N,{size:"sm",onClick:()=>x(h||"maize"),disabled:!s,children:"Request Latest Prices"})]}),e.jsx(ct,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:v.length===0?e.jsx(w,{children:e.jsxs(C,{className:"pt-6 text-center",children:[e.jsx(ne,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No prices available. Connect to Bluetooth to discover nearby prices."})]})}):v.map(b=>e.jsx(w,{children:e.jsx(C,{className:"pt-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-lg",children:b.commodity}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",b.price,"/",b.unit]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[e.jsx(Z,{className:"h-3 w-3"}),b.market,", ",b.location]}),b.quality&&e.jsx(M,{variant:"secondary",className:"mt-1",children:b.quality})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(M,{variant:b.source==="verified"?"default":"secondary",children:b.source}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(b.timestamp).toLocaleTimeString()}),b.contact&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 mt-1",children:[e.jsx(ke,{className:"h-3 w-3"}),"Contact available"]})]})]})})},b.id))})})]}),e.jsxs(B,{value:"alerts",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Market Alerts"}),e.jsx(ct,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:j.length===0?e.jsx(w,{children:e.jsxs(C,{className:"pt-6 text-center",children:[e.jsx(fe,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No active alerts. Connect to Bluetooth to receive market alerts."})]})}):j.map(b=>e.jsx(w,{children:e.jsx(C,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"flex-shrink-0",children:[b.type==="high_demand"&&e.jsx(ne,{className:"h-5 w-5 text-green-500"}),b.type==="price_drop"&&e.jsx(Es,{className:"h-5 w-5 text-red-500"}),b.type==="price_rise"&&e.jsx(ne,{className:"h-5 w-5 text-green-500"}),b.type==="buyer_request"&&e.jsx(ee,{className:"h-5 w-5 text-blue-500"}),b.type==="seller_offer"&&e.jsx(ee,{className:"h-5 w-5 text-purple-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold",children:b.commodity}),e.jsx(M,{variant:"outline",className:"text-xs",children:b.type.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b.message}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-2",children:[e.jsx(Z,{className:"h-3 w-3"}),b.location,", ",b.county]})]}),e.jsx("div",{className:"text-right text-xs text-muted-foreground",children:new Date(b.timestamp).toLocaleTimeString()})]})})},b.id))})})]}),e.jsxs(B,{value:"traders",className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Traders Nearby"}),e.jsx(ct,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:y.length===0?e.jsx(w,{children:e.jsxs(C,{className:"pt-6 text-center",children:[e.jsx(ee,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No traders found nearby. Connect to Bluetooth to discover traders."})]})}):y.map(b=>e.jsx(w,{children:e.jsx(C,{className:"pt-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold",children:b.name}),e.jsx(M,{variant:"outline",children:b.type}),b.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-xs",children:b.rating})]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[e.jsx(Z,{className:"h-3 w-3"}),b.location,", ",b.county]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[b.commodities.slice(0,3).map(T=>e.jsx(M,{variant:"secondary",className:"text-xs",children:T},T)),b.commodities.length>3&&e.jsxs(M,{variant:"secondary",className:"text-xs",children:["+",b.commodities.length-3," more"]})]}),b.services&&b.services.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:b.services.slice(0,2).map(T=>e.jsx(M,{variant:"outline",className:"text-xs",children:T},T))})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Online"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(b.last_seen).toLocaleTimeString()}),b.contact&&e.jsx(N,{size:"sm",variant:"outline",className:"mt-2",children:"Contact"})]})]})})},b.id))})})]})]})]})}const Zu=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-6 w-6 text-blue-600"}),"How to Use Bluetooth Marketplace"]}),e.jsx(O,{children:"Connect with nearby farmers, traders, and service providers even without internet"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:"1"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Enable Bluetooth"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Turn on Bluetooth in your device settings and allow AgriConnect to access Bluetooth"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:"2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Start Discovery"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The app automatically scans for nearby AgriConnect users within Bluetooth range (up to 100 meters)"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold",children:"3"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Share & Discover"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Share prices, send alerts, and find traders. Data spreads through the mesh network automatically"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Features Available Offline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Price Discovery"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Trader Discovery"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rc,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Market Alerts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm",children:"Secure Messaging"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Security & Privacy"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"End-to-End Encryption"}),e.jsx("span",{className:"text-sm",children:"All Bluetooth communications are encrypted"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"Anonymous by Default"}),e.jsx("span",{className:"text-sm",children:"Personal data is protected in the mesh network"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"secondary",children:"Device Verification"}),e.jsx("span",{className:"text-sm",children:"Only verified AgriConnect devices can connect"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Mesh Network Benefits"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Messages relay through other devices to extend range"}),e.jsx("li",{children:"• Network becomes stronger with more participants"}),e.jsx("li",{children:"• Works completely offline - no internet required"}),e.jsx("li",{children:"• Automatic data synchronization when online"}),e.jsx("li",{children:"• Self-healing network adapts to device availability"})]})]})]})]})});function Xu(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Bluetooth Marketplace"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with nearby traders even without internet"})]}),e.jsxs(ue,{defaultValue:"marketplace",className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-2",children:[e.jsx(R,{value:"marketplace",children:"Marketplace"}),e.jsx(R,{value:"guide",children:"How to Use"})]}),e.jsx(B,{value:"marketplace",className:"space-y-4",children:e.jsx(Ju,{})}),e.jsx(B,{value:"guide",className:"space-y-4",children:e.jsx(Zu,{})})]})]}),e.jsx("div",{className:"pb-20 md:pb-0"}),e.jsx(us,{})]})}const ex=[{title:"Supply Chain Solutions",items:[{icon:je,label:"Logistics Solutions Map",href:"/logistics-solutions-map",badge:"A1-A9"},{icon:ae,label:"Bulk Orders",href:"/bulk-orders"},{icon:fe,label:"Supply Chain Problems",href:"/supply-chain-problems"},{icon:ne,label:"Market Demand Hotspot",href:"/market-demand-hotspot"}]},{title:"Trading & Commerce",items:[{icon:fi,label:"Barter Exchange",href:"/barter-exchange"},{icon:Ie,label:"Export Opportunities",href:"/export-market-opportunities",badge:"A1-A9"},{icon:ds,label:"Contract Farming",href:"/contract-farming"},{icon:Z,label:"Road Markets",href:"/road-markets"}]},{title:"Community & Learning",items:[{icon:si,label:"Training Events",href:"/training-events"},{icon:cs,label:"Quality Control Discussions",href:"/quality-control-discussions"},{icon:ee,label:"Farmer Success Stories",href:"/farmer-success-stories"},{icon:cs,label:"Community Forum",href:"/community-forum"}]},{title:"Specialized Markets",items:[{icon:ds,label:"City Markets",href:"/city-markets"},{icon:ae,label:"Equipment Marketplace",href:"/equipment-marketplace"},{icon:ys,label:"Food Rescue Dashboard",href:"/food-rescue-dashboard"},{icon:ic,label:"Imperfect Surplus",href:"/imperfect-surplus-dashboard"}]},{title:"Farm Inputs",items:[{icon:ae,label:"Farm Input Marketplace",href:"/farm-input-marketplace"},{icon:ee,label:"Group Input Orders",href:"/inputs/group-orders"},{icon:ne,label:"Input Pricing Verification",href:"/inputs/pricing-verification"}]},{title:"Data & Analytics",items:[{icon:ne,label:"Sentiment Analysis",href:"/sentiment-analysis"},{icon:Ns,label:"Kilimo AMS Data",href:"/kilimo-ams-data"},{icon:Ie,label:"API Documentation",href:"/api-docs"}]},{title:"Account & Support",items:[{icon:ot,label:"Settings",href:"/profile"},{icon:ts,label:"Privacy Policy",href:"/privacy-policy"},{icon:Ns,label:"Terms of Service",href:"/terms-of-service"},{icon:ii,label:"FAQ",href:"/faq"},{icon:ke,label:"Contact Us",href:"/contact"}]}];function sx(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"container mx-auto p-4 space-y-6 pb-24",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"More Features"}),e.jsx("p",{className:"text-muted-foreground",children:"Explore all AgriConnect features and services"})]}),e.jsx("div",{className:"space-y-6",children:ex.map(s=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-lg",children:s.title}),e.jsx(O,{children:"Access specialized tools and services"})]}),e.jsx(C,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:s.items.map(t=>{const a=t.icon;return e.jsxs(V,{to:t.href,className:"flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors",children:[e.jsx(a,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium",children:t.label}),t.badge&&e.jsx(M,{variant:"secondary",className:"ml-2 text-xs",children:t.badge})]})]},t.href)})})})]},s.title))})]}),e.jsx(us,{})]})}const tx=()=>{const[s,t]=l.useState("farm-1"),a=[{id:"farm-1",crop:"Maize",plantingDate:"2024-03-15",expectedHarvest:"2024-07-15",area:5.2,yieldEstimate:2.8,currentStage:"flowering"},{id:"farm-2",crop:"Beans",plantingDate:"2024-04-01",expectedHarvest:"2024-07-01",area:2.1,yieldEstimate:1.2,currentStage:"pod-formation"}],r=[{id:"farming",name:"Farm Production",status:"in-progress",progress:65,data:{planted:"5.2 hectares",expectedYield:"14.6 tons",currentStage:"Flowering"}},{id:"harvest",name:"Harvest & Collection",status:"pending",progress:0,data:{estimatedDate:"2024-07-15",laborRequired:"12 workers"}},{id:"storage",name:"Storage & Processing",status:"pending",progress:0,issues:["No storage facility confirmed"],data:{requiredCapacity:"15 tons",processingNeeded:"Drying, cleaning"}},{id:"transport",name:"Transportation",status:"pending",progress:0,issues:["Transport not arranged","Route A1 highway congestion expected"],data:{distance:"120 km",estimatedCost:"KES 25,000"}},{id:"market",name:"Market Sales",status:"pending",progress:0,data:{targetMarket:"Nairobi Central Market",expectedPrice:"KES 45/kg"}}],i={totalCosts:185e3,expectedRevenue:657e3,expectedProfit:472e3,profitMargin:71.8,costBreakdown:{inputs:85e3,labor:45e3,transport:25e3,storage:15e3,processing:15e3}},c=o=>{switch(o){case"completed":return e.jsx(he,{className:"h-5 w-5 text-green-600"});case"in-progress":return e.jsx(ae,{className:"h-5 w-5 text-blue-600"});case"issue":return e.jsx(fe,{className:"h-5 w-5 text-red-600"});default:return e.jsx(ae,{className:"h-5 w-5 text-gray-400"})}},n=o=>{switch(o){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"issue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx($t,{className:"h-6 w-6"}),"Farm Records & Supply Chain Status"]})}),e.jsx(C,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:a.map(o=>e.jsx(w,{className:`cursor-pointer transition-colors ${s===o.id?"border-primary":""}`,onClick:()=>t(o.id),children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold",children:o.crop}),e.jsxs(M,{variant:"outline",children:[o.area," ha"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current: ",o.currentStage]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expected: ",o.yieldEstimate,"t/ha"]})]})},o.id))})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Supply Chain Progress"})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-4",children:r.map((o,h)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c(o.status),e.jsx("h3",{className:"font-semibold",children:o.name}),e.jsx(M,{className:n(o.status),children:o.status.replace("-"," ")})]}),e.jsxs("span",{className:"text-sm font-medium",children:[o.progress,"%"]})]}),e.jsx(Ta,{value:o.progress,className:"mb-3"}),o.issues&&o.issues.length>0&&e.jsxs(fs,{className:"mb-3",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs(vs,{children:[e.jsx("strong",{children:"Issues:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:o.issues.map((m,p)=>e.jsxs("li",{className:"text-sm",children:["• ",m]},p))})]})]}),o.data&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:Object.entries(o.data).map(([m,p])=>e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground capitalize",children:[m.replace(/([A-Z])/g," $1").toLowerCase(),":"]}),e.jsx("p",{className:"font-medium",children:String(p)})]},m))})]},o.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-6 w-6"}),"Financial Overview"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Costs:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["KES ",i.totalCosts.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Expected Revenue:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["KES ",i.expectedRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg",children:[e.jsx("span",{children:"Expected Profit:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["KES ",i.expectedProfit.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Profit Margin:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[i.profitMargin,"%"]})]})]})]})})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Cost Breakdown"})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(i.costBreakdown).map(([o,h])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"capitalize",children:[o,":"]}),e.jsxs("span",{className:"font-medium",children:["KES ",h.toLocaleString()]})]},o))})})]})]}),e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-6 w-6 text-red-600"}),"Identified Problems & Solutions"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fs,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs(vs,{children:[e.jsx("strong",{children:"Storage Issue:"})," No confirmed storage facility for 15 tons of maize.",e.jsx("br",{}),e.jsx("strong",{children:"Recommendation:"})," Contact nearby storage providers or consider on-farm storage solutions."]})]}),e.jsxs(fs,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs(vs,{children:[e.jsx("strong",{children:"Transport Challenge:"})," A1 highway congestion expected during harvest season.",e.jsx("br",{}),e.jsx("strong",{children:"Recommendation:"})," Consider alternative routes or schedule transport during off-peak hours."]})]}),e.jsxs(fs,{className:"border-green-200 bg-green-50",children:[e.jsx(he,{className:"h-4 w-4 text-green-600"}),e.jsxs(vs,{children:[e.jsx("strong",{children:"Market Opportunity:"})," Current maize prices in Nairobi are 15% above average.",e.jsx("br",{}),e.jsx("strong",{children:"Action:"})," Ensure quality standards to capture premium pricing."]})]})]})})]})]})};function ax(){return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Supply Chain Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your farm production through every stage of the supply chain"})]}),e.jsx(tx,{})]}),e.jsx("div",{className:"pb-20 md:pb-0"}),e.jsx(us,{})]})}const rx=[{title:"Core Marketplaces",items:[{icon:ae,title:"Farm Input Marketplace",description:"Seeds, fertilizers, pesticides, and farming equipment",href:"/farm-input-marketplace",color:"bg-blue-500"},{icon:os,title:"Equipment Marketplace",description:"Rent, lease, or buy agricultural machinery and tools",href:"/equipment-marketplace",color:"bg-green-500"},{icon:ne,title:"Commodity Trading",description:"Buy and sell agricultural produce and commodities",href:"/commodity-trading",color:"bg-orange-500"}]},{title:"Specialized Markets",items:[{icon:Ie,title:"Export Market Opportunities",description:"International buyers and export opportunities",href:"/export-market-opportunities",color:"bg-purple-500",badge:"A1-A9"},{icon:fi,title:"Contract Farming",description:"Guaranteed purchase contracts with agribusiness",href:"/contract-farming",color:"bg-indigo-500"},{icon:Z,title:"City Markets",description:"Urban wholesale and retail market directory",href:"/city-markets",color:"bg-red-500"}]},{title:"Alternative Trading",items:[{icon:De,title:"Barter Exchange",description:"Trade goods and services without money",href:"/barter-exchange",color:"bg-teal-500"},{icon:ee,title:"Group Input Orders",description:"Bulk purchasing for better prices",href:"/inputs/group-orders",color:"bg-cyan-500"},{icon:Z,title:"Road Markets (A1-A9)",description:"Highway sellers and roadside farmers",href:"/road-markets",color:"bg-yellow-500",badge:"A1-A9"}]},{title:"Logistics & Support",items:[{icon:je,title:"Transport & Logistics",description:"Find transporters and logistics solutions",href:"/logistics",color:"bg-gray-500"},{icon:ys,title:"Food Rescue",description:"Donate surplus produce to those in need",href:"/food-rescue-dashboard",color:"bg-pink-500"},{icon:ds,title:"Bulk Orders",description:"Large volume procurement and sales",href:"/bulk-orders",color:"bg-slate-500"}]}],ix=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx("section",{className:"bg-gradient-to-r from-primary to-primary-foreground text-primary-foreground py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Agricultural Marketplace"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto",children:"Your one-stop platform for buying, selling, and trading agricultural products, equipment, and services across Kenya and beyond."})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsx("div",{className:"space-y-12",children:rx.map(s=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:s.title}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.items.map(t=>{const a=t.icon;return e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.color} bg-opacity-10`,children:e.jsx(a,{className:"h-6 w-6",style:{color:t.color.replace("bg-","").replace("-500","")}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"text-lg",children:t.title}),t.badge&&e.jsx("span",{className:"px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full",children:t.badge})]}),e.jsx(O,{className:"mt-2",children:t.description})]})]})}),e.jsx(C,{children:e.jsx(V,{to:t.href,children:e.jsxs(N,{className:"w-full",children:["Explore ",t.title]})})})]},t.href)})})]},s.title))}),e.jsxs("section",{className:"mt-16 bg-muted/30 rounded-lg p-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Start Trading Today"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Join thousands of farmers, traders, and agribusiness professionals already using our platform to grow their businesses."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(V,{to:"/register",children:e.jsx(N,{size:"lg",children:"Create Account"})}),e.jsx(V,{to:"/community-forum",children:e.jsx(N,{variant:"outline",size:"lg",children:"Join Community"})})]})]})]})]}),dr=[{id:"1",name:"Thika Road Fresh Market",highway:"A1",location:"Thika Road, Km 15",coordinates:{lat:-1.2,lng:36.9},products:["Vegetables","Fruits","Grains"],contact:"+254712345678",operatingHours:"6:00 AM - 7:00 PM",rating:4.5,vendors:25,parkingAvailable:!0,verified:!0},{id:"2",name:"Mombasa Highway Produce",highway:"A8",location:"Mombasa Road, Km 8",coordinates:{lat:-1.3,lng:36.8},products:["Coconuts","Cashews","Mangoes"],contact:"+254723456789",operatingHours:"5:30 AM - 8:00 PM",rating:4.2,vendors:18,parkingAvailable:!0,verified:!1},{id:"3",name:"Nakuru Highway Market",highway:"A4",location:"Nakuru Road, Km 35",coordinates:{lat:-.9,lng:36.7},products:["Potatoes","Cabbages","Carrots"],contact:"+254734567890",operatingHours:"6:00 AM - 6:00 PM",rating:4.8,vendors:42,parkingAvailable:!0,verified:!0}],mr=["All Highways","A1","A2","A3","A4","A8","A9"],nx=()=>{const[s,t]=l.useState(dr),[a,r]=l.useState(""),[i,c]=l.useState("All Highways"),[n,o]=l.useState("All Products"),h=Array.from(new Set(dr.flatMap(p=>p.products))),m=s.filter(p=>{const d=p.name.toLowerCase().includes(a.toLowerCase())||p.location.toLowerCase().includes(a.toLowerCase()),u=i==="All Highways"||p.highway===i,x=n==="All Products"||p.products.includes(n);return d&&u&&x});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx("section",{className:"bg-gradient-to-r from-primary to-primary-foreground text-primary-foreground py-16",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Highway Markets (A1-A9)"}),e.jsx("p",{className:"text-xl mb-8 max-w-3xl mx-auto",children:"Discover roadside farmers and highway sellers along Kenya's major highways. Fresh produce directly from farmers to your table."}),e.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:mr.slice(1).map(p=>e.jsxs(M,{variant:"secondary",className:"bg-white/20 text-white",children:[p," Highway"]},p))})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsx(D,{placeholder:"Search markets...",value:a,onChange:p=>r(p.target.value),className:"w-full"}),e.jsxs(Q,{value:i,onValueChange:c,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select Highway"})}),e.jsx(Y,{children:mr.map(p=>e.jsx(_,{value:p,children:p},p))})]}),e.jsxs(Q,{value:n,onValueChange:o,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select Product"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"All Products",children:"All Products"}),h.map(p=>e.jsx(_,{value:p,children:p},p))]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center",children:[m.length," markets found"]})]})}),e.jsx("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-6",children:m.map(p=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(S,{className:"text-xl",children:p.name}),p.verified&&e.jsx(M,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Verified"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground text-sm",children:p.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",children:[p.highway," Highway"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm",children:p.rating})]})]})]})})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:p.operatingHours})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:p.contact})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Available Products"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.products.map((d,u)=>e.jsx(M,{variant:"outline",className:"text-xs",children:d},u))})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[p.vendors," vendors"]}),p.parkingAvailable&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"Parking"})]})]}),e.jsxs("div",{className:"pt-4 border-t flex gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(pi,{className:"h-4 w-4 mr-2"}),"Get Directions"]}),e.jsxs(N,{size:"sm",className:"flex-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Contact"]})]})]})})]},p.id))}),e.jsxs("section",{className:"mt-16 bg-muted/30 rounded-lg p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Highway Market Guide"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Everything you need to know about shopping at roadside markets"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Ze,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Best Times to Visit"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Early morning (6-9 AM) for freshest produce and best prices"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(je,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Safety Tips"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Park safely off the highway and use designated parking areas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(Os,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Quality Assurance"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Look for verified vendors and check produce quality before buying"})]})]})]})]})]})};function lx(){const[s,t]=l.useState([]),[a,r]=l.useState(!0),[i,c]=l.useState(!1),{toast:n}=X(),[o,h]=l.useState({name:"",description:"",group_type:"cooperative",location:"",county:"",contact_person:"",contact_phone:""});l.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:d,error:u}=await F.from("cooperative_groups").select("*").eq("status","active").order("created_at",{ascending:!1});if(u)throw u;t(d||[])}catch(d){console.error("Error fetching groups:",d),n({title:"Error",description:"Failed to load cooperative groups",variant:"destructive"})}finally{r(!1)}},p=async d=>{d.preventDefault();try{const{data:{user:u}}=await F.auth.getUser();if(!u){n({title:"Authentication Required",description:"Please log in to create a group",variant:"destructive"});return}const{error:x}=await F.from("cooperative_groups").insert({...o,group_leader_id:u.id});if(x)throw x;n({title:"Success",description:"Cooperative group created successfully!"}),c(!1),h({name:"",description:"",group_type:"cooperative",location:"",county:"",contact_person:"",contact_phone:""}),m()}catch(u){n({title:"Error",description:u.message||"Failed to create group",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(ee,{className:"h-8 w-8 text-primary"}),"Cooperative Groups"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Join or create farming cooperatives and groups"})]}),e.jsxs(N,{onClick:()=>c(!i),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Create Group"]})]}),i&&e.jsxs(w,{className:"mb-6",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Create New Cooperative Group"}),e.jsx(O,{children:"Start a new farming cooperative or group"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Group Name"}),e.jsx(D,{value:o.name,onChange:d=>h({...o,name:d.target.value}),placeholder:"E.g., Nakuru Farmers Cooperative",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Group Type"}),e.jsxs(Q,{value:o.group_type,onValueChange:d=>h({...o,group_type:d}),children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"cooperative",children:"Cooperative"}),e.jsx(_,{value:"farmers_group",children:"Farmers Group"}),e.jsx(_,{value:"savings_group",children:"Savings Group"}),e.jsx(_,{value:"marketing_group",children:"Marketing Group"}),e.jsx(_,{value:"women_group",children:"Women Group"}),e.jsx(_,{value:"youth_group",children:"Youth Group"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx(ie,{value:o.description,onChange:d=>h({...o,description:d.target.value}),placeholder:"Describe your group's purpose and activities",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsx(D,{value:o.location,onChange:d=>h({...o,location:d.target.value}),placeholder:"Town/Village",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"County"}),e.jsx(D,{value:o.county,onChange:d=>h({...o,county:d.target.value}),placeholder:"County",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Contact Person"}),e.jsx(D,{value:o.contact_person,onChange:d=>h({...o,contact_person:d.target.value}),placeholder:"Full Name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Contact Phone"}),e.jsx(D,{value:o.contact_phone,onChange:d=>h({...o,contact_phone:d.target.value}),placeholder:"+254...",required:!0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",children:"Create Group"}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})})]}),a?e.jsx("div",{className:"text-center py-12",children:"Loading groups..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(d=>e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(S,{className:"text-lg",children:d.name}),e.jsx(M,{variant:"outline",className:"mt-2",children:d.group_type.replace("_"," ")})]}),e.jsx(ee,{className:"h-6 w-6 text-primary"})]})}),e.jsxs(C,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:d.description}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs("span",{children:[d.location,", ",d.county]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:[d.member_count," members"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{children:d.contact_phone})]}),d.activities&&d.activities.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:d.activities.slice(0,3).map((u,x)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:u},x))})]}),e.jsx(N,{className:"w-full mt-4",size:"sm",children:"Join Group"})]})]},d.id))}),!a&&s.length===0&&e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"No cooperative groups found"}),e.jsx(N,{onClick:()=>c(!0),children:"Create First Group"})]})})]}),e.jsx(us,{})]})}const cx=()=>{const{user:s}=we(),t=ve(),{toast:a}=X(),[r,i]=l.useState("hosts"),[c,n]=l.useState([]),[o,h]=l.useState([]),[m,p]=l.useState([]),[d,u]=l.useState(!0),[x,f]=l.useState(!1),[g,v]=l.useState({farm_name:"",description:"",location:"",county:"",crops:"",livestock:"",business_type:"",contact_phone:"",contact_email:"",website_url:"",amenities:""}),[j,y]=l.useState({title:"",description:"",event_type:"",location:"",county:"",start_date:"",end_date:"",entry_fee:0,poster_url:"",contact_phone:"",contact_email:"",requirements:"",tags:""}),[b,T]=l.useState({name:"",description:"",organization_type:"",location:"",contact_phone:"",contact_email:"",website_url:"",services:"",focus_areas:""});l.useEffect(()=>{E()},[]);const E=async()=>{u(!0);try{const{data:I,error:U}=await F.from("farm_tourism_hosts").select("*").eq("is_verified",!0).order("rating",{ascending:!1});if(U)throw U;n(I||[]);const{data:q,error:te}=await F.from("agricultural_events").select("*").eq("status","upcoming").gte("start_date",new Date().toISOString()).order("start_date");if(te)throw te;h(q||[]);const{data:Te,error:H}=await F.from("agricultural_organizations").select("*").eq("is_verified",!0).order("rating",{ascending:!1});if(H)throw H;p(Te||[])}catch(I){a({title:"Error",description:I.message||"Failed to fetch data",variant:"destructive"})}finally{u(!1)}},P=async I=>{if(I.preventDefault(),!s){a({title:"Authentication Required",description:"Please sign in to add your farm for tourism",variant:"destructive"}),t("/auth");return}try{const{error:U}=await F.from("farm_tourism_hosts").insert({host_id:s.id,farm_name:g.farm_name,description:g.description,location:g.location,county:g.county,crops:g.crops.split(",").map(q=>q.trim()),livestock:g.livestock.split(",").map(q=>q.trim()),business_type:g.business_type,contact_phone:g.contact_phone,contact_email:g.contact_email,website_url:g.website_url,amenities:g.amenities.split(",").map(q=>q.trim())});if(U)throw U;a({title:"Success",description:"Your farm has been submitted for verification. You'll be notified once approved."}),f(!1),v({farm_name:"",description:"",location:"",county:"",crops:"",livestock:"",business_type:"",contact_phone:"",contact_email:"",website_url:"",amenities:""})}catch(U){a({title:"Error",description:U.message||"Failed to add farm",variant:"destructive"})}},L=async I=>{if(I.preventDefault(),!s){a({title:"Authentication Required",description:"Please sign in to add events",variant:"destructive"}),t("/auth");return}try{const{error:U}=await F.from("agricultural_events").insert({organizer_id:s.id,title:j.title,description:j.description,event_type:j.event_type,location:j.location,county:j.county,start_date:j.start_date,end_date:j.end_date,entry_fee:j.entry_fee,poster_url:j.poster_url,contact_info:{phone:j.contact_phone,email:j.contact_email},tags:j.tags.split(",").map(q=>q.trim()),requirements:j.requirements});if(U)throw U;a({title:"Success",description:"Your event has been added successfully!"}),f(!1),E()}catch(U){a({title:"Error",description:U.message||"Failed to add event",variant:"destructive"})}},G=async I=>{if(I.preventDefault(),!s){a({title:"Authentication Required",description:"Please sign in to suggest organizations",variant:"destructive"}),t("/auth");return}try{const{error:U}=await F.from("agricultural_organizations").insert({name:b.name,description:b.description,organization_type:b.organization_type,location:b.location,contact_phone:b.contact_phone,contact_email:b.contact_email,website_url:b.website_url,services:b.services.split(",").map(q=>q.trim()),focus_areas:b.focus_areas.split(",").map(q=>q.trim())});if(U)throw U;a({title:"Success",description:"Organization has been submitted for verification. Thank you for your contribution!"}),f(!1),T({name:"",description:"",organization_type:"",location:"",contact_phone:"",contact_email:"",website_url:"",services:"",focus_areas:""})}catch(U){a({title:"Error",description:U.message||"Failed to add organization",variant:"destructive"})}};return d?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Agricultural Tourism & Resources"}),e.jsx("p",{className:"text-muted-foreground",children:"Discover farm tourism opportunities, agricultural events, and connect with organizations"})]}),e.jsxs(ue,{value:r,onValueChange:i,className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsx(R,{value:"hosts",children:"Farm Tourism"}),e.jsx(R,{value:"events",children:"Events"}),e.jsx(R,{value:"organizations",children:"Organizations"})]}),e.jsxs(B,{value:"hosts",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Farm Tourism Hosts"}),e.jsxs(N,{onClick:()=>f(!x),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Your Farm"]})]}),x&&e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Add Your Farm for Tourism"}),e.jsx(O,{children:"Share your farm experience with visitors and tourists"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"farm_name",children:"Farm Name *"}),e.jsx(D,{id:"farm_name",value:g.farm_name,onChange:I=>v({...g,farm_name:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"business_type",children:"Business Type *"}),e.jsx(D,{id:"business_type",placeholder:"e.g., Organic Farm, Dairy Farm, Agritourism",value:g.business_type,onChange:I=>v({...g,business_type:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location *"}),e.jsx(D,{id:"location",value:g.location,onChange:I=>v({...g,location:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"county",children:"County *"}),e.jsx(D,{id:"county",value:g.county,onChange:I=>v({...g,county:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"crops",children:"Crops (comma-separated)"}),e.jsx(D,{id:"crops",placeholder:"e.g., Maize, Beans, Coffee",value:g.crops,onChange:I=>v({...g,crops:I.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"livestock",children:"Livestock (comma-separated)"}),e.jsx(D,{id:"livestock",placeholder:"e.g., Cattle, Poultry, Goats",value:g.livestock,onChange:I=>v({...g,livestock:I.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_phone",children:"Contact Phone"}),e.jsx(D,{id:"contact_phone",value:g.contact_phone,onChange:I=>v({...g,contact_phone:I.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(D,{id:"contact_email",type:"email",value:g.contact_email,onChange:I=>v({...g,contact_email:I.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description *"}),e.jsx(ie,{id:"description",placeholder:"Describe your farm, activities, and what visitors can expect",value:g.description,onChange:I=>v({...g,description:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"amenities",children:"Amenities (comma-separated)"}),e.jsx(D,{id:"amenities",placeholder:"e.g., Parking, Restrooms, Guided Tours, Farm Store",value:g.amenities,onChange:I=>v({...g,amenities:I.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",children:"Submit for Review"}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(I=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:I.farm_name}),e.jsxs(O,{className:"flex items-center mt-1",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),I.location,", ",I.county]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-4 w-4 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-sm",children:I.rating.toFixed(1)})]})]}),e.jsx(M,{variant:"outline",children:I.business_type})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:I.description}),I.crops.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Crops: "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[I.crops.slice(0,3).join(", "),I.crops.length>3&&"..."]})]}),I.livestock.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Livestock: "}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[I.livestock.slice(0,3).join(", "),I.livestock.length>3&&"..."]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:I.amenities.slice(0,3).map((U,q)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:U},q))}),e.jsxs("div",{className:"flex gap-2",children:[I.contact_phone&&e.jsxs(N,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Call"]}),I.contact_email&&e.jsxs(N,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx($e,{className:"h-4 w-4 mr-1"}),"Email"]})]})]})]},I.id))})]}),e.jsxs(B,{value:"events",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Agricultural Events"}),e.jsxs(N,{onClick:()=>f(!x),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add Event"]})]}),x&&e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Add Agricultural Event"}),e.jsx(O,{children:"Share your agricultural event with the community"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"event_title",children:"Event Title *"}),e.jsx(D,{id:"event_title",value:j.title,onChange:I=>y({...j,title:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"event_type",children:"Event Type *"}),e.jsx(D,{id:"event_type",placeholder:"e.g., Workshop, Conference, Field Day",value:j.event_type,onChange:I=>y({...j,event_type:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"event_location",children:"Location *"}),e.jsx(D,{id:"event_location",value:j.location,onChange:I=>y({...j,location:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"event_county",children:"County *"}),e.jsx(D,{id:"event_county",value:j.county,onChange:I=>y({...j,county:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"start_date",children:"Start Date *"}),e.jsx(D,{id:"start_date",type:"datetime-local",value:j.start_date,onChange:I=>y({...j,start_date:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"end_date",children:"End Date *"}),e.jsx(D,{id:"end_date",type:"datetime-local",value:j.end_date,onChange:I=>y({...j,end_date:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"entry_fee",children:"Entry Fee (KES)"}),e.jsx(D,{id:"entry_fee",type:"number",min:"0",value:j.entry_fee,onChange:I=>y({...j,entry_fee:parseFloat(I.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"poster_url",children:"Poster Image URL"}),e.jsx(D,{id:"poster_url",type:"url",value:j.poster_url,onChange:I=>y({...j,poster_url:I.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"event_description",children:"Description *"}),e.jsx(ie,{id:"event_description",placeholder:"Describe the event, agenda, and what participants will learn",value:j.description,onChange:I=>y({...j,description:I.target.value}),required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",children:"Add Event"}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(I=>e.jsxs(w,{className:"overflow-hidden",children:[I.poster_url&&e.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:`url(${I.poster_url})`}}),e.jsxs(k,{children:[e.jsx(S,{className:"text-lg",children:I.title}),e.jsxs(O,{className:"flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),I.location,", ",I.county]}),e.jsx(M,{variant:"outline",children:I.event_type})]}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:I.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),new Date(I.start_date).toLocaleDateString()," - ",new Date(I.end_date).toLocaleDateString()]}),I.entry_fee>0&&e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Entry Fee: ",I.currency," ",I.entry_fee]}),I.entry_fee===0&&e.jsx("div",{className:"text-sm font-medium text-green-600",children:"Free Event"})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:I.tags.slice(0,3).map((U,q)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:U},q))}),e.jsx(N,{size:"sm",className:"w-full",children:"View Details"})]})]},I.id))})]}),e.jsxs(B,{value:"organizations",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Agricultural Organizations"}),e.jsxs(N,{onClick:()=>f(!x),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Suggest Organization"]})]}),x&&e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Suggest Agricultural Organization"}),e.jsx(O,{children:"Help others discover valuable agricultural organizations"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_name",children:"Organization Name *"}),e.jsx(D,{id:"org_name",value:b.name,onChange:I=>T({...b,name:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_type",children:"Organization Type *"}),e.jsx(D,{id:"org_type",placeholder:"e.g., NGO, Government Agency, Cooperative",value:b.organization_type,onChange:I=>T({...b,organization_type:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_location",children:"Location *"}),e.jsx(D,{id:"org_location",value:b.location,onChange:I=>T({...b,location:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_phone",children:"Contact Phone"}),e.jsx(D,{id:"org_phone",value:b.contact_phone,onChange:I=>T({...b,contact_phone:I.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_email",children:"Contact Email"}),e.jsx(D,{id:"org_email",type:"email",value:b.contact_email,onChange:I=>T({...b,contact_email:I.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_website",children:"Website URL"}),e.jsx(D,{id:"org_website",type:"url",value:b.website_url,onChange:I=>T({...b,website_url:I.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_description",children:"Description *"}),e.jsx(ie,{id:"org_description",placeholder:"Describe the organization's mission and activities",value:b.description,onChange:I=>T({...b,description:I.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_services",children:"Services (comma-separated)"}),e.jsx(D,{id:"org_services",placeholder:"e.g., Training, Funding, Technical Support",value:b.services,onChange:I=>T({...b,services:I.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"org_focus",children:"Focus Areas (comma-separated)"}),e.jsx(D,{id:"org_focus",placeholder:"e.g., Crop Production, Livestock, Technology",value:b.focus_areas,onChange:I=>T({...b,focus_areas:I.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",children:"Submit for Review"}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(I=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:I.name}),e.jsxs(O,{className:"flex items-center mt-1",children:[e.jsx(Bs,{className:"h-4 w-4 mr-1"}),I.organization_type]}),e.jsxs(O,{className:"flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),I.location]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-4 w-4 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-sm",children:I.rating.toFixed(1)})]})]})}),e.jsxs(C,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:I.description}),I.services.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Services: "}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:I.services.slice(0,3).map((U,q)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:U},q))})]}),e.jsxs("div",{className:"flex gap-2",children:[I.contact_phone&&e.jsxs(N,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Call"]}),I.website_url&&e.jsxs(N,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"Visit"]})]})]})]},I.id))})]})]})]}),e.jsx(us,{})]})},ox=()=>{const{toast:s}=X(),[t,a]=l.useState([]),[r,i]=l.useState(!0),[c,n]=l.useState(""),[o,h]=l.useState("");l.useEffect(()=>{m()},[]);const m=async g=>{i(!0);try{let v=F.from("weather_forecasts").select("*").gte("forecast_date",new Date().toISOString().split("T")[0]).order("forecast_date");g&&(v=v.ilike("location",`%${g}%`));const{data:j,error:y}=await v.limit(50);if(y)throw y;a(j||[]),(!j||j.length===0)&&g&&await p(g)}catch(v){s({title:"Error",description:v.message||"Failed to fetch weather data",variant:"destructive"})}finally{i(!1)}},p=async g=>{const v={location:g,county:"Sample County",forecast_date:new Date().toISOString().split("T")[0],temperature_min:18,temperature_max:26,humidity:65,rainfall:2.5,wind_speed:15,wind_direction:"NE",weather_condition:"Partly Cloudy",weather_description:"Partly cloudy with chance of light rain",visibility:10,uv_index:6,pressure:1013,agricultural_advisory:"Good conditions for field work. Monitor soil moisture levels.",planting_recommendation:"Suitable for planting drought-resistant crops.",harvesting_recommendation:"Good weather for harvesting mature crops.",pest_disease_alert:"Moderate humidity may favor fungal diseases. Monitor crops closely.",coordinates:{lat:-1.2921,lng:36.8219}};try{const{error:j}=await F.from("weather_forecasts").insert([v]);if(j)throw j;s({title:"Weather Data Added",description:`Weather forecast for ${g} has been added to the database.`}),m()}catch(j){console.error("Error adding weather data:",j)}},d=()=>{c.trim()?(h(c),m(c)):(h(""),m())},u=g=>{const v=g.toLowerCase();return v.includes("rain")?e.jsx(Va,{className:"h-6 w-6"}):v.includes("cloud")?e.jsx(tt,{className:"h-6 w-6"}):v.includes("snow")?e.jsx(cc,{className:"h-6 w-6"}):v.includes("sun")||v.includes("clear")?e.jsx(pa,{className:"h-6 w-6"}):e.jsx(tt,{className:"h-6 w-6"})},x=g=>g<=2?"bg-green-500":g<=5?"bg-yellow-500":g<=7?"bg-orange-500":g<=10?"bg-red-500":"bg-purple-500",f=t.reduce((g,v)=>{const j=v.location;return g[j]||(g[j]=[]),g[j].push(v),g},{});return r?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground mb-2 flex items-center",children:[e.jsx(tt,{className:"h-8 w-8 mr-3 text-blue-500"}),"Agricultural Weather Forecast"]}),e.jsx("p",{className:"text-muted-foreground",children:"Get detailed weather forecasts with agricultural insights for better farming decisions"})]}),e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Search Weather by Location"}),e.jsx(O,{children:"Enter a location to get specific weather forecasts"})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{placeholder:"Enter location (e.g., Nairobi, Mombasa, Nakuru)",value:c,onChange:g=>n(g.target.value),onKeyPress:g=>g.key==="Enter"&&d(),className:"flex-1"}),e.jsx(N,{onClick:d,children:"Search"}),e.jsx(N,{variant:"outline",onClick:()=>{n(""),h(""),m()},children:"Clear"})]})})]}),Object.entries(f).length===0?e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(tt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Weather Data Available"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try searching for a specific location to get weather forecasts."}),e.jsx(N,{onClick:()=>p("Nairobi"),children:"Load Sample Data"})]})}):e.jsx("div",{className:"space-y-8",children:Object.entries(f).map(([g,v])=>{var j;return e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(Z,{className:"h-5 w-5 mr-2 text-primary"}),g,((j=v[0])==null?void 0:j.county)&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:[", ",v[0].county]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.slice(0,7).map(y=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsx(k,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(S,{className:"text-lg flex items-center",children:[u(y.weather_condition),e.jsx("span",{className:"ml-2",children:y.weather_condition})]}),e.jsxs(O,{className:"flex items-center mt-1",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),new Date(y.forecast_date).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[y.temperature_max,"°C"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Min: ",y.temperature_min,"°C"]})]})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:y.weather_description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ui,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Humidity:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[y.humidity,"%"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Va,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-muted-foreground",children:"Rainfall:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[y.rainfall,"mm"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(nc,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Wind:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[y.wind_speed," km/h ",y.wind_direction]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ws,{className:"h-4 w-4 mr-2 text-gray-600"}),e.jsx("span",{className:"text-muted-foreground",children:"Visibility:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[y.visibility," km"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(lc,{className:"h-4 w-4 mr-2 text-gray-700"}),e.jsx("span",{className:"text-muted-foreground",children:"Pressure:"}),e.jsxs("span",{className:"ml-1 font-medium",children:[y.pressure," hPa"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pa,{className:"h-4 w-4 mr-2 text-yellow-500"}),e.jsx("span",{className:"text-muted-foreground",children:"UV Index:"}),e.jsx(M,{className:`ml-1 ${x(y.uv_index)} text-white text-xs`,children:y.uv_index})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsxs("h4",{className:"font-semibold text-sm flex items-center",children:[e.jsx(Ft,{className:"h-4 w-4 mr-2 text-green-500"}),"Agricultural Insights"]}),y.agricultural_advisory&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Advisory:"})," ",y.agricultural_advisory]})}),y.planting_recommendation&&e.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Planting:"})," ",y.planting_recommendation]})}),y.harvesting_recommendation&&e.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Harvesting:"})," ",y.harvesting_recommendation]})}),y.pest_disease_alert&&e.jsx("div",{className:"bg-red-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm flex items-start",children:[e.jsx(fe,{className:"h-4 w-4 mr-2 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Alert:"})," ",y.pest_disease_alert]})]})})]})]})]},y.id))})]},g)})}),e.jsxs(w,{className:"mt-8",children:[e.jsx(k,{children:e.jsx(S,{children:"Understanding Weather Forecasts for Agriculture"})}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Temperature Guidelines"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Optimal growing: 20-30°C for most crops"}),e.jsx("li",{children:"• Below 10°C: Risk of frost damage"}),e.jsx("li",{children:"• Above 35°C: Heat stress for plants"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Rainfall Indicators"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• 0-5mm: Light rain, good for irrigation"}),e.jsx("li",{children:"• 5-15mm: Moderate rain, ideal for most crops"}),e.jsx("li",{children:"• 15mm+: Heavy rain, possible flooding risk"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Humidity Effects"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• 40-60%: Optimal for most crops"}),e.jsx("li",{children:"• Below 40%: Risk of water stress"}),e.jsx("li",{children:"• Above 80%: Increased disease risk"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"UV Index Guide"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• 0-2: Low, minimal crop protection needed"}),e.jsx("li",{children:"• 3-5: Moderate, standard growing conditions"}),e.jsx("li",{children:"• 6-7: High, consider shade for sensitive crops"}),e.jsx("li",{children:"• 8+: Very high, protect crops from sun damage"})]})]})]})})]})]}),e.jsx(us,{})]})},dx=()=>{const{user:s}=we(),t=ve(),{toast:a}=X(),[r,i]=l.useState([]),[c,n]=l.useState(!0),[o,h]=l.useState(!1),[m,p]=l.useState(""),[d,u]=l.useState(""),[x,f]=l.useState({contractor_name:"",contractor_type:"Company",crop_type:"",variety:"",required_quantity:0,unit:"kg",contract_price:0,location:"",county:"",planting_season:"",harvest_period:"",contract_duration:"",requirements:"",benefits_offered:"",support_provided:"",payment_terms:"",quality_standards:"",delivery_terms:"",contact_phone:"",contact_email:"",application_deadline:"",max_farmers:0});l.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const{data:y,error:b}=await F.from("contract_farming").select("*").eq("status","open").gte("application_deadline",new Date().toISOString().split("T")[0]).order("created_at",{ascending:!1});if(b)throw b;i(y||[])}catch(y){a({title:"Error",description:y.message||"Failed to fetch contracts",variant:"destructive"})}finally{n(!1)}},v=async y=>{if(y.preventDefault(),!s){a({title:"Authentication Required",description:"Please sign in to post contract farming opportunities",variant:"destructive"}),t("/auth");return}try{const{error:b}=await F.from("contract_farming").insert({contractor_id:s.id,contractor_name:x.contractor_name,contractor_type:x.contractor_type,crop_type:x.crop_type,variety:x.variety,required_quantity:x.required_quantity,unit:x.unit,contract_price:x.contract_price,location:x.location,county:x.county,planting_season:x.planting_season,harvest_period:x.harvest_period,contract_duration:x.contract_duration,requirements:x.requirements,benefits_offered:x.benefits_offered,support_provided:x.support_provided.split(",").map(T=>T.trim()),payment_terms:x.payment_terms,quality_standards:x.quality_standards,delivery_terms:x.delivery_terms,contact_phone:x.contact_phone,contact_email:x.contact_email,application_deadline:x.application_deadline,max_farmers:x.max_farmers});if(b)throw b;a({title:"Success",description:"Contract farming opportunity has been posted successfully!"}),h(!1),f({contractor_name:"",contractor_type:"Company",crop_type:"",variety:"",required_quantity:0,unit:"kg",contract_price:0,location:"",county:"",planting_season:"",harvest_period:"",contract_duration:"",requirements:"",benefits_offered:"",support_provided:"",payment_terms:"",quality_standards:"",delivery_terms:"",contact_phone:"",contact_email:"",application_deadline:"",max_farmers:0}),g()}catch(b){a({title:"Error",description:b.message||"Failed to post contract",variant:"destructive"})}},j=r.filter(y=>{const b=m===""||y.crop_type.toLowerCase().includes(m.toLowerCase())||y.contractor_name.toLowerCase().includes(m.toLowerCase()),T=d===""||y.location.toLowerCase().includes(d.toLowerCase())||y.county.toLowerCase().includes(d.toLowerCase());return b&&T});return c?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Contract Farming"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect with contractors for guaranteed market opportunities and agricultural support"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx(D,{placeholder:"Search by crop type or contractor...",value:m,onChange:y=>p(y.target.value),className:"flex-1"}),e.jsx(D,{placeholder:"Filter by location...",value:d,onChange:y=>u(y.target.value),className:"flex-1"}),e.jsxs(N,{onClick:()=>h(!o),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Post Contract"]})]}),o&&e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"Post Contract Farming Opportunity"}),e.jsx(O,{children:"Create a contract farming opportunity for farmers in your area"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contractor_name",children:"Contractor Name *"}),e.jsx(D,{id:"contractor_name",value:x.contractor_name,onChange:y=>f({...x,contractor_name:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contractor_type",children:"Contractor Type"}),e.jsxs("select",{id:"contractor_type",value:x.contractor_type,onChange:y=>f({...x,contractor_type:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"Company",children:"Company"}),e.jsx("option",{value:"Cooperative",children:"Cooperative"}),e.jsx("option",{value:"Government",children:"Government Agency"}),e.jsx("option",{value:"NGO",children:"NGO"}),e.jsx("option",{value:"Individual",children:"Individual"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"crop_type",children:"Crop Type *"}),e.jsx(D,{id:"crop_type",placeholder:"e.g., Maize, Rice, Coffee",value:x.crop_type,onChange:y=>f({...x,crop_type:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"variety",children:"Variety"}),e.jsx(D,{id:"variety",placeholder:"e.g., H614, Basmati",value:x.variety,onChange:y=>f({...x,variety:y.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"required_quantity",children:"Required Quantity *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{id:"required_quantity",type:"number",min:"1",value:x.required_quantity,onChange:y=>f({...x,required_quantity:parseFloat(y.target.value)||0}),required:!0}),e.jsxs("select",{value:x.unit,onChange:y=>f({...x,unit:y.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"kg",children:"kg"}),e.jsx("option",{value:"tonnes",children:"tonnes"}),e.jsx("option",{value:"bags",children:"bags"}),e.jsx("option",{value:"crates",children:"crates"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contract_price",children:"Contract Price per Unit (KES) *"}),e.jsx(D,{id:"contract_price",type:"number",min:"0",step:"0.01",value:x.contract_price,onChange:y=>f({...x,contract_price:parseFloat(y.target.value)||0}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"max_farmers",children:"Maximum Farmers"}),e.jsx(D,{id:"max_farmers",type:"number",min:"1",value:x.max_farmers,onChange:y=>f({...x,max_farmers:parseInt(y.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"application_deadline",children:"Application Deadline *"}),e.jsx(D,{id:"application_deadline",type:"date",value:x.application_deadline,onChange:y=>f({...x,application_deadline:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location *"}),e.jsx(D,{id:"location",value:x.location,onChange:y=>f({...x,location:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"county",children:"County *"}),e.jsx(D,{id:"county",value:x.county,onChange:y=>f({...x,county:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"planting_season",children:"Planting Season *"}),e.jsx(D,{id:"planting_season",placeholder:"e.g., March-April 2024",value:x.planting_season,onChange:y=>f({...x,planting_season:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"harvest_period",children:"Expected Harvest Period *"}),e.jsx(D,{id:"harvest_period",placeholder:"e.g., July-August 2024",value:x.harvest_period,onChange:y=>f({...x,harvest_period:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"requirements",children:"Requirements *"}),e.jsx(ie,{id:"requirements",placeholder:"Describe farmer requirements, land size, experience, etc.",value:x.requirements,onChange:y=>f({...x,requirements:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"benefits_offered",children:"Benefits Offered *"}),e.jsx(ie,{id:"benefits_offered",placeholder:"Describe benefits: guaranteed purchase, price security, technical support, etc.",value:x.benefits_offered,onChange:y=>f({...x,benefits_offered:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"support_provided",children:"Support Provided (comma-separated)"}),e.jsx(D,{id:"support_provided",placeholder:"e.g., Seeds, Fertilizers, Technical Training, Equipment",value:x.support_provided,onChange:y=>f({...x,support_provided:y.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"payment_terms",children:"Payment Terms *"}),e.jsx(ie,{id:"payment_terms",placeholder:"When and how payments will be made",value:x.payment_terms,onChange:y=>f({...x,payment_terms:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"quality_standards",children:"Quality Standards *"}),e.jsx(ie,{id:"quality_standards",placeholder:"Describe quality requirements and standards",value:x.quality_standards,onChange:y=>f({...x,quality_standards:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"delivery_terms",children:"Delivery Terms *"}),e.jsx(ie,{id:"delivery_terms",placeholder:"How and where crops should be delivered",value:x.delivery_terms,onChange:y=>f({...x,delivery_terms:y.target.value}),required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_phone",children:"Contact Phone *"}),e.jsx(D,{id:"contact_phone",type:"tel",value:x.contact_phone,onChange:y=>f({...x,contact_phone:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(D,{id:"contact_email",type:"email",value:x.contact_email,onChange:y=>f({...x,contact_email:y.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",children:"Post Contract"}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(y=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:y.crop_type}),y.variety&&e.jsx(O,{children:y.variety}),e.jsxs(O,{className:"flex items-center mt-1",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),y.location,", ",y.county]})]}),e.jsx(M,{variant:"outline",children:y.contractor_type})]})}),e.jsxs(C,{className:"space-y-3",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["KES ",y.contract_price.toLocaleString()," per ",y.unit]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Contractor:"})," ",y.contractor_name]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Quantity Needed:"})," ",y.required_quantity.toLocaleString()," ",y.unit]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Planting: ",y.planting_season]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Harvest: ",y.harvest_period]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Apply by: ",new Date(y.application_deadline).toLocaleDateString()]}),y.max_farmers>0&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),y.current_applications,"/",y.max_farmers," farmers"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Benefits:"}),e.jsx("p",{className:"text-muted-foreground line-clamp-2",children:y.benefits_offered})]}),y.support_provided.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:y.support_provided.slice(0,3).map((b,T)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:b},T))})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(N,{size:"sm",className:"flex-1",children:[e.jsx(ws,{className:"h-4 w-4 mr-1"}),"View Details"]}),e.jsx(N,{size:"sm",variant:"outline",children:"Apply"})]})]})]},y.id))}),j.length===0&&e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(Ns,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Contract Farming Opportunities"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:m||d?"No contracts match your search criteria. Try adjusting your filters.":"Be the first to post a contract farming opportunity!"}),!m&&!d&&e.jsx(N,{onClick:()=>h(!0),children:"Post First Contract"})]})})]}),e.jsx(us,{})]})},mx=()=>{const{user:s}=we(),t=ve(),{toast:a}=X(),[r,i]=l.useState([]),[c,n]=l.useState(!0),[o,h]=l.useState(!1),[m,p]=l.useState(""),[d,u]=l.useState(""),[x,f]=l.useState(""),[g,v]=l.useState({equipment_name:"",equipment_type:"Tractor",brand:"",model:"",year_manufactured:new Date().getFullYear(),condition:"Good",price:0,negotiable:!0,location:"",county:"",description:"",specifications:"",rental_option:!1,rental_price_per_day:0,contact_phone:"",contact_email:"",tags:""}),j=["Tractor","Plough","Harvester","Planter","Cultivator","Sprayer","Irrigation Equipment","Generator","Water Pump","Thresher","Disc Harrow","Mower","Baler","Transplanter","Other"];l.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const{data:E,error:P}=await F.from("equipment_marketplace").select("*").eq("availability_status","available").order("created_at",{ascending:!1});if(P)throw P;i(E||[])}catch(E){a({title:"Error",description:E.message||"Failed to fetch equipment",variant:"destructive"})}finally{n(!1)}},b=async E=>{if(E.preventDefault(),!s){a({title:"Authentication Required",description:"Please sign in to list equipment",variant:"destructive"}),t("/auth");return}try{const P=g.specifications?JSON.parse(g.specifications):{},{error:L}=await F.from("equipment_marketplace").insert({seller_id:s.id,equipment_name:g.equipment_name,equipment_type:g.equipment_type,brand:g.brand,model:g.model,year_manufactured:g.year_manufactured,condition:g.condition,price:g.price,negotiable:g.negotiable,location:g.location,county:g.county,description:g.description,specifications:P,rental_option:g.rental_option,rental_price_per_day:g.rental_price_per_day,contact_phone:g.contact_phone,contact_email:g.contact_email,tags:g.tags.split(",").map(G=>G.trim())});if(L)throw L;a({title:"Success",description:"Equipment has been listed successfully!"}),h(!1),v({equipment_name:"",equipment_type:"Tractor",brand:"",model:"",year_manufactured:new Date().getFullYear(),condition:"Good",price:0,negotiable:!0,location:"",county:"",description:"",specifications:"",rental_option:!1,rental_price_per_day:0,contact_phone:"",contact_email:"",tags:""}),y()}catch(P){a({title:"Error",description:P.message||"Failed to list equipment",variant:"destructive"})}},T=r.filter(E=>{const P=m===""||E.equipment_name.toLowerCase().includes(m.toLowerCase())||E.brand.toLowerCase().includes(m.toLowerCase())||E.model.toLowerCase().includes(m.toLowerCase()),L=d===""||E.equipment_type===d,G=x===""||E.location.toLowerCase().includes(x.toLowerCase())||E.county.toLowerCase().includes(x.toLowerCase());return P&&L&&G});return c?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(se,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Equipment Marketplace"}),e.jsx("p",{className:"text-muted-foreground",children:"Buy, sell, and rent agricultural equipment from trusted sellers"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx(D,{placeholder:"Search equipment, brand, or model...",value:m,onChange:E=>p(E.target.value),className:"flex-1"}),e.jsxs("select",{value:d,onChange:E=>u(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"",children:"All Types"}),j.map(E=>e.jsx("option",{value:E,children:E},E))]}),e.jsx(D,{placeholder:"Filter by location...",value:x,onChange:E=>f(E.target.value),className:"flex-1"}),e.jsxs(N,{onClick:()=>h(!o),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"List Equipment"]})]}),o&&e.jsxs(w,{className:"mb-8",children:[e.jsxs(k,{children:[e.jsx(S,{children:"List Agricultural Equipment"}),e.jsx(O,{children:"List your agricultural equipment for sale or rent"})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"equipment_name",children:"Equipment Name *"}),e.jsx(D,{id:"equipment_name",placeholder:"e.g., John Deere 5045D Tractor",value:g.equipment_name,onChange:E=>v({...g,equipment_name:E.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"equipment_type",children:"Equipment Type *"}),e.jsx("select",{id:"equipment_type",value:g.equipment_type,onChange:E=>v({...g,equipment_type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:j.map(E=>e.jsx("option",{value:E,children:E},E))})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"brand",children:"Brand"}),e.jsx(D,{id:"brand",placeholder:"e.g., John Deere, Massey Ferguson",value:g.brand,onChange:E=>v({...g,brand:E.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"model",children:"Model"}),e.jsx(D,{id:"model",placeholder:"e.g., 5045D, MF 385",value:g.model,onChange:E=>v({...g,model:E.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"year_manufactured",children:"Year Manufactured"}),e.jsx(D,{id:"year_manufactured",type:"number",min:"1950",max:new Date().getFullYear(),value:g.year_manufactured,onChange:E=>v({...g,year_manufactured:parseInt(E.target.value)||new Date().getFullYear()})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"condition",children:"Condition *"}),e.jsxs("select",{id:"condition",value:g.condition,onChange:E=>v({...g,condition:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Excellent",children:"Excellent"}),e.jsx("option",{value:"Good",children:"Good"}),e.jsx("option",{value:"Fair",children:"Fair"}),e.jsx("option",{value:"Poor",children:"Poor"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"location",children:"Location *"}),e.jsx(D,{id:"location",value:g.location,onChange:E=>v({...g,location:E.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"county",children:"County *"}),e.jsx(D,{id:"county",value:g.county,onChange:E=>v({...g,county:E.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"price",children:"Sale Price (KES) *"}),e.jsx(D,{id:"price",type:"number",min:"0",step:"0.01",value:g.price,onChange:E=>v({...g,price:parseFloat(E.target.value)||0}),required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{type:"checkbox",id:"negotiable",checked:g.negotiable,onChange:E=>v({...g,negotiable:E.target.checked})}),e.jsx(A,{htmlFor:"negotiable",children:"Price Negotiable"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{type:"checkbox",id:"rental_option",checked:g.rental_option,onChange:E=>v({...g,rental_option:E.target.checked})}),e.jsx(A,{htmlFor:"rental_option",children:"Available for Rent"})]})]}),g.rental_option&&e.jsxs("div",{children:[e.jsx(A,{htmlFor:"rental_price_per_day",children:"Rental Price per Day (KES)"}),e.jsx(D,{id:"rental_price_per_day",type:"number",min:"0",step:"0.01",value:g.rental_price_per_day,onChange:E=>v({...g,rental_price_per_day:parseFloat(E.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"description",children:"Description *"}),e.jsx(ie,{id:"description",placeholder:"Describe the equipment condition, features, and any additional information",value:g.description,onChange:E=>v({...g,description:E.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"specifications",children:"Specifications (JSON format)"}),e.jsx(ie,{id:"specifications",placeholder:'{"horsepower": "45 HP", "fuel_type": "Diesel", "transmission": "Manual"}',value:g.specifications,onChange:E=>v({...g,specifications:E.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"tags",children:"Tags (comma-separated)"}),e.jsx(D,{id:"tags",placeholder:"e.g., hydraulic, 4WD, low hours, serviced",value:g.tags,onChange:E=>v({...g,tags:E.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_phone",children:"Contact Phone"}),e.jsx(D,{id:"contact_phone",type:"tel",value:g.contact_phone,onChange:E=>v({...g,contact_phone:E.target.value})})]}),e.jsxs("div",{children:[e.jsx(A,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(D,{id:"contact_email",type:"email",value:g.contact_email,onChange:E=>v({...g,contact_email:E.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{type:"submit",children:"List Equipment"}),e.jsx(N,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(E=>e.jsxs(w,{className:"overflow-hidden",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(S,{className:"text-lg",children:E.equipment_name}),e.jsxs(O,{className:"flex items-center mt-1",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),E.equipment_type]}),e.jsxs(O,{className:"flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),E.location,", ",E.county]})]}),E.is_featured&&e.jsxs(M,{className:"bg-yellow-500 text-white",children:[e.jsx(Be,{className:"h-3 w-3 mr-1"}),"Featured"]})]})}),e.jsxs(C,{className:"space-y-3",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["KES ",E.price.toLocaleString(),E.negotiable&&e.jsx("span",{className:"text-sm text-muted-foreground ml-1",children:"(Negotiable)"})]}),E.rental_option&&E.rental_price_per_day>0&&e.jsxs("div",{className:"text-sm text-blue-600",children:["Rent: KES ",E.rental_price_per_day.toLocaleString(),"/day"]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[E.brand&&e.jsxs("div",{children:[e.jsx("strong",{children:"Brand:"})," ",E.brand]}),E.year_manufactured&&e.jsxs("div",{children:[e.jsx("strong",{children:"Year:"})," ",E.year_manufactured]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Condition:"}),e.jsx(M,{variant:E.condition==="New"||E.condition==="Excellent"?"default":"outline",className:"ml-1",children:E.condition})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:E.description}),E.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:E.tags.slice(0,3).map((P,L)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:P},L))}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(N,{size:"sm",className:"flex-1",children:[e.jsx(ws,{className:"h-4 w-4 mr-1"}),"View Details"]}),E.contact_phone&&e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(ke,{className:"h-4 w-4"})})]})]})]},E.id))}),T.length===0&&e.jsx(w,{children:e.jsxs(C,{className:"text-center py-12",children:[e.jsx(ot,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Equipment Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:m||d||x?"No equipment matches your search criteria. Try adjusting your filters.":"Be the first to list agricultural equipment!"}),!m&&!d&&!x&&e.jsx(N,{onClick:()=>h(!0),children:"List First Equipment"})]})})]}),e.jsx(us,{})]})};function ux(){const[s,t]=l.useState([]),[a,r]=l.useState([]),[i,c]=l.useState(!0),[n,o]=l.useState(!1),[h,m]=l.useState(null),[p,d]=l.useState(""),[u,x]=l.useState(""),[f,g]=l.useState(""),{toast:v}=X(),j=ve();l.useEffect(()=>{y(),b()},[]);const y=async()=>{try{const{data:P,error:L}=await F.from("f2c_subscription_plans").select("*").order("price",{ascending:!0});if(L)throw L;t(P||[])}catch(P){v({title:"Error",description:P.message,variant:"destructive"})}finally{c(!1)}},b=async()=>{try{const{data:{user:P}}=await F.auth.getUser();if(!P)return;const{data:L,error:G}=await F.from("f2c_subscriptions").select(`
          *,
          plan:f2c_subscription_plans(*)
        `).eq("consumer_id",P.id);if(G)throw G;r(L||[])}catch(P){console.error("Error fetching subscriptions:",P)}},T=async()=>{if(!h||!p||!f){v({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}o(!0);try{const{data:{user:P}}=await F.auth.getUser();if(!P){v({title:"Authentication Required",description:"Please sign in to subscribe",variant:"destructive"}),j("/auth");return}const L=new Date;L.setDate(L.getDate()+7);const{error:G}=await F.from("f2c_subscriptions").insert({consumer_id:P.id,plan_id:h.id,delivery_address:p,delivery_instructions:u,payment_method:f,next_delivery_date:L.toISOString(),status:"active"});if(G)throw G;v({title:"Subscription Created",description:"Your farm-to-consumer subscription is now active!"}),b(),m(null),d(""),x(""),g("")}catch(P){v({title:"Error",description:P.message,variant:"destructive"})}finally{o(!1)}},E=async P=>{try{const{error:L}=await F.from("f2c_subscriptions").update({status:"cancelled"}).eq("id",P);if(L)throw L;v({title:"Subscription Cancelled",description:"Your subscription has been cancelled"}),b()}catch(L){v({title:"Error",description:L.message,variant:"destructive"})}};return i?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"text-center",children:"Loading subscription plans..."})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"Farm-to-Consumer Marketplace"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Subscribe to fresh, organic produce delivered directly from local farms to your doorstep"})]}),a.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"My Subscriptions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(P=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsx(S,{children:P.plan.name}),e.jsx(O,{children:e.jsx(M,{variant:P.status==="active"?"default":"secondary",children:P.status})})]}),e.jsxs(C,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:["Next Delivery: ",new Date(P.next_delivery_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:P.delivery_address})]})]}),e.jsx(re,{children:P.status==="active"&&e.jsx(N,{variant:"destructive",onClick:()=>E(P.id),className:"w-full",children:"Cancel Subscription"})})]},P.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Available Subscription Plans"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(P=>e.jsxs(w,{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/10 rounded-full -mr-16 -mt-16"}),e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),P.name]}),e.jsx(O,{children:P.description})]}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Frequency"}),e.jsx("span",{className:"font-medium",children:P.frequency})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Box Size"}),e.jsx("span",{className:"font-medium",children:P.box_size})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["KES ",P.price.toLocaleString()]})]})]})}),e.jsx(re,{children:e.jsxs(_e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{className:"w-full",onClick:()=>m(P),children:[e.jsx(oc,{className:"mr-2 h-4 w-4"}),"Subscribe Now"]})}),e.jsxs(Se,{className:"sm:max-w-[500px]",children:[e.jsxs(Ae,{children:[e.jsxs(Pe,{children:["Subscribe to ",P.name]}),e.jsx(jt,{children:"Complete your subscription details below"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"address",children:"Delivery Address *"}),e.jsx(ie,{id:"address",value:p,onChange:L=>d(L.target.value),placeholder:"Enter your full delivery address",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"instructions",children:"Delivery Instructions (Optional)"}),e.jsx(ie,{id:"instructions",value:u,onChange:L=>x(L.target.value),placeholder:"Any special instructions for delivery"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"payment",children:"Payment Method *"}),e.jsxs(Q,{value:f,onValueChange:g,children:[e.jsx(W,{children:e.jsx(J,{placeholder:"Select payment method"})}),e.jsxs(Y,{children:[e.jsx(_,{value:"mpesa",children:"M-Pesa"}),e.jsx(_,{value:"card",children:"Credit/Debit Card"}),e.jsx(_,{value:"cash",children:"Cash on Delivery"})]})]})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Subscription Summary"}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Plan:"}),e.jsx("span",{className:"font-medium",children:P.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Frequency:"}),e.jsx("span",{className:"font-medium",children:P.frequency})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{className:"font-bold text-primary",children:["KES ",P.price.toLocaleString()]})]})]})]})]}),e.jsx(Cs,{children:e.jsx(N,{onClick:T,disabled:n,children:n?"Processing...":"Confirm Subscription"})})]})]})})]},P.id))})]})]})}function xx(){const[s,t]=l.useState([]),[a,r]=l.useState(null),[i,c]=l.useState(!0),[n,o]=l.useState(""),{toast:h}=X(),m=ve(),[p,d]=l.useState({product_type:"",quantity:"",unit:"Kg",origin:"",destination:""}),[u,x]=l.useState({event:"",location:"",notes:""});l.useEffect(()=>{f()},[]);const f=async()=>{try{const{data:{user:b}}=await F.auth.getUser();if(!b){m("/auth");return}const{data:T,error:E}=await F.from("batch_tracking").select("*").eq("farmer_id",b.id).order("created_at",{ascending:!1});if(E)throw E;t(T||[])}catch(b){h({title:"Error",description:b.message,variant:"destructive"})}finally{c(!1)}},g=async()=>{if(!n.trim()){h({title:"Enter Batch ID",description:"Please enter a batch ID to search",variant:"destructive"});return}try{const{data:b,error:T}=await F.from("batch_tracking").select("*").eq("batch_id",n).single();if(T)throw T;b&&(r(b),h({title:"Batch Found",description:`Batch ${n} found successfully`}))}catch(b){h({title:"Batch Not Found",description:b.message,variant:"destructive"})}},v=async()=>{try{const{data:{user:b}}=await F.auth.getUser();if(!b){m("/auth");return}const T=`BATCH-${Date.now()}`,{error:E}=await F.from("batch_tracking").insert({batch_id:T,farmer_id:b.id,product_type:p.product_type,quantity:parseFloat(p.quantity),unit:p.unit,origin:p.origin,destination:p.destination,status:"in_transit",events:[{timestamp:new Date().toISOString(),event:"Batch Created",location:p.origin,notes:"Batch initiated and ready for tracking"}]});if(E)throw E;h({title:"Batch Created",description:`Batch ${T} created successfully`}),d({product_type:"",quantity:"",unit:"Kg",origin:"",destination:""}),f()}catch(b){h({title:"Error",description:b.message,variant:"destructive"})}},j=async()=>{if(!a||!u.event){h({title:"Missing Information",description:"Please provide event details",variant:"destructive"});return}try{const b=[...a.events,{timestamp:new Date().toISOString(),event:u.event,location:u.location,notes:u.notes}],{error:T}=await F.from("batch_tracking").update({events:b}).eq("id",a.id);if(T)throw T;h({title:"Event Added",description:"Batch event recorded successfully"}),x({event:"",location:"",notes:""}),f();const{data:E}=await F.from("batch_tracking").select("*").eq("id",a.id).single();E&&r(E)}catch(b){h({title:"Error",description:b.message,variant:"destructive"})}},y=b=>{switch(b){case"delivered":return e.jsx(he,{className:"h-5 w-5 text-green-500"});case"quality_checked":return e.jsx(he,{className:"h-5 w-5 text-blue-500"});case"recalled":return e.jsx(Os,{className:"h-5 w-5 text-red-500"});default:return e.jsx(ae,{className:"h-5 w-5 text-orange-500"})}};return i?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"text-center",children:"Loading batch tracking..."})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"Batch Tracking & Traceability"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Track your agricultural products from farm to market with complete transparency"})]}),e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(dc,{className:"h-5 w-5"}),"Search Batch"]}),e.jsx(O,{children:"Enter a batch ID to track a specific shipment"})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(D,{placeholder:"Enter Batch ID (e.g., BATCH-1234567890)",value:n,onChange:b=>o(b.target.value),onKeyPress:b=>b.key==="Enter"&&g()}),e.jsx(N,{onClick:g,children:"Search"})]})})]}),e.jsxs(_e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{className:"w-full",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Create New Batch"]})}),e.jsxs(Se,{children:[e.jsx(Ae,{children:e.jsx(Pe,{children:"Create New Batch"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Product Type"}),e.jsx(D,{value:p.product_type,onChange:b=>d({...p,product_type:b.target.value}),placeholder:"e.g., Maize, Tomatoes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Quantity"}),e.jsx(D,{type:"number",value:p.quantity,onChange:b=>d({...p,quantity:b.target.value}),placeholder:"100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Unit"}),e.jsxs(Q,{value:p.unit,onValueChange:b=>d({...p,unit:b}),children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"Kg",children:"Kg"}),e.jsx(_,{value:"Bags",children:"Bags"}),e.jsx(_,{value:"Crates",children:"Crates"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Origin"}),e.jsx(D,{value:p.origin,onChange:b=>d({...p,origin:b.target.value}),placeholder:"Farm location"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"Destination"}),e.jsx(D,{value:p.destination,onChange:b=>d({...p,destination:b.target.value}),placeholder:"Market/Buyer location"})]}),e.jsx(N,{onClick:v,className:"w-full",children:"Create Batch"})]})]})]}),a&&e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Batch: ",a.batch_id]}),e.jsxs(M,{variant:"outline",className:"flex items-center gap-2",children:[y(a.status),a.status]})]})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Product"}),e.jsx("p",{className:"font-medium",children:a.product_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quantity"}),e.jsxs("p",{className:"font-medium",children:[a.quantity," ",a.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Origin"}),e.jsx("p",{className:"font-medium",children:a.origin})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Destination"}),e.jsx("p",{className:"font-medium",children:a.destination})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Batch Journey"}),e.jsx("div",{className:"space-y-4",children:a.events.map((b,T)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-primary"}),T<a.events.length-1&&e.jsx("div",{className:"h-full w-0.5 bg-border"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-medium",children:b.event}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-3 w-3"}),new Date(b.timestamp).toLocaleString()]}),b.location&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-3 w-3"}),b.location]}),b.notes&&e.jsx("p",{className:"text-xs",children:b.notes})]})]})]},T))})]}),e.jsxs("div",{className:"border-t pt-4 space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Add Event"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{placeholder:"Event description",value:u.event,onChange:b=>x({...u,event:b.target.value})}),e.jsx(D,{placeholder:"Location (optional)",value:u.location,onChange:b=>x({...u,location:b.target.value})}),e.jsx(ie,{placeholder:"Additional notes (optional)",value:u.notes,onChange:b=>x({...u,notes:b.target.value})}),e.jsx(N,{onClick:j,className:"w-full",children:"Add Event"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"My Batches"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(b=>e.jsxs(w,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>r(b),children:[e.jsxs(k,{children:[e.jsx(S,{className:"text-base",children:b.batch_id}),e.jsxs(O,{className:"flex items-center gap-2",children:[y(b.status),b.status]})]}),e.jsxs(C,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Product:"}),e.jsx("span",{className:"font-medium",children:b.product_type})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Quantity:"}),e.jsxs("span",{className:"font-medium",children:[b.quantity," ",b.unit]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Events:"}),e.jsx("span",{className:"font-medium",children:b.events.length})]})]})]},b.id))})]})]})}function hx(){const[s,t]=l.useState([]),[a,r]=l.useState(null),[i,c]=l.useState(!0),[n,o]=l.useState({}),[h,m]=l.useState(""),[p,d]=l.useState("free"),{toast:u}=X(),x=ve();l.useEffect(()=>{f(),g()},[]);const f=async()=>{try{const{data:{user:P}}=await F.auth.getUser();if(!P){x("/auth");return}const{data:L,error:G}=await F.from("api_keys").select("*").eq("user_id",P.id).order("created_at",{ascending:!1});if(G)throw G;t(L||[])}catch(P){u({title:"Error",description:P.message,variant:"destructive"})}finally{c(!1)}},g=async()=>{try{const{data:{user:P}}=await F.auth.getUser();if(!P)return;const{data:L}=await F.from("api_keys").select("id").eq("user_id",P.id);if(!L||L.length===0){r({total_requests:0,requests_by_endpoint:{}});return}const G=L.map(te=>te.id),{data:I,error:U}=await F.from("api_usage").select("endpoint, status_code").in("api_key_id",G);if(U)throw U;const q={total_requests:(I==null?void 0:I.length)||0,requests_by_endpoint:{}};I==null||I.forEach(te=>{q.requests_by_endpoint[te.endpoint]||(q.requests_by_endpoint[te.endpoint]=0),q.requests_by_endpoint[te.endpoint]++}),r(q)}catch(P){console.error("Error fetching usage stats:",P)}},v=()=>{const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let L="sk_";for(let G=0;G<48;G++)L+=P.charAt(Math.floor(Math.random()*P.length));return L},j=async()=>{if(!h.trim()){u({title:"Missing Information",description:"Please provide a name for your API key",variant:"destructive"});return}try{const{data:{user:P}}=await F.auth.getUser();if(!P){x("/auth");return}const L=v(),G={free:500,premium:5e4,enterprise:-1},{error:I}=await F.from("api_keys").insert({user_id:P.id,key_name:h,api_key:L,tier:p,rate_limit:G[p],is_active:!0});if(I)throw I;u({title:"API Key Created",description:"Your new API key has been generated"}),m(""),d("free"),f()}catch(P){u({title:"Error",description:P.message,variant:"destructive"})}},y=P=>{o(L=>({...L,[P]:!L[P]}))},b=async P=>{await navigator.clipboard.writeText(P),u({title:"Copied",description:"API key copied to clipboard"})},T=async P=>{try{const{error:L}=await F.from("api_keys").delete().eq("id",P);if(L)throw L;u({title:"API Key Deleted",description:"The API key has been permanently deleted"}),f()}catch(L){u({title:"Error",description:L.message,variant:"destructive"})}},E=P=>{switch(P){case"enterprise":return"bg-purple-500";case"premium":return"bg-blue-500";default:return"bg-gray-500"}};return i?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"text-center",children:"Loading API management..."})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary",children:"API Management"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Manage your API keys and monitor usage across all SokoConnect services"})]}),a&&e.jsxs(w,{children:[e.jsx(k,{children:e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(mc,{className:"h-5 w-5"}),"API Usage Overview"]})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:a.total_requests.toLocaleString()}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Requests"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Top Endpoints"}),e.jsx("div",{className:"space-y-1",children:Object.entries(a.requests_by_endpoint).sort(([,P],[,L])=>L-P).slice(0,5).map(([P,L])=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground truncate",children:P}),e.jsx("span",{className:"font-medium",children:L})]},P))})]})]})})]}),e.jsxs(_e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(N,{className:"w-full",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Create New API Key"]})}),e.jsxs(Se,{children:[e.jsxs(Ae,{children:[e.jsx(Pe,{children:"Generate New API Key"}),e.jsx(jt,{children:"Create a new API key for accessing SokoConnect services"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"keyName",children:"Key Name"}),e.jsx(D,{id:"keyName",value:h,onChange:P=>m(P.target.value),placeholder:"e.g., Production API Key"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"tier",children:"Tier"}),e.jsxs(Q,{value:p,onValueChange:d,children:[e.jsx(W,{children:e.jsx(J,{})}),e.jsxs(Y,{children:[e.jsx(_,{value:"free",children:"Free (500 req/day)"}),e.jsx(_,{value:"premium",children:"Premium (50,000 req/day)"}),e.jsx(_,{value:"enterprise",children:"Enterprise (Unlimited)"})]})]})]}),e.jsx(fs,{children:e.jsx(vs,{children:"Keep your API key secure. It cannot be recovered once you close this dialog."})})]}),e.jsx(Cs,{children:e.jsx(N,{onClick:j,children:"Generate API Key"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Your API Keys"}),s.length===0?e.jsx(w,{children:e.jsx(C,{className:"py-8 text-center text-muted-foreground",children:"No API keys yet. Create one to get started!"})}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(P=>e.jsxs(w,{children:[e.jsxs(k,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-lg",children:P.key_name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:E(P.tier),children:P.tier}),e.jsx(M,{variant:P.is_active?"default":"secondary",children:P.is_active?"Active":"Inactive"})]})]}),e.jsxs(O,{children:["Rate Limit: ",P.rate_limit===-1?"Unlimited":`${P.rate_limit.toLocaleString()} req/day`]})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{value:n[P.id]?P.api_key:"••••••••••••••••••••••••••••••••",readOnly:!0,className:"font-mono text-sm"}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>y(P.id),children:n[P.id]?e.jsx(uc,{className:"h-4 w-4"}):e.jsx(ws,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>b(P.api_key),children:e.jsx(js,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Created"}),e.jsx("p",{className:"font-medium",children:new Date(P.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Last Used"}),e.jsx("p",{className:"font-medium",children:P.last_used_at?new Date(P.last_used_at).toLocaleDateString():"Never"})]})]})]}),e.jsx(re,{children:e.jsxs(N,{variant:"destructive",onClick:()=>T(P.id),className:"w-full",children:[e.jsx(gt,{className:"mr-2 h-4 w-4"}),"Delete API Key"]})})]},P.id))})]})]})}const px=Ms.lazy(()=>qt(()=>import("./NetworkingPage-DxE9_2qx.js"),__vite__mapDeps([2,0,1])).then(s=>({default:s.NetworkingPage})));function gx(){return e.jsx(xc,{children:e.jsx(fc,{defaultTheme:"light",storageKey:"vite-ui-theme",children:e.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased",children:[e.jsx(Fm,{}),e.jsxs(Dc,{children:[e.jsx(Ms.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(hc,{children:[e.jsx($,{path:"/",element:e.jsx(No,{})}),e.jsx($,{path:"/auth",element:e.jsx(Ko,{})}),e.jsx($,{path:"/about",element:e.jsx(Oo,{})}),e.jsx($,{path:"/contact",element:e.jsx(Bo,{})}),e.jsx($,{path:"/profile",element:e.jsx($o,{})}),e.jsx($,{path:"/search",element:e.jsx(Vo,{})}),e.jsx($,{path:"/logistics",element:e.jsx(Wo,{})}),e.jsx($,{path:"/farm-input-marketplace",element:e.jsx(Cu,{})}),e.jsx($,{path:"/inputs/group-orders",element:e.jsx(_o,{})}),e.jsx($,{path:"/inputs/pricing-verification",element:e.jsx(To,{})}),e.jsx($,{path:"/bulk-auctions",element:e.jsx(Do,{})}),e.jsx($,{path:"/f2c-subscriptions",element:e.jsx(qo,{})}),e.jsx($,{path:"/service-providers",element:e.jsx(sd,{})}),e.jsx($,{path:"/quality-control-discussions",element:e.jsx(nd,{})}),e.jsx($,{path:"/training-events",element:e.jsx(ld,{})}),e.jsx($,{path:"/market-linkages",element:e.jsx(od,{})}),e.jsx($,{path:"/sentiment-analysis",element:e.jsx(gd,{})}),e.jsx($,{path:"/supply-chain-problems",element:e.jsx(jd,{})}),e.jsx($,{path:"/supply-chain-problems/logistics-issues",element:e.jsx(wd,{})}),e.jsx($,{path:"/supply-chain-problems/market-access",element:e.jsx(Cd,{})}),e.jsx($,{path:"/supply-chain-problems/post-harvest-losses",element:e.jsx(kd,{})}),e.jsx($,{path:"/supply-chain-problems/price-volatility",element:e.jsx(Sd,{})}),e.jsx($,{path:"/supply-chain-problems/quality-control",element:e.jsx(_d,{})}),e.jsx($,{path:"/carbon-forum",element:e.jsx(Tm,{})}),e.jsx($,{path:"/networking",element:e.jsx(px,{userId:"USER_ID_PLACEHOLDER"})}),e.jsx($,{path:"/logistics-solutions-map",element:e.jsx(Ld,{})}),e.jsx($,{path:"/market-demand-hotspot",element:e.jsx(qd,{})}),e.jsx($,{path:"/commodity-trading",element:e.jsx(Qd,{})}),e.jsx($,{path:"/barter-exchange",element:e.jsx(Jd,{})}),e.jsx($,{path:"/barter-trade",element:e.jsx(Zd,{})}),e.jsx($,{path:"/donation-list",element:e.jsx(Xd,{})}),e.jsx($,{path:"/auction-dashboard",element:e.jsx(ar,{})}),e.jsx($,{path:"/agent-product-auction-dashboard",element:e.jsx(ar,{})}),e.jsx($,{path:"/marketplace",element:e.jsx(ix,{})}),e.jsx($,{path:"/marketplace-old",element:e.jsx(bo,{})}),e.jsx($,{path:"/agricultural-marketplace",element:e.jsx(em,{})}),e.jsx($,{path:"/bulk-orders",element:e.jsx(wo,{})}),e.jsx($,{path:"/price-trends",element:e.jsx(sm,{})}),e.jsx($,{path:"/my-trades",element:e.jsx(tm,{})}),e.jsx($,{path:"/community-forums",element:e.jsx(am,{})}),e.jsx($,{path:"/city-markets",element:e.jsx(Su,{})}),e.jsx($,{path:"/farmer-portal",element:e.jsx(jm,{})}),e.jsx($,{path:"/equipment-marketplace",element:e.jsx(_u,{})}),e.jsx($,{path:"/food-rescue-dashboard",element:e.jsx(Au,{user:{}})}),e.jsx($,{path:"/imperfect-surplus-dashboard",element:e.jsx(Pu,{})}),e.jsx($,{path:"/bulk-order-dashboard",element:e.jsx(Ru,{user:{}})}),e.jsx($,{path:"/donation-form",element:e.jsx(Ku,{})}),e.jsx($,{path:"/buy-requests",element:e.jsx(Ou,{})}),e.jsx($,{path:"/export-market-opportunities",element:e.jsx(Uu,{})}),e.jsx($,{path:"/export-opportunities",element:e.jsx($u,{})}),e.jsx($,{path:"/contract-farming",element:e.jsx(Vu,{})}),e.jsx($,{path:"/road-markets",element:e.jsx(nx,{})}),e.jsx($,{path:"/partner-with-us",element:e.jsx(bu,{})}),e.jsx($,{path:"/partner-dashboard",element:e.jsx(wu,{})}),e.jsx($,{path:"/farmer-exporter-collaboration",element:e.jsx(Nm,{})}),e.jsx($,{path:"/exporter-profile",element:e.jsx(bm,{})}),e.jsx($,{path:"/farmer-success-stories",element:e.jsx(wm,{})}),e.jsx($,{path:"/community-forum",element:e.jsx(Pm,{})}),e.jsx($,{path:"/transporter-signup",element:e.jsx(Om,{})}),e.jsx($,{path:"/service-provider-registration",element:e.jsx(Bm,{})}),e.jsx($,{path:"/kilimo-ams-data",element:e.jsx($m,{})}),e.jsx($,{path:"/api-docs",element:e.jsx(Qm,{})}),e.jsx($,{path:"/supply-chain-api",element:e.jsx(Jm,{})}),e.jsx($,{path:"/data-management",element:e.jsx(su,{})}),e.jsx($,{path:"/data-status",element:e.jsx(tu,{})}),e.jsx($,{path:"/data-jobs",element:e.jsx(au,{})}),e.jsx($,{path:"/system-status",element:e.jsx(hu,{})}),e.jsx($,{path:"/admin",element:e.jsx(Hu,{})}),e.jsx($,{path:"/faq",element:e.jsx(gu,{})}),e.jsx($,{path:"/privacy-policy",element:e.jsx(ju,{})}),e.jsx($,{path:"/terms-of-service",element:e.jsx(fu,{})}),e.jsx($,{path:"/bluetooth-marketplace",element:e.jsx(Xu,{})}),e.jsx($,{path:"/more",element:e.jsx(sx,{})}),e.jsx($,{path:"/supply-chain-dashboard",element:e.jsx(ax,{})}),e.jsx($,{path:"/cooperative-groups",element:e.jsx(lx,{})}),e.jsx($,{path:"/farm-tourism",element:e.jsx(cx,{})}),e.jsx($,{path:"/weather",element:e.jsx(ox,{})}),e.jsx($,{path:"/contract-farming-page",element:e.jsx(dx,{})}),e.jsx($,{path:"/equipment-marketplace-page",element:e.jsx(mx,{})}),e.jsx($,{path:"/partners-showcase",element:e.jsx(Xm,{})}),e.jsx($,{path:"/major-routes",element:e.jsx(eu,{})}),e.jsx($,{path:"/major-routes-map",element:e.jsx(Mm,{})}),e.jsx($,{path:"/f2c-marketplace",element:e.jsx(ux,{})}),e.jsx($,{path:"/batch-tracking",element:e.jsx(xx,{})}),e.jsx($,{path:"/api-management",element:e.jsx(hx,{})}),e.jsx($,{path:"*",element:e.jsx(Gu,{})})]})}),e.jsx(pc,{}),e.jsx(Wu,{}),e.jsx(Qs,{})]})]})})})}function jx(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(s=>{console.log("ServiceWorker registration successful:",s)},s=>{console.log("ServiceWorker registration failed:",s)})})}gc(document.getElementById("root")).render(e.jsx(gx,{}));jx();
